# ä½¿ç”¨æœ¨å¶å¸ˆå®ç°å‰ç«¯å¼€å‘è‡ªåŠ¨åŒ–ã€‚ç¬¬äºŒéƒ¨åˆ†

> åŸæ–‡:[https://dev . to/papaponmx/front-end-automation-with-puppet er-part-2-2pmb](https://dev.to/papaponmx/front-end-automation-with-puppeteer-part-2-2pmb)

[é“¾æ¥åˆ°ç¬¬ 1 éƒ¨åˆ†](https://dev.to/papaponmx/front-end-development-automation-with-puppeteer-part-1-2k9n)

## ä»‹ç»æ®µè½

æ­£å¦‚æˆ‘ä»¥å‰å‘Šè¯‰è¿‡ä½ çš„ï¼Œè¿™ä¸ªç³»åˆ—çš„çµæ„Ÿæ¥è‡ªäºæˆ‘ä½œä¸ºå‰ç«¯å¼€å‘äººå‘˜åœ¨æ—¥å¸¸å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„åˆ›æ„è§£å†³æ–¹æ¡ˆã€‚æˆ‘çŸ¥é“æˆ‘ä¸åº”è¯¥é‡å¤æˆ‘è‡ªå·±ï¼Œä½†è¿™é‡Œæ˜¯å›è´­ T3 çš„ **[é“¾æ¥ã€‚](https://github.com/papaponmx/puppeteer-in-the-wild)**

åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç­‰å¾…é€‰æ‹©å™¨å‡ºç°åœ¨å±å¹•ä¸Šï¼Œç‚¹å‡»å¹¶è¾“å…¥è¡¨å•ã€‚

åœ¨æœ¬ç³»åˆ—çš„è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†å‘åœºæ™¯ä¸­å¼•å…¥ä¸¤ä¸ªæ–°å˜é‡ã€‚

## åœºæ™¯ 2:æœ‰ä¸œè¥¿åœæ­¢å·¥ä½œäº†ï¼Œä½ èƒ½çœ‹çœ‹å—ï¼Ÿ

å—åˆ°ä¸Šå‘¨å‡ºç°çš„ä¸œè¥¿çš„å¯å‘ã€‚æœ‰ä¸€ä¸ªå†…éƒ¨ [CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) åº”ç”¨ç¨‹åºã€‚

åç«¯ä¿®å¤äº†ä¸€ä¸ªä»¤äººè®¨åŒçš„é”™è¯¯ï¼Œè¿™éœ€è¦ä»å‰ç«¯åˆ é™¤ä¸å¿…è¦çš„é€»è¾‘ã€‚ä½¿ç”¨ä¸€ä¸ªç±»ä¼¼äºæœ¬ç³»åˆ—ç¬¬ 1 éƒ¨åˆ†çš„è„šæœ¬ï¼Œæˆ‘ä»¬å†æ¬¡æ£€æŸ¥äº† CRUD æ“ä½œä»ç„¶ä»¥å®ƒä»¬åº”è¯¥çš„æ–¹å¼å‘ç”Ÿã€‚

ä½†æ˜¯ï¼Œåœ¨ç½‘ç»œè¯·æ±‚æˆåŠŸå®Œæˆåï¼Œå…¶ä¸­ä¸€ä¸ªå‚æ•°æ²¡æœ‰æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ä»£ç çœ‹èµ·æ¥åƒè¿™æ ·ã€‚

```
 <a>{ env.base_url + broken_reference } </a> 
```

Enter fullscreen mode Exit fullscreen mode

#### è§£

æˆ‘æ”¾ç½®äº†ä¸€ä¸ª`debugger`ï¼Œå°±åœ¨æ–­å¼€çš„é“¾æ¥è¢«æ¸²æŸ“ä¹‹å‰ã€‚ç„¶åè°ƒæ•´äº†è„šæœ¬ï¼Œåšäº†ä¸¤ä»¶äº‹:

1.  æ‰“å¼€ head-full Chrome å®ä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå¸¦æœ‰
2.  åœ¨å¼€å‘è€…å·¥å…·æ‰“å¼€çš„æƒ…å†µä¸‹åšï¼Œè¿™æ ·`[debugger statement](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/debugger)`å®é™…ä¸Šå°±å¯ä»¥å·¥ä½œäº†ã€‚

è®©æˆ‘ä»¬æµè§ˆä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚[puppeter launch](https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#puppeteerlaunchoptions)æ–¹æ³•å°†ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªå¯¹è±¡ä¸­è¦†ç›–ä¸€äº›é»˜è®¤é€‰é¡¹ã€‚

è¿™åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¾ˆæœ‰ç”¨:

*   å½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç‰¹å®šçš„è§†çª—æ—¶ï¼Œæƒ³æƒ³ç§»åŠ¨è®¾å¤‡æ²¡æœ‰æ˜¾ç¤ºçš„ä¸œè¥¿ã€‚
*   ä¸ºäº†æ•æ‰ä¸€äº›é”™è¯¯ï¼Œå‡è®¾ä¸€ä¸ªç½‘ç»œè¯·æ±‚æ²¡æœ‰æŒ‰é¢„æœŸå·¥ä½œã€‚
*   æ‚¨éœ€è¦æ‰“å¼€å¼€å‘äººå‘˜å·¥å…·ï¼Œå°±åƒä¸Šé¢æè¿°çš„åœºæ™¯ã€‚
*   æ‚¨éœ€è¦ä¼ é€’ç¯å¢ƒå˜é‡ã€‚
*   æ‚¨å¸Œæœ›å¯ç”¨ä¸€äº›æ‰©å±•ã€‚

ä¸‹é¢æ˜¯å®ƒåœ¨ä»£ç ä¸­çš„æ ·å­:

```
 // Ideally this lives in another file
const options = {
    devtools: true,
    headless: false,
    viewport: {
      width: 1920,
      height: 1080,
    },
    args: [
      '--disable-extensions-except=/path/to/extension/',
      '--load-extension=/path/to/extension/',
    ],
}

// ... within an async function

const browser = await puppeteer.launch(options); 
```

Enter fullscreen mode Exit fullscreen mode

ä¸‹é¢æ˜¯åœ¨å•ä¸ªæ–‡ä»¶ä¸­è¿è¡Œçš„æµ‹è¯•ï¼Œä»¥åŠåˆ° repo çš„[é“¾æ¥ã€‚](https://github.com/papaponmx/puppeteer-in-the-wild) 

```
 const fs = require('fs'); // Nodes File System
const puppeteer = require('puppeteer'); // High level API to interact with headless Chrome
const signale = require('signale');
const locators = require('./locators'); // A JSON with all the CSS locators we need.
const config = require('./config'); // Some project variables and the browser options

const {options} = config;
// 1\. Open browser.
const runTest = async (params) => {
  signale.debug('Opening browser...');
  const browser = await puppeteer.launch(options);
  const page = await browser.newPage();
  const d = new Date();
  const dateString = `${d.getDate()}_${d.getHours()}h${d.getMinutes()}`;
  const userName = `USER_FROM_TESTING_SCRIPT_${dateString}`;

  // 2\. Go to the website;
  await signale.watch('Navigating to the site ğŸš¢');
  await page.goto(LOCAL_HOST_URL);
  await signale.watch('Filling up the form ğŸ™Œ');
  await signale.success('Everything is working as expected âœ…');

};

runTest(); 
```

Enter fullscreen mode Exit fullscreen mode

ä¼™è®¡ä»¬ï¼Œç°åœ¨å°±åˆ°è¿™é‡Œå§ã€‚ä»¥ä¸‹æ˜¯æˆ‘å°†åœ¨æ¥ä¸‹æ¥çš„å¸–å­ä¸­ä»‹ç»çš„å†…å®¹:

åœºæ™¯ 3:æ¯”è¾ƒæœ¬åœ°å¿«ç…§å’Œæµ‹è¯•å¿«ç…§ã€‚
åœºæ™¯ 4:æ— å¤´ï¼Œç”¨æˆ·æ‰‹åŠ¨è¾“å…¥ã€‚