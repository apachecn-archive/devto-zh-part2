# TIL:å»ºç«‹ä¸€ä¸ª Rust å¼€å‘ç¯å¢ƒ

> åŸæ–‡:[https://dev . to/Jonas bn/til-setting-up-a-rust-development-environment-2f 95](https://dev.to/jonasbn/til-setting-up-a-rust-development-environment-2f95)

åˆšå¼€å§‹è¯„ä¼°å­¦ä¹ **é”ˆ**ã€‚æˆ‘æœ‰ä¸€äº›*çš„é—®é¢˜*ï¼Œå…¶ä¸­ **Rust** å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä½†æ˜¯ä¸ºäº†åˆ°è¾¾é‚£é‡Œï¼Œæˆ‘å¿…é¡»ä¸º **Rust** è®¾ç½®ä¸€ä¸ªå¼€å‘ç¯å¢ƒã€‚

æœ¬æŒ‡å—æ˜¯ä¸º macOS ç¼–å†™çš„ï¼Œæ—¨åœ¨ä½¿ç”¨ T2 çš„ Visual Studio ä»£ç ã€‚

é€šè¿‡ã€https://rustup.rs/ã€‘T2 å¼€å§‹å®‰è£…åŸºæœ¬**é˜²é”ˆ**å·¥å…·é“¾ã€‚

ï¸ï¸âš ï¸å› ä¸ºä½ æ°¸è¿œä¸åº”è¯¥ä»ä¸€ä¸ªæœªç»éªŒè¯çš„ URL ç›´æ¥åœ¨ shell ä¸­æ‰§è¡Œä»»ä½•ä¸œè¥¿ï¼Œæ‰€ä»¥å¸®ä½ è‡ªå·±ä¸€ä¸ªå¿™ï¼Œæ£€æŸ¥ URL èƒŒåçš„æºä»£ç ã€‚

```
$ curl -vs https://sh.rustup.rs 2>&1 | less 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬å·²ç»è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬å®‰è£… **Rust** ã€‚

```
$ curl https://sh.rustup.rs -sSf | sh 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ£€æŸ¥[https://rustup.rs/](https://rustup.rs/)çš„æ›¿ä»£å®‰è£…æ–¹å¼ã€‚

è¯¥ URL å®é™…ä¸Šå®‰è£…äº†ä¸€ä¸ªåä¸º`rustup`çš„å·¥å…·ï¼Œè¿™æ˜¯å¤„ç†æ‚¨çš„ **Rust** å®‰è£…ã€`rustup` installs(ä»¥åŠå…¶ä»–)çš„æ¨èæ–¹å¼:

*   `rustc`ã€**é”ˆ**ç¼–è¯‘å™¨
*   `cargo`ã€**é”ˆ**åŒ…ç»ç†

ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…äº† Rust T1ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å¼€å‘æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºäº†ã€‚

ç”¨`cargo`å¯åŠ¨ä¸€ä¸ª**é˜²é”ˆ**ç¨‹åºã€‚`cargo`æ˜¯ **Rust çš„**åŒ…ç®¡ç†å™¨ï¼Œä½ ç”¨å®ƒåš*ä¸€åˆ‡*ã€‚

```
$ cargo new -bin Â«applicationÂ» 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç¤ºä¾‹:

```
$ cargo new â€”bin helloworld
     Created library `helloworld` project 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åˆ›å»ºåº“æ—¶çš„å˜åŒ–:

```
$ cargo new â€”lib helloworldlibrary
     Created library `helloworldlibrary` project 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶:

*   `Cargo.toml`ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åº/åº“çš„å…ƒæ•°æ®
*   `Cargo.lock`ï¼Œå…³äºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åº/åº“çš„ä¾èµ–æ€§çš„å…ƒæ•°æ®
*   `src/`ï¼Œæˆ‘ä»¬çš„æºç›®å½•

å¹¶ä¸”æˆ‘ä»¬å‡†å¤‡ç¼–è¯‘ï¼Œå¯ä»¥ç”¨`cargo`
æ¥å®Œæˆ

```
$ cargo build
    Finished dev [unoptimized + debuginfo] target(s) in 0.10s 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†ç”Ÿæˆåä¸º`target/`çš„ are ç›®å½•ï¼Œå†…å®¹å¦‚ä¸‹:

```
$ tree target/
target/
â””â”€â”€ debug
    â”œâ”€â”€ build
    â”œâ”€â”€ deps
    â”‚   â”œâ”€â”€ helloworld-e1702fb45f5d0052
    â”‚   â”œâ”€â”€ helloworld-e1702fb45f5d0052.d
    â”‚   â””â”€â”€ helloworld-e1702fb45f5d0052.dSYM
    â”‚       â””â”€â”€ Contents
    â”‚           â”œâ”€â”€ Info.plist
    â”‚           â””â”€â”€ Resources
    â”‚               â””â”€â”€ DWARF
    â”‚                   â””â”€â”€ helloworld-e1702fb45f5d0052
    â”œâ”€â”€ examples
    â”œâ”€â”€ helloworld
    â”œâ”€â”€ helloworld.d
    â”œâ”€â”€ helloworld.dSYM -> deps/helloworld-e1702fb45f5d0052.dSYM
    â”œâ”€â”€ incremental
    â”‚   â””â”€â”€ helloworld-15v45zkxrmyrm
    â”‚       â”œâ”€â”€ s-f52pub8bwa-1t86tbf-23d93ip4735d7
    â”‚       â”‚   â”œâ”€â”€ 1y16o1qfye96o7m0.o
    â”‚       â”‚   â”œâ”€â”€ 37u9wm6hxf6h6j0m.o
    â”‚       â”‚   â”œâ”€â”€ 3rngp6bm2u2q5z0y.o
    â”‚       â”‚   â”œâ”€â”€ 4oc10dk278mpk1vy.o
    â”‚       â”‚   â”œâ”€â”€ 4xq48u46a1pwiqn7.o
    â”‚       â”‚   â”œâ”€â”€ dep-graph.bin
    â”‚       â”‚   â”œâ”€â”€ oa3rad818d8sgn4.o
    â”‚       â”‚   â”œâ”€â”€ query-cache.bin
    â”‚       â”‚   â””â”€â”€ work-products.bin
    â”‚       â””â”€â”€ s-f52pub8bwa-1t86tbf.lock
    â””â”€â”€ native 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯¥ç‰ˆæœ¬æ²¡æœ‰æŒ‰ç…§ç¼–è¯‘å™¨çš„æŒ‡ç¤ºè¿›è¡Œä¼˜åŒ–ï¼Œæ—¨åœ¨ç”¨äºå¼€å‘å’Œè°ƒè¯•ã€‚

*ç›®æ ‡*å¯ä»¥è¿è¡Œä¸º:

```
$ ./target/debug/helloworld
Hello, world! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ æƒ³ä¸ºå‘å¸ƒè€Œæ„å»ºï¼Œä½ éœ€è¦æ·»åŠ é¢å¤–çš„æ ‡å¿—:`--release`

```
$ cargo build â€”release
    Finished release [optimized] target(s) in 0.10s 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†æ›´å¤šæ–‡ä»¶æ·»åŠ åˆ°`target/`ç›®å½•:

```
$ tree target/
target/
â”œâ”€â”€ debug
â”‚   â”œâ”€â”€ build
â”‚   â”œâ”€â”€ deps
â”‚   â”‚   â”œâ”€â”€ helloworld-e1702fb45f5d0052
â”‚   â”‚   â”œâ”€â”€ helloworld-e1702fb45f5d0052.d
â”‚   â”‚   â””â”€â”€ helloworld-e1702fb45f5d0052.dSYM
â”‚   â”‚       â””â”€â”€ Contents
â”‚   â”‚           â”œâ”€â”€ Info.plist
â”‚   â”‚           â””â”€â”€ Resources
â”‚   â”‚               â””â”€â”€ DWARF
â”‚   â”‚                   â””â”€â”€ helloworld-e1702fb45f5d0052
â”‚   â”œâ”€â”€ examples
â”‚   â”œâ”€â”€ helloworld
â”‚   â”œâ”€â”€ helloworld.d
â”‚   â”œâ”€â”€ helloworld.dSYM -> deps/helloworld-e1702fb45f5d0052.dSYM
â”‚   â”œâ”€â”€ incremental
â”‚   â”‚   â””â”€â”€ helloworld-15v45zkxrmyrm
â”‚   â”‚       â”œâ”€â”€ s-f52pub8bwa-1t86tbf-23d93ip4735d7
â”‚   â”‚       â”‚   â”œâ”€â”€ 1y16o1qfye96o7m0.o
â”‚   â”‚       â”‚   â”œâ”€â”€ 37u9wm6hxf6h6j0m.o
â”‚   â”‚       â”‚   â”œâ”€â”€ 3rngp6bm2u2q5z0y.o
â”‚   â”‚       â”‚   â”œâ”€â”€ 4oc10dk278mpk1vy.o
â”‚   â”‚       â”‚   â”œâ”€â”€ 4xq48u46a1pwiqn7.o
â”‚   â”‚       â”‚   â”œâ”€â”€ dep-graph.bin
â”‚   â”‚       â”‚   â”œâ”€â”€ oa3rad818d8sgn4.o
â”‚   â”‚       â”‚   â”œâ”€â”€ query-cache.bin
â”‚   â”‚       â”‚   â””â”€â”€ work-products.bin
â”‚   â”‚       â””â”€â”€ s-f52pub8bwa-1t86tbf.lock
â”‚   â””â”€â”€ native
â””â”€â”€ release
    â”œâ”€â”€ build
    â”œâ”€â”€ deps
    â”‚   â”œâ”€â”€ helloworld-599221bdb1c77978
    â”‚   â””â”€â”€ helloworld-599221bdb1c77978.d
    â”œâ”€â”€ examples
    â”œâ”€â”€ helloworld
    â”œâ”€â”€ helloworld.d
    â”œâ”€â”€ incremental
    â””â”€â”€ native 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢çš„æ ‘æ˜¾ç¤ºäº†æˆ‘ä»¬çš„ä¸¤ä¸ª*ç›®æ ‡*ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`cargo`å‘½ä»¤æ¸…ç†`target/`ç›®å½•ã€‚

```
$ cargo clean 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å¯ä»¥è¿è¡Œç›®æ ‡å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
$ ./target/release/helloworld
Hello, world! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨`cargo`æ¥è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ‘å¯ä»¥åœ¨å‰é¢æåˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸ºè¿™åŒæ ·é€‚ç”¨äºå¸¸è§„æ„å»ºï¼Œä½†æ˜¯æˆ‘æƒ³ä¸€æ­¥ä¸€æ­¥æ¥ã€‚

```
$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.03s
     Running `target/debug/helloworld`
Hello, world! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸è¦ä»¥ä¸ºé»˜è®¤æ˜¯å¼€å‘ç‰ˆæœ¬ï¼Œå®ƒæ˜¯è¿è¡Œçš„ã€‚å¦‚æœæ‚¨æƒ³è¿è¡Œå‘å¸ƒç‰ˆæœ¬ï¼Œè¯·æ‰§è¡Œ:

```
$ cargo run --release
    Finished release [optimized] target(s) in 0.03s
     Running `target/release/helloworld`
Hello, world! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæ›´æ”¹å·²ä¿å­˜åˆ°`src/`æ–‡ä»¶ï¼Œåˆ™`cargo run`åœ¨æ‰§è¡Œå‰è‡ªåŠ¨æ„å»ºã€‚

å¦‚æœä½¿ç”¨ **Visual Studio ä»£ç **å’Œ [RLS æ‰©å±•](https://marketplace.visualstudio.com/items?itemName=rust-lang.rust)ä¸º **Rust** ã€‚æ‚¨çš„`target/`ç›®å½•å¡«å……äº†æ›´å¤šçš„æ•°æ®ï¼Œè¯·å‚è§`rls/`ç›®å½•ã€‚è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä» **Visual Studio ä»£ç **åˆå§‹åŒ–`cargo clean`åçš„`target/`ç›®å½•ã€‚è¯¥è®¾ç½®ç”¨äºé€šè¿‡ **RLS** (Rust è¯­è¨€æœåŠ¡å™¨)ä¸ **Visual Studio ä»£ç **é›†æˆã€‚

```
$ tree target
target
â””â”€â”€ rls
    â””â”€â”€ debug
        â”œâ”€â”€ build
        â”œâ”€â”€ deps
        â”‚Â Â  â”œâ”€â”€ helloworld-da127327fd97b6ec.d
        â”‚Â Â  â”œâ”€â”€ helloworld-fe97a0dcc4f47622.d
        â”‚Â Â  â”œâ”€â”€ libhelloworld-da127327fd97b6ec.rmeta
        â”‚Â Â  â””â”€â”€ libhelloworld-fe97a0dcc4f47622.rmeta
        â”œâ”€â”€ examples
        â”œâ”€â”€ incremental
        â”‚Â Â  â”œâ”€â”€ helloworld-3cgahs8hwxsms
        â”‚Â Â  â”‚Â Â  â”œâ”€â”€ s-f5woledziu-7esk1o-3jq9t7fc4fb3p
        â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dep-graph.bin
        â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ query-cache.bin
        â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ work-products.bin
        â”‚Â Â  â”‚Â Â  â””â”€â”€ s-f5woledziu-7esk1o.lock
        â”‚Â Â  â””â”€â”€ helloworld-uq5esv9yxxqk
        â”‚Â Â      â”œâ”€â”€ s-f5wolec88s-fleft9-1dg0efqmqtyu2
        â”‚Â Â      â”‚Â Â  â”œâ”€â”€ dep-graph.bin
        â”‚Â Â      â”‚Â Â  â”œâ”€â”€ query-cache.bin
        â”‚Â Â      â”‚Â Â  â””â”€â”€ work-products.bin
        â”‚Â Â      â””â”€â”€ s-f5wolec88s-fleft9.lock
        â”œâ”€â”€ libhelloworld-da127327fd97b6ec.d
        â”œâ”€â”€ libhelloworld-da127327fd97b6ec.rmeta
        â”œâ”€â”€ libhelloworld.d
        â”œâ”€â”€ libhelloworld.rmeta
        â””â”€â”€ native 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**RLS** æ˜¯ä¸ºäº†æ”¯æŒå…¶ä»–*å‰ç«¯*(ç¼–è¾‘å™¨)ï¼Œæ‰€ä»¥ **RLS** å¹¶ä¸æ˜¯é’ˆå¯¹ **Visual Studio ä»£ç **ã€‚å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ [RLS çŸ¥è¯†åº“](https://github.com/rust-lang-nursery/rls)ã€‚

ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½å°è¯•ç”¨ **Rust** æˆ–è€…ç”¨ä¸€äº› **Rust** æ¥è§£å†³ä½ å½“å‰çš„é—®é¢˜ã€‚

æˆ‘ç°åœ¨å¾ˆéš¾æ¶ˆåŒ–æ‰æ‰€æœ‰å…³äº **Rust** çš„æŒ‡å—ã€æ•™ç¨‹ã€æ–‡ç« å’Œåšå®¢ï¼Œåªè¦çœ‹çœ‹ [Rust å­¦ä¹ èµ„æº](https://github.com/ctjhoa/rust-learning)å°±çŸ¥é“äº†ã€‚

æ£€æŸ¥[ä¸»é”ˆç‚¹](https://www.rust-lang.org/en-US/)çš„[æ–‡æ¡£éƒ¨åˆ†](https://www.rust-lang.org/en-US/documentation.html)ã€‚

ğŸ’¡æœ€åï¼Œæˆ‘ç»™ä½ æœ€åä¸€ä¸ªæç¤ºâ€”â€”å½“ä½ æ‰¾åˆ°ä½ æƒ³åœ¨ [crates.io](https://crates.io/) ä¸Šè¯•ç”¨çš„åº“æ—¶ï¼Œå®ƒä»¬é€šå¸¸æœ‰ä¸€ä¸ªæ–‡æ¡£é“¾æ¥ï¼Œå¯ä»¥å¼•å¯¼ä½ æ‰¾åˆ°ä¾‹å­ç­‰ã€‚

è¿™æœ¬æŒ‡å—å’Œä¸€äº›è§†é¢‘æ•™ç¨‹æ˜¯æˆ‘ç¬¬ä¸€ä¸ªâ€œ [Hacktoberfest ç«¥è¯](https://dev.to/jonasbn/blog-post-a-little-hacktoberfest-fairytale-3k96)çš„å¼€å§‹ï¼Œæ‰€ä»¥ä½ è¿˜åœ¨ç­‰ä»€ä¹ˆã€‚

è¿™ä¸ªèƒ¡éº»æ˜¯ä»æˆ‘çš„[èƒ¡éº»æ”¶è—](http://jonasbn.github.io/til/)é‡Œæ‹¿çš„ã€‚

## [](#resources)èµ„æº

*   [rustup.rs -é˜²é”ˆå·¥å…·é“¾å®‰è£…ç¨‹åº](https://rustup.rs/)
*   [Rust ç¼–ç¨‹è¯­è¨€](https://www.rust-lang.org/en-US/)
*   [ç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/Rust_(programming_language))
*   [é“é”ˆæ“åœº](https://play.rust-lang.org/)
*   [crates . io:Rust çš„è½¯ä»¶åŒ…åº“](https://crates.io/)
*   [RLS](https://github.com/rust-lang-nursery/rls)