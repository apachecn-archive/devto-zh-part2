# 为什么您应该进行单元测试

> 原文：<https://dev.to/restoreddev/why-you-should-be-unit-testing--3k85>

单元测试感觉就像跑步锻炼。这是你知道你应该做的事情，但是真的很难有动力去开始。当我刚开始编程时，我认为单元测试是多余的。我手动测试所有东西，所以我为什么要花时间去写更多的代码呢？我花了时间学习单元测试，但现在我看到了它的好处。以下是单元测试如此重要的几个原因。

### 测试让你的代码有条理

我主要使用脚本语言(PHP 和 JS ),当你使用脚本语言时，把所有的功能放在一个地方真的很容易。例如，编写一个导入 CSV 文件的函数。将文件打开逻辑、数据验证和数据库插入放在一个功能中是很诱人的。然而，这样做会使函数变得冗长且难以理解。

当你试图对这样一个长函数进行单元测试时会发生什么？在单元测试中，您希望您的代码在更小的块中，以便更容易为它创建测试用例。您可以将导入函数分解为三个不同的函数:一个用于查找和打开 CSV 文件，一个用于验证数据，一个用于运行 SQL 查询将数据插入数据库。现在，它更容易测试。作为一个额外的副作用，你的代码被组织成更小的函数，使得它更干净，更容易维护。

### 测试是代码文档

当你写一个测试用例时，它作为如何使用你正在测试的功能的文档，因为你可以看到它的运行。假设你有一个验证变量是一个数字的函数，你为它写了一个测试用例:

```
public function test_run_validate_number_with_real_number()
{
    $value = 5;

    $result = validateNumber($value);

    $this->assertTrue($result);
} 
```

Enter fullscreen mode Exit fullscreen mode

既然我们已经看到了测试，我们对这个`validateNumber`函数了解多少呢？首先，我们知道函数的名字和它接受多少个参数。其次，我们知道如果传递的值是一个实数，它会用`true`来响应。所有这些都不需要查看函数本身！

这是一个小例子，但是它说明了测试如何解释你的代码。如果你有一个测试套件，你可以用它来训练其他程序员如何使用你的代码。

### 测试防止焦虑

你有没有因为某些东西会出错而害怕改变你的代码？在推向生产之前，你会紧张吗？你害怕告诉客户你搞砸了吗？我愿意。这种焦虑让编程变得更加困难和紧张。

> “想象一下，您可以对代码进行任何想要的更改，并且知道您没有破坏任何东西。”~桑迪·梅斯

几年前，我在 Laracon 听 Sandi Metz 说过这句话，它真的改变了我对测试的看法。她提倡将测试作为编程的安全网。我现在非常渴望测试套件的保护。我的目标是通过单元测试来验证应用程序的所有主要功能。它不能防止所有的错误，但它确实验证了我的应用程序的核心将始终工作。我可以自信地推动变革。再也不用担心愤怒的电话和邮件了！

学习如何进行单元测试是困难的，但是非常有益的。它会让你的编程技能更上一层楼，让你对自己编写的代码更加自信和自豪。它减少了变化的压力，使您能够以更高的稳定性交付更好的特性。现在，去写一些测试吧！

以下是帮助我学习测试的资源列表:

*   [Sandi Metz | Laracon 2016](https://streamacon.com/video/laracon-us-2016/sandi-metz-get-a-whiff-of-this)
*   罗伯特·马丁的《干净的代码》
*   [PHPUnit](https://phpunit.de/)
*   [Laracasts |测试 Laravel](https://laracasts.com/series/phpunit-testing-in-laravel/episodes/2)