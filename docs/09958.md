# å¦‚ä½•ä¸º GatsbyJS åˆ›å»ºé»‘å®¢æ–°é—» API GraphQL æ•°æ®æº

> åŸæ–‡:[https://dev . to/dance 2 die/how-to-create-a-hacker-news-API-graph QL-data-source-for-gatsbyjs-eg3](https://dev.to/dance2die/how-to-create-a-hacker-news-api-graphql-data-source-for-gatsbyjs-eg3)

åœ¨[ä¹‹å‰çš„å¸–å­](https://dev.to/dance2die/technology-stack-rundown-of-shanc-ef7)ä¸­ï¼Œæˆ‘ä¸º [SHaNc](http://shanc.netlify.com/) ä»‹ç»äº†ä¸€ä¸ªç§‘æŠ€æ ˆã€‚

æˆ‘å°†æ›´è¯¦ç»†åœ°ä»‹ç»å¦‚ä½•ä¸º [GatsbyJS](https://www.gatsbyjs.org/) åˆ›å»ºé»‘å®¢æ–°é—» [GraphQL](https://graphql.org/) æ•°æ®æºã€‚

## [](#why)â“ä¸ºä»€ä¹ˆï¼Ÿ

å› ä¸º GatsbyJS åªèƒ½é€šè¿‡ GraphQL ç«¯ç‚¹æŸ¥è¯¢æ•°æ®ã€‚
*æŒ‡[ç”¨ GraphQL](https://www.gatsbyjs.org/docs/querying-with-graphql/) æŸ¥è¯¢ã€‚*

## [](#assumption)ğŸ¤”å‡å®š

æˆ‘å‡è®¾ä½ ç†Ÿæ‚‰ JavaScript [æ‰¿è¯º](https://developers.google.com/web/fundamentals/primers/promises)ï¼Œä»¥åŠ[å¼‚æ­¥](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function) / [ç­‰å¾…](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await)ã€‚

## [](#terminologies-amp-concepts)ğŸ’­æœ¯è¯­&æ¦‚å¿µ

è®©æˆ‘ä»¬ç¡®ä¿æˆ‘ä»¬åœ¨åŒä¸€é¡µä¸Šã€‚

1.  [GraphQL Source](https://www.gatsbyjs.org/docs/create-source-plugin/)â€”â€”è¿™æ˜¯ GatsbyJS å¯ä»¥é€šè¿‡ graph QL æŸ¥è¯¢çš„æ•°æ®ã€‚
2.  **èŠ‚ç‚¹**â€“ä¸€ä¸ªèŠ‚ç‚¹è¢«ç§°ä¸ºâ€œæ¨¡å‹â€(æ ¹æ®æ–‡æ¡£)ï¼Œå®ƒæ˜¯æ•°æ®çœ‹èµ·æ¥çš„å½¢çŠ¶(ä¸æ˜¯èŠ‚ç‚¹)ã€‚JS)ã€‚
3.  Gatsby-node . jsâ€“è¿™æ˜¯æ‚¨å®šä¹‰ GraphQL æºä»£ç çš„åœ°æ–¹ï¼Œå®ƒä½äºé¡¹ç›®æ ¹ç›®å½•ä¸­ã€‚

ç°åœ¨æˆ‘ä»¬å·²ç»æ˜ç¡®äº†ä¸€äº›æœ¯è¯­å’Œæ¦‚å¿µï¼Œè®©æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹é»‘å®¢æ–°é—» APIã€‚

## [](#hacker-news-api-overview)ğŸ”é»‘å®¢æ–°é—» API æ¦‚è¿°

å®˜æ–¹çš„[é»‘å®¢æ–°é—» API](https://github.com/HackerNews/API) (ä»¥ä¸‹ç®€ç§°â€œHN APIâ€)å…¬å¼€äº†â€œé¡¶çº§â€ã€â€œæœ€ä½³â€å’Œâ€œæ–°â€æ•…äº‹çš„é¡¶çº§ç«¯ç‚¹ã€‚

é¡¶çº§ç«¯ç‚¹ä»…è¿”å› idï¼Œæ²¡æœ‰å…¶ä»–ç›¸å…³æ•°æ®ã€‚

```
Calling "https://hacker-news.firebaseio.com/v0/topstories.json" 
returns an array of story IDs 

[9127232, 9128437, 9130049, 9127243, 9128571, ..., 9120990] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› æ­¤ï¼Œæ‚¨éœ€è¦è°ƒç”¨ä»é¡¶çº§ç«¯ç‚¹è¿”å›çš„æ¯ä¸ªæ•…äº‹ IDã€‚è¿™ä¸æ˜¯ä¸€ä¸ªæœ€ä½³è®¾è®¡ï¼ŒHN å›¢é˜Ÿä¹Ÿæ‰¿è®¤äº†è¿™ä¸€ç‚¹ã€‚
*ä½†æˆ‘æ„Ÿè°¢ HN å›¢é˜Ÿä¸ºä»–ä»¬çš„æ•…äº‹æä¾›äº†ä¸€ä¸ªå…¬å…± APIã€‚*

è®°ä½è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬ç»§ç»­åˆ›å»ºä¸€ä¸ªæºã€‚

## [](#%F0%9F%8F%99-implementation-steps)ğŸ™å®æ–½æ­¥éª¤

ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å°† Hacker News API åŒ…è£…æˆä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»è€Œå°†å®ƒè½¬æ¢æˆ GraphQL æºä»£ç ã€‚

1.  ä» HN API è·å–æ‰€æœ‰é¡¶çº§æ•…äº‹ id
2.  åˆ›å»ºæºèŠ‚ç‚¹
3.  æä¾›ç»™ç›–èŒ¨æ¯”

### [](#get-all-top-level-story-ids-from-hn-api)ğŸ’¡ä» HN API è·å–æ‰€æœ‰é¡¶çº§æ•…äº‹ id

è®©æˆ‘ä»¬ä» HN API è·å–æ‰€æœ‰é¡¶çº§æ•…äº‹ idã€‚