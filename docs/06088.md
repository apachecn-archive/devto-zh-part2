# 使用 shell 脚本的提示

> 原文:[https://dev . to/PEM tajo/tips-for-work-with-bash-scripts-3m k3](https://dev.to/pemtajo/tips-for-working-with-bash-scripts-3mk3)

几年前，我在一家小公司编程，该公司使用*车载系统*。在那里，我为 *shell 脚本*、 *python 脚本*和另一个*车载系统*编写代码，有时是为住在另一个州的客户编写的，他们的机器我没有任何访问权限，所以我的脚本总是一个*黑盒*，因此通过电子邮件发送更新是很常见的。

[![Alt Text](../Images/390075e4e2269eed4bda2c8e14f95ace.png)T2】](https://i.giphy.com/media/nkLB4Gp8H6hFe/giphy.gif)

因此，客户给我发了一封电子邮件，主题是:“不工作”。5 分钟后，我刷新了文件并发回了邮件。问题解决了对吗？不完全是。

小公司，甚至是自由职业者，很难做好使用 bash 脚本的后勤工作，因为客户不能等待，你必须做一些事情来解决问题，所以“添加这条线”总是战胜健壮的过程。

在经历了许多问题之后，我想与开发者和自由职业者分享一些关于使用 sh 文件的好建议

这是简单的提示，但问题(和头痛)在于细节:

#### 在函数中写全部(如果可能的话隔离)

把你的逻辑分割开来，当需要修改和循环你的代码时会有帮助。

为每一个功能做一个范围支持你没有错误地改变逻辑。

#### 总是在主文件上拾取文件

我知道这是显而易见的，但是在现实世界中，在没有提交的情况下将您的文件更改为发送到您的客户端会更快，并且在繁忙的一天中，您可能会忘记稍后进行提交，因此您的 git 中有一个文件，而您的客户端有另一个文件。不难想象灾难性的场景。

#### 总是为工作创建分支

这个技巧通常是针对团队的，但对 freela 也很有效，有助于不要在 master 中直接提交，以及避免没有修改的 bug 和“为提交而提交”。

#### 注释外壳脚本

关于是否注释你的代码，这是一个永恒的讨论，在其他语言中我认为没有必要，但是如何在 *bash* 中有时并不直观，像我是一个实际的开发者，我更喜欢注释我的 *bash 脚本*，最终这节省了我的时间。

#### 做测试

是的，在 bash 脚本中进行测试。

[![Alt Text](../Images/a9a402e5c7725b51d203ddf60646458f.png)T2】](https://i.giphy.com/media/3o6Mbbs879ozZ9Yic0/giphy.gif)

这种测试不一定是单元测试，例如可以是功能测试。

如果你的脚本将一个文件移动到另一个文件夹，你可以:

1.  在原始文件夹中创建文件
2.  运行脚本
3.  一定要声明文件在 destiny 文件夹中，而不是在 origin 文件夹中

通过测试，很容易看出傻瓜的错误。在 bash 中做测试有时很难，所以使用另一种语言来做，Python 是一个很好的选择，也是我的首选。

#### 做日志

最后是金尖。一个好的日志，将有助于更快地识别错误，它有助于查看所有活动和性能，如发现错误和系统瓶颈。在 bash 文件中登录很容易，所以没有理由不这样做。

这是我的小贴士，让你的过程少一些错误和致命错误。