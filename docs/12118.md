# Windows å­ç³»ç»Ÿ Linux å®‰è£…ç¨‹åº

> åŸæ–‡:[https://dev.to/spences10/windows-subsystem-linux-setup-1gb5](https://dev.to/spences10/windows-subsystem-linux-setup-1gb5)

æˆ‘æ˜¯ Windows ç”¨æˆ·ï¼Œä¹Ÿæ˜¯ Linux ç”¨æˆ·ï¼Œä½†æˆ‘å‘ç° Windows å¯¹æˆ‘æ¥è¯´æ²¡é‚£ä¹ˆé‡è¦ï¼Œä¸¤è€…å„æœ‰åˆ©å¼Šã€‚å¯¹æˆ‘æ¥è¯´ï¼ŒWindows çš„ä¸€ä¸ªå¤§ç¼ºç‚¹æ˜¯å½“æˆ‘å¼€å§‹å­¦ä¹  web å¼€å‘æ—¶ã€‚

ç›´åˆ° Windows å­ç³»ç»Ÿ Linux å‡ºç°ğŸ™

æˆ‘å–œæ¬¢å®ƒï¼Œä½ å¯ä»¥åœ¨ Windows ä¸­æœ‰ä¸€ä¸ª bash shellï¼Œå¹¶é€šè¿‡å®ƒè¿è¡Œæ‰€æœ‰çš„èŠ‚ç‚¹åº”ç”¨ç¨‹åºï¼Œéšç€ Windows 10 ç§‹å­£åˆ›å»ºè€…æ›´æ–°ï¼ŒWSL çš„è®¾ç½®éå¸¸ç®€å•ã€‚

å¿«é€Ÿå›é¡¾ä¸€ä¸‹æˆ‘ä¸ºä»€ä¹ˆè¦å‘è¿™ä¸ªå¸–å­:å‰å‡ å¤©æˆ‘åœ¨ Windows ä¸Šç”¨ bash æ—¶é‡åˆ°é—®é¢˜ï¼Œå°±æŠŠæˆ‘çš„ç¬”è®°æœ¬ç”µè„‘æ¸…ç©ºäº†ã€‚éƒ¨åˆ†åŸå› æ˜¯å› ä¸ºåœ¨ WSL ä¸­ä½¿ç”¨äº† nvmï¼Œå¹¶ä¸”å¯¹æˆ‘çš„ç”µè„‘çš„è¡¨ç°æ„Ÿåˆ°æ²®ä¸§ã€‚æˆ‘ç°åœ¨æ„è¯†åˆ°æˆ‘ååº”è¿‡åº¦äº†ã€‚

å› æ­¤ï¼Œæˆ‘ä¸å¾—ä¸ä»å¤´å¼€å§‹é‡æ–°è®¾ç½®æˆ‘çš„å¼€å‘ç¯å¢ƒï¼Œå¹¸è¿çš„æ˜¯ï¼Œæˆ‘å°†æ‰€æœ‰çš„è®¾ç½®å’Œé…ç½®ä¿¡æ¯ä¿å­˜åœ¨ GitHub [repo](https://github.com/spences10/settings) ä¸­ï¼Œä»¥å¤‡æˆ‘è·å¾—ä¸€å°æ–°è®¡ç®—æœºæˆ–ä»ç¾éš¾æ€§äº‹ä»¶ä¸­æ¢å¤(æ¯”å¦‚ä¸€å°è¢«æ ¸åŒ–çš„è®¡ç®—æœº)ã€‚

ä¸‹é¢æ˜¯æˆ‘å¦‚ä½•ä¸ºæˆ‘çš„å¼€å‘ç¯å¢ƒè®¾ç½®æˆ‘çš„ Windows å­ç³»ç»Ÿ Linux çš„ã€‚

è¿™æ˜¯æˆ‘å¯¹ WSL çš„å…·ä½“è®¾ç½®å’Œä½¿ç”¨çš„çœ‹æ³•ï¼Œä¹Ÿæ˜¯æˆ‘ä¸‹ä¸€æ¬¡åœ¨ Windows ä¸Šä»å¤´å¼€å§‹æ„å»ºå¼€å‘ç¯å¢ƒçš„é€æ­¥æŒ‡å—ã€‚

æ‰€ä»¥ï¼Œåœ¨ä»å¾®è½¯å•†åº—å®‰è£…äº† [WSL](https://www.microsoft.com/store/productId/9NBLGGH4MSV6) å¹¶æ·»åŠ äº†ä½ çš„é»˜è®¤ç”¨æˆ·åï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ›´æ–°å’Œå‡çº§æ‰€æœ‰çš„ä¸œè¥¿ã€‚

```
sudo apt update
sudo apt -y upgrade 
```

å¦‚æœæ‚¨åœ¨å‡çº§å£°æ˜ä¸­çš„`-y`ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡ä»»ä½• Linux å‘è¡Œç‰ˆï¼Œé‚£ä¹ˆå¯¹äºç»ˆç«¯ä¸­æ˜¾ç¤ºçš„ä»»ä½•æç¤ºï¼Œé»˜è®¤å›ç­”æ˜¯ yesã€‚ä½ å¯èƒ½ä¸æƒ³è¿™æ ·åšï¼Œå› ä¸ºå¯èƒ½æœ‰ä¸€äº›ç¨‹åºä½ ä¸æƒ³æ›´æ–°ï¼Œä½†æˆ‘æƒ³ã€‚

[![upgrade image](../Images/17ad1b053ae768af84101287b66f94b2.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Z3m55rvb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/hieqb0gy17oziysie1s4.png)

ä½ ä¸ä¼šæ”¶åˆ°è¿™äº›ä¿¡æ¯ğŸ‘†

### æ„å»ºå·¥å…·

ä¸ºäº†ä» npm ç¼–è¯‘å’Œå®‰è£…æœ¬åœ°æ’ä»¶ï¼Œä½ å¯èƒ½è¿˜éœ€è¦å®‰è£…æ„å»ºå·¥å…·ï¼Œæˆ‘éœ€è¦è¿™ä¸ªå·¥å…·ç”¨äº Gatsby imagesï¼Œå®ƒä½¿ç”¨`sharp`ï¼Œè€Œ T0 åˆä½¿ç”¨`node-gyp` :

```
sudo apt install -y build-essential 
```

### å®‰è£…èŠ‚ç‚¹

é€šè¿‡ nodejs.org ç½‘ç«™ä¸Šç»™å‡ºçš„è¯´æ˜å®‰è£… node å¹¶æ²¡æœ‰ç»™æˆ‘æ­£ç¡®çš„æƒé™ï¼Œæ‰€ä»¥å½“æˆ‘è¯•å›¾`npm install`ä»»ä½•æˆ‘å¾—åˆ°çš„é”™è¯¯æ—¶ï¼Œæˆ‘å‘ç°ä½¿ç”¨[ä½¿ç”¨`n`](https://github.com/Microsoft/WSL/issues/776#issuecomment-266112578) ä¼šæœ‰å¸®åŠ©:

### ç”¨`n`å®‰è£…èŠ‚ç‚¹

å› ä¸ºè¿™æ˜¯å…¨æ–°å®‰è£…ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»§ç»­ä½¿ç”¨ [n-install](https://github.com/mklement0/n-install) å’Œ

```
curl -L https://git.io/n-install | bash 
```

è¿™å°†å®‰è£… node çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ğŸ‘

ä¸€æ—¦è„šæœ¬å®Œæˆï¼Œä½¿ç”¨:
é‡å¯ bash

```
. /home/my_user_name/.bashrc # the n prompt displays this for you to copy pasta 
```

æ£€æŸ¥æ‚¨çš„èŠ‚ç‚¹å’Œ npm ç‰ˆæœ¬:

```
node -v && npm -v 
```

### è£…é±¼ğŸŸ

Fish ç°åœ¨æ˜¯æˆ‘çš„å¤–å£³ï¼Œçº¯ç²¹æ˜¯ä¸ºäº†è‡ªåŠ¨å®Œæˆ/æ™ºèƒ½æ„ŸçŸ¥ğŸ‘Œä¹Ÿæœ‰ä¸€äº›ä¸é”™çš„ä¸»é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥å¾—åˆ°å®ƒã€‚

```
sudo apt -y install fish
sudo apt -y upgrade && sudo apt -y autoremove 
```

### å®‰è£…å“¦æˆ‘çš„é±¼| OMF

å“¦ï¼Œæˆ‘çš„é±¼å°±åƒä¸€ä¸ªé±¼çš„åŒ…ç®¡ç†å™¨ï¼Œå¯ä»¥å®‰è£…åŒ…å’Œä¸»é¢˜ã€‚

```
curl -L https://get.oh-my.fish | fish 
```

### å®‰è£… OMF ä¸»é¢˜

```
omf install clearance 
```

çœ‹çœ‹é±¼å£³åœ¨è¡ŒåŠ¨:
[![fish shell inaction](../Images/60bb3dcf7a537f9e9976daf789ca33b1.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--cYxREij4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/b0mgenxzri1cwomfikxv.gif)

### å¼€å§‹çš„å¼€å§‹

å¥½äº†ï¼Œè¿™æ˜¯ WSL çš„åŸºæœ¬è®¾ç½®ï¼Œä½ ç°åœ¨å¯èƒ½æƒ³è¦è®¾ç½® Gitï¼Œæˆ‘å·²ç»åœ¨ WSL ä¸Šé€šè¿‡ HTTPS ä½¿ç”¨ SSH æœ‰ä¸€æ®µæ—¶é—´äº†ã€‚

> åœ¨æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼ŒWSL Git ä¸ VSCode çš„é›†æˆä¸å·¥ä½œï¼Œæ‰€ä»¥æˆ‘åœ¨æˆ‘çš„ windows æœºå™¨ä¸Šæ·»åŠ äº†ä¸€ä¸ª Git å®‰è£…ï¼Œä½ å¯ä»¥>å¿½ç•¥å®ƒï¼Œé€šè¿‡ç»ˆç«¯ä½¿ç”¨å®Œæ•´çš„ Gitï¼Œä½†æ˜¯æˆ‘çœŸçš„å¾ˆå–œæ¬¢> VSCode git é›†æˆã€‚

è¦åœ¨æ‚¨çš„æœºå™¨ä¸Šè®¾ç½® SSHï¼Œè¯·çœ‹ä¸€ä¸‹è¿™ä¸ª[æ–¹ä¾¿çš„ SSH è®¾ç½®](https://github.com/spences10/cheat-sheets/blob/master/git.md#how-to-authenticate-with-github-using-ssh)ã€‚æˆ‘è¯´å®‹æ‰¿å®ªè€Œä¸æ˜¯ HTTPS 1ã€‚å› ä¸ºæˆ‘åœ¨ Git å‡­è¯ç®¡ç†å™¨å’Œå¯†åŒ™ç¯ç®¡ç†å™¨ä¸Šæœ‰å„ç§å„æ ·çš„é—®é¢˜ï¼Œæ‰€ä»¥æœ€ç»ˆåˆ›å»ºä¸€ä¸ª SSH å¯†é’¥å¹¶ç”¨ GitHub è¿›è¡Œè®¤è¯å®é™…ä¸Šæ›´å¿«â€”â€”æˆ‘é“¾æ¥çš„æŒ‡å—ä¼šå¸¦æ‚¨å®Œæˆå®ƒã€‚

### ç§»åŠ¨æ‚¨çš„ç‚¹æ–‡ä»¶

å¦‚æœä½ å·²ç»åœ¨ GitHub repo ä¸­å¤‡ä»½äº†æ‰€æœ‰çš„[ç‚¹æ–‡ä»¶](https://github.com/spences10/dotfiles)ï¼Œé‚£ä¹ˆç°åœ¨æ˜¯å°†å®ƒä»¬æ·»åŠ åˆ°ä½ çš„ WSL æ–‡ä»¶å¤¹çš„å¥½æ—¶æœºï¼Œä¸Šæ¬¡æˆ‘è¿™æ ·åšæ—¶ï¼Œæˆ‘åœ¨ç§»åŠ¨æ¯ä¸ªæ–‡ä»¶åæ‰‹åŠ¨è®¾ç½®äº†æƒé™ï¼Œä½†åæ¥å‘ç° [`rsync`](https://www.tecmint.com/rsync-local-remote-file-synchronization-commands/) ç§»åŠ¨äº†æ‰€æœ‰æ–‡ä»¶ã€‚

```
rsync -avzh /mnt/c/Users/dotfiles/ ~/ 
```

è¿™å°†æŠŠæˆ‘çš„`dotfiles`æ–‡ä»¶å¤¹çš„å†…å®¹å¤åˆ¶åˆ° WSL ä¸­çš„`~/` (home)ç›®å½•ï¼Œä½ å¯ä»¥ç”¨
æ¥æ£€æŸ¥å®ƒä»¬

```
ls -la ~/ 
```

[![bash files wrong permissions](../Images/7f6171f1f7d09fc0cec35700309f98ee.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--GAp3B8vd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/0p094du96f3tz5bsxviv.png)

æˆ‘å¤åˆ¶äº†æˆ‘çš„`.gitconfig`ã€`.gitignore`å’Œ`.npmrc`ç‚¹æ–‡ä»¶ï¼Œä½ å¯ä»¥çœ‹åˆ°æƒé™ä¸`.bashrc`æ–‡ä»¶ä¸ä¸€è‡´ã€‚

æ‰€ä»¥ï¼Œæˆ‘çŸ¥é“çš„å”¯ä¸€æ”¹å˜æ–‡ä»¶æƒé™çš„æ–¹æ³•æ˜¯ç”¨`chmod`æ¥è·å¾—ä¸€ä¸ªç›¸ä¼¼æ–‡ä»¶çš„åºå·ï¼Œä½¿ç”¨`stat` :

```
stat -c "%a %n" ~/.* 
```

è¿™å°†åˆ—å‡ºæ‰€æœ‰ä»¥`.`å¼€å¤´çš„ä¸œè¥¿ï¼Œè¿™æ˜¯æˆ‘çš„:

```
777 /home/scott/.
755 /home/scott/..
600 /home/scott/.bash_history
644 /home/scott/.bash_logout
644 /home/scott/.bashrc
777 /home/scott/.cache
777 /home/scott/.config
777 /home/scott/.gitconfig
777 /home/scott/.gitignore
777 /home/scott/.local
777 /home/scott/.npm
777 /home/scott/.npmrc
644 /home/scott/.profile
644 /home/scott/.sudo_as_admin_successful 
```

æˆ‘åªæƒ³æ”¹å˜è¿™é‡Œçš„`.gitconfig`ã€`.gitignore`å’Œ`.npmrc`ï¼Œæ‰€ä»¥æˆ‘è¦è¿™æ ·åš:

```
chmod 644 .gitconfig .gitignore .npmrc 
```

ç°åœ¨æˆ‘çš„æ–‡ä»¶æ˜¯è¿™æ ·çš„ã€‚ğŸ‘

[![bash files permissions](../Images/03aaf64a0c104a4b844aa152d5f2c760.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--qzhaGTiF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/lbn5bpj4fvne5zaa7sxz.png)

å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…å¹¶è¿è¡Œäº†æœ€æ–°çš„ Ubuntuï¼ŒèŠ‚ç‚¹å’Œ fish ç»ˆç«¯ã€‚å½“ç„¶ï¼Œç°åœ¨ä»ç„¶æœ‰å®‰è£…æ‰€æœ‰ä½ æƒ³è¦å¼€å‘çš„å…¨å±€ npm åŒ…çš„æƒ…å†µã€‚

### æ„Ÿè°¢é˜…è¯»ğŸ™

å¦‚æœæˆ‘é”™è¿‡äº†ä»€ä¹ˆï¼Œæˆ–è€…å¦‚æœä½ æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚

åœ¨ Twitter ä¸Šæ‰¾åˆ°æˆ‘æˆ–è€…åœ¨ GitHub ä¸Šé—®æˆ‘ä»»ä½•é—®é¢˜ã€‚

è¿™ç¯‡æ–‡ç« æœ€åˆå‘å¸ƒåœ¨æˆ‘çš„åšå®¢ä¸Šã€‚