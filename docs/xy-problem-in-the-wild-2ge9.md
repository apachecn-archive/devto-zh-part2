# 野外的“XY 问题”。

> 原文：<https://dev.to/ogrotten/xy-problem-in-the-wild-2ge9>

***来自维基百科 [XY 问题](https://en.wikipedia.org/wiki/XY_problem)词条。***

> 寻求帮助的人的真正问题(“X”)是模糊的，因为他们不是直接询问问题 X，而是询问如何解决次要问题(“Y”)，他们认为这将允许他们解决问题 X。

在过去的一个月左右，我一直在做一个纸牌游戏作为个人项目。我正在使用 JS 和 PhaserJS 游戏引擎来改善这两者，因为为什么不呢。今晚，我在建造一个卡片金字塔，建立一个抽象概念。当你点击一张卡片时，它会得到一系列被选中的卡片的子卡片，也就是它所覆盖的卡片。然后，它转到所有孩子的卡片，并从孩子的父母列表中删除被单击的卡片。当任何牌的父列表长度为零时，该牌正面朝上。

但是没用。它不是删除作为父卡的那张卡，而是完全清除数组。为什么？你到底怎么了？

但是等等。。。什么？当 javascript `array.filter`运行时，*所有的*相关变量都变得未定义？什么，为什么？

这里有一张 chrome devtools [在`filter`](https://i.imgur.com/c3iHyhv.png)
之前的照片，然后这里是`filter` 之后的[。](https://i.imgur.com/nwa6XQj.png)

正如您在右边的变量列表中所看到的，javascript 已经失去了理智，正在无缘无故地清除我的变量(至少我是这样认为的)。

所以我挖啊挖。网络搜索、关于`array.filter`的信息等...什么都没用。最后我分解并提交到堆栈溢出。一个好人(现在很少见)很快就跳到了评论上，并提出了一些建议，包括几个关于可变范围的链接。

。。。你看到了吗？XY 问题？

我花了整整 5 个小时试图弄清楚为什么我的变量被清除，却被提醒它们完全超出了`array.filter`回调函数的范围。我的意思是，我知道这应该是如何工作的，但我是如此专注于“狗屎消失”，我不能见树不见林。

更好的是(或者更坏，取决于你如何看待它)，带着眼罩，我完全错过了真正的问题。我完全忘记了手头真正的问题与涉及回调函数的变量作用域无关。它是关于一个数组被清除。

一旦我提醒自己真正的问题是什么，万能的上帝花了几秒钟来解决它。

*真解？* ***看图像中的 131 行。***

* * *

这个故事的寓意是:

> 当你听到马蹄声时，想想马，而不是斑马。

如果你有一个*不可能*的问题，一些可靠的东西似乎已经完全失控，你很可能在错误的地方寻找问题。后退一步，散焦一分钟，从你的桌子上拿起[橡皮鸭](https://rubberduckdebugging.com/)，进行一次愉快轻松的谈话。