# vue . jsâ€“Dart å…¥é—¨(ç¬¬ 1 éƒ¨åˆ†)

> åŸæ–‡:[https://dev . to/graphic beacon/vuejsgetting-started-in-dart-part-1-4i3o](https://dev.to/graphicbeacon/vuejsgetting-started-in-dart-part-1-4i3o)

æˆ‘å¯¹ Vue.js æœ€è¿‘åšçš„æ ‡è®°å°è±¡æ·±åˆ»ã€‚åœ¨è¿‡å»ä½¿ç”¨è¿‡å®ƒä¹‹åï¼Œæˆ‘æƒ³å†æ¬¡ä½¿ç”¨å®ƒï¼Œæˆ‘å¾ˆå¥½å¥‡åœ¨ Dart ä¸­ä½¿ç”¨ Vue æ˜¯ä»€ä¹ˆæ ·å­ã€‚

å·²ç»æ¼”ç¤ºäº†åœ¨ Dart web apps ä¸­[ä½¿ç”¨ JavaScript åº“çš„å¯èƒ½æ€§ï¼Œæˆ‘ä»¬å°†æµè§ˆ Vue.js " **Getting started** "é¡µé¢ï¼Œå¹¶ä½¿ç”¨ **`js`** interop åŒ…é‡å†™ Dart ä¸­çš„ç¤ºä¾‹ã€‚](https://dev.to/graphicbeacon/how-to-use-javascript-libraries-in-your-dart-applications--4mc6)

[https://www.youtube.com/embed/zoN1_5tYzOM](https://www.youtube.com/embed/zoN1_5tYzOM)
â†’ [**åœ¨ Youtube ä¸Šè§‚çœ‹**](https://youtu.be/zoN1_5tYzOM)

* * *

# [](#before-we-begin)åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰:

## [](#1-set-up-your-project)1ã€‚è®¾ç½®æ‚¨çš„é¡¹ç›®

ä½¿ç”¨ Stagehand å¿«é€Ÿè®¾ç½®æ‚¨çš„ web é¡¹ç›®:

```
$ mkdir vue_dart && cd vue_dart
$ stagehand web-simple 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#2-install-the-js-interop-package)2ã€‚å®‰è£… js äº’æ“ä½œåŒ…

ç¡®ä¿`js`ä¾èµ–é¡¹è¢«æ·»åŠ åˆ°æ‚¨çš„`pubspec.yaml`æ–‡ä»¶:

```
dependencies:
  js: ^0.6.1+1 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¿å­˜å¹¶è¿è¡Œ`pub get`ä»¥æ›´æ–°æ‚¨çš„ä¾èµ–å…³ç³»ã€‚

## [](#3-import-the-vuejs-library)3ã€‚å¯¼å…¥ Vue.js åº“

åœ¨`web/index.html`ä¸­çš„`<head>`ä¹‹å‰`<script defer src="main.dart.js"></script>`å¯¼å…¥ dev ç‰ˆæœ¬çš„åº“:

```
<!-- development version, includes helpful console warnings -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬å¯ä»¥æµè§ˆç¤ºä¾‹äº†ï¼

* * *

# [](#getting-started)å…¥é—¨

ç”¨æˆ‘ä»¬çš„åº“å£°æ˜å’Œå¯¼å…¥:
åˆ›å»ºä¸€ä¸ª`web/app.dart`æ–‡ä»¶

```
@JS()
library vue_interop;

import 'package:js/js.dart';

// TODO: The rest of the code to go here 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#declarative-rendering)é™ˆè¿°æ€§æ¸²æŸ“

ä¸‹é¢æ˜¯ç¬¬ä¸€ä¸ªå¸¦æœ‰`message`å±æ€§å ä½ç¬¦çš„æ¨¡æ¿ç¤ºä¾‹:

```
<div id="app">
  {{ message }}
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸º`Vue` :
åˆ›å»ºå¸¦æ³¨é‡Šçš„å·¥å‚æ„é€ å‡½æ•°

```
@JS()
class Vue {
  external factory Vue(VueOptions options);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“å£°æ˜ä¸€ä¸ªæ–°çš„`Vue`å®ä¾‹æ—¶ï¼ŒJavaScript api æ¥å—ä¸€ä¸ªå¯¹è±¡æ–‡å­—ã€‚æ³¨æ„å£°æ˜çš„æ˜¯`VueOptions`ç±»å‹è€Œä¸æ˜¯`Map`ï¼Ÿæˆ‘ä»¬ä¸èƒ½åœ¨è¿™é‡Œä½¿ç”¨ Dart `Map` sï¼Œå› ä¸ºå®ƒä»¬åœ¨ JavaScript ä¸­æ˜¯ä¸é€æ˜çš„ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå·¥å‚æ„é€ å‡½æ•°æ¥å­˜æ”¾æˆ‘ä»¬çš„é€‰é¡¹:

```
@JS()
@anonymous
class VueOptions {
  external factory VueOptions({ String el, VueDataOptions data });
  external String get el;
  external VueDataOptions get data;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ•°æ®é“å…·æ˜¯ä¸€ä¸ª`VueDataOptions`å¯¹è±¡:

```
@JS()
@anonymous
class VueDataOptions {
  external factory VueDataOptions({
    String message = '', // Set to empty string as default
  });
  external String get message;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿”å›åˆ°`web/main.dart`ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨è¿™äº›å·¥å‚:

```
// Relative imports
import './app.dart';

void main() {
  Vue(VueOptions(
    el: '#app',
    data: VueDataOptions(
      message: 'Hello Vue!',
    ),
  ));
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨ç°åœ¨åº”è¯¥ä¼šçœ‹åˆ°æ–‡æœ¬â€œHello Vueï¼â€åœ¨å±å¹•ä¸Š:

é™¤äº†å­—ç¬¦ä¸²æ’å€¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»‘å®šå…ƒç´ å±æ€§ã€‚

```
<div id="app-2">
  <span v-bind:title="message">
    Hover your mouse over me for a few seconds
    to see my dynamically bound title!
  </span>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å·¥å‚ä¸éœ€è¦æ”¹å˜ï¼Œåªéœ€è¦å£°æ˜ä¸€ä¸ªè°ƒç”¨:

```
// web/main.dart
...
void main() {
  ...

  // App 2 example
  Vue(VueOptions(
    el: '#app-2',
    data: VueDataOptions(
      message: 'You loaded this page on ${DateTime(2018).toLocal()}',
    ),
  ));
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#conditionals)æ¡ä»¶å¥

ä½¿ç”¨`v-if`å±æ€§æ¥åˆ‡æ¢å…ƒç´ çš„å­˜åœ¨:

```
<div id="app-3">
  <span v-if="seen">Now you see me</span>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› ä¸ºæˆ‘ä»¬æ­£åœ¨è§‚å¯Ÿä¸€ä¸ªæ–°çš„å±æ€§(`seen`)ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åœ¨å·¥å‚ä¸­ä¸ºæ­¤æ·»åŠ ä¸€ä¸ª getter:

```
@JS()
@anonymous
class VueDataOptions {
  external factory VueDataOptions({
    String message = '',
    bool seen = null, // <-- Added this
  });
  external String get message;
  external bool get seen; // <-- Added this
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶ä¸”åœ¨`web/main.dart` :

```
...
void main() {
  ...
  // App 3 example
  var app3 = Vue(VueOptions(
    el: '#app-3',
    data: VueDataOptions(seen: true),
  ));
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬å°†è°ƒç”¨`Vue()`çš„ç»“æœèµ‹ç»™äº†ä¸€ä¸ª`app3`å˜é‡ã€‚æ–‡æ¡£æ¼”ç¤ºäº†å¦‚ä½•åš`app3.seen = false`ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»å‘`web/app.dart` :
ä¸­çš„`Vue`ç±»æ·»åŠ ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„ getter

```
@JS()
class Vue {
  external factory Vue(VueOptions options);
  external void set seen(bool val); // <-- Added this
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨`web/main.dart`ä¸­ï¼Œæˆ‘ä»¬å°†åš:

```
import 'dart:async'; // <-- Added this line to use `Future.delayed`

// Relative imports
import './todo.dart'; // <-- Added this line
import './app.dart';

void main() {
  ...
  ...

  // App 3 example
  var app3 = Vue(VueOptions(
    el: '#app-3',
    data: VueDataOptions(seen: true),
  ));

  // Added a delay to see disappearing text
  Future.delayed(Duration(seconds: 2), () async {
    app3.seen = false;

    // Added a delay and then restored text visibility
    await Future.delayed(Duration(seconds: 2));
    app3.seen = true;
  });
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#loops)å¾ªç¯å¾€å¤

åœ¨å¯¹æ•°ç»„
è¿›è¡Œè¿­ä»£æ—¶ä½¿ç”¨`v:for`å±æ€§

```
<div id="app-4">
  <ol>
    <li v-for="todo in todos">
      {{ todo.text }}
    </li>
  </ol>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å·¥å‚æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º`Todo`ã€‚

ç”¨æˆ‘ä»¬çš„å·¥å‚ç±»
åˆ›å»º`web/todo.dart`

```
@JS()
library todo;

import 'package:js/js.dart';

@JS()
@anonymous
class Todo {
  external factory Todo({String text});
  external String get text;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨`web/app.dart`ä¸­ï¼Œè®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª`Todo`çš„åˆ—è¡¨:

```
@JS()
class Vue {
  external factory Vue(VueOptions options);
  external void set seen(bool val);
  external List<Todo> get todos; // <-- Added this line
}

...

@JS()
@anonymous
class VueDataOptions {
  external factory VueDataOptions({
    String message = '',
    bool seen = null,
    List<Todo> todos = const [],
  });
  external String get message;
  external bool get seen;
  external List<Todo> get todos; // <-- Added this line
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨`web/main.dart`ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒ:

```
...
...
void main() {
  ...
  ...

  // App 4 example
  var app4 = Vue(VueOptions(
    el: '#app-4',
    data: VueDataOptions(todos: [
      Todo(text: 'Learn Dart'),
      Todo(text: 'Learn Aqueduct'),
      Todo(text: 'Build something awesome!'),
    ]),
  ));
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†å‘å¾…åŠäº‹é¡¹åˆ—è¡¨æ·»åŠ ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¦‚æ–‡æ¡£æ‰€ç¤º:

```
app4.todos.push({ text: 'New item' }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬éœ€è¦åœ¨`Vue` :
ä¸Šä¸º`todos`æ·»åŠ ä¸€ä¸ª getter

```
// web/app.dart
...
...

@JS()
class Vue {
  external factory Vue(VueOptions options);
  external void set seen(bool val);
  external List<Todo> get todos; // <-- Added this line
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶ä¸”åœ¨`web/main.dart` :

```
...
...
  // App 4 example
  var app4 = Vue(VueOptions(
    el: '#app-4',
    data: VueDataOptions(todos: [
      Todo(text: 'Learn Dart'),
      Todo(text: 'Learn Aqueduct'),
      Todo(text: 'Build something awesome!'),
    ]),
  ));

  app4.todos.add(Todo(text: 'New item')); // <-- Added this line 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#conclusion)ç»“è®º

è¿™å°±æŠŠæˆ‘ä»¬å¸¦åˆ°äº†ç¬¬ 1 éƒ¨åˆ†çš„ç»“å°¾ã€‚åœ¨ç¬¬ 2 éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶å¦‚ä½•ç”¨ Vue ç»„ä»¶å¤„ç†ç”¨æˆ·è¾“å…¥å’Œç»„åˆã€‚

ä¸€å¦‚æ—¢å¾€ï¼Œæˆ‘å¸Œæœ›è¿™æ˜¯æœ‰è§åœ°çš„ï¼Œä½ ä»Šå¤©å­¦åˆ°äº†ä¸€äº›æ–°çš„ä¸œè¥¿ã€‚

**è®¢é˜…[æˆ‘çš„ YouTube é¢‘é“](https://www.youtube.com/channel/UCHSRZk4k6e-hqIXBBM4b2iA?view_as=subscriber)è·å– Dart** ä¸Šçš„æœ€æ–°è§†é¢‘ã€‚è°¢è°¢ï¼

**å–œæ¬¢ï¼Œåˆ†äº«ï¼Œå…³æ³¨æˆ‘**ğŸ˜æœ‰å…³ Dart çš„æ›´å¤šå†…å®¹ã€‚

## [](#further-reading)è¿›ä¸€æ­¥é˜…è¯»

1.  [js åŒ…](https://pub.dartlang.org/packages/js)
2.  [å¦‚ä½•åœ¨æ‚¨çš„ Dart åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ JavaScript åº“](https://dev.to/graphicbeacon/how-to-use-javascript-libraries-in-your-dart-applications--4mc6)
3.  [**ç”¨ Dart è¿›è¡Œå…¨æ ˆ web å¼€å‘**](http://bit.ly/2P2N1jC)