# ä¸€ä¸ªå…³äº GitHub å‘ç”Ÿç¾éš¾æ—¶è¿ç§»åˆ° Netlify çš„å°æ¡ˆä¾‹ç ”ç©¶ï¼Œä»¥ Cloudflare ä¸ºç‰¹è‰²

> åŸæ–‡:[https://dev . to/Hugo _ _ df/a-tiny-case-study-about-migrating-to-netlify-when-disaster-strike-at-github-featured-cloud flare-4g of](https://dev.to/hugo__df/a-tiny-case-study-about-migrating-to-netlify-when-disaster-strikes-at-github-featuring-cloudflare-4gof)

> ä¸Šå‘¨ä¸€(2018 å¹´ 10 æœˆ 22 æ—¥)GitHub è¦å»ğŸ’¥ï¼ŒHugo çš„ä»£ç ä¸­çš„é¢„å®šå†…å®¹æ²¡æœ‰ä¸Šçº¿ã€‚

ä½œä¸ºèƒŒæ™¯ï¼Œåšå®¢çš„è®¾ç½®è®°å½•åœ¨[â€œæ‰“å¼€ç¯:Hugo vs Hugo é…ç½®æ–‡ä»¶â€](https://codewithhugo.com/switching-the-lights-on-hugo-vs-hugo-config-files/)ä¸­ã€‚

**TLï¼›** ã€T2 åšå£«ã€‘(ä¸æœ¬æ–‡ç›¸å…³)

*   cloudflare DNS+cdn+proxy+https
*   github pages-github é¡µé¢
*   [Hugo](https://gohugo.io) ä½œä¸ºé™æ€ç«™ç‚¹ç”Ÿæˆå™¨
*   CircleCI æ¯æ—¥éƒ¨ç½²ç½‘ç«™+æ¨é€(ğŸ¤·â€â™€ï¸wasn't åœ¨ã€Šé‚®æŠ¥ã€‹ä¸Šï¼Œä½†æˆ‘å°±æ˜¯è¿™ä¹ˆåšçš„)

è¿™ç¯‡æ–‡ç« çš„å†…å®¹:

*   å…³äºä¸ä¸“é—¨ä»äº‹é™æ€æ‰˜ç®¡çš„ä¼ä¸šæ‰˜ç®¡ğŸ¤”
*   å¿«é€Ÿè¿ç§»åˆ°ç½‘ç»œç”Ÿæ´»â©
*   é‚£ä¸ºä»€ä¹ˆè¦ç”¨ Cloudflare å‘¢ï¼Ÿ
*   å‰è¿›çš„é“è·¯

## [](#on-hosting-with-a-business-which-isnt-specialised-in-static-hosting)å…³äºéé™æ€æ‰˜ç®¡ä¸šåŠ¡çš„æ‰˜ç®¡ğŸ¤”

å›åˆ°è¿™ä¸ªæ•…äº‹:[codewithhugo.com](https://codewithhugo.com)æ²¡æœ‰åœ¨ GitHub é¡µé¢ä¸Šæ„å»ºæˆ–å‘å¸ƒâ€¦è¿™æ„å‘³ç€æˆ‘çš„å¸–å­[â€œç®€å•ä½†ä¸å¤ªç®€å•:å¦‚ä½•`micro`æ”¹è¿›æ‚¨çš„èŠ‚ç‚¹åº”ç”¨â€](https://dev.to/hugo__df/simple-but-not-too-simple-how-using-zeits-micro-improves-your-node-applications-1kah)ï¼Œè®¡åˆ’åœ¨ä¸–ç•Œåè°ƒæ—¶ä¸Šåˆ 7 ç‚¹å‘å¸ƒ(æˆ‘å°†å†™ä¸‹æˆ‘æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„[è®¢é˜…ä»¥åœ¨æ‚¨çš„æ”¶ä»¶ç®±](https://buttondown.email/hugo) )â€¦æ²¡æœ‰ä¸Šçº¿ã€‚

äº‹å®è¯æ˜ï¼ŒGitHub å›¢é˜Ÿè‡ªå·±åœ¨æ­¤æœŸé—´åŠªåŠ›å‘å¸ƒäº†ä¸€ä¸ªå¸–å­:[â€œæˆ‘ä»¬åœ¨å†…éƒ¨ä½¿ç”¨ GitHub é¡µé¢ï¼Œæ‰€æœ‰æ„å»ºéƒ½åœ¨å‡ ä¸ªå°æ—¶å‰æš‚åœï¼Œæ‰€ä»¥å‘å¸ƒè¿™ä¸ªéœ€è¦é¢å¤–çš„åŠªåŠ›ã€‚â€](https://blog.github.com/2018-10-30-oct21-post-incident-analysis/#2018-october-22-0746-utc)

æ›´ç³Ÿç³•çš„æ˜¯ï¼ŒGitHub çš„ web-hooks å’Œå…¶ä»–æ ¸å¿ƒ API è¦ä¹ˆä¸å¯ç”¨ï¼Œè¦ä¹ˆéå¸¸å¤æ€ª/æ··ä¹±ã€‚è¿™æ„å‘³ç€è¿ç§»åˆ° Netlify å¹¶ä¸åƒé€šå¸¸é‚£æ ·ç®€å•:â€œä» git éƒ¨ç½²â€ä¸ä¼šå·¥ä½œï¼Œå› ä¸º GitHub ç«¯ä¼šå‡ºç°ä¸­æ–­ã€‚

## [](#speedy-migration-to-netlify)å¿«é€Ÿè¿ç§»åˆ°ç½‘ç»œç”Ÿæ´»â©

ä¸€ä¸ªå¾ˆæ£’çš„ç½‘ç»œåŠŸèƒ½æ˜¯â€œæ‰‹åŠ¨éƒ¨ç½²â€ï¼Œä½ åªéœ€ä¸Šä¼ ä¸€ä¸ª zip æ–‡ä»¶ï¼Œå®ƒå°±ä¼šå°†å®ƒéƒ¨ç½²ä¸ºä¸€ä¸ªé™æ€ç«™ç‚¹ã€‚è°¢å¤©è°¢åœ°ï¼Œæˆ‘çš„ GitHub é¡µé¢åº“ä¸­çš„æœ€æ–°ç‰ˆæœ¬æœ‰æˆ‘æƒ³è¦çš„å¸–å­(åªæ˜¯æ— æ³•éƒ¨ç½²)ã€‚

åœ¨ Netlify ä¸Šå»ºç«‹ç½‘ç«™éå¸¸ç®€å•:

*   ä» GitHub ä¸‹è½½èµ„æºåº“çš„ zip å­˜æ¡£(è°¢å¤©è°¢åœ°ï¼Œè¿™æ²¡æœ‰ç€ç«ğŸš’åƒ GitHub çš„å…¶ä»–éƒ¨åˆ†ä¸€æ ·)
*   ä½¿ç”¨ä»ªè¡¨æ¿å°†å…¶ä¸Šä¼ åˆ° Netlify

æ­¤æ—¶ï¼Œè¯¥ç½‘ç«™åœ¨ä¸€ä¸ª`*.netlify.com`åŸŸä¸Šè¿è¡Œã€‚

è·å–æŒ‡å‘ Netlify çš„ codewithhugo.com åŸŸ:

*   å°† Cloudflare çš„ DNS ä¸Šçš„`A`è®°å½•æ›´æ–°åˆ° Netlify çš„è´Ÿè½½å¹³è¡¡å™¨`104.198.14.52`

è®©æˆ‘æƒŠè®¶çš„æ˜¯æ›´æ–°å‘ç”Ÿçš„é€Ÿåº¦æœ‰å¤šå¿«ã€‚DNS æ›´æ–°éœ€è¦æ—¶é—´æ¥ä¼ æ’­ã€‚é™¤äº†è¿™ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„ DNS æ›´æ–°ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„æ˜¯ Cloudflare çš„ä»£ç† DNSã€‚è¿™æ„å‘³ç€å¦‚æœä½ `dig codewithhugo.com`ä½ ä¼šå¾—åˆ°ä¸‹é¢çš„ç­”æ¡ˆéƒ¨åˆ†:

```
;; ANSWER SECTION:
codewithhugo.com. 299 IN A 104.27.140.8
codewithhugo.com. 299 IN A 104.27.141.8 
```

æƒŠå–œï¼ğŸ‰è¿™äº›è®°å½•å¹¶ä¸æŒ‡å‘ Netlify(æˆ– GitHub é¡µé¢)ï¼Œè€Œæ˜¯æŒ‡å‘ Cloudflare(è§[https://www.abuseipdb.com/whois/104.27.140.8](https://www.abuseipdb.com/whois/104.27.140.8)å’Œ[https://www.abuseipdb.com/whois/104.27.141.8](https://www.abuseipdb.com/whois/104.27.141.8))ã€‚ç„¶åï¼ŒCloudflare ä»£ç† Netlify çš„è´Ÿè½½å¹³è¡¡å™¨ã€‚æå¥½çš„ğŸ‘æ•´æ´çš„ğŸ‘ã€‚

## [](#why-use-cloudflare-then)é‚£ä¸ºä»€ä¹ˆè¦ç”¨ Cloudflare å‘¢ï¼Ÿ

> è‡ªä» [@github](https://twitter.com/github?ref_src=twsrc%5Etfw) é¡µé¢å› æ‰€æœ‰é—®é¢˜è€Œåœæ­¢æ„å»ºä»¥æ¥ï¼Œç”±äº [@Netlify](https://twitter.com/Netlify?ref_src=twsrc%5Etfw) çš„`zip upload`åŠŸèƒ½å’Œ [@Cloudflare](https://twitter.com/Cloudflare?ref_src=twsrc%5Etfw) çš„ä»£ç† DNS æœåŠ¡ï¼Œæˆ‘å·²ç»èƒ½å¤Ÿè·å¾—æˆ‘é¢„å®šåœ¨ä»Šå¤©ç›´æ’­çš„åšå®¢å¸–å­ã€‚
> 
> ğŸ‘ğŸ‘
> 
> â€”é›¨æœÂ·è¿ªÂ·å¼—æœ—åˆ‡æ–¯ç§‘([@é›¨æœ _ _ df](https://dev.to/hugo__df))[2018 å¹´ 10 æœˆ 22 æ—¥](https://twitter.com/hugo__df/status/1054350487372349440?ref_src=twsrc%5Etfw)

å½“æˆ‘ç¬¬ä¸€æ¬¡å‘è¡¨[ã€Šå¼€ç¯:Hugo vs Hugo é…ç½®æ–‡ä»¶ã€‹](https://codewithhugo.com/switching-the-lights-on-hugo-vs-hugo-config-files/)çš„æ—¶å€™ï¼Œæˆ‘å¾—åˆ°çš„ä¸€ä¸ªååº”æ˜¯:[â€œä½ ä¼¼ä¹æ²¡æœ‰è§£é‡Šä»»ä½•åœ¨ GitHub é¡µé¢ä¹‹ä¸Šä½¿ç”¨ CloudFlare çš„ç†ç”±ã€‚ä»‹æ„è¯¦ç»†è¯´æ˜å—ï¼Ÿâ€](https://dev.to/lietux/comment/4od9)ã€‚

å¯¹æ­¤æˆ‘å›ç­”è¯´([è§è¿™é‡Œçš„è¯„è®º](https://dev.to/hugo__df/comment/5115)):

*   HTTPS(å¾ˆç¡®å®šå®ƒä»¥å‰ä¸å±äº GitHub é¡µé¢ä¸Šçš„è‡ªå®šä¹‰åŸŸå)
*   åŠ æ‹¿å¤§
*   åŸŸåæœåŠ¡å™¨(Domain Name Server)

å³ä½¿æˆ‘ä¹Ÿä¸è§‰å¾—è¿™å¾ˆæœ‰è¯´æœåŠ›ï¼Œç°åœ¨æˆ‘æƒ³æˆ‘æœ‰ä¸€ä¸ªä»¤äººä¿¡æœçš„ç†ç”±æ¥ä½¿ç”¨ Cloudflare:å¦‚æœæ‚¨åˆ©ç”¨ Cloudflare çš„ä»£ç† DNS + CDN æœåŠ¡ï¼Œæ‚¨å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…æ›´æ¢æ‰˜ç®¡æä¾›å•†ã€‚

æˆ‘è®¤ä¸ºç”±äº Cloudflare çš„ä»£ç†å’Œ Netlify çš„æ‰‹åŠ¨éƒ¨ç½²åœ¨è¿™ç§æƒ…å†µä¸‹æ•‘äº†æˆ‘(å‘¨ä¸€æ˜¯æ–°é—»å‘å¸ƒæ—¥ï¼Œæˆ‘æƒ³åœ¨é‚£é‡Œå‘å¸ƒ`micro`å¸–å­)ï¼Œå®ƒå¸¦æ¥äº†è¶³å¤Ÿçš„ä»·å€¼æ¥è¯æ˜æˆ‘çš„å †æ ˆé€‰æ‹©ã€‚

## [](#the-path-forward)å‰è¿›çš„é“è·¯

[![âœ… Don't switch back to GitHub Pages #codewithhugo](../Images/80e478503f57943775bb9facbf716ba8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Jila0s_G--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://d2mxuefqeaa7sj.cloudfront.net/s_5691CB595260242ACD57C6976EE88A660D47EA1777643C78B1E18DEE1EB217B5_1540484787181_image.png)

ç”±äºæˆ‘åœ¨ Netlify now ä¸Šæ‰˜ç®¡æˆ‘çš„é™æ€ç½‘ç«™([è§â€œéƒ¨ç½²é€‰é¡¹:Netlify+Dokku on digital ocean vs now . shï¼ŒGitHub Pagesï¼ŒHeroku å’Œ AWSâ€](http://Deployment%20options:%20Netlify%20+%20Dokku%20on%20DigitalOcean%20vs%20now.sh,%20GitHub%20Pages,%20Heroku%20and%20AWS))ï¼Œæˆ‘å·²ç»å†³å®šä¹Ÿè®¸æŠŠ codewithhugo.com[æ°¸ä¹…åœ°æ”¾åœ¨é‚£é‡Œæ˜¯ä¸ªå¥½ä¸»æ„ã€‚æŠ±æ­‰ GitHub é¡µé¢ã€‚](https://codewithhugo.com)

> å¦‚æœä½ æƒ³å°†ä¸€ä¸ª HTML [@github](https://twitter.com/github?ref_src=twsrc%5Etfw) Pages ç«™ç‚¹è¿ç§»åˆ° [@Netlify](https://twitter.com/Netlify?ref_src=twsrc%5Etfw) è¿™é‡Œæœ‰ä¸€ä¸ªé…ç½®ç¤ºä¾‹(TLï¼›dr:ä½¿ç”¨å‘å¸ƒç›®å½•" ")ã€pic.twitter.com/pDvlMXnCoc T4ã€‘
> 
> â€”é›¨æœÂ·è¿ªÂ·å¼—æœ—åˆ‡æ–¯ç§‘([@é›¨æœ _ _ df](https://dev.to/hugo__df))[2018 å¹´ 10 æœˆ 23 æ—¥](https://twitter.com/hugo__df/status/1054679262584823808?ref_src=twsrc%5Etfw)

ä¸‹é¢æ˜¯ä¸€ä¸ªå°† GitHub ä¸Šæ‰˜ç®¡çš„ç«™ç‚¹(å¯ä»¥ä½œä¸º GitHub Pages ç«™ç‚¹)éƒ¨ç½²åˆ° Netlify çš„é…ç½®ç¤ºä¾‹:

[![Example config to deploy a GitHub Pages site from GitHub to Netlify](../Images/f98181179411797a9142a3e73f246811.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--zBS7lhMa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://d2mxuefqeaa7sj.cloudfront.net/s_5691CB595260242ACD57C6976EE88A660D47EA1777643C78B1E18DEE1EB217B5_1540486742344_DqL5IruWkAAlwyF.jpg)

å¾ˆç®€å•ï¼Œä½¿ç”¨`Publish Directory: .`å‘å¸ƒæ ¹ç›®å½•ï¼Œä¸è¦è®¾ç½®æ„å»ºå‘½ä»¤ã€‚

GitHub Pages å¤ªæ£’äº†ï¼Œæˆ‘çš„æ¼”ç¤ºå¯èƒ½è¿˜åœ¨é‚£é‡Œã€‚ä¸­æ–­ä¼šå‘ç”Ÿåœ¨æ¯ä¸ªäººèº«ä¸Šï¼Œä½†æ˜¯æ­£å¦‚ä»–ä»¬çš„äº‹ååˆ†ææ‰€è¡¨æ˜çš„ï¼ŒGitHub ä¸æ˜¯ä¸€ä¸ªé™æ€æ‰˜ç®¡æœåŠ¡ğŸ™‚ã€‚Netlify çš„æ ¸å¿ƒä¸šåŠ¡ä¸»å¼ æ˜¯é™æ€ç½‘ç«™æ‰˜ç®¡å’Œéƒ¨ç½²ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆä»ç°åœ¨å¼€å§‹,[å’Œ Hugo](https://codewithhugo.com) çš„ä»£ç å°†ä¼šå­˜åœ¨ğŸ‘ã€‚

å®‰ä¸œå°¼Â·åå»·