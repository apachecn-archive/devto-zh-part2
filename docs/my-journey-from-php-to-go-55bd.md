# 我从 PHP 到 Go 的旅程

> 原文：<https://dev.to/biros/my-journey-from-php-to-go-55bd>

作为介绍，我告诉你，我用 Go 才一个星期。但是我认为一个新人的意见对社区和其他新手来说是有价值的。

让我也告诉你，我不打算退出 PHP。这是我的主要语言。但是我需要学习一门新的语言，改变思维模式，而围棋是我最感兴趣的一门语言。

它很简单，接近系统，非常适合基于云的应用程序。尽管存在一些用于 Web 开发的框架，但这并不是 Go 的哲学。

是工匠的语言！

## 构建我自己的(dis)集成开发环境

作为一名有经验的(PHP)开发人员，我的目标是找到一种在 Go 中像在 PHP 中一样高效的方法。因此，我试图建立一个高效的开发环境。以下是基本情况:

*   具有林挺、语法突出显示、代码格式化、代码浏览、大纲视图、树视图的编辑器
*   有单元测试观察者的术语
*   我的应用程序的运行实例的术语
*   使用 git 的术语

关于编辑器，作为一个 **Atom** 的爱好者，我先试了一下。插件 **go-plus** 和 **ide-go** 看起来很有趣，但不幸的是我遇到了一个问题，阻止我使用它。
所以我用 Go 插件尝试了 **Intellij Ultimate** ，但是在尝试构建、运行或测试我的应用程序时，我遇到了权限问题。
最后，我使用了我的老式 vim**和 vim-go** 插件。这是唯一一款直接开箱即用的软件，无需任何配置。

然后，我使用 **tmux** + **tmuxp** 为单元测试、运行应用程序和 git 命令创建一个带有 vim 和 3 个术语的定制布局。

## 组织我的项目

下一步是从头启动项目，并为可维护的代码库奠定基础。我未来的应用程序是一个相当简单的数据库驱动的 API，使用其他 API。所以对于 Go，我应该得到一个独特的可执行文件。

我习惯于将我的代码拆分如下:

*   一个*控制器*文件夹
*   一个*业务*文件夹
*   一个*型号*的文件夹(又名 *DTO*
*   一个*映射器*文件夹(又名*刀*
*   可选的一个*共享文件夹*
*   一份*index.php*的文件

目前，我打算在我的 Go 项目中使用相同的组织，但是我对 Go 文件只是分割代码的一种方式，而不是将它与代码的其余部分隔离开来这一事实感到有点困惑。我的意思是，在 PHP 或任何其他 OOP 语言中，如果我把一个类放在一个文件中，它会与其他类隔离(除了公共属性和函数)。在 Go 中，如果我在一个给定的文件夹中把我的代码分成两个文件，它会被编译器重新组合，就像它是一个文件一样。这是否意味着我需要为我的每个文件创建子包？我不这么认为，但我回答还为时过早。

## 作曲 VS 围棋模块

虽然 PHP 自 2012 年以来提供了一个很棒的依赖管理器( [composer](https://getcomposer.org/) ),但我的第一印象是，它对 Go 来说没那么简单。

我听说过 **godep** 但是它是一个第三方工具，而且它似乎没有像 Composer for PHP 那样被广泛采用(也许我错了)。我的一个对围棋很有经验的同事告诉我关于**围棋模块**。它在 1.11 中仍处于试验阶段，但应该会在 1.12 中准备好，所以我决定给它一个机会。

## 范式转换

我从事 OOP 开发(PHP，Java)已经 15 年了，所以切换到 Go 这样的语言并不容易。最困难的是忘记所有的类和对象。相反，我可以使用**结构**和**接口**。起初这很麻烦，但几天后，我越来越习惯了。而且去掉构造函数、getters 和 setters 甚至是一件好事。

另一个突破性的变化是关于异步处理。在传统的 PHP 中，所有都是同步处理的。缺点是没有并行性，您可能会浪费大量时间等待 I/O，但优点是它使您的代码更具可读性和直观性。在 Go 中，就像在 JavaScript 等其他异步语言中一样，你可以通过做某些事情来利用主机的所有资源，而其他一些事情则在等待，例如等待 API 响应。

因此，我开始玩 **goroutines** 和**频道**...

## 捡合适的库

最后，我不得不找一些库来帮我处理一些基本的东西:

*   [spf13/viper](https://github.com/spf13/viper) 的配置管理器
*   [uber-go/zap](https://github.com/uber-go/zap) 的日志程序
*   [大猩猩/mux](https://github.com/gorilla/mux) 的路由器
*   [satori/go.uuid](https://github.com/satori/go.uuid) 的 uuid 发电机

* * *

在这里！几个月后，当我有更多的经验和反馈时，我会发表一篇新文章。

欢迎任何建议给我这样的新手:)

感谢阅读。