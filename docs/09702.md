# CodeceptJS:æµ‹è¯•å˜å¾—éå¸¸æœ‰è¶£ğŸ˜

> åŸæ–‡:[https://dev.to/droidmakk/codeceptjs-testing-made-real-fun-5f8p](https://dev.to/droidmakk/codeceptjs-testing-made-real-fun--5f8p)

æ‰€ä»¥æˆ‘å¬è¯´äº†è¿™ä¸ªå«åš [CodeceptJS](https://codecept.io/) çš„æ–°å·¥å…·ï¼Œå®ƒå·²ç»å­˜åœ¨ä¸€æ®µæ—¶é—´äº†ã€‚æˆ‘ä»¥ä¸ºå®ƒä¼šç±»ä¼¼äº*æœ¨å¶å¸ˆ*æˆ–*ç¡’*

ç„¶åæˆ‘æµè§ˆäº†å®ƒçš„æ–‡æ¡£ï¼Œæ–‡æ¡£ä¸­è¯´ä½ å¯ä»¥è½»æ¾åœ°åˆ‡æ¢æ¡†æ¶è€Œä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…åªéœ€è¦æä¾›ç‰¹å®šçš„é…ç½®å°±å¯ä»¥åœ¨å¤šç§æ¡†æ¶å’Œæµè§ˆå™¨ä¸Šè¿è¡Œå®ƒã€‚å®ƒå¯ä»¥è¿›è¡Œ API æµ‹è¯•ï¼Œä¸ç®¡æœ‰æ²¡æœ‰æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€‚æµ‹è¯•æ‚¨çš„ android åº”ç”¨ç¨‹åºã€‚

ğŸ¤”è¿™å¾ˆæœ‰æ„æ€ã€‚

PS:å¦‚æœä½ è¯»å¾—æ›´å¤š(æ–‡æ¡£),äº‹æƒ…ä¼šæ¯”ä½ çœ‹åˆ°çš„æ›´å¤æ‚ğŸ‘€ã€‚

> æœ€åï¼Œæ‚¨å°†çŸ¥é“å¦‚ä½•ä½¿ç”¨ Codecept JS ä¸ºæ‚¨çš„ web åº”ç”¨ç¨‹åºâœ…è¿è¡Œä¸€ä¸ªåŸºæœ¬çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚

æ‰€ä»¥æˆ‘å†³å®šäº²è‡ªåŠ¨æ‰‹ğŸ‘ã€‚ä¸ºäº†å¼€å§‹ï¼Œæˆ‘å¿…é¡»è¿è¡Œä¸€äº›å…ˆå†³æ¡ä»¶æ£€æŸ¥ã€‚åŸºæœ¬çš„äº‹æƒ…æ˜¯æˆ‘åº”è¯¥å®‰è£…**èŠ‚ç‚¹**å’Œ **npm/yarn** ã€‚

`node -v`
`npm -v`
T2ã€‘

ç„¶åå®‰è£…åä¸º **selenium-standalone** å’Œ **webdriverio** çš„åŒ…ä½œä¸ºå…¨å±€åŒ…

> å¯¹äºçº±çº¿
> `yarn global add selenium-standalone webdriverio`
> 
> å¯¹äº npm
> `npm install --global selenium-standalone webdriverio`

[![Selenium and webdriverio installation](../Images/4d9673db86f6ceb4b5898aab39b89ffd.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--0RhUISM2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/4k3LUeN.png)

ç°åœ¨æˆ‘ä»¬å°†å…è®¸ selenium-standalone å®‰è£…å®ƒéœ€è¦çš„ä¾èµ–é¡¹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚

`selenium-standalone install`

ç°åœ¨ï¼Œè®©æˆ‘ä»¬å®‰è£…æˆ‘ä»¬åœ¨è¿™é‡Œçš„ç›®çš„ï¼ğŸ™‡

> å¯¹äºçº±çº¿
> `yarn global add codeceptjs`
> 
> å¯¹äº npm
> `npm install --global codeceptjs`

ç„¶ååœ¨æ‚¨çš„ä¸»ç›®å½•æˆ–ä»»ä½•é¡¹ç›®ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚

`mkdir google-logintest`
T1ã€‘

ç°åœ¨è®©æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªæµ‹è¯•æ ·æœ¬ã€‚

`codeceptjs init`

ä¸€æ—¦ä½ è¿™æ ·åšäº†ï¼Œä½ å°†é€šè¿‡ä¸€ä¸ªäº’åŠ¨çš„é—®é¢˜é›†ã€‚
é¦–å…ˆ

æ‚¨å°†åœ¨è¿™é‡ŒæŒ‡å®šæµ‹è¯•æ–‡ä»¶çš„ä½ç½®ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†ç¡®å®šå‘½åçº¦å®šã€‚
[![Codeceptjs init](../Images/a29f7ca4c6caed1ee5b02337f4ff34bc.png)T3ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--1UPPvJSA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/gkT6kmu.png)

ç°åœ¨ï¼Œæ‚¨éœ€è¦æŒ‡å®šæ‚¨å°†åœ¨åå°ä½¿ç”¨çš„é©±åŠ¨ç¨‹åºã€‚

> CodeceptJS ç¾å¦™ä¹‹å¤„åœ¨äºï¼Œæ‚¨å¯ä»¥å¹¶è¡Œæˆ–é¡ºåºåœ°åœ¨å…·æœ‰å¤šç§é…ç½®çš„å¤šä¸ªé©±åŠ¨ç¨‹åºä¸Šæ‰§è¡Œï¼Œåªéœ€ä¸€ç‚¹ç‚¹å®šåˆ¶ï¼Œæ— éœ€é¢å¤–çš„ä»£ç ğŸ˜‡ã€‚

æˆ‘ä»¬ç°åœ¨å°†ä½¿ç”¨åŸºäº **selenium** çš„ **webdriverio** ã€‚

[![Select Driver](../Images/8e1d9a057d204766a691cfed2c733ca3.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--nWQc8uWX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/v9QKDqN.png)

ç°åœ¨è¾“å‡ºçš„ä½ç½®ã€‚åœ¨æ‰§è¡Œæ‚¨çš„ä»£ç æ—¶ï¼Œå¦‚æœä»»ä½•ç‰¹å®šçš„å‘½ä»¤å¤±è´¥ï¼Œåˆ™æ‰§è¡Œæ—¶çš„å±å¹•æˆªå›¾ä¼šè¢«è·å–å¹¶ä¿å­˜åˆ°è¿™ä¸ªç‰¹å®šçš„ç›®å½•ä¸­ï¼Œå¤±è´¥çš„æ­¥éª¤ä½œä¸ºæ˜ åƒçš„åç§°ã€‚
ç”œçš„æ²¡é”™ï¼

[![Location of outputs](../Images/9cb6c3deeb8136387fca66ef14d02273.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--nrum7RUW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/Pq16WHx.png)

ç°åœ¨ï¼Œè¿™å°†æ˜¯æˆ‘ä»¬è¦æ‰©å±•æ¥ç¼–å†™ä»£ç çš„å¯¹è±¡ã€‚
å½“æˆ‘ä»¬å¼€å§‹ç¼–ç æ—¶ï¼Œä½ ä¼šæ˜ç™½é‚£æ˜¯ä»€ä¹ˆã€‚

[![Extend with custom steps](../Images/3e9f2fc38f6678e8f06729b78fac2aab.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--K_yAP4gF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/p64pMhY.png)

åœ¨è¿™é‡Œï¼Œæ‚¨å°†æŒ‡å®šæœ¬åœ°åŒ–ã€‚æˆ‘ä»¬ç°åœ¨å°±ç”¨è‹±è¯­å§ï¼

[![Localization](../Images/a29e7c0d51ecdf44d39457d9e1d07c5b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--9v-iQOzx--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/lUJmWtu.png)

è¿™æ˜¯æˆ‘ä»¬å°†æ”¾ç½®è‡ªå®šä¹‰æ­¥éª¤çš„æ­¥éª¤æ–‡ä»¶ã€‚

[![Custom steps location](../Images/9fe9dd61900ac8942d54d78540cfc659.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--I7iZobdM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/7oJE55u.png)

ç°åœ¨æ˜¯æˆ‘ä»¬è¦æµ‹è¯•çš„ç½‘ç«™çš„ URLã€‚æˆ‘ä»¬å°±ç”¨*[https://google.com](https://google.com)T3ã€‘*

[![URL of Site](../Images/c0c76b7b77a2e225fa23cf2138dc26ff.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--uyUf2dzf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/xG1Rrbx.png)

æœ€åæ˜¯æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„æµè§ˆå™¨ã€‚ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨ chrome
åªéœ€æŒ‰ä¸‹`enter`é”®å¹¶æ¥å—é»˜è®¤è®¾ç½®ã€‚

[![Select Browser](../Images/1f7779fc456b0e1357c60bf7bcbdbe91.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--2f50ERmL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/D8cZYHk.png)

è¯·æ³¨æ„ï¼Œä¸€æ—¦æ‚¨å®Œæˆäº†è®¾ç½®ï¼Œæ‚¨çš„ç›®å½•å°†å¦‚ä¸‹æ‰€ç¤ºã€‚ğŸ‘‡

[![Directory tree](../Images/1ac75da60322947a9bf0961832cd61f8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Nb4JfWwX--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/Hynt5BG.png)

å¦‚æœä½ çœ‹ä¸€ä¸‹ **codecept.json** æ–‡ä»¶ï¼Œå®ƒå°†åŒ…å«æˆ‘ä»¬åœ¨ä¸Šè¿°æ­¥éª¤ä¸­æŒ‡å®šçš„é…ç½®ã€‚

[![codcept.json](../Images/00d32c26cede10e946324b23d120bf0a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--KbzlORzo--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/Jzi7DxJ.png)

âœ”ï¸ï¼Œèˆå°å·²ç»æ­å»ºå¥½äº†ï¼Œæˆ‘ä»¬å°†å¼€å§‹æµ‹è¯•ã€‚Codecept JS æä¾›äº†ä¸€ä¸ªä½¿ç”¨ CLI æœ¬èº«ç”Ÿæˆæµ‹è¯•çš„ç‰¹æ€§ã€‚

`codeceptjs gt`

å¦ä¸€ä¸ªäº¤äº’å¼èœå•...ç°åœ¨æˆ‘ä»¬å°†æ–‡ä»¶åå‘½åä¸º login_googleã€‚

[![Login Google](../Images/423cb77661d3c94275854c383396aef0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--H-GDBktC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/up6u3EE.png)

è®©æˆ‘ä»¬ä¿ç•™é»˜è®¤çš„ç‰¹æ€§åç§°(**ç™»å½• google** )ã€‚

[![Feature Name](../Images/6b448ec6136472c3cf8b8396d930dcda.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--feyvvFSq--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/4FoommA.png)

ç°åœ¨ï¼Œè¿™å°†ä¸ºæˆ‘ä»¬ç”Ÿæˆå¦‚ä¸‹æµ‹è¯•æ–‡ä»¶ã€‚çœ‹èµ·æ¥åƒè¿™æ ·ã€‚

[![Login Google file](../Images/d1d2b88ba7570c7e9ba9a7cc564fe09b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--_TgX1T2b--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/ytKOWqu.png)

è®©æˆ‘ä»¬ç°åœ¨åšä¸€äº›ä»£ç ğŸ™‡ã€‚

å› æ­¤ï¼Œç¼–è¾‘æ‚¨ç”Ÿæˆçš„æµ‹è¯•æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚
ç”¨ä½ çš„*ç”µå­é‚®ä»¶ id* å’Œ*å¯†ç *æ›¿æ¢æ ‡è®°çš„æ ‡ç­¾

[![Code](../Images/7a5596ab9e27c932b0c8bc40d8e98687.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--LbaPOwE7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/KYmimFS.png)

å¦‚æœä½ è¯•ç€ä¸€è¡Œä¸€è¡Œçš„è§£ç ã€‚
âœ”ï¸ `I.amOnPage('/')`ä½ åœ¨é¡µé¢ä¸Š[https://google.com](https://google.com)T10ã€‘âœ”ï¸`I.click('Sign in')`æˆ‘æ­£åœ¨ç‚¹å‡»ä¸€ä¸ªåä¸º**çš„æŒ‰é’®ç™»å½•**t13ã€‘âœ”ï¸`I.fillField('xpath of email field','your email-id')`é”®å…¥æˆ‘çš„ç”µå­é‚®ä»¶ id
âœ”ï¸ `I.click('xpath to next button below')`ç‚¹å‡»æ–‡æœ¬å­—æ®µä¸‹é¢çš„**ä¸‹ä¸€æ­¥**æŒ‰é’®
âœ”ï¸ `I.wait('2')`æˆ‘æ­£åœ¨ç­‰å¾…ä¸¤ç§’é’Ÿï¼Œç­‰å¾…é¡µé¢åŠ è½½ã€‚
âœ”ï¸ `I.fillField('xpath ot password field','your password')`å¡«å†™æˆ‘çš„å¯†ç 
âœ”ï¸ `I.click('xpath to next')`æˆ‘ç‚¹å‡»**ä¸‹ä¸€æ­¥**æŒ‰é’®ç™»å½•ã€‚

> ä½ å¯ä»¥åœ¨å¼€å‘è€…å·¥å…·**ã€F12ã€‘**
> ä¸­å³é”®ç‚¹å‡»å…ƒç´ ä»£ç æ¥è·å¾—å…ƒç´ çš„ x è·¯å¾„ğŸ‘‰å¤åˆ¶ğŸ‘‰å¤åˆ¶ XPath

ç°åœ¨ä¿å­˜å¹¶é€€å‡º`[ESC] + :x`(å¦‚æœåœ¨ **VIM** )ã€‚

æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯å¹¶è¿è¡Œ`selenium-standalone start`
ç°åœ¨ä»ä½ çš„æµ‹è¯•ç›®å½•è¿è¡Œ`codceptjs run`

æˆåŠŸæ‰§è¡Œåï¼Œæ‚¨å°†è·å¾—å¦‚ä¸‹å†…å®¹ã€‚

[![output](../Images/43f0591f49836b98e68dc6c3f16f5a3e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--EqNnZ-M5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/UhLoQGI.png)

ğŸ‰æ­å–œä½ ã€‚ç°åœ¨ï¼Œæ‚¨å·²ç»ä½¿ç”¨ codeceptjs å®Œæˆäº†ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•ğŸ‘,

é¦–ä»¶...è¯„è®ºå®¶éå¸¸æ¬¢è¿âœŒï¸ï¼