# çœ‹ï¼Œå¦ˆå¦ˆï¼Œæ²¡æœ‰åœˆåœˆï¼

> åŸæ–‡:[https://dev.to/chrisvasqm/look-ma-without-loops-3fff](https://dev.to/chrisvasqm/look-ma-without-loops-3fff)

<center>*Cover image by [@jordaneil](https://unsplash.com/@jordaneil) from [Unsplash](https://unsplash.com/)*</center>

* * *

## [](#before-you-read)è¯»ä¹‹å‰

è¯»è€…å…ˆç”Ÿ/å¥³å£«ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨ç†Ÿæ‚‰ä»¥ä¸‹æ¦‚å¿µï¼Œä»¥ä¾¿å…¨é¢ç†è§£æœ¬æ–‡:

1.  åŠŸèƒ½
2.  ç­çº§
3.  ç›®æ ‡
4.  å±æ€§/å­—æ®µ/æˆå‘˜å˜é‡
5.  å¾ªç¯(`for`ã€`while`ã€`for-each`)

* * *

åœ¨æˆ‘å¤§å­¦æœ€åˆçš„å‡ å ‚ç¼–ç¨‹è¯¾ä¸Šï¼Œè€å¸ˆå‘æˆ‘ä»‹ç»äº†ä¸€ä¸ªç»ƒä¹ /æŒ‘æˆ˜ï¼Œä»–è¯´:

> ä»å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„æŸä¸€ç§‘ç›®çš„æ‰€æœ‰å­¦ç”Ÿæˆç»©ä¸­ï¼Œæ‰¾å‡ºé«˜äºå’Œä½äºå¹³å‡å€¼çš„äººæ•°

ä»–ç»™äº†æˆ‘ä»¬å¦‚ä½•å¼€å§‹çš„çº¿ç´¢ï¼Œå› ä¸ºä»–æœ€è¿‘å‘æˆ‘ä»¬å±•ç¤ºäº†å˜é‡ã€å‡½æ•°å’Œå¾ªç¯ã€‚

æˆ‘é¦–å…ˆæƒ³åˆ°çš„æ˜¯:

> â€œæˆ‘ä»¬å¯ä»¥ä¸æ—¶åœ°ä½¿ç”¨ä¸€äº› for-each å¾ªç¯...ç­‰ç­‰ï¼ä¸ã€‚è®©æˆ‘ä»¬ä¸è¦ä½¿ç”¨ for/while å¾ªç¯ï¼â€

å’Œä»»ä½•è®¤ä¸ºå”¯ä¸€å­˜åœ¨çš„ä¸œè¥¿æ˜¯ JVM çš„ç°ä»£å¼€å‘äººå‘˜ä¸€æ ·ï¼Œæˆ‘å°è¯•åœ¨ Kotlin ä¸­è¿™æ ·åšğŸ¤“

(ä»€ä¹ˆï¼Ÿä½ ä»¥ä¸ºæˆ‘ä¼šç”¨ Java å—ï¼ŸåŸè°…ä½ ï¼)

## [](#the-plan)è®¡åˆ’

åƒä»»ä½•åƒç¦§ä¸€ä»£ä¸€æ ·ï¼Œæˆ‘æ€»æ˜¯å¸¦ç€è´­ç‰©æ¸…å•å»æ‚è´§åº—ï¼Œè¿™æ ·æˆ‘å°±ä¸ä¼šå¿˜è®°ä»»ä½•ä¸œè¥¿ã€‚é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬è®¡åˆ’ä¸€ä¸‹è¿™ä¸ªç»ƒä¹ éœ€è¦åšäº›ä»€ä¹ˆ:

1.  æˆ‘ä»¬éœ€è¦ä¸€ç§åœ¨ä»£ç ä¸­è¡¨ç¤º`Student`çš„æ–¹æ³•ã€‚ç®€å•æ¥è¯´ï¼Œå£°æ˜ä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå±æ€§çš„`class`:`name`å’Œ`score`ã€‚
2.  ç¨åï¼Œæˆ‘ä»¬å°†éœ€è¦æŠŠå®ƒä»¬ä¸­çš„æ¯ä¸€ä¸ªå­˜å‚¨åœ¨æˆ‘ä»¬å°†è¦æ“ä½œçš„æ•°ç»„ä¸­ã€‚
3.  æˆ‘ä»¬éœ€è¦è®¡ç®—æ‰€æœ‰è¿™äº›çš„`average`ã€‚
4.  ç„¶åæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå€¼ä¸æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ª`Student`è¿›è¡Œæ¯”è¾ƒï¼Œæ¥è®¡ç®—æœ‰å¤šå°‘ä¸ªåœ¨`average`ä¹‹ä¸Šå’Œä¹‹ä¸‹ã€‚

## [](#the-execution)æ‰§è¡Œ

### [](#making-the-raw-student-endraw-class)åˆ¶ä½œ`Student`ç±»

ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬å¯ä»¥ï¼(ä¸€æ—¦ä½ [æœ€ç»ˆç†è§£äº†ä»€ä¹ˆæ˜¯ç±»](https://dev.to/chrisvasqm/how-i-finally-understood-what-a-class-is--24pl)ï¼Œå®ƒå®é™…ä¸Šä¼šä½¿æˆ‘ä»¬çš„ä»£ç æ›´å®¹æ˜“é˜…è¯»)

ç°åœ¨ï¼Œè®°ä½:æˆ‘ä»¬éœ€è¦æœ‰ä¸¤ä¸ªå±æ€§:`name`å’Œ`score`ã€‚ä»–ä»¬çš„æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ

æ˜¯çš„ï¼Œä½ å®Œå…¨æ­£ç¡®ï¼`name`å°†æˆä¸º`String`ï¼Œ`score`å°†æˆä¸º`Int`ã€‚

ä¸‹é¢æ˜¯ä»£ç çš„æ ·å­:

```
class Student(val name: String, val score: Int) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*æ¼‚äº®ï¼*

> *å¯¹äºé‚£äº›ä¸ç†Ÿæ‚‰`val`å…³é”®å­—çš„äººæ¥è¯´ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªå±æ€§æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥å®ƒçš„å€¼åªèƒ½è¢«è¯»å–ï¼Œåœ¨å®ƒè¢«è®¾ç½®ä¹‹åï¼Œä»»ä½•äººéƒ½ä¸èƒ½ä¿®æ”¹å®ƒã€‚*

### [](#making-the-array-of-students)åˆ¶é€ å­¦ç”Ÿä¹‹é˜µ

åœ¨è¿™ä¸€æ­¥ï¼Œæˆ‘å°†ä½¿ç”¨ç§‘ç‰¹æ—çš„â€œå·«æ¯’é­”æ³•â€è®©æˆ‘ä»¬çš„`Array<Student`å‘ç”Ÿï¼Œå®ƒçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:

```
fun main(args: Array<String>) {
    val students = arrayOf(
            Student("Chris", 80),
            Student("Mark", 67),
            Student("Joseph", 98),
            Student("Carl", 74),
            Student("Katherine", 86)
    )
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*ä¹Œæ‹‰æ‹‰ï¼*

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†æ ‡å‡†åº“æä¾›çš„`arrayOf()`å‡½æ•°ï¼Œå®ƒå……å½“äº†ä¸€ä¸ª[è¯­æ³•ç³–](https://dev.to/chrisvasqm/its-just-syntactic-sugar-apo)ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¼ å…¥ä¸€å †æˆ‘ä»¬å°†ä½¿ç”¨çš„`Student`å¯¹è±¡(å¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥éšæ„ä¿®æ”¹ä»»ä½•`names`æˆ–`scores`)ã€‚

æ³¨æ„ï¼Œæˆ‘ä»¬ä¸å¿…ä¸ºæˆ‘ä»¬çš„`Array<T>`æŒ‡å®šæ•°æ®ç±»å‹ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯ä»¥ä»æˆ‘ä»¬ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°çš„æ¯ä¸ªå‚æ•°ä¸­æ¨æ–­å‡ºå®ƒã€‚

### [](#finding-the-average)å¯»æ‰¾å¹³å‡å€¼

è¿™å°±æ˜¯ä¹è¶£æ‰€åœ¨ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨ä»»ä½•`for` / `while` / `for-each`å¾ªç¯ï¼Œæˆ‘ä»¬å°†ä¾èµ–ä¸€äº›é«˜é˜¶å‡½æ•°ã€‚

#### [](#introducing-raw-sumby-endraw-)ä»‹ç»...`sumBy {...}`

è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªè¡¨è¾¾å¼(æˆ–è€…æ›´å…·ä½“åœ°è¯´æ˜¯ Lambda è¡¨è¾¾å¼),è¯¥è¡¨è¾¾å¼å°†ç”¨äºåŸºäºè¯¥è¡¨è¾¾å¼è®¡ç®—å•ä¸ªå€¼ã€‚

è€¶ï¼Œè€¶ï¼Œè€¶...æˆ‘çŸ¥é“ã€‚å¬èµ·æ¥çœŸçš„å¾ˆæ— èŠã€‚

æˆ‘ä»¬æ¥çœ‹çœ‹:

```
students.sumBy { it.score } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬åœ¨è¿™é‡Œæ‰€åšçš„æ˜¯è¿­ä»£æˆ‘ä»¬çš„`students`æ•°ç»„ä¸­çš„æ¯ä¸ªä¸ªä½“`Student`(æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå®ƒâ€)ï¼Œç„¶ååªå–å®ƒä»¬çš„`score`ï¼Œç„¶åå°†å®ƒä»¬åŠ åœ¨ä¸€èµ·å¾—åˆ°**ä¸€ä¸ªå•ä¸€å€¼**ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªæ¥è®¡ç®—`average`ã€‚

ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦å°†æ‰€æœ‰çš„åˆ†æ•°åŠ åœ¨ä¸€èµ·ï¼Œè¿˜è¦é™¤ä»¥`students`çš„æ•°é‡ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•åœ°è°ƒç”¨`students.size`æ¥è·å¾—è¯¥å€¼ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œè¿™å°†ä¸ºæˆ‘ä»¬æä¾›`5`ã€‚

å¦‚æœæˆ‘ä»¬æŠŠå®ƒä»¬æ”¾åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ç±»ä¼¼äº:

```
 fun calculateAverageScore(students: Array<Student>) = students.sumBy { it.score } / students.size 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œæˆ‘ä½¿ç”¨äº†ä¸€ä¸ªå‡½æ•°ï¼Œä»¥ä¾¿ä¸ºæˆ‘ä»¬å°†è¦åšçš„æ“ä½œæ·»åŠ æ›´å¤šçš„å«ä¹‰ã€‚

å¦‚æœä½ æƒ³çŸ¥é“ï¼Œå¦‚æœæˆ‘ä»¬çš„å‡½æ•°åªæœ‰ä¸€è¡Œé‚£ä¹ˆé•¿ï¼Œæˆ‘ä»¬å¯ä»¥å»æ‰èŠ±æ‹¬å·(`{`ï¼Œ`}`)å’Œ`return`å…³é”®å­—ã€‚

ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬å¯é çš„`calculateAverageScore()`å‡½æ•°æ¥å¸®åŠ©æˆ‘ä»¬ï¼Œå°±åƒè¿™æ ·:

```
fun main(args: Array<String>) {
    val students = arrayOf(
            Student("Chris", 80),
            Student("Mark", 67),
            Student("Joseph", 98),
            Student("Carl", 74),
            Student("Katherine", 86)
    )

    val average = calculateAverageScore(students)
}

private fun calculateAverageScore(students: Array<Student>) = students.sumBy { it.score } / students.size 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*ç‰›é€¼ï¼*

### [](#how-many-are-above-average)æœ‰å¤šå°‘æ˜¯ä¸­ä¸Šæ°´å¹³ï¼Ÿ

ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`filter {...}`å‡½æ•°ã€‚

ä¸`sumBy {...}`ç±»ä¼¼ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸€äº›äººæ‰€è°“çš„**è°“è¯**ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿”å›`Boolean` ( `true`æˆ–`false`)å€¼çš„è¡¨è¾¾å¼ã€‚

åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·:

```
val aboveAverage = students.filter { it.score > average } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯`filter`æœ‰ä¸€ç‚¹ç‰¹åˆ«ï¼Œå®ƒä¸ä¼šè¿”å›å•ä¸ªå€¼ã€‚å®ƒå®é™…ä¸Šä¼šè¿”å›ä¸€ä¸ªåˆ†æ•°é«˜äºå¹³å‡å€¼çš„æ–°æ•°ç»„`Students`ã€‚ä½†æˆ‘ä»¬åªéœ€è¦æ•°ä¸€æ•°æœ‰å¤šå°‘ã€‚

è¿˜è®°å¾—æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨`students.size`å±æ€§å—ï¼Ÿ

Oh yeeeeeaaaah!

æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨`filter`å—ä¹‹åä½¿ç”¨:

```
val aboveAverage = students.filter { it.score > average }.size 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

_ å¤ªæ£’äº†ï¼

### [](#how-many-are-below-average)ä½äºå¹³å‡æ°´å¹³çš„æœ‰å¤šå°‘ï¼Ÿ

æˆ‘æƒ³ä½ å¯èƒ½å·²ç»çŸ¥é“æ€ä¹ˆåšäº†...ä½œä¸ºä¸€åä¼˜ç§€çš„è½¯ä»¶å¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›¸ä¿¡è‡ªå·±çš„æœ¬èƒ½ï¼Œç›´æ¥å¤åˆ¶/ç²˜è´´æˆ‘ä»¬ä¹‹å‰çš„ä»£ç 

```
val belowAverage = students.filter { it.score < average }.size 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬å¿…é¡»æ”¹å˜ä»€ä¹ˆï¼Ÿ

*   `aboveAvereage`åˆ°`belowAverage`ã€‚
*   `<`æ“ä½œç¬¦çš„`>`æ“ä½œç¬¦ã€‚

å°±æ˜¯è¿™æ ·ï¼

## [](#the-final-test)æœ€åçš„è€ƒéªŒ

ç°åœ¨æˆ‘ä»¬åªéœ€è¦è¯•ä¸€è¯•ã€‚ä½†æ˜¯ï¼ä¸ºäº†æ˜¾ç¤ºç»“æœï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰åšä»»ä½•äº‹æƒ…...

è®©æˆ‘ä»¬é€šè¿‡åœ¨æœ«å°¾æ·»åŠ è¿™ä¸ªæ¥è§£å†³è¿™ä¸ªé—®é¢˜:

```
println("With an average of $average, there are $aboveAverage students above average and $belowAverage below it.") 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

*å¤ªå¥½äº†ï¼*

å¦‚æœæ‚¨å¯†åˆ‡å…³æ³¨æ¯ä¸€æ­¥ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹:

```
fun main(args: Array<String>) {
    val students = arrayOf(
            Student("Chris", 80),
            Student("Mark", 67),
            Student("Joseph", 98),
            Student("Carl", 74),
            Student("Katherine", 86)
    )

    val average = calculateAverageScore(students)

    val aboveAverage = students.filter { it.score > average }.size

    val belowAverage = students.filter { it.score < average }.size

    println("With an average of $average, there are $aboveAverage students above average and $belowAverage below it.")
}

private fun calculateAverageScore(students: Array<Student>) = students.sumBy { it.score } / students.size 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶ä¸”è¾“å‡ºåº”è¯¥æ˜¯:

```
With an average of 81, there are 2 students above average and 3 below it. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

## [](#recap)é‡è¿°:

æˆ‘ä»¬é€šè¿‡ä½¿ç”¨ Kotlin æ ‡å‡†åº“æä¾›çš„`filter`å’Œ`sumBy`é«˜é˜¶å‡½æ•°ï¼Œåœ¨æˆ‘ä»¬å®šåˆ¶çš„ Lambda è¡¨è¾¾å¼çš„å¸®åŠ©ä¸‹ï¼Œé¿å…äº†ä»»ä½•å¸¸è§„å¾ªç¯ï¼Œä½¿æˆ‘ä»¬çš„ä»£ç éå¸¸å¹²å‡€ç®€æ´ã€‚

è¿™äº›åŠŸèƒ½ä¸ä»…ä»…æ˜¯æˆ‘ä»¬åœ¨ Kotlin ä¸­å¯ä»¥ä½¿ç”¨çš„ï¼Œè®¸å¤šå…¶ä»–è¯­è¨€éƒ½æ”¯æŒè¿™ç§åŠŸèƒ½ï¼Œä½ åªéœ€è°·æ­Œä¸€ä¸‹å¦‚ä½•åœ¨å…¶ä¸­çš„æ¯ä¸ªç‰¹å®šè¯­è¨€ä¸­ç¼–å†™å®ƒä»¬ï¼Œä½†å®ƒä»¬ç¡®å®æ˜¯ç›¸ä¼¼çš„ï¼Œæ‰€ä»¥ä¸è¦æ‹…å¿ƒ:)

<center>*You can checkout the full sample project [here](https://github.com/chrisvasqm/look-ma-without-loops)*</center>