# ä½¿ç”¨ Sanity CLI å¯ä»¥åšçš„ 5 ä»¶å¾ˆé…·çš„äº‹æƒ…

> åŸæ–‡:[https://dev . to/sanity-io/5-cool-things-you-can-do-with-the-sanity CLI-482n](https://dev.to/sanity-io/5-cool-things-you-can-do-with-the-sanitycli-482n)

åœ¨ç†æ™ºæ€»éƒ¨ï¼Œæˆ‘ä»¬ç”Ÿæ´»å’Œå‘¼å¸åœ¨ç»ˆç«¯ã€‚è€å®è¯´ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨å¼€å‘ Sanity CLI å·¥å…·ï¼Œå› ä¸ºæˆ‘ä»¬è‡ªå·±æ¯å¤©éƒ½åœ¨ä½¿ç”¨å®ƒã€‚æˆ‘æƒ³å€Ÿæ­¤æœºä¼šåˆ†äº«ä¸€äº›ä½ å¯ä»¥ç”¨å®ƒåšçš„å¾ˆé…·çš„äº‹æƒ…ã€‚æ˜¯çš„ï¼Œæˆ‘ä¿è¯ 5 å·ä¼šå€¼å¾—ä½ å…³æ³¨ğŸ¤¯ã€‚

*åœ¨ä½ çš„ç»ˆç«¯ä¸Šè¿è¡Œ`npm install --global @sanity/cli`å®‰è£… CLIï¼Œè¿è¡Œ`sanity init`å¼€å§‹ä¸€ä¸ªé¡¹ç›®ã€‚*

## [](#1-query-your-data)1ã€‚æŸ¥è¯¢æ‚¨çš„æ•°æ®

```
sanity documents query "[*_type == 'post']{_id, title}" 
```

æ‚¨å¯ä»¥ä½¿ç”¨ [sanity documents å‘½ä»¤](https://www.sanity.io/docs/documents)åšå‡ ä»¶äº‹æƒ…ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„æ˜¯æŸ¥è¯¢æ•°æ®é›†çš„å‘½ä»¤ã€‚åœ¨ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ä¸­è¿è¡Œè¿™ä¸ªä¼šè®©ä½ çš„æ•°æ®åœ¨ç»ˆç«¯ä¸­æ‰“å°å‡ºæ¥ã€‚å¦‚æœä½ åŠ ä¸Š`--pretty`ï¼Œä½ ä¹Ÿä¼šå¾—åˆ°ä¸€äº›æ¼‚äº®çš„é«˜å…‰ã€‚è¿™å¯¹äºæµ‹è¯•æŸ¥è¯¢å’Œæ¢ç´¢æ‚¨çš„å†…å®¹éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœæ‚¨ä»”ç»†æƒ³æƒ³ï¼Œè¿™ä¹Ÿæ˜¯åœ¨æ‚¨çš„å†…å®¹ä¸Šä½¿ç”¨è¿™äº› UNIX è¶…çº§èƒ½åŠ›çš„ä¸€ç§æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥[å¯¼å‡ºä½ çš„æ•°æ®åˆ°ä¸€ä¸ª csv æ–‡ä»¶](https://www.sanity.io/blog/exporting-your-structured-content-as-csv-using-jq-in-the-command-line)ã€‚æˆ‘ç»å¸¸ä½¿ç”¨å®ƒï¼Œæ‰€ä»¥æˆ‘åœ¨æˆ‘çš„[å¤–å£³é…ç½®](https://medium.com/@rajsek/zsh-bash-startup-files-loading-order-bashrc-zshrc-etc-e30045652f2e)ä¸­æ·»åŠ äº†`alias sdq="sanity documents query"`ã€‚

## [](#2-export-a-dataset-in-a-neat-package)2ã€‚ä»¥ç®€æ´çš„åŒ…å½¢å¼å¯¼å‡ºæ•°æ®é›†

```
sanity dataset export 
```

ç»“æ„åŒ–å†…å®¹ç®¡ç†ç³»ç»Ÿçš„å…¨éƒ¨æ„ä¹‰åœ¨äºï¼Œå®ƒåº”è¯¥èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°å°†æ‚¨çš„å†…å®¹ä»ä¸­æå–å‡ºæ¥ã€‚é€šå¸¸è¿™æ˜¯é€šè¿‡æŸ¥è¯¢ API æ¥è·å¾—æ‚¨æƒ³è¦çš„å†…å®¹ï¼Œä½†æ˜¯æœ‰æ—¶ï¼Œæ‚¨å¸Œæœ›æ‰€æœ‰çš„å†…å®¹ä¸€æ¬¡æ‰“åŒ…å¥½ã€‚è¯¥å‘½ä»¤å°†æ‚¨çš„æ‰€æœ‰æ–‡æ¡£å¯¼å‡ºåˆ°ä¸€ä¸ª`.ndjson`-æ–‡ä»¶ä¸­ï¼Œå¹¶å°†æ‚¨çš„èµ„äº§å¯¼å‡ºåˆ°ä¸€ä¸ªä¸“ç”¨æ–‡ä»¶å¤¹ä¸­ã€‚å®ƒä¸‹è½½ä¸€ä¸ª gzip æ–‡ä»¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨`sanity dataset import`å°†è¯¥æ–‡ä»¶å¯¼å…¥åˆ°ä¸€ä¸ªæ–°çš„æ•°æ®é›†ã€‚ä¾‹å¦‚ï¼Œæ‚¨è¿˜å¯ä»¥è§£åŒ…æ–‡ä»¶ï¼Œå¯¹æ‰€æœ‰æ•°æ®è¿è¡ŒæŸ¥æ‰¾å¹¶æ›¿æ¢å…¨éƒ¨æ“ä½œï¼Œç„¶åå†æ¬¡å°†`dataset.ndjson`æ–‡ä»¶å¯¼å…¥æ•°æ®é›†ã€‚

[![https://thepracticaldev.s3.amazonaws.com/i/o8748k0okievigyn6v8b.png](../Images/aa72d94bac216c301ec1bb27a27a9ceb.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--XFg88Wmw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn.sanity.io/images/3do82whm/production/c9f832ca36ac9b41681f47fadc0f1c8d3e4b48fa-1980x1202.png%3Fw%3D1000) è·å–æ‰€æœ‰æ•°æ®

## [](#3-manage-cors-settings)3ã€‚ç®¡ç† CORS è®¾ç½®

```
sanity cors add http://localhost:8000 
```

[CORS æ˜¯ä¸ªä¸œè¥¿](https://www.sanity.io/docs/browser-security-and-cors)ã€‚å½“ä½ æ­£åœ¨å»ºç«‹ä½ çš„æ–°å‰ç«¯æ—¶ï¼Œå¾ˆå®¹æ˜“å¿˜è®°å®ƒã€‚é‚£ä¹ˆæœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•ä»å‘½ä»¤è¡Œæ·»åŠ ä¸€ä¸ªæ–°çš„ CORS åŸç‚¹å°±å¾ˆå¥½äº†ã€‚ä½ ä¹Ÿå¯ä»¥`delete`å’Œ`list`å®ƒä»¬ã€‚

## [](#4-get-an-overview-of-your-projects)4ã€‚è·å¾—é¡¹ç›®çš„æ¦‚è¿°

ç”±äºä½ å¯ä»¥æ‹¥æœ‰å°½å¯èƒ½å¤šçš„å…è´¹å¼€å‘è€…è®¡åˆ’ï¼Œå¹¶ä¸”å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®(`sanity init`)æ˜¯ç›¸å½“å®¹æ˜“çš„ï¼Œæ‰€ä»¥ç”¨ä¸äº†å¤šä¹…ä½ çš„è´¦æˆ·ä¸­å°±ä¼šæœ‰ä¸€äº›é¡¹ç›®ã€‚ç„¶åï¼Œæœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•åˆ—å‡ºæ‰€æœ‰é¡¹ç›®ï¼Œå¹¶æä¾›ä¸€äº›ä¸æ‚¨çš„å¸æˆ·ç›¸å…³çš„å…³é”®ä¿¡æ¯ï¼Œè¿™å¾ˆå¥½ã€‚

## [](#5-create-and-edit-a-document-in-your-favorite-editor)5ã€‚åœ¨æ‚¨æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­åˆ›å»ºå’Œç¼–è¾‘æ–‡æ¡£

```
sanity documents create --id myDocId --watch --replace 
```

è¿™ä¸ªå‘½ä»¤æ˜¯æˆ‘æœ€å–œæ¬¢çš„ã€‚å®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°æ–‡æ¡£ï¼Œåœ¨æ‚¨ç»ˆç«¯ä¸­è®¾ç½®çš„ç¼–è¾‘å™¨(æˆ‘çš„æ˜¯`export EDITOR='code -w'`)ä¸­æ‰“å¼€å®ƒï¼Œå¹¶å…è®¸æ‚¨åœ¨æ–‡æ¡£è¢«åŒæ­¥åˆ°æ•°æ®å­˜å‚¨æ—¶å®æ—¶ç¼–è¾‘è¯¥æ–‡æ¡£ã€‚å¦‚æœæ‚¨å°†ä¸€ä¸ªç°æœ‰çš„æ–‡æ¡£ id æ”¾åœ¨`myDocId`ä½ç½®ï¼Œæ‚¨å°†è·å¾—è¯¥æ–‡æ¡£å¹¶èƒ½å¤Ÿç¼–è¾‘å®ƒã€‚è¿è¡Œ`sanity documents create --help`æ¥äº†è§£è¿™ä¸ªå‘½ä»¤èƒ½åšä»€ä¹ˆã€‚

[https://www.youtube.com/embed/2pVWvYdgJ_Y](https://www.youtube.com/embed/2pVWvYdgJ_Y)

é€šè¿‡åœ¨æ‚¨çš„ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹ä½¿ç”¨ Sanity:

```
npm install -g @sanity/cli && sanity init 
```