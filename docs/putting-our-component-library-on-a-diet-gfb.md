# è®©æˆ‘ä»¬çš„ç»„ä»¶åº“èŠ‚é£Ÿã€‚

> åŸæ–‡ï¼š<https://dev.to/psyked/putting-our-component-library-on-a-diet-gfb>

#### æ€§èƒ½å¾ˆé‡è¦ï¼Œè¿˜æœ‰â€œä¼‘æ–¯é¡¿ï¼Œæˆ‘ä»¬æœ‰ä¸ªé—®é¢˜ã€‚â€

<figure>[![](img/3a80f8e9f8ff2696e9bd06103999df83.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--tLqR_KQM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A-urAq0XXMQ4RSLRAiP600Q.jpeg) 

<figcaption>ç…§ç‰‡ç”±[ä¼¯çº³å¾·Â·èµ«å°”æ›¼](https://unsplash.com/photos/bSpqe48INMg?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)ä¸Š[ä¸‹](https://unsplash.com/search/photos/balloon?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)</figcaption>

</figure>

ä¸€ç»„å…±äº«çš„ç»„ä»¶æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œåªè¦ä½¿ç”¨è¿™äº›ç»„ä»¶ä¸ä¼šä½¿æ‚¨çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºè†¨èƒ€ã€‚è¿™æ˜¯ä¸€ä¸ªç®€çŸ­çš„æ•…äº‹ï¼Œè®²è¿°äº†æˆ‘ä»¬æ˜¯å¦‚ä½•å‡ºé”™çš„ï¼Œé—®é¢˜çš„åŸå› æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæˆ‘ä»¬æ˜¯å¦‚ä½•è§£å†³çš„ã€‚

#### ç®€ä»‹

åœ¨ c[omparethemarket.com](http://tech.comparethemarket.com)æˆ‘ä»¬åˆ¶ä½œäº†ä¸€ä¸ª React ç»„ä»¶çš„å†…éƒ¨åº“ï¼Œåœ¨æˆ‘ä»¬ç½‘ç«™çš„ä¸åŒéƒ¨åˆ†ä½¿ç”¨ï¼Œè¿™æ˜¯æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå†…éƒ¨é‡‡è´­â€çš„ç­–ç•¥çš„ä¸€éƒ¨åˆ†è¿™æ˜¯ä¸€ä¸ªè®©æˆ‘ä»¬çš„ç½‘ç«™ä¿æŒä¸€è‡´çš„å¥½ä¸»æ„ï¼Œä½†æ˜¯æˆ‘ä»¬å¾ˆå¿«æ„è¯†åˆ°æˆ‘ä»¬åœ¨æ€§èƒ½ã€é¡µé¢æƒé‡å’Œä¸‹è½½æ—¶é—´ä¸Šæœ‰ä¸€ç‚¹é—®é¢˜ã€‚

<figure>[![](img/5c3d8f5e0a786e2f997a34df3a061da0.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--1EP-jkEm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/930/1%2AGP4hZgcAS1FRAoOs6NEj1A.png) 

<figcaption>ä¸€å¼ æ¥è‡ª WebPageTest.org</figcaption>

</figure>

çš„ç½‘ç»œå›¾æˆªå›¾(è£å‰ª)

<figure>[![](img/4166c2ec51d998159df7be077ddac031.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ltxdR3mK--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AtJ0KsYyUuJHv1N5niwnztA.png) 

<figcaption>ä¸€å¼ æ¥è‡ª Chrome DevTools</figcaption>

</figure>

çš„(è£å‰ª)æˆªå›¾

æˆªå›¾(ä¸Šå›¾)æ˜¾ç¤ºäº†æˆ‘ä»¬çš„ä¸€ä¸ªé¡µé¢çš„ä¸€äº›ç»Ÿè®¡æ•°æ®ï¼Œè¿™ä¸ªé¡µé¢ä½¿ç”¨äº†æˆ‘ä»¬ç»„ä»¶åº“çš„æ—©æœŸç‰ˆæœ¬ã€‚ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒåŠ è½½æˆ‘ä»¬çš„é¡µé¢æ‰€éœ€çš„ Javascript æ–‡ä»¶å¤§å°çº¦ä¸º 300 KBï¼Œå¹¶ä¸”åœ¨å®¢æˆ·çš„æµè§ˆå™¨ä¸Šè§£å‹ç¼©ä¸º 1.2 MB çš„åŸå§‹ä»£ç ã€‚ğŸ˜±

å¦‚ä¸Šé¢çš„ WebPageTest.org å¿«ç…§æ‰€ç¤ºï¼Œè¿™ä¸ªæ–‡ä»¶çš„æŒ‡ç¤ºæ€§æ€§èƒ½å½±å“å¤§çº¦ä¸ºåŠç§’é’Ÿã€‚è¿™æ˜¯åŠç§’é’Ÿçš„æ—¶é—´ï¼Œæµè§ˆå™¨é™¤äº†ä¸‹è½½ã€è§£æå’Œæ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ä¹‹å¤–ä»€ä¹ˆä¹Ÿä¸åšï¼Œåœ¨æ­¤æœŸé—´ï¼Œå®ƒä»€ä¹ˆä¹Ÿä¸å‘ç”¨æˆ·æ˜¾ç¤ºã€‚

> ä¸€èˆ¬æ¥è¯´ï¼Œå¤§å¤šæ•°ç½‘ç«™æ€§èƒ½é—®é¢˜æ˜¯å‰ç«¯é—®é¢˜ï¼Œè€Œä¸æ˜¯ç¡¬ä»¶æˆ–ç½‘ç»œé—®é¢˜ã€‚

[ç»©æ•ˆé»„é‡‘æ³•åˆ™](https://www.stevesouders.com/blog/2012/02/10/the-performance-golden-rule/)

è¿™ä¸ªæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªå‘ˆç°æ•´ä¸ªé¡µé¢çš„ React åº”ç”¨ç¨‹åºã€‚å®ƒæ˜¯å‘ˆç°é˜»å¡çš„ï¼Œè¿™æ„å‘³ç€å®ƒå¿…é¡»è¢«æµè§ˆå™¨ä¸‹è½½å¹¶è§£æï¼Œç„¶åé¡µé¢ä¸Šçš„ä»»ä½•å†…å®¹æ‰èƒ½æ˜¾ç¤ºï¼Œå› æ­¤è¿™ä¸€ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ€§èƒ½é—®é¢˜ã€‚

### é¡µé¢å¤§å°å¾ˆé‡è¦

å…³äºé¡µé¢é€Ÿåº¦å’Œæ€§èƒ½çš„ä¸€åˆ‡éƒ½æ˜¯æ··åˆåœ¨ä¸€èµ·çš„ï¼Œä½†æ˜¯ Javascript æ–‡ä»¶å¤§å°æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŒ‡æ ‡ï¼Œå¯ä»¥æ˜¾ç¤ºæ–‡ä»¶ä¸‹è½½ã€è¢«æµè§ˆå™¨è§£æç„¶åæ‰§è¡Œéœ€è¦å¤šé•¿æ—¶é—´ã€‚

å¯¹äºæˆ‘ä»¬çš„ Javascriptï¼Œæœ‰ä¸€å®šé‡çš„æ–‡ä»¶å¤§å°æ˜¯æˆ‘ä»¬æ— æ³•é¿å…çš„ã€‚æˆ‘ä»¬éœ€è¦åƒ React è¿™æ ·çš„åº“æ¥æä¾›æˆ‘ä»¬æ­£åœ¨å¼€å‘çš„ä½“éªŒï¼Œä¸€ä¸ªå…±äº«çš„ç»„ä»¶åº“æ˜¯ä¸€ä¸ªæ˜æ™ºçš„æƒ³æ³•ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬çš„è¾“å‡ºåŒ…å¤ªå¤§äº†ï¼ŒæŸä¸ªåœ°æ–¹å°±ä¼šå‡ºç°å¯æ€•çš„é”™è¯¯ã€‚â€”åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çœ‹åˆ°å…³äºæ·»åŠ å•ä¸ªæŒ‰é’®æ—¶å¼•å…¥äº† **+500Kb** æ–‡ä»¶å¤§å°çš„æŠ¥å‘Šï¼Œæ‰€ä»¥æœ‰äº›äº‹æƒ…æ˜¯ä¸æ­£ç¡®çš„ã€‚

### å®éªŒé©±åŠ¨å¼€å‘

ä¸ºäº†è¿›ä¸€æ­¥äº†è§£å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ React åº”ç”¨ç¨‹åºï¼ŒæŸ¥çœ‹äº†åº”ç”¨ç¨‹åºçš„å¤§å°ï¼Œæ·»åŠ äº†ä¸€ä¸ªå•ç‹¬çš„(æ ·å¼åŒ–çš„æŒ‰é’®)ç»„ä»¶ï¼Œå¹¶å†æ¬¡æŸ¥çœ‹äº†åº”ç”¨ç¨‹åºçš„å¤§å°ã€‚

ä½œä¸ºé»˜è®¤æ„å»ºè¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œcreate-react-app å·¥å…·è¾“å‡ºäº†ä¸€äº›ç›¸å½“ä¸é”™çš„æŒ‡æ ‡ï¼Œå› æ­¤è¿™æˆä¸ºäº†æˆ‘ä»¬æµ‹è¯•æˆ‘ä»¬çš„åº“å¯¹æ„å»ºè§„æ¨¡çš„å½±å“çš„å¿«é€Ÿã€ç®€å•ã€æ— å‰¯ä½œç”¨çš„ç¯å¢ƒã€‚(å¾ˆæœ‰å¯èƒ½åœ¨ç”Ÿæˆè¿™äº›æŠ¥å‘Šçš„ä»£ç çš„å…¶ä»–åœ°æ–¹ä¹Ÿæœ‰é—®é¢˜ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªå¯é çš„åŸºå‡†å¾ˆé‡è¦ã€‚)

<figure>[![](img/ab2a923c2261f42d4a076f5097e1fd5b.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--XweXtKlP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AClStjmpOU1aVgY8WToWyBw.png) 

<figcaption>å·¦è¾¹:å¼€ç®±å³ç”¨çš„ appã€‚å³è¾¹:æ·»åŠ äº†å•ä¸ªç»„ä»¶ã€‚</figcaption>

</figure>

è™½ç„¶æ²¡æœ‰å‹ç¼©åˆ°+500 KBï¼Œä½†æ˜¯å¯¹äºä¸€ä¸ªå•ä¸€æ ·å¼çš„æŒ‰é’®æ¥è¯´ï¼Œ75 KB ä»ç„¶æ˜¯è¿‡å¤šçš„ä»£ç ã€‚æŸ¥çœ‹è¾“å‡ºåŒ…ï¼Œå¾ˆå¿«å°±å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬åŒ…å«ä»»ä½•ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬è¿˜ä¼šè·å¾—åå‡ ä¸ªå…¶ä»–ç»„ä»¶çš„æºä»£ç ï¼Œè¿™äº›ç»„ä»¶çš„æºä»£ç ä¹ŸåŒ…å«åœ¨æˆ‘ä»¬çš„åº“ä¸­ï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«æˆ‘ä»¬çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚ä¸å¤ªå¥½ã€‚

<figure>[![](img/060df3003a124fb04a846afbfd5845e6.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--AAOrNvQW--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AjIJwzDv3t26povgiIjAo3Q.jpeg) 

<figcaption>ç…§ç‰‡ç”±[é©¬åº“æ–¯Â·æ–¯çš®æ–¯å…‹](https://unsplash.com/photos/466ENaLuhLY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)ä¸Š[ä¸‹](https://unsplash.com/search/photos/dead-code?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)</figcaption>

</figure>

#### æ ‘æ‘‡åŠ¨/æ­»ç æ¶ˆé™¤

æ‰€æœ‰è¿™äº›æœªä½¿ç”¨ç»„ä»¶çš„é¢å¤–ä»£ç å¢åŠ äº†æˆ‘ä»¬çš„æ†ç»‘åŒ…å¤§å°ï¼Œä½†æˆ‘å¸Œæœ› web packâ€”â€”é€šè¿‡å…¶å¯¹[æ­»ä»£ç æ¶ˆé™¤](https://webpack.js.org/guides/tree-shaking/)çš„æœ¬æœºæ”¯æŒâ€”â€”è‡ªåŠ¨åˆ é™¤æœªä½¿ç”¨çš„åº“ä»£ç ï¼Œå¹¶æä¾›ä¸€ä¸ªæ›´ä¼˜åŒ–çš„æ†ç»‘åŒ…ã€‚

[é€šè¿‡æ‘‡æ™ƒæ ‘æ¥å‡å°‘ JavaScript è´Ÿè½½|ç½‘ç»œåŸºç¡€|è°·æ­Œå¼€å‘è€…](https://developers.google.com/web/fundamentals/performance/optimizing-javascript/tree-shaking/)

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰å‘¢ï¼Ÿ

è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆå¾ˆå¤æ‚ï¼Œå¯¹æˆ‘ä»¬çš„é¡¹ç›®æ¥è¯´ç›¸å½“å…·ä½“ï¼Œä½†å®ƒæ¶‰åŠåˆ°æˆ‘ä»¬çš„ Babel é…ç½®ã€æˆ‘ä»¬çš„ CommonJS è¾“å‡ºæ ¼å¼å’Œæˆ‘ä»¬å¯¹ CSS æ¨¡å—çš„ä½¿ç”¨ã€‚æ‰€æœ‰è¿™äº›å…ƒç´ ç»“åˆèµ·æ¥åˆ›å»ºäº†åº“æ†ç»‘åŒ…ï¼Œä»æ ¹æœ¬ä¸Šè¯´ï¼ŒWebpack æ— æ³•æ’¼åŠ¨å®ƒã€‚

é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•æ„å»ºä¸€ä¸ªæ ‘æŠ–åŠ¨åº“åŒ…å‘¢ï¼Ÿ

### ä¸€ä¸ªæ›´å¥½çš„æ†ç»‘å™¨â€¦ç”¨ rollup.js

åœ¨å¯¹ Webpack çš„ä¸åŒé€‰é¡¹å’Œé…ç½®è¿›è¡Œäº†å¤§é‡å®éªŒåï¼Œæˆ‘ä»¬æœ€ç»ˆæ„è¯†åˆ°ï¼Œåœ¨æ„å»ºæˆ‘ä»¬çš„åº“ç»„ä»¶åŒ…æ—¶ï¼Œå®ƒæ˜¯â€œä¸åˆé€‚çš„å·¥å…·â€ã€‚ä½œä¸ºæ›¿ä»£ï¼Œæˆ‘ä»¬é€‰æ‹©äº† [rollup.js](https://rollupjs.org/guide/en) ï¼Œå®ƒåœ¨ç”Ÿäº§æ”¯æŒæ­»ä»£ç æ¶ˆé™¤çš„åº“æ†ç»‘åŒ…æ–¹é¢åšå¾—æ›´å¥½ã€‚

[rollup.js](https://rollupjs.org/guide/en)

æˆ‘ä»¬çš„æ¶ˆè´¹è€…åº”ç”¨ç¨‹åºä»ç„¶ä½¿ç”¨ Webpack æ¥æ‰“åŒ…æˆ‘ä»¬çš„æœ€ç»ˆ React åº”ç”¨ç¨‹åºï¼Œä½†ç°åœ¨ä½¿ç”¨ rollup.js æ¥æ‰“åŒ…æˆ‘ä»¬çš„åº“åŒ…æ„å‘³ç€å½“ Webpack ç¼–è¯‘å…¶è¾“å‡ºæ—¶ï¼Œå®ƒèƒ½å¤Ÿå¯¹æˆ‘ä»¬çš„åº“ä»£ç è¿›è¡Œæ ‘å‹åˆ†æï¼Œå¹¶åˆ é™¤ä¸ä½¿ç”¨çš„ç»„ä»¶ã€‚

æœ€åçš„ç»“æœå‘¢ï¼Ÿ

åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹é¡¹ç›®ä¸­ï¼Œåˆ‡æ¢åˆ° Rollup æ†ç»‘åº“å¯ä»¥ç«‹å³ä» 75 KB ä¸­èŠ‚çœé¢å¤–çš„ 22 KB(å‡ ä¹ 30%)ï¼Œè€Œç¤ºä¾‹åº”ç”¨ç¨‹åºæœ¬èº«å‡ ä¹æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚

<figure>[![](img/4e393e695319b3999ac3e87b14197e24.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--LsYwjhhb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AIfqILOaabFh4BSnX1HcOIQ.png) 

<figcaption>å·¦è¾¹:ä½¿ç”¨æˆ‘ä»¬ç”¨ Webpack æ‰“åŒ…çš„åº“åˆ›å»º-ååº”-appï¼Œå³è¾¹:ä½¿ç”¨ç”¨ rollup æ‰“åŒ…çš„åº“ã€‚</figcaption>

</figure>

æ›´ä»¤äººå…´å¥‹çš„æ˜¯ï¼Œå½“æˆ‘ä»¬å°†è¿™ä¸ªæ›´æ–°åçš„åº“åº”ç”¨åˆ°ç°å®ä¸–ç•Œçš„ä¾‹å­ä¸­æ—¶ï¼Œäº§ç”Ÿäº†æ¥è¿‘ 60%çš„æ€»æ–‡ä»¶å¤§å°çš„ä¼˜åŒ–:

```
File sizes after gzip:

 287.02 KB (-430.7 KB) build/static/js/main.5978ff57.js 
```

ä»æˆ‘ä»¬çš„è¾“å‡ºåŒ…ä¸­èŠ‚çœäº† 430.7 KB ï¼Œè¿™è¦å½’åŠŸäºä½¿ç”¨äº†ä¸€ä¸ªæ ‘å¯æ‘‡åŠ¨çš„ React ç»„ä»¶åº“ï¼Œå®ƒä¸æ­£ç¡®é…ç½®çš„ Rollup æ†ç»‘åœ¨ä¸€èµ·ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ç°æˆçš„ Webpack é…ç½®ã€‚

### æ€»ç»“

æˆ‘ä»¬çš„ React ç»„ä»¶åº“æ˜¯å‡ ä¸ªé¡¹ç›®çš„è‡ªç„¶å‘å±•çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯æˆ‘ä»¬å¿½ç•¥äº†æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„ä»£ç çš„æ€§èƒ½å½±å“ï¼Œå®ƒå¾ˆå¿«å°±åƒæ»šé›ªçƒä¸€æ ·ï¼Œå¯¹åŒ…å«å®ƒçš„é¡¹ç›®äº§ç”Ÿäº†æœ‰å®³çš„å½±å“ã€‚

è¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯æˆ‘ä»¬çš„æ†ç»‘ç­–ç•¥ï¼Œä»¥åŠå®ƒä¸èƒ½ç¡®å®šå“ªäº›ä»£ç æ˜¯å‘ˆç°ç»„ä»¶æ‰€å¿…éœ€çš„ï¼Œæ‰€ä»¥å®ƒæ€»æ˜¯åŒ…å«æ‰€æœ‰å†…å®¹ã€‚

è§£å†³æ–¹æ¡ˆæ˜¯å°†æˆ‘ä»¬çš„æ†ç»‘ç­–ç•¥è½¬å˜ä¸º Rollupï¼Œå¹¶å°†æˆ‘ä»¬çš„ Babel é…ç½®æ”¹å˜ä¸ºæ›´å¥½åœ°æ”¯æŒæ­»ä»£ç æ¶ˆé™¤çš„é…ç½®ã€‚

Webpack æ˜¯ä¸€ä¸ªä¸é”™çš„å·¥å…·ï¼Œä½†å®ƒå¿…é¡»æ­£ç¡®é…ç½®å¹¶ç”¨äºæ­£ç¡®çš„ä»»åŠ¡ï¼Œå¹¶ä¸”ç”±äºæˆ‘ä»¬é¡¹ç›®å‘å±•çš„æ¸è¿›æ€§ï¼Œæˆ‘ä»¬çš„è®¾ç½®å¹¶ä¸åˆé€‚ã€‚æš‚åœã€è¯„ä¼°å¹¶èŠ±ä¸€äº›æ—¶é—´å…³æ³¨æˆ‘ä»¬çš„æ„å»ºè¿‡ç¨‹ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿå–å¾—è¿™äº›æˆæœã€‚

### å…³é”®è¦ç‚¹

*   Javascript è¯­æ³•æ¨¡å¼ï¼Œæ¯”å¦‚ CommonJSï¼Œåœ¨ä»£ç æ†ç»‘å™¨ä¸­æ¶ˆé™¤æ­»ä»£ç æ—¶æœ‰ä¸åŒçš„å‰¯ä½œç”¨ã€‚
*   Webpack é€‚åˆæ†ç»‘é¡¹ç›®ï¼Œä½† Rollup æ›´é€‚åˆåº“ã€‚
*   ä¸ç®¡ä½ ä½¿ç”¨çš„æ˜¯ Webpack è¿˜æ˜¯ Rollupï¼Œä½ ä»ç„¶éœ€è¦ Babelã€‚å·´åˆ«å¡”æ„å‹å¯¹ç»“æœå½±å“æœ€å¤§ã€‚
*   æµ‹è¯•ï¼Œæµ‹è¯•ï¼Œå†æµ‹è¯•ï¼Œåœ¨ä¸€ä¸ªä»£è¡¨ä½ é¢„æœŸçš„å®¢æˆ·å·¥ä½œç¯å¢ƒçš„ç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•ã€‚

### å¥–åŠ±:åˆ›å»º-ååº”-åº”ç”¨ 2 &ç½‘ç»œåŒ… 4

è‡ªä»æœ€åˆæ’°å†™æœ¬æ–‡ä»¥æ¥ï¼Œæˆ‘ä»¬å·²ç»è®©å®¢æˆ·æ›´æ–°åˆ°ä½¿ç”¨ [create-react-app](https://github.com/facebook/create-react-app) ç‰ˆæœ¬ 2 å’Œ Webpack 4ï¼Œè¿™ä¸ºæˆ‘ä»¬çš„åŒ…å¤§å°å’Œæ€§èƒ½å¸¦æ¥äº†æ›´å¤šå¥½å¤„ï¼Œè€Œæ²¡æœ‰é¢å¤–çš„ä»£ç æ›´æ”¹ã€‚

åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºä¸­ï¼Œä½¿ç”¨ç‰ˆæœ¬ 2 é‡å¤æµ‹è¯•ä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœ:

<figure>[![](img/551498c2a852e9bffed1f3c74859e251.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--Z0_Dw7h5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A2JGy_KCP4AB-c-MooUlH0g.png) 

<figcaption>å·¦è¾¹:åˆ›å»º-ååº”-app 2ï¼Œå³è¾¹:å¸¦åº“æ·»åŠ </figcaption>

</figure>

è¿™é‡Œæœ‰ä¸€ä¸ªåœ¨ **create-react-app** ç‰ˆæœ¬ 1.1.4 ä¸Šè¾“å‡ºçš„åŒ…å¤§å°çš„çœŸå®ä¾‹å­:

```
File sizes after gzip:

188.49 KB build/static/js/main.53169928.js
 112.37 KB build/static/js/BasicQuestions.9168ec4c.chunk.js
 110.43 KB build/static/js/ComplexQuestions.5706b399.chunk.js
 110.4 KB build/static/js/SubQuestions.194d1d33.chunk.js
 110.3 KB build/static/js/CustomQuestions.736521d5.chunk.js

File sizes after gzip:

255.75 KB build/static/js/main.b68bc851.js
 846 B build/static/css/main.a86b8cd7.css 
```

åŒæ ·çš„çœŸå®é¡¹ç›®ï¼Œè¿™æ¬¡ä½¿ç”¨çš„æ˜¯ **create-react-app** ç‰ˆæœ¬ 2:

```
File sizes after gzip:

112.58 KB build/static/js/7.58c36855.chunk.js
 66.56 KB build/static/js/0.72b13458.chunk.js
 65.62 KB (-122.87 KB) build/static/js/main.20b9faa3.chunk.js
 40.56 KB build/static/js/1.ac53a9a6.chunk.js
 3.32 KB (-109.06 KB) build/static/js/BasicQuestions.6df1fce5.chunk.js
 1.47 KB (-108.96 KB) build/static/js/ComplexQuestions.61562335.chunk.js
 1.44 KB (-108.97 KB) build/static/js/SubQuestions.d5066422.chunk.js
 1.24 KB (-109.06 KB) build/static/js/CustomQuestions.b2e5a8af.chunk.js
 1.24 KB build/static/js/runtime~main.6da60b22.js

File sizes after gzip:

156.02 KB build/static/js/1.c932bec8.chunk.js
 89.89 KB (-165.86 KB) build/static/js/main.2f744215.chunk.js
 837 B (-9 B) build/static/css/main.8ee9f0fa.chunk.css
 763 B build/static/js/runtime~main.229c360f.js 
```

ä¸€ä¸ªâ€œç®€å•â€çš„å‡çº§ï¼Œå®ç°äº†å…±äº«ä»£ç åº“çš„æ›´æ™ºèƒ½çš„åŒ…åˆ†è£‚ï¼Œæˆ‘ä»¬å·²ç»åœ¨æ•´ä¸ªç«™ç‚¹ä¸Šè‡ªåŠ¨ä¿å­˜äº† 100 å¤š KBï¼Œè¿™æ˜¯éå¸¸æ•´æ´çš„ã€‚ğŸ‘

* * *