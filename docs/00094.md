# 改变生活(和节省时间！)关注特性的代码组织的魔力！

> 原文:[https://dev . to/jamesmh/the-life-changing-and-time-saving-magic-of-feature-focused-code-organization-1708](https://dev.to/jamesmh/the-life-changing-and-time-saving-magic-of-feature-focused-code-organization-1708)

# 我给你讲个故事吧

我作为高级开发人员受雇的一家公司正处于大多数人认为的危机或十字路口。在过去，开发人员之间的交流几乎为零，因此他们正在构建的产品是以完全独立的方式创建的——没有专家指导、代码审查等。

他们还花了大约两年时间让“摇滚之星”开发商重新设计他们的大部分产品。长话短说，他被解雇是因为当公司决定需要培养“团队”精神而不是让一个开发人员驱动所有开发时，他不想与其他开发人员交流和分享。发现重新设计的内容实际上比以前复杂了一百万倍，并且紧密耦合！

所有这些都是为了描述我开始时的情况。没人知道这个系统到底是如何运作的。没有发展的标准。当添加新特性时，没有指导性的组织或架构(例如，免费的)。

部署涉及一些 FTP 和多步骤过程，可能需要长达 30 分钟的时间，更不用说没有按照正确的顺序“构建”会发生什么了。这个清单还在继续...

我立即着手解决的一个问题是“我把我的代码放在哪里？”

现有的东西(即重新设计的东西)太复杂了。将零件添加到现有特征需要几天，有时甚至几周！99%的时间都在考虑把代码放在哪里！

我将向你展示我是如何改善这种情况的——把原本需要几周才能完成的事情缩短到几天/几个小时。

# 典型的应用程序是如何构建的。以及为什么这会是个问题。

我工作过的每家公司都有一个现成的系统，并根据基础设施来组织他们的系统/代码。例如，这些系统中的大多数都有一个数据访问层、一个业务层(通常只是一个将逻辑委托给数据访问层的外壳)和一个应用层。

应用层是 web 应用程序，它调用业务层，最后调用数据访问层。这可能是大多数企业系统的组织方式。

为什么这样不好？几个原因:

*   由于使用其他技术或范例的好处而需要有所不同的系统部分(特性)通常会被丢弃，因为它们不“匹配”治理架构。

*   找到系统的具体特性是困难的，因为它们分散在代码的多个区域。

*   因此，修复或添加现有功能需要更多时间。

*   这导致了开发人员理解和谈论产品的方式与公司其他人理解和谈论产品的方式之间的脱节。

*   整个解决方案或代码库以一种基本的方式“粘合”在一起。

假设你是这样一家公司的新开发人员。想想这样一个应用程序的文件夹/结构(你可能已经在另一台显示器上打开了一个)。仅仅从一个高层次的角度来看——你能告诉我这个应用程序是做什么的吗？

*   它解决了哪些业务问题？
*   你的公司关心什么问题？
*   系统的功能是什么？

你不能。至少，不容易。代码是由基础设施关注点组织的，而不是面向业务的关注点。

# 更好地组织和维护代码

我们如何解决这个问题？这是一个非常简单的想法。这与该行业已经变得自动化的做法大相径庭。按照公司实际生产的产品和特性来组织代码！

例如，一个电子商务应用程序可能会有一些功能，比如(我突然想到)“搜索”、“浏览”、“购物车”、“支付”等。

想象一下，我让你(一个团队和产品的新开发人员)添加一个新功能:允许用户使用比特币支付。

你能想出应该从哪里开始吗？

是的，这是一个反问句。(它应该进入“支付”😉)

# 你的应用程序实际做了什么，以及它是如何做的

整篇文章的要点是，你应该关注你的系统能做什么，而不是系统如何做。以一个典型的 MVC 结构为例:

[![mvc](../Images/69cf9922ef307cc81865b854fec71984.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--3DV9Zmn2--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/hycHO3ZiFyd2XrkLq24r2KRBecSiOs3SdaeB0yCncg-nI4q9kFeYW4zF901-wRCnyFFyyYv3AiNGMN7rC3jMz0UAaPm0-_dYCR882jWoDDzxDU-8asIdhpuIAguQo_CZXkCHZxcJ2Z0)

你能告诉我这个应用程序能做什么吗？它解决了哪些业务问题？你会从哪里开始试着调试某个特性呢？

现在，看看这个:

[![mvc](../Images/cb3389a76f8fe6c495956630ffb77d7a.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--7gWDSEzg--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh3.googleusercontent.com/QvlMxfwXO62p1O-ASSmnsq5axoIofNfkOdv1rDgEcKv8FSDir5vywNash2q3CG19bPh-vOq33reEBQlCzWUd7EnvJxSRa5gMU4GpUSM7Yc-YYvlHv2hES03C0Vih5UK4Jz52kbjkmR4)

现在呢？

顺便说一下，如果你正在使用 MVC 框架(举例来说)，那么你可以把这些特性中的每一个都做成它自己的“迷你”应用:

[![mvc](../Images/55a8d61e87c30e5693878289a0d0d1de.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--6XfXSlBr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://lh5.googleusercontent.com/v9myPH4PM0HKX5ue47q9od_cloczzI2HBMpKq2QpCr_gT3r0caVhHKJ-UhoPChEaGx7wMXAmdNS6q_u_-9IGREvWl6mRbyLd0fktA7PPngeRqSplROPoi5_xYp0UAVGr2IGUsVzal1Q)

现在你的解决方案主要集中在你试图解决的业务领域——而它恰好是一个 MVC 应用程序。

# 其他好处

这带来了其他好处，例如:

*   如果对不同技术的需求是合理的，那么各个特性的实现细节可能会有所不同。因为它们没有被固定在一个已经决定了基础设施组织的结构中，所以特定的特性可以根据需要发展。

*   单个特性的复杂性是孤立的，不会渗透到代码的其他“层”或部分。

*   查找特定功能或部分功能的代码非常快。

*   它迫使开发人员考虑并关注业务和产品，而不是如何将业务目标硬塞进一个预定义的、不相关的结构中。

*   系统作为一个整体并不像典型范例那样“粘”在一起。

为了强调最后一点，许多读者会注意到，这为以后将这些功能提升到我们大多数人所说的“微服务”中提供了灵活性。

如果网站 70%的流量和总负载都是针对“搜索”功能的(由于所有需要的数据库查询或其他原因)，我们可以将该功能从代码库中“提升”出来，作为它自己的独立项目(或模块、包等)。)并通过在运行时运行该特性的多个实例来扩展它(比如使用容器)。

剩下的功能，现在占总负载的 30%，可以放在一个更便宜的服务器上，性能仍然足够好。

# 下一步

我鼓励你在下一个项目中尝试这个策略。通过推特 [@jamesmh_dev](https://twitter.com/jamesmh_dev) 让我知道事情是如何解决的！

如果您正在寻找这些想法的更多细节和想法，我建议您从以下资源入手:

[垂直切片架构](https://jimmybogard.com/vertical-slice-architecture)
[立体架构:切片不分层(视频)](https://vimeo.com/131633177)
[洁净架构](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html)

**附:这最初是在 [builtwithdot.net 的博客](https://builtwithdot.net/blog/changing-how-your-code-is-organized-could-speed-development-from-weeks-to-days)T3 上发表的**

# 导航您的软件开发生涯

一封电子邮件简讯，我将在其中回答订阅者的问题，并就以下主题提供建议:

✔:软件开发人员的一般阶段是什么？✔:我怎么知道自己处于哪个阶段？我如何进入下一阶段？
✔什么是技术领导者，我如何成为一名技术领导者？

听起来有趣吗？加入社区吧！