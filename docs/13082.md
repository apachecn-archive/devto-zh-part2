# 我不想远程投入生产

> 原文:[https://dev . to/davidwengier/I-dont-want-to-remote-into-production-55i 1](https://dev.to/davidwengier/i-dont-want-to-remote-into-production-55i1)

我的一个朋友在推特上发布了这篇文章，这是今天关于 Travis CI 最近生产中断的精彩摘要:

> 只读 prod 是稍微安全一点的 prod，如果您没有权限截断所有的表，那么它不太可能发生:P[https://t.co/7urWybtZA8](https://t.co/7urWybtZA8)
> 
> —NullOps(@ NullOpsio)[2018 年 4 月 9 日](https://twitter.com/NullOpsio/status/983237339634810880?ref_src=twsrc%5Etfw)

我个人对此感觉更强烈:我不想接触生产，只读或其他。我甚至不想安装数据库管理软件，无论是 SQL Server Management Studio 还是 MySQL 客户端，如果我能帮助它的话。

我今天开始了一项新工作，在入职期间，有人提到生产服务器访问被 IP 锁定，因此如果需要，如果我不在办公室，就必须通过 VPN 来完成。不要说我的新雇主的坏话，让我澄清一下，这只是作为一个“以防万一”的选项，作为对其他人直接问题的回答的一部分，而不是人们需要知道的常规入职信息的一部分。事实上，那里的每个人都知道这不是一个好主意，这是将来应该努力消除的东西，帮助消除这一点是我工作的很大一部分，但我跑题了。

我直截了当地说:我不想接触。

## 我不相信自己，你也应该相信自己

最终每个人都会有做错事的时候。也许他们运行了一个没有 WHERE 子句的 UPDATE 语句，或者当他们调整一些配置值时连接到了错误的环境。你希望大多数人只会犯一次这样的错误，我也犯过这样的错误(几年前，别担心！)而且我也不想再做了。我能想到的保证这一点的最简单的方法就是让它变得不可能。

是的，我能仔细检查我做的每件事。是的，我可以让人们越过我的肩膀检查，或者回顾。是的，我可以用详细记录的步骤完成清单。

或者我可以让不正确的行为变得不可能。如果我不能远程连接到服务器，我就不能远程连接到错误的服务器。如果我不能连接到数据库，我不能忘记脚本或语句的一部分。

## 如果你想解决某件事，就把它变成一个问题

生产环境(或者实际上大多数其他环境)的理想情况是它们的设置和配置完全自动化，不需要人工操作。通过使手工工作变得不可能，你迫使人们和团队做必要的工作来创建工具来实现它。没有捷径可走，开发人员和他们的代码部署地之间有一堵坚固的墙，诱惑被消除了。如果我需要对数据库模式进行更改，我希望唯一的选择是创建一个更改脚本或类似的东西。我会将该脚本应用到我的开发环境中，并及时应用到测试和试运行环境中。

如果唯一可能的途径是自动化工具，那么当生产部署完成时，您不仅可以保证工具已经就位，还可以在各种环境中测试它的执行情况。

开发人员总是倾向于将这种工作留到最后，但是这种想法导致手动过程持续数年，因为其他工作更优先。另一方面，如果开发人员除了第一次就把工作做好之外，别无选择，他们肯定会这么做。

## [](#data-is-cheating-too)数据也是作弊

如果你想在逻辑上走极端，正如我所做的，我也不想直接修改数据库中的任何数据。如果我正在构建一个需要特定形状数据的新特性，无论是运行还是简单地让我手动测试，那么我宁愿先构建播种脚本，或者理想情况下是数据管理前端。播种脚本可以帮助功能/集成测试，或者数据管理工作可能解决了产品中的一些未来需求(如果不是这样，就不要做！还要考虑为什么需要该数据)。

## [](#codified-knowledge-is-shared-knowledge)整理出来的知识是共享的知识

创建工具、脚本或其他自动化事物的另一个优点是，任何被编码并提交到源存储库的东西都是其他人可以推理、阅读并有希望理解的。没有什么比拥有一系列任何人都可以使用的脚本和工具更能降低[总线系数](https://en.wikipedia.org/wiki/Bus_factor)了。

本质上，尽可能避免手工劳动。当然，对事情要务实，特别是在自动化之前，做一次手工工作来获得一种感觉是没有错的，但是我讨厌做两次或三次。此外，选择一些手工工作可能会很有趣，出于这个原因，我特意避免使用 Ninite 或 Chocolately 之类的工具，因为我只是喜欢构建新机器的过程。

但是我不想接触生产环境。