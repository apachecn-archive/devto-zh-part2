# 渐进式网络应用初学者指南

> 原文：<https://dev.to/appinstitute/a-beginners-guide-to-progressive-web-apps-4jb3>

请原谅我们的陈词滥调，当谈到技术时——和生活一样——唯一不变的就是变化。与 1990 年第一个网站 相比，今天的网站看起来非常不同，并且能够做更多的事情。同样，我们现在使用的手机比 17 年前最受欢迎的诺基亚 3310 功能要多得多。我们不再仅仅使用浏览器访问网页，还可以访问网络应用程序，而我们在手机上加载的应用程序可以是原生的，也可以是混合的。很快可能两者都不是。

 **(PWAs)是一个在 2015 年首次使用的术语，用来描述现代技术、设计概念和[Web API](https://developer.mozilla.org/en-US/docs/Web/API)的结合使用，以提供移动网络上类似应用的体验。更重要的是，它们与设备无关，运行在现代网络浏览器中，不需要先从应用商店下载任何东西。

显然，渐进式网络应用还有很多内容无法在一个简单的总结中涵盖，所以请继续阅读，以便更加熟悉一个在未来几个月中会遇到更多的术语。

## **进步的网络应用程序正在运行**

尽管这是一个相对较新的发展，但许多大品牌已经开始实施渐进式网络应用，有些已经将惊人的成果归功于他们的 pwa。

### **推特**

[Twitter Lite Progressive Web App](https://developers.google.com/web/showcase/2017/twitter)在 2017 年 4 月成为所有用户的默认移动浏览器体验。对 Twitter 的好处包括:

*   每次会话页面增加 65%
*   发送的推文增加了 75%
*   跳出率下降 20%

[![twitter-lite-pwa-example](../Images/6d374a4d5dfc183553309f1c59f9781e.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--gd_pXJVS--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://storage.googleapis.com/sales.appinst.io/2017/09/twitter-lite-pwa-example.png)

虽然用户受益于这样的体验:与 Android 原生应用 相比， **使用的设备存储空间不到 3%，更令人印象深刻的是** **帮助减少了高达 70%的数据消耗** 。当你使用移动数据而不是 WiFi 浏览时，这一点很重要。数据消耗的减少也向那些网速较慢的用户开放了 Twitter 体验，当 45%的连接仍然使用 2G 时，这真的很重要。

### **全球速卖通和兰蔻**

移动商务的增长速度是电子商务的三倍，但是很难创造出和他们的移动应用程序一样快的移动网络体验，而 [兰蔻](https://www.lancome-usa.com/) 很难在移动上进行转换。两个品牌都通过创建 PWA 解决了这个问题，并且

**两个品牌都通过创建 PWA 解决了这个问题，[全球速卖通看到了](https://developers.google.com/web/showcase/2016/aliexpress) :**

[![aliexpress1](../Images/ee5d42f6ccca5331b7f88d5f8e396c7e.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--rlDHpblt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://storage.googleapis.com/sales.appinst.io/2017/09/aliexpress1.png)

*   所有浏览器的新用户转化率增长 104 %, iOS 转化率增长 82%
*   在所有浏览器中，每个用户每次会话访问的页面增加了 2 倍
*   在所有浏览器中，每次会话花费的时间增加了 74%

**和[兰蔻经历了](https://developers.google.com/web/showcase/2017/lancome) :**

*   转化率增加了 17%
*   iOS 上的移动会话增长了 53%
*   通过推送通知，回收购物车的转化率提高了 8%,推送通知的打开率提高了 18%

### **福布斯**

渐进式网络应用不仅限于社交网络和电子商务网站，正如 [【福布斯】](https://www.forbes.com/) 所展示的，谁 [用一个支持 PWA 的网站](https://www.niemanlab.org/2017/03/forbes-rebuilt-its-new-mobile-website-as-a-progressive-web-app/) 替换了他们的移动网站，导致:

*   每位用户的会话增加了 43%
*   滚动深度是传统移动网站的 3 倍
*   平均用户会话持续时间的 2 倍
*   页面加载时间从 3 -12 秒缩短到 0.8 秒

## 那么，进步的网络应用是从哪里来的呢？

在剖析渐进式网络应用之前，我们必须先回顾一下网络应用——没有修饰语。最早的网站，就像 90 年代早期的大部分网络一样，不是非常动态或者交互。它们也不常见，CGI 的局限性限制了大规模的采用。

ASP、ColdFusion 和 PHP 等脚本语言和框架的引入帮助[推动了](https://www.evolutionoftheweb.com/)的发展，但只有在 [普遍采用 Ajax](https://www.w3schools.com/xml/ajax_intro.asp) 之后，web 应用才开始变得真正动态。Ajax 的使用使得创建能够在后台向 web 服务器发送数据和从中检索数据的异步网站变得更加容易。使用 Ajax 的网站能够动态地更新和改变页面上的内容，根本不需要重新加载页面。

Ajax 的早期采用者包括谷歌(在 Gmail 和地图的第一版中)和 [Kayak](https://www.kayak.com/) 。

但是这一飞跃并非完美无瑕。Ajax 的缺点包括...

*   如果用户在浏览器中禁用了 JavaScript，或者正在使用不支持 JavaScript 的浏览器，则功能会减少。
*   早期的浏览器在注册动态生成的页面时也有问题，导致使用后退 按钮时行为不稳定，并且很难给页面添加书签。
*   除了谷歌，大多数网络爬虫都无法执行 JavaScript，使得使用 Ajax 的网页内容无法访问。

这些问题有解决的办法，但是它们经常导致 web 技术的代码变得更加复杂...

如果没有 Ajax，我们可能不会被贴上 Web 2.0 的标签，这个标签也是在 2004 年开始流行的。但我们可能不得不等待更长的时间，才能使用我们现在日常使用的许多网络应用程序，甚至没有想到它们是网络应用程序:[YouTube](https://www.youtube.com/)[脸书](https://www.facebook.com/)[Twitter](https://twitter.com/?lang=en)，几乎任何东西 [谷歌](https://www.businessinsider.com/alphabet-google-company-list-2016-10)[Evernote](https://evernote.com/)

但是智能手机操作系统(iOS、Android 和简单的 Windows Phone)的出现让事情变得复杂了。上面列出的每一个网络应用程序，以及这里没有提到的许多其他应用程序，现在也有了相应的移动应用程序。虽然谷歌和脸书等较大的品牌有资源来管理除 iOS 和 Android 应用程序之外的网络应用程序的持续开发，但新创公司、中小企业和独立开发者就不一样了。

[![StatCounter-os_combined-ww-monthly-201608-201708](../Images/e023c2b5bc2b0c9fb9418d92b4666ce9.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--rym_fO6M--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://storage.googleapis.com/sales.appinst.io/2017/09/StatCounter-os_combined-ww-monthly-201608-201708.png)

厚此薄彼曾经是可行的，但是现在，即使 [Android 的全球市场份额远远超过了](https://gs.statcounter.com/os-market-share/mobile/worldwide)iOS， [iOS 仍然在某些关键地区领先](https://gs.statcounter.com/os-market-share/mobile/united-states-of-america) 。这意味着，如果你正在开发一个应用程序，并希望在几乎所有市场取得成功，那么你别无选择，只能同时为 Android 和 iOS 开发。这最终将我们带到了渐进式网络应用。

## 渐进式网络应用有什么不同？

引入 Ajax 后，网络应用的进一步增强并没有停止。JavaScript 继续成熟，JavaScript 框架和库的引入帮助 web 应用变得更加动态。但现在它们与移动应用一起运行，随着社会在移动设备上花费的时间超过桌面设备，网络应用的局限性变得更加明显。

最初，最大的不同是本地应用——专门为 iOS 和 Android 设计的应用——提供了更好的用户体验。它们的访问速度更快，整体性能比移动设备上的 web 应用更流畅。即使没有互联网连接，许多原生应用程序仍然可以使用，即使在后台运行，仍然可以更新信息，并且如果正确使用推送通知，可能会有更高的参与率。

CSS3 和 JavaScript 的持续发展，HTML5 的最终完成，以及更强大的浏览器和处理器为混合应用铺平了道路，最终导致了进步的网络应用。 [由弗朗西斯·贝里曼和亚历克斯·罗素](https://infrequently.org/2016/09/what-exactly-makes-something-a-progressive-web-app/) 在 2015 年的一篇博客文章中首次提出，渐进式网络应用与本地、混合和常规网络应用的不同之处在于:

*   他们可以在任何支持浏览器的移动设备上工作，不受操作系统的影响，甚至是最慢的连接。
*   它们不需要通过应用商店下载和安装。
*   即使它们不是原生或混合应用程序，也可以添加到您的主屏幕上。
*   与普通的网络应用不同，即使在后台运行，它们也能持续更新信息。

公平地说，Berriman 和 Russel 给已经存在的东西起了一个名字，但是一年后，他们更进了一步，为网络应用设定了一些基准标准，以便它们被认为是进步的网络应用。

*   它们必须来自安全的来源并通过 TLS(有时也称为 SSL)发送，并且不得包含任何混合内容。
*   他们必须能够在离线时加载(即使只是一个定制的离线页面)。这意味着进步的网络应用需要服务人员。
*   它们必须引用至少具有以下属性的清单:
    *   名称
    *   简称
    *   开始 _ 网址
    *   显示独立或全屏值
    *   png 格式的至少 144×144 大的图标。例如:" icons ":[{ " src ":"/images/icon-144 . png "，" size ":" 144 x144 "，" type": "image/png" } ]

谷歌现在大量参与渐进式网络应用，帮助制定标准，同时也在 Chrome 中建立对这些标准的支持。他们发布了一份 [渐进式网络应用清单](https://developers.google.com/web/progressive-web-apps/checklist) ，列出了他们认为渐进式网络应用应该具备的所有条件，既作为基线，也作为理想。他们的基线在原来的基础上扩展，包括了以下内容:

*   他们必须在平板电脑和移动设备上响应迅速。
*   第一次加载必须很快，即使是在 3G 上。
*   网站必须跨浏览器工作。
*   页面转换应该“快速”,即使是慢速连接。
*   每个页面都必须有一个 URL。
*   [Web 应用清单](https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/) 现在还必须包含元数据，才能添加到主屏幕。

是什么让渐进式网络应用变得如此棒？

进步网络应用如此受欢迎有几个原因，它们被谈论得如此之多，以至于有可能成为一个令人讨厌的时髦词汇。这些包括:

*   与本地和混合应用相比，它们成本更低，开发和部署速度更快。大多数 pwa 可以使用您当前的 web 框架来实现，几乎不需要额外的编程语言和技术。
*   如果需要，该应用程序将易于扩展新功能。许多当前的关键功能——推送通知、锁定主屏幕、后台同步、离线功能——旨在模拟“类似应用程序”的体验，由类似应用程序的外观和感觉提供支持。
*   pwa 是跨平台的，所以几乎没有必要针对不同的设备进行调整，尤其是如果你特别关注响应能力的话。
*   得到 Google 的全力支持，其他主要的浏览器开发者也迅速加入进来。
*   由于无需首先提交到 Google Play 商店或苹果应用商店，您可以更快地将应用推向市场。
*   它们完全可以被搜索引擎索引，因此无需额外的应用商店营销工作。
*   减少用户使用应用程序的摩擦。

在此基础上进一步扩展，pwa 的关键特征——超过基线标准——应该是:

*   **渐进式**——它们必须适用于每一个用户，不管他们选择什么样的浏览器，因为它们是以渐进式改进为核心原则的。渐进式增强意味着无论浏览器或连接速度如何，核心内容(和功能)都将始终可用。只有在浏览器支持的情况下，才会添加更高级的演示和功能特性。
*   快速响应——它们必须适合任何形式:台式机、手机、平板电脑或即将出现的形式，而不需要用户采取任何特定的行动。
*   **连接独立**——通过使用 [服务人员](https://developers.google.com/web/fundamentals/getting-started/primers/service-workers) ，他们必须离线工作，并且在低质量的网络上工作。离线功能可能仅限于某些功能。
*   类似于应用程序的——他们必须给用户一种应用程序的感觉，有着应用程序风格的交互和导航，所有这些都应该简洁流畅。
*   **新鲜的** -由于服务人员的更新过程，它们必须总是最新的。这取决于用户是否连接到互联网。
*   **安全**——只能通过 HTTPS 提供，防止中间人攻击，确保内容不被篡改。
*   **可发现的**——它们必须能够通过包含 W3C 兼容的 web 应用清单和服务工作者注册范围被识别为“应用程序”，从而允许搜索引擎找到它们。这使得 PWAs 相对于不可搜索的原生应用具有显著优势。
*   **重新参与**——他们可以通过推送通知等功能让重新参与变得容易。但是，使用推送通知是一项功能，而不是一项要求。
*   可安装的——他们必须允许用户在他们的主屏幕上“保留”他们认为最有用的任何应用程序，而没有应用商店的麻烦。
*   可链接的——它们应该很容易通过 URL 分享，不需要复杂的安装。

## **渐进式网络应用背后的技术**

如前所述，pwa 大多是标准的 HTML5、CSS3 和 JavaScript。与此相结合来“创建”PWA 的两种技术是 web 应用清单和服务工作器。

### **网络应用清单**

web 应用程序清单是一个简单的 JSON 文件，它控制应用程序在移动设备上向用户显示的方式，指示用户可以启动的内容，并定义应用程序启动时的外观。您可以控制的一些事情包括:

*   是否使用浏览器的 UI，包括地址栏。
*   闪屏的使用。当从主屏幕启动 PWA 时，需要做一些事情。如果不使用闪屏，屏幕会变白，看起来像是停止了。
*   页面方向。很少有应用程序需要在横向模式下运行，但如果你的应用程序需要的话，如果你在启动时强制执行，它会增强 UX。
*   设置主题颜色。你可以通过在清单中设置主题颜色来节省大量的开发时间，而不是在整个站点范围内进行修改。这控制了各种 UI 元素的颜色，确保它们与你的网站的颜色非常匹配。

Chrome 也使用 web 应用清单来决定是否显示 Web 应用安装横幅，并通过以下附加内容在 HTML 中引用

*<link rel = " manifest " href = "/manifest . JSON ">*

### **服务人员**

[谷歌工程师杰夫·波斯尼克](https://medium.com/@davideast/chrome-developer-summit-recap-1137b022b2dc) ，将服务人员描述为:

**一名空中交通管制员...**把你的网络应用程序请求想象成飞机起飞。服务人员是发送请求的空中交通管制员。它可以从网络加载，甚至从缓存加载。

它是一个独立于您的网站运行的脚本文件，正是这个文件允许您的应用程序即使在未连接到互联网的情况下也能工作，同时还控制后台同步。它还用于推送通知，还将控制未来的 PWA 功能，如地理围栏等。pwa 能够离线工作，因为服务人员的功能之一是自动缓存您指定的资产。记住谷歌的 PWA 基准标准之一是通过 TLS 服务，服务人员只能在安全服务的网站上注册。

谷歌开发了一款开源工具，用于审计任何网页的性能和质量，包括渐进式网络应用。虽然它是审计任何网站的一个很好的工具，但如果你决定将你的网站改造成一个进步的 Web 应用程序，它会特别有用。正如本文前面所强调的，要将一个网站识别为 PWA，需要满足某些标准，但总体性能尤其重要，因为 PWA 是为移动设备上的用户设计的。然而，不要只关注满足标准和通过灯塔审核，因为这样做总有忽略用户体验的风险。

## P 的缺点 **激进的网络应用**

PWAs 最大的缺点是目前并不是所有的移动浏览器都支持它们。谷歌的基线标准确实规定“****网站必须跨浏览器工作** ”(重点是后加的)，而且因为大部分 PWA 是使用标准 HTML5 等开发的。他们会的。Safari 和微软 Edge 目前缺乏的是对服务人员的支持。网站正常运行不需要服务人员，只需要类似应用的功能。**

 **[![StatCounter-browser-ww-monthly-201608-201708](../Images/d40815e0391a2e76635d2275267a4423.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--7gNg_8yC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://storage.googleapis.com/sales.appinst.io/2017/09/StatCounter-browser-ww-monthly-201608-201708.png)

但是由于 Chrome 在几乎所有市场都占据主导地位，这不应该成为现在投资 PWA 的障碍。对服务人员的支持是为微软 Edge 开发的 [，现在](https://developer.microsoft.com/en-us/microsoft-edge/platform/status/serviceworker/) [也出现在 WebKit](https://m.phillydevshop.com/apples-refusal-to-support-progressive-web-apps-is-a-serious-detriment-to-future-of-the-web-e81b2be29676) 中，虽然这并不能保证 Safari Mobile 很快就会支持它。

此外，服务人员目前仅支持推送通知和后台同步，而许多业务相关应用程序(如地理围栏)中的功能却明显缺失。然而，这也不应该成为一个障碍，因为 pwa 仍然是相对较新的，但是随着 Google 对它们的支持和宣传，我们可以预计在不久的将来会看到许多本机应用程序的常见功能被添加进来。希望这还包括访问系统功能的能力，以及与其他 pwa 交互的能力。

需要注意的是，谷歌 [已经自动为一些 pwa](https://developers.google.com/web/updates/2017/02/improved-add-to-home-screen)添加了安卓包装器，这意味着在安卓设备上，它们可以出现在应用程序屏幕上。同样，微软也在测试给一些 pwa 增加一个 Windows 包装器。这些应用随后被添加到 Windows 应用商店，并作为应用出现在 Bing 搜索结果中。这意味着谷歌和微软已经将 PWAs 视为等同于原生应用。在最近的一篇博客文章中， [Berriman 回应了对“渐进式网络应用”一词的批评，他最后提醒我们说(重点是后加的):](https://fberriman.com/2017/06/26/naming-progressive-web-apps/)

PWAs 只是一堆拥有一个崭新品牌名称的技术，它让开放网络持续更长时间，帮助它与专有的、封闭的网络竞争，直到下一件事(希望是下一件事)出现，让它保持敏锐和相关。 **这是为了下一个 10 亿用户，他们上网打开浏览器，去寻找那里的东西，为了那些必须为他们的下载按 mb 付费的用户，那些有旧手机的用户，那些不想或不能使用基于本地应用的操作系统的用户。**

## **结论**

渐进式网络应用是一种新技术，但它已经证明了令人难以置信的好处，尤其是与原生应用相比更低的开发成本。用一个原生应用来接触你的全部观众需要开发两个应用，一个用于 iOS，一个用于 Android。除此之外，还需要持续的维护成本，以确保它能与每个新的操作系统版本兼容，并为使用旧操作系统的用户提供一些向后兼容性。使用 PWA，您只需开发或修改网站/web 应用程序的单一版本:使用不完全支持 PWA 的浏览器的用户仍然可以访问您的网站， **他们只是无法获得完整的类似应用程序的体验** 。正如上面真实世界的例子所显示的，作为企业主的你和你的观众几乎都可以立即受益。

<small>要了解更多关于 AppInstitute 支持的 PWA 功能，请点击</small> [<small>此处</small>](https://appinstitute.com/progressive-web-apps/) 。

* * *****