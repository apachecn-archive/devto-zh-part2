# 兰花教程 01 -你的第一个兰花网站

> 原文：<https://dev.to/cjbrooks12/your-first-orchid-site-4lij>

# 简介

所以你决定试一试兰花？太好了！遵循这个指南来建立你的第一个兰花网站，并学习你可以用兰花做什么的基础知识。

你可以自己跟随这个教程，或者在 [OrchidTutorials 库](https://github.com/JavaEden/OrchidTutorials/tree/master/01)中找到它的源代码。

## ![GitHub logo](../Images/292a238c61c5611a7f4d07a21d9e8e0a.png) [兰花](https://github.com/orchidhq) / [兰花](https://github.com/orchidhq/Orchid)

### 构建和部署与您一起成长的漂亮的文档站点

<article class="markdown-body entry-content container-lg" itemprop="text">

[![Orchid](../Images/eb7f166eb445fa57d6c2364a5a005cc8.png "Orchid")](https://orchid.run/) 
**构建和部署与您一起成长的精美文档网站**

* * *

[![Current Version](../Images/0c72744f2b1b9c09e81058ea16d017a3.png "Current Version")](https://bintray.com/javaeden/Orchid/OrchidCore/_latestVersion)[![License: LGPL-3.0](../Images/0561c8fa72f81c47a6b5ec394037be00.png "License: LGPL-3.0")](https://www.gnu.org/licenses/lgpl-3.0)[![Linux and Mac Build Status](../Images/1a217af32dacd351a6eb6e5929c3a579.png "Linux and Mac Build Status")](https://travis-ci.org/orchidhq/orchid)[![Windows Build status](../Images/4c3d58f4c9f5f0e4e69e504c56766560.png "Windows Build status")](https://ci.appveyor.com/project/cjbrooks12/orchid/branch/dev)[![Code Coverage](../Images/7d3a3ce870c280f4289105e25d15df83.png "Code Coverage")](https://www.codacy.com/app/cjbrooks12/Orchid?utm_source=github.com&utm_medium=referral&utm_content=orchidhq/orchid&utm_campaign=Badge_Coverage)

[快速入门](https://orchid.run/wiki/user-manual/getting-started/quickstart)[文档](https://orchid.run/wiki/user-manual/getting-started)[教程](https://orchid.run/wiki/learn)[展示](https://orchid.run/showcase)[支持](https://gitter.im/JavaEden/Orchid)

## 快速启动

*   [![Gradle](../Images/d7b7758247fd5d9a702ccc8fef4a8a78.png "Gradle")T2】](https://orchid.run/wiki/user-manual/getting-started/quickstart#gradle)
*   [![Maven](../Images/333008a337166354ec2e3aae317f2446.png "Maven")T2】](https://orchid.run/wiki/user-manual/getting-started/quickstart#maven)
*   [![SBT](../Images/f083f972225ab4cd2ca281f78814ec5b.png "SBT")T2】](https://orchid.run/wiki/user-manual/getting-started/quickstart#sbt)
*   [![Deploy to Netlify](../Images/9df7dbf561b0947dd4e9a437be4988c8.png "Deploy to Netlify")T2】](https://app.netlify.com/start/deploy?repository=https://github.com/orchidhq/OrchidStarter)

## 证明文件

兰花的用户手册将带您了解兰花的主要功能，并让您更深入地了解每个主题和功能。

[文档](https://orchid.run/wiki/user-manual/getting-started)

## 教程

有几个教程旨在引导您从头开始构建一个兰花站点。所有教程的源代码也可以在[或教程库](https://github.com/orchidhq/OrchidTutorials)中找到。

[教程](https://orchid.run/wiki/learn)

## 显示优点的东西

查看陈列柜，看看兰花的行动。

[展示区](https://orchid.run/showcase)

## 支持

### 贡献者

这个项目的存在要感谢所有做出贡献的人。要参与，请见[投稿. md](https://github.com/orchidhq/orchid/blob/dev/.github/CONTRIBUTING.md)

[![Contributors](../Images/73f9b90f5c85df8ee8758e01a52152ba.png "Contributors")](https://github.com/orchidhq/orchid/graphs/contributors) 

### 巴克斯

感谢我们所有的支持者！<g-emoji class="g-emoji" alias="pray" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f64f.png">🙏</g-emoji>

[![Backers](../Images/4b5ae13c41799627fe67f964c4f987f9.png "Backers")](https://opencollective.com/orchidssg#backers) 

### 赞助商

通过成为赞助商来支持这个项目。您的徽标将显示在此处，并带有指向您网站的链接。

[![Sponsor 1](../Images/5855ef0cb57006e34da0600a502f1e4a.png "Sponsor 1") ](https://opencollective.com/orchidssg/sponsor/0/website) [ ![Sponsor 2](../Images/9637b83e9d1de20c4a680c1c7ae05b5d.png "Sponsor 2") ](https://opencollective.com/orchidssg/sponsor/1/website) [ ![Sponsor 3](../Images/d044bb6c0851431fc8586688f1f5cf55.png "Sponsor 3") ](https://opencollective.com/orchidssg/sponsor/2/website) [ ![Sponsor 4](../Images/ffe27bf4033460ee03426c33a400e613.png "Sponsor 4") ](https://opencollective.com/orchidssg/sponsor/3/website) [ ![Sponsor 5](../Images/1feb04f8ae16bff9e8a659140cc468a6.png "Sponsor 5") ](https://opencollective.com/orchidssg/sponsor/4/website) [ ![Sponsor 6](../Images/ee6b82364437fe7a96935dbeae058db3.png "Sponsor 6") ](https://opencollective.com/orchidssg/sponsor/5/website) [ ![Sponsor 7](../Images/05a9d69c04ac76393e885fa6a1eb327a.png "Sponsor 7") ](https://opencollective.com/orchidssg/sponsor/6/website) [ ![Sponsor 8](../Images/eac5c511c942df18d370017a0b432d09.png "Sponsor 8") ](https://opencollective.com/orchidssg/sponsor/7/website) [ ![Sponsor 9](../Images/78e4d5e5cec08c9057a72dba80203d6f.png "Sponsor 9") ](https://opencollective.com/orchidssg/sponsor/8/website) [![Sponsor 10](../Images/e723a91c6047bd10234de9ce09470c39.png "Sponsor 10")](https://opencollective.com/orchidssg/sponsor/9/website) 

### 许可证

Orchid 是在 GNU 宽松通用公共许可证(LGPL-3.0)下许可的开源软件。请看 [License.md](https://github.com/orchidhq/orchid/blob/dev/License.md)

### 接触

…

</article>

[View on GitHub](https://github.com/orchidhq/Orchid)

# 第一步

Orchid 是一个用 Java 和 Kotlin 构建的工具，设计用于从 Gradle 运行。Gradle 是一个构建工具，它使用 Groovy 脚本来配置您的构建。虽然它是一个超级强大的工具，但它本身的使用和配置相当复杂，这就是为什么 Orchid 有一个官方的 Gradle 插件，即使你不熟悉 Gradle，也可以很容易地开始使用 Orchid。

## 安装 Gradle

首先，我们需要安装 Gradle。如果你用的是 Mac，用自制软件安装 Gradle 很容易。

```
# Install Homebrew
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

# Use Homebrew to install Gradle 
brew install gradle 
```

Enter fullscreen mode Exit fullscreen mode

如果你在另一个操作系统上，你可以在 Gradle 的[安装页面](https://gradle.org/install/)找到为你的系统安装它的步骤。

## 创建一个 Gradle 项目

现在您已经安装了 Gradle，让我们转到一个空的目录，您想要在这个目录中工作您的兰花站点。

```
cd ~/Documents/personal/orchid 
```

Enter fullscreen mode Exit fullscreen mode

在这个空文件夹中，运行以下命令，这将为您初始化一个 Gradle 项目，并设置它需要的所有文件和文件夹。

```
gradle init --type java-library 
```

Enter fullscreen mode Exit fullscreen mode

这将使你的项目看起来像:

```
|__.gradle/
|__gradle/
|__gradlew
|__build.gradle
|__gradlew.bat
|__settings.gradle
|__src
|____test/
|____main/ 
```

Enter fullscreen mode Exit fullscreen mode

## 将兰花添加到您的 Gradle 项目中

现在我们已经设置好了 Gradle 项目，让我们对它进行配置，使其能够运行兰花。首先，我们需要打开`build.gradle`并找到`plugins`部分。

```
plugins {
    // Apply the java-library plugin to add support for Java Library
    id 'java-library'
} 
```

Enter fullscreen mode Exit fullscreen mode

让我们将`com.eden.orchidPlugin`插件添加到这个块中。

```
plugins {
    // Apply the java-library plugin to add support for Java Library
    id 'java-library'
    id 'com.eden.orchidPlugin' version '0.8.10'
} 
```

Enter fullscreen mode Exit fullscreen mode

兰花 Gradle 插件本身并不足以让兰花运行。我们还需要告诉格雷尔:

1.  兰花插件和主题，我们希望包括在我们的网站上
2.  在那里可以找到那些插件和主题
3.  一些基本的配置值，使兰花可以正常运行

为此，在`build.gradle`的末尾添加以下几行。

```
// 1\. Include all official Orchid plugins and themes
dependencies {
    orchidCompile "io.github.javaeden.orchid:OrchidAll:0.8.10"
}

// 2\. Get Orchid from Jcenter, Bintray, and Jitpack
repositories {
    jcenter()
    maven { url 'https://dl.bintray.com/javaeden/Orchid/' }
    maven { url 'https://jitpack.io' }
}

// 3\. Use the 'BsDoc' theme, and view the site locally at 'http://localhost:8080'
orchid { 
    theme = "BsDoc"
    baseUrl = "http://localhost:8080"
} 
```

Enter fullscreen mode Exit fullscreen mode

## 润兰

现在，您已经拥有了运行兰花和查看站点所需的一切。回到您的终端，运行下面的命令来启动 Orchid，让它用本地 HTTP 服务器托管您的站点，这样您就可以预览它了。

```
gradle orchidServe 
```

Enter fullscreen mode Exit fullscreen mode

几秒钟后，您应该能够在浏览器中访问 [http://localhost:8080](http://localhost:8080) 来查看您的第一个兰花站点！

## 到底怎么回事？

启动 Orchid 后，您会看到很多东西被记录到控制台。让我们简单地浏览一下输出，这样您就可以理解发生了什么。

```
Using the following modules: 
-------------------------
 * com.eden.orchid.StandardModule

Auto-loaded modules: 
-------------------------
 * com.eden.orchid.bsdoc.BsDocModule
 * com.eden.orchid.changelog.ChangelogModule
 * com.eden.orchid.editorial.EditorialModule
 * com.eden.orchid.forms.FormsModule
 * com.eden.orchid.forms.SearchModule
 * com.eden.orchid.html5up.futureimperfect.FutureImperfectModule
 * com.eden.orchid.impl.compilers.markdown.FlexmarkModule
 * com.eden.orchid.impl.compilers.pebble.PebbleModule
 * com.eden.orchid.kss.KssModule
 * com.eden.orchid.languages.asciidoc.AsciidocModule
 * com.eden.orchid.languages.bible.BibleModule
 * com.eden.orchid.languages.diagrams.DiagramsModule
 * com.eden.orchid.languages.highlighter.SyntaxHighlighterModule
 * com.eden.orchid.netlifycms.NetlifyCmsModule
 * com.eden.orchid.pages.PagesModule
 * com.eden.orchid.plugindocs.PluginDocsModule
 * com.eden.orchid.posts.PostsModule
 * com.eden.orchid.presentations.PresentationsModule
 * com.eden.orchid.swagger.SwaggerModule
 * com.eden.orchid.swiftdoc.SwiftdocModule
 * com.eden.orchid.taxonomies.TaxonomiesModule
 * com.eden.orchid.wiki.WikiModule
 * com.eden.orchid.writersblocks.WritersBlocksModule 
```

Enter fullscreen mode Exit fullscreen mode

这让你知道哪些插件正在被使用。兰花将自动加载你的 Gradle `dependencies`块中包含的任何插件，这些插件本身可能包含其他插件，这将让你确切地知道你的兰花站点中正在使用什么。

```
Flag values: 
-------------------------
-adminTheme: Default
-baseUrl: http://localhost:8080
-d: /path/to/your/site/build/docs/orchid
-dryDeploy: false
-environment: debug
-resourcesDir: /path/to/your/site/src/orchid/resources
-task: serve
-theme: BsDoc
-v: 1 
```

Enter fullscreen mode Exit fullscreen mode

这显示了从 Gradle 传递给 Orchid 的命令行标志。这可能有助于调试您的构建，尤其是在 CI 环境中运行时。

```
[INFO] Orchid: Running Orchid version 0.8.10, site version 1 in debug environment
[INFO] OrchidWebserver: Webserver Running at http://localhost:8080
[INFO] OrchidWebsocket: Websocket running at http://localhost:8081/ 
```

Enter fullscreen mode Exit fullscreen mode

这让你知道你使用的是哪个版本的兰花，以及你的网站的版本。此外，它还会让你知道你的网站目前在哪个网址上提供服务。默认情况下，这将是`localhost:8080`，但是如果该端口正被另一个进程使用，该端口将被更改为最近的空闲端口。

```
[INFO] TaskServiceImpl: Build Starting...
[INFO] GeneratorServiceImpl: Indexing [10000: assets]
[INFO] GeneratorServiceImpl: Indexing [1000: home]
[INFO] GeneratorServiceImpl: Indexing [1000: styleguide]
[INFO] GeneratorServiceImpl: Indexing [1000: pages]
[INFO] GeneratorServiceImpl: Indexing [1000: posts]
[INFO] GeneratorServiceImpl: Indexing [1000: wiki]
[INFO] GeneratorServiceImpl: Indexing [100: changelog]
[INFO] GeneratorServiceImpl: Indexing [100: forms]
[INFO] GeneratorServiceImpl: Indexing [100: netlifyCms]
[INFO] GeneratorServiceImpl: Indexing [100: presentations]
[INFO] GeneratorServiceImpl: Indexing [100: swiftdoc]
[INFO] GeneratorServiceImpl: Indexing [100: taxonomies]
[INFO] GeneratorServiceImpl: Indexing [11: sitemap]
[INFO] GeneratorServiceImpl: Indexing [11: feeds]
[INFO] GeneratorServiceImpl: Indexing [10: indices]
[INFO] GeneratorServiceImpl: Generating [10000: assets]
[INFO] GeneratorServiceImpl: Generating [1000: home]
[INFO] GeneratorServiceImpl: Generating [1000: styleguide]
[INFO] GeneratorServiceImpl: Generating [1000: pages]
[INFO] GeneratorServiceImpl: Generating [1000: posts]
[INFO] GeneratorServiceImpl: Generating [1000: wiki]
[INFO] GeneratorServiceImpl: Generating [100: changelog]
[INFO] GeneratorServiceImpl: Generating [100: forms]
[INFO] GeneratorServiceImpl: Generating [100: netlifyCms]
[DEBUG] GeneratorServiceImpl: [netlifyCms] Generator pages rendered with [Default] Theme.
[INFO] GeneratorServiceImpl: Generating [100: presentations]
[INFO] GeneratorServiceImpl: Generating [100: swiftdoc]
[INFO] GeneratorServiceImpl: Generating [100: taxonomies]
[INFO] GeneratorServiceImpl: Generating [11: sitemap]
[INFO] GeneratorServiceImpl: Generating [11: feeds]
[INFO] GeneratorServiceImpl: Generating [10: indices] 
```

Enter fullscreen mode Exit fullscreen mode

兰花分为两个不同的阶段:索引阶段和 T2 阶段。在索引阶段，兰花将让所有插件一起工作，以建立一个什么样的最终网站看起来像模型。在生成阶段，Orchid 将控制权交还给插件来呈现所有页面。这部分输出向您展示了哪些插件被索引，以及以什么顺序生成。

通过保持两个不同的阶段，兰花可以给所有插件一个很好的方式来共同努力，以建立您的网站，但也给一切一个保证，它需要的所有数据都在那里之前，任何网页被渲染。这可能现在没有多大意义，但是随着你对兰花越来越熟悉，你会开始看到它真正赋予的力量，这是其他静态站点生成器无法比拟的。

所有这一切的结果是，Orchid 从许多不同的地方(许多不同的插件)获取数据，并在您的目标目录中生成整个网站(`-d`标志)，作为静态 HTML、Javascript、CSS 和其他相关的静态资产。

```
Build Metrics: 
┌───────┬────────────┬───────────────┬─────────────────┬───────────────────────────┬─────────────────────────────┐
│       │ Page Count │ Indexing Time │ Generation Time │ Mean Page Generation Time │ Median Page Generation Time │
├───────┼────────────┼───────────────┼─────────────────┼───────────────────────────┼─────────────────────────────┤
│  home │     1      │     64ms      │      362ms      │           354ms           │            354ms            │
├───────┼────────────┼───────────────┼─────────────────┼───────────────────────────┼─────────────────────────────┤
│ pages │     4      │     23ms      │      220ms      │           54ms            │            45ms             │
├───────┼────────────┼───────────────┼─────────────────┼───────────────────────────┼─────────────────────────────┤
│ TOTAL │          5 │         201ms │           773ms │                     114ms │                        45ms │
└───────┴────────────┴───────────────┴─────────────────┴───────────────────────────┴─────────────────────────────┘

Generated 5 pages in 977ms

[INFO] TaskServiceImpl: Build Complete 
```

Enter fullscreen mode Exit fullscreen mode

兰花是一个非常快速的静态网站生成器，其构建速度与市场上最好的工具不相上下，尽管它更加强大和灵活。生成时间主要受呈现页面的模板引擎的原始速度限制，但此表可能有助于您调试较慢的构建。在这里你可以看到兰花生成了多少页面，以及索引和渲染每个插件所花费的总时间。

`home`插件通常是最慢的，因为它包含了第一个呈现的页面，所以模板缓存的预热时间包含在它的生成时间中。对于所有的插件，你应该期望平均和中间的生成时间非常相似，如果它们有很大的不同，你可能需要看看是否有来自该插件的页面引起问题。这也可以帮助您识别运行非常缓慢的整个插件。

网站越大，总的构建时间就越长，但是平均页面生成时间会下降。这与大多数其他工具形成对比，对于非常大的网站，每个页面的生成时间往往*显著增加*。单个页面的平均生成时间接近 20 毫秒或更短是很常见的，这意味着几千个页面的站点可以在几分钟内轻松构建，而其他工具可能需要 10 分钟或更长时间(如果它们甚至可以处理这样规模的站点的话！).

# 结论

现在我们对如何开始运行兰花有了一点概念，让我们在浏览器中打开 [http://localhost:8080](http://localhost:8080) 。Orchid 已经将您的站点构建到了`build/docs/orchid/`目录中，并使用它自己的轻量级嵌入式 HTTP 服务器直接为这些页面提供服务。因为一个兰花站点只是一堆直接在磁盘上提供服务的文件(没有额外的服务器端处理)，你甚至可以停止兰花进程，并在那个目录中启动任何 HTTP 服务器(像[这个](https://github.com/indexzero/http-server))，你会得到相同的结果。

恭喜你，你现在已经有了一个基本的兰花网站，并开始运行！让我们回顾一下我们所学的内容:

1.  Orchid 是一个命令行工具，通过 Gradle 运行。Orchid 为 Gradle 提供了一个插件，所以不需要了解太多关于 Gradle 的知识就可以很容易地设置和运行 Orchid。
2.  Orchid 是一个静态站点生成器，它是一个获取内容并生成整个网站的工具，整个网站只包含 HTML、CSS 和其他静态文件，可以从任何 web 服务器托管。
3.  兰花使用一系列插件来生成您的网站，并有一个独特的方式来管理建设生命周期，实际上改善了每页的生成时间，因为您的网站的增长，不像大多数其他工具往往会大大降低速度。

请继续关注更多关于如何使用兰花的教程。我们将利用我们在这里学到的知识，并在此基础上进一步学习如何添加您的第一页，开始定制您的网站并使其独一无二。

* * *

本教程最初发布在[官方兰花文档](https://orchid.netlify.com/wiki/learn/tutorials/your-first-orchid-site)中。