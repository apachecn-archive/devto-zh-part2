# 构建可扩展的系统

> 原文：<https://dev.to/nylas/building-systems-that-scale-42e2>

毫无疑问:将您的 API 从一个 MVP 产品扩展到一个可以吸引(并支持)成千上万各种规模的客户的产品是一项挑战，随着公司的发展，这项工作变得更加复杂。

在最近的 [Nylas 开发者大会](https://www.meetup.com/Nylas-Developer-Events/)上，我们与 [Twilio](https://www.twilio.com/) 的软件开发者 Liz Acosta 一起探索了构建可扩展系统的想法；迈克·阿特金斯，[发射基地](https://launchdarkly.com/)的软件工程师；Keith Horwood， [StdLib](https://stdlib.com/) 的 CEO 和创始人；我们的首席技术官兼联合创始人克里斯汀·斯潘。

主持人兼开发人员社区宣传员 [Mary Thengvall](https://twitter.com/mary_grace) 要求演讲者解决紧迫的话题，如:

*   你会给正在快速扩张的公司什么建议？
*   让你扩大公司规模的一项关键技术是什么？
*   您如何知道什么时候该对系统进行更改呢？你在看什么？
*   您如何向客户传达系统变更？
*   组织的扩展可能比技术的扩展更困难——你的最佳实践是什么？

拿一袋爆米花，倒上你最喜欢的饮料，坐下来享受小组成员的妙语连珠。

[https://www.youtube.com/embed/pY0Y3jDq8yc](https://www.youtube.com/embed/pY0Y3jDq8yc)

## 当你听到“秤”这个词时，你会联想到什么情绪？

基思 : “规模”在我脑海中最能唤起的是一种存在主义的恐惧，主要是因为大多数与规模相关的东西都是我几乎发不出来的词，比如 Kubernetes。还有像 ELB，EC2 这样的词...很多东西，尤其是在我早期从事技术工作的时候，让我一直觉得力不从心。另一方面，我也乐观地看待‘规模’。每当规模成为公司的一个问题时，这是一个好问题。显然，你已经取得了一定程度的成功，所以从商业角度来看，这很酷。这是恐惧和乐观的混合体。

莉斯 : 我想我最初的反应是‘我头疼’除此之外，还有乐观情绪——“酷，我们在成长！我认为这也非常令人兴奋，因为它提出了全新的挑战——一些需要拓展你想象力的新工作。这是创造性部分开始发展的地方。

***迈克** :* 我明确感受到的一件事是，当我在我们扩大规模的时候收到寻呼机并随叫随到时，我会有一种恐惧和不祥的感觉，但看到你的产品中的想法变得更加充实，以及跟进客户提出的其他用例，也是令人兴奋的。看到这些新的发展总是令人兴奋。

***斯潘** :* 我肯定会第二次感受到这种兴奋，但同时，“规模”让我想到所有时间都在坠落的东西。这是令人兴奋的，但有时，你需要从兴奋中休息一下，因为你现在只想一切正常。

## 对于准备扩展技术的人，你有什么建议？

基思 : 老实说，我会告诉他们去跑步。如果有一个艰难的决定即将到来，或者如果有很多事情在你的脑海中，你吓坏了，一些人转向冥想，我真的发现跑步是冥想。找一些能降低血压的东西。

***斯潘** :* 求助。硅谷最令人惊奇的事情之一是这里有一个真正想互相帮助的社区。缩放是人们想要帮助你的事情之一，因为你的产品正在起飞！感受一下——找到你可以信任的人，告诉他们你的问题，因为他们经常能帮你解决问题。

***莉兹** :* 不要试图为它预先优化。开始写初稿——把它拿出来，然后你就可以在那里编辑了。不需要马上变得完美——你可以不断重复一个想法。不要在构建任何东西之前尝试和优化，因为你最终只会感到沮丧。

***迈克** :* 要意识到未来可能出现的问题，并确保大家都意识到这些潜在的问题。可能发生的最糟糕的事情是，其他人随叫随到，并且存在您知道的扩展问题，但是他们必须在恐慌中解决这个问题。如果它被记录下来，当他们看到它时就有可能认出它，并且能够更快地修复它。

## 让你扩大公司规模的一项关键技术是什么？

迈克 : 我想可能是服务器和事件协议。客户不断地给我们打电话，而不是有一个超级繁重的工作流程，你可以只给他们发送有关更改的数据，然后他们永远不会和我们说话。太棒了。

***斯潘** :* 很难只挑一个。我们使用与第一天相同的编程语言，Python。这很棒，我们不需要重写任何东西——它能够随着我们的扩展而发展。我们也是 MySQL 的忠实用户。我们特别挑选了它，因为我们知道它已经被大规模使用，我们不想在公司的早期就解决这些问题，比如‘我如何在这个东西里保存这么多位？’

***莉兹** :* 对我们来说是 Datadog。它允许您跟踪这些宝贵的指标，因此您不必为此编写所有的内部基础架构，它只是开箱即用。

***基思** :* 没有 AWS Lambda 我们公司就不会存在。尤其是我们公司的第一个上市版本。

## 你如何知道什么时候开始改变你的系统？你关注的是什么？

***莉兹** :* 作为开发人员，我们有时会忘记公司里还有其他人在做其他工作！保持开发者之间的对话，也许是营销或销售正在做的事情，这真的很重要。有时候，销售人员与新客户取得了联系，他们可能会说，“这个新客户将带来这么多的流量和数据，所以，嘿，开发人员，你能帮助我们吗？”我认为，记住你的公司是一个由不同有机体组成的完整生态系统，我们都在做不同的部分，这意味着你可以保持对话畅通，并关注公司正在做什么，这样作为开发人员，你不仅仅是反应，而是与团队的其他成员合作。

## 当你在扩展时，你不仅需要与你的队友交流，还要与你的客户交流。你如何以不影响你们关系的方式向顾客传达变化？

***莉兹** :* 一开始就制定一份真正强有力的使命陈述是关键。然后，当你有一个变化出现时，你可以评估，“这会影响这些客户吗，如果会，会怎样？”并返回到使命陈述。在 Twilio，我们说‘我们不仅仅是在销售产品。我们在出售信任。从我们最小的客户到我们最大的客户，我们知道如果我们要改变什么，我们必须确保它仍然符合我们的使命，并与我们的客户建立信任。

信任可以是任何东西，从确保你的小客户不会受到你为适应大客户而做出的改变的影响。这也是为了让客户知道什么时候会有变化，并且保持透明。同样，当你有一个非常强有力的使命宣言时，当你问这样的问题时，“我们下一步应该做什么？”以及“我们如何做到这一点？”，你可以继续回到那个使命陈述，问自己，“这个决定和那个一致吗？”

迈克 : 我认为当你赢得更多顾客时，你必须更加注意你发布的信息。随着越来越多的人关注你发布的东西和你写的代码，你必须越来越小心你发布的东西的质量。

***斯潘** :* 我认为还有一些事情是 API 和 SaaS 公司所独有的。一个是超级基本的:如果人们在你提供的平台上构建东西，他们讨厌你改变东西而不告诉他们——这会破坏他们的东西！这是第一条规则——如果你要改变一些可能会破坏他们已经建立起来的东西，你必须提前通知你的客户。你应该能够进入你已经收集的数据，并且很好地了解谁会受到你所做的改变的影响。然后，主动接触他们，确保他们知道什么在改变，或者他们需要做什么，以确保他们的代码保持可靠地工作，并且他们感到得到了支持。人们依赖于你——你应该确保他们能够适应你的平台。

## 在一个稍微不同的话题上，关于组织的伸缩性呢？有时，这可能比在技术层面上进行扩展更困难。你如何成功做到这一点？

***斯潘** :* 关键的一点是，你的工程团队并不是你的公司中唯一需要随着你的成长而扩展的部分。你需要考虑工程部门和支持你的产品所需的所有其他部门之间的正确比例。例如，我们有一个开发人员成功团队，随着我们获得更多的客户，我们不仅需要更多的工程师，还需要更多的客户成功工程师。

迈克 : 随着公司规模的扩大，转向书面交流非常有效。当有 5 个人左右的时候，进行一些口头的、面对面的会议非常有效，但是一旦你开始成长，不是每个人都可以在同一时间、所有时间呆在同一个房间里。投入时间，写下你打算做什么，以及你打算什么时候去做，通常会让其他人对公司的发展方向和你应该做什么有一个共同的认识。深思熟虑、写得好的文档——不仅仅是松散的渠道——特别有用。

开会的时候写会议笔记，记录会议中做出的任何决定。指定某人作为每次会议的主持人，让事情保持正轨，然后有一个单独的记录员。在早期，我们五个人在一个房间里，我们从不写任何东西。如果发生了什么事情，我们只是互相交谈并解决它，但最终，不是每个人都可以在那里，但每个人都需要知道发生了什么。

***莉兹** :* 拥有真正清晰透彻的文档确实很有帮助。记录决策也能让新员工了解公司历史——所有这些小“魔术”别人都知道，但你作为新员工可能不熟悉。

***基思** :* 我最尊敬的领导者和看起来最有效的沟通方式通常是那些管理者几乎过度沟通的方式。他们不断传达使命&愿景，并确保他们的团队每天都在正轨上。我总是发现，我所在的团队，尤其是那些充满真正有才华、热情的人的团队，往往会在没有自上而下反复强调“这就是我们正在做的事情”时有点偏离正轨。这就是我们这么做的原因。这就是你需要注意的原因。

斯潘 : 我认为这一切都归结于文化。为了创造和维持一种伟大的文化，你必须清楚地表达你的组织价值观——写下来，告诉你面试的每一个人，并向你现有的员工强调这一点——因为在一天结束时，客户的体验将由你团队中的其他人以及他们每天选择做什么来决定。就像你不可能在房间里参加每一次谈话和决策，你也不可能在房间里参加公司里发生的每一次互动。你必须投入真正的努力来衡量你的团队应该如何思考他们在做什么，以及他们应该把时间花在什么上面。

迈克 : 重要的是要认识到，随着公司的成长，它会发生变化。随着公司的发展，试图让它和 5 个人的时候完全一样是不现实的。同样，随着公司的发展，你会有一群更聪明的人和你一起工作，并允许他们对公司产生影响。我觉得也超级重要。

* * *

*This post was originally posted on the [Nylas Engineering Blog](https://www.nylas.com/blog/nylasdevevents-building-systems-that-scale)*