# Javascript ç¯å¢ƒå˜é‡åœ¨ JS åº”ç”¨ç¨‹åºä¸­åŠ è½½ç¯å¢ƒå˜é‡

> åŸæ–‡:[https://dev . to/de ammer/loading-environment-variables-in-js-apps-1p7p](https://dev.to/deammer/loading-environment-variables-in-js-apps-1p7p)

#### [](#how-to-store-and-consume-environment-variables-for-local-development)å¦‚ä½•ä¸ºæœ¬åœ°å¼€å‘å­˜å‚¨å’Œæ¶ˆè´¹ç¯å¢ƒå˜é‡

API å’Œç¬¬ä¸‰æ–¹é›†æˆè¦æ±‚å¼€å‘äººå‘˜ä½¿ç”¨åä¸º**ç¯å¢ƒçš„é…ç½®æ•°æ®æˆ–é…ç½®å˜é‡**ã€‚è¿™äº›å˜é‡é€šå¸¸å­˜å‚¨åœ¨å¯†ç ä¿æŠ¤çš„åœ°æ–¹ï¼Œå¦‚ CI å·¥å…·æˆ–éƒ¨ç½²ç®¡é“ï¼Œä½†æ˜¯å½“æˆ‘ä»¬åœ¨æœ¬åœ°å¼€å‘åº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨å®ƒä»¬å‘¢ï¼Ÿ

[![](../Images/923d5e008779d67209be558e19c20b56.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--5ng7r_Zd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AiTLvajtJ6tN3DnHArGKkDA.png)

#### TLï¼›åšå£«:

*   ä¸è¦åœ¨æºä»£ç æ§åˆ¶ä¸­å­˜å‚¨ç¯å¢ƒå˜é‡
*   ä½¿ç”¨ [dotenv](https://github.com/motdotla/dotenv) ä»æ‚¨çš„è¯»å–æ•°æ®ã€‚ç¯å¢ƒæ–‡ä»¶
*   create-react-app åœ¨ç¯å¢ƒå˜é‡ä¸Šå¼ºåˆ¶å‘½åç©ºé—´

è¿™ä¸ªç®€çŸ­çš„æ•™ç¨‹å°†è§£é‡Šä¸€ç§åœ¨æœ¬åœ°å¼€å‘æ—¶å°†ç¯å¢ƒå˜é‡åŠ è½½åˆ°ä»£ç ä¸­çš„æ–¹æ³•ã€‚ä¸»è¦çš„å¥½å¤„æ˜¯åƒ API é”®è¿™æ ·çš„ç§˜å¯†ä¸ä¼šè¢«æäº¤åˆ°æºä»£ç æ§åˆ¶ä¸­ï¼Œä»¥ä¿è¯åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ã€‚

#### [](#requirements)è¦æ±‚:

*   Javascript åº”ç”¨ç¨‹åº
*   åŒ…è£…ç»ç†(yarn å’Œ npm éƒ½å¾ˆæ£’)
*   7+èŠ‚ç‚¹

### [](#set-up-the-variables)è®¾ç½®å˜é‡

åˆ›å»ºä¸€ä¸ªåä¸ºã€‚envâ€åœ¨æ‚¨çš„å­˜å‚¨åº“çš„æ ¹ç›®å½•ä¸‹ã€‚è¿™ä¸ªæ–‡ä»¶è¢«ç§°ä¸ºâ€œç‚¹æ–‡ä»¶â€ï¼Œä¸æ™®é€šæ–‡ä»¶ä¸åŒï¼Œå®ƒé€šå¸¸éšè—åœ¨æ–‡ä»¶æµè§ˆå™¨ä¸­ã€‚

å¤§å¤šæ•° ide éƒ½å…è®¸ç”¨æˆ·åˆ›å»ºæ²¡æœ‰åå­—çš„æ–‡ä»¶ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯è¿™æ ·çš„è¯ï¼Œå°±ç›´æ¥è¿›å…¥ä½ çš„ç»ˆç«¯ï¼ŒæŠŠ cd æ”¾å…¥ä½ çš„åº”ç”¨ç¨‹åºçš„æ ¹æ–‡ä»¶å¤¹ã€‚

```
touch .env 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ¥ä¸‹æ¥ï¼Œç”¨ key=value æ ¼å¼è®¾ç½®å˜é‡ï¼Œç”¨æ¢è¡Œç¬¦åˆ†éš”:

```
API_KEY=abcde
API_URL=https://my-api.com/api 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æœ€åï¼Œç¡®ä¿ã€‚env æ–‡ä»¶æœªæäº¤åˆ°æ‚¨çš„å­˜å‚¨åº“ä¸­ã€‚è¿™å¯ä»¥é€šè¿‡æ‰“å¼€(æˆ–åˆ›å»º)ä¸€ä¸ª. gitignore æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹ä»£ç è¡Œæ¥å®ç°:

```
.env # This contains secrets, don't store in source control 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#consume-the-variables)æ¶ˆè€—å˜é‡

å‰å¾€æ‚¨çš„ç»ˆç«¯å®‰è£… [dotenv](https://github.com/motdotla/dotenv) å’Œæ‚¨å–œæ¬¢çš„è½¯ä»¶åŒ…ç®¡ç†å™¨:

```
# Using npm:
npm i dotenv

# Using yarn:
yarn add dotenv 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨ç°åœ¨å¯ä»¥ä»æ‚¨çš„ã€‚ç¯å¢ƒæ–‡ä»¶ã€‚åœ¨åº”ç”¨ç¨‹åºä¸­å°½æ—©æ·»åŠ è¿™è¡Œä»£ç ã€‚å¯¹äº React åº”ç”¨ç¨‹åºï¼Œé€šå¸¸æ˜¯ index.js æˆ– App.jsï¼Œä½†è¿™å®Œå…¨å–å†³äºæ‚¨çš„è®¾ç½®:

```
require('dotenv').config(); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å°±æ˜¯è¿™æ ·ï¼æ‚¨çš„åº”ç”¨ç¨‹åºåº”è¯¥å¯ä»¥é€šè¿‡ process.env å¯¹è±¡è®¿é—®ç¯å¢ƒå˜é‡ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨
è¿›è¡Œå¤æŸ¥

```
console.log(process.env); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹:

```
{
 NODE_ENV: "development",
 API_KEY: "abcde",
 API_URL: "https://my-api.com/api"
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ğŸ‰ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡äº†ï¼

ç°åœ¨ï¼Œå¯¹äºæˆ‘ä»¬è¿™äº›ä½¿ç”¨ create-react-app çš„äººæ¥è¯´ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘å¸Œæœ›å®ƒè¢«æ›´å¥½åœ°è®°å½•ä¸‹æ¥ã€‚

### [](#using-createreactapp)ä½¿ç”¨åˆ›å»º-ååº”-åº”ç”¨

è„¸ä¹¦çš„[åˆ›å»º-ååº”-åº”ç”¨](https://github.com/facebook/create-react-app)çš„å·¥ä½œæ–¹å¼ç•¥æœ‰ä¸åŒã€‚å¦‚æœæ‚¨æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ“ä½œï¼Œå¹¶ä¸”æ²¡æœ‰å¼¹å‡ºåº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥ä¼šçœ‹åˆ° NODE_ENV å˜é‡ã€‚é‚£æ˜¯å› ä¸º **create-react-app åªå…è®¸åº”ç”¨ç¨‹åºè¯»å–å¸¦æœ‰** **REACT_APP_ å‰ç¼€çš„å˜é‡ã€‚**

æ‰€ä»¥ä¸ºäº†è®©æˆ‘ä»¬çš„å˜é‡èµ·ä½œç”¨ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°æˆ‘ä»¬çš„ã€‚env æ–‡ä»¶å¦‚ä¸‹:

```
REACT_APP_API_KEY=abcde
REACT_APP_API_URL=https://my-api.com/api 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å†æ¬¡é€šè¿‡å°† process.env è®°å½•åˆ°æ§åˆ¶å°æ¥éªŒè¯æ‚¨çš„è®¾ç½®:

```
{
 NODE_ENV: "development",
 REACT_APP_API_KEY: "abcde",
 REACT_APP_API_URL: "https://my-api.com/api"
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å®Œäº†ğŸ˜

### [](#tips)æç¤º

å˜é‡åœ¨ã€‚env æ–‡ä»¶ä¸éœ€è¦å¼•å·ï¼Œé™¤éå€¼ä¸­æœ‰ç©ºæ ¼ã€‚

```
NO_QUOTES=thisisokay
QUOTES="this contains spaces" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åˆ›å»ºä¸€ä¸ª. env.sample æ–‡ä»¶æ¥è·Ÿè¸ªåº”ç”¨ç¨‹åºåº”è¯¥é¢„æœŸçš„å˜é‡æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åšæ³•ã€‚ä¸‹é¢æ˜¯æˆ‘è‡ªå·±çš„ç¤ºä¾‹æ–‡ä»¶åœ¨å½“å‰é¡¹ç›®ä¸­çš„æ ·å­ã€‚è¯·æ³¨æ„ï¼Œå®ƒè§£é‡Šäº†åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°è¿™äº›é”®å’Œ URLã€‚

```
CONTENTFUL_SPACE_TOKEN="see Contentful dashboard"
CONTENTFUL_API_KEY="see Contentful dashboard"
S3_BUCKET_URL="check AWS"
SHOW_DEBUG_SIDEBAR="if true, show debug sidebar" 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#further-reading)è¿›ä¸€æ­¥é˜…è¯»:

*   [åœ¨ 12 å› ç´ åº”ç”¨ç¨‹åºæ–¹æ³•ä¸­è¯»å–ç¯å¢ƒä¸­çš„é…ç½®](https://12factor.net/config)

æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼æ‚¨æ˜¯å¦æ›´å–œæ¬¢æœ¬åœ°åŠ è½½ç¯å¢ƒå˜é‡çš„å¦ä¸€ç§æ–¹å¼ï¼Ÿæˆ‘å¾ˆæƒ³åœ¨ä¸‹é¢çš„è¯„è®ºä¸­å¬åˆ°å®ƒï¼