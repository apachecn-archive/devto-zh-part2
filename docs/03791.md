# ç¨³å¥åœ°ç®¡ç† Python ä¾èµ–å…³ç³»ã€‚

> åŽŸæ–‡:[https://dev . to/svemaraju/managing-python-dependencies-robustly-51kc](https://dev.to/svemaraju/managing-python-dependencies-robustly-51kc)

æˆ‘æƒ³å†™ä¸€ç¯‡å…³äºŽæˆ‘è¿™å‘¨å­¦åˆ°çš„ä¸€äº›ä¸œè¥¿çš„åšæ–‡ã€‚æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ä¸€å¥—æ ‡å‡†çš„å¼€æºè½¯ä»¶åŒ…ã€‚å‡ ä¹Žæ‰€æœ‰è¿™äº›éƒ½éžå¸¸ç¨³å®šï¼Œä¸ä¼šå¼•èµ·ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯åœ¨ä¸€äº›ç½•è§çš„æƒ…å†µä¸‹ï¼Œæ¯”æˆ‘ç¼–å†™çš„ä»£ç æ›´ç½•è§ï¼Œä¼šæœ‰ä¸€ä¸¤ä¸ª bug è¢«æŽ¨å…¥ PyPiã€‚æˆ–è€…å®ƒç”šè‡³å¯èƒ½ä¸æ˜¯ä¸€ä¸ª bugï¼Œå°±åƒä¸€ä¸ªåœæ­¢æ”¯æŒ Python 2 çš„æ–°ç‰ˆæœ¬ã€‚

æ‰€ä»¥åœ¨è¿™ä¸ªç‰¹æ®Šçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä½¿ç”¨äº† django-scarface åŒ…ï¼Œå®ƒå¸®åŠ©æˆ‘ä»¬éžå¸¸å®¹æ˜“åœ°å‘é€ SNS æ¶ˆæ¯ã€‚æˆ‘ä»¬çŠ¯çš„é”™è¯¯æ˜¯æ²¡æœ‰åœ¨ requirements.txt æ–‡ä»¶ä¸­ç¡®å®šç‰ˆæœ¬ã€‚

```
. . 
django-scarface
. . 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä¹‹æ‰€ä»¥è¦è°ˆè¿™ä¸ªï¼Œæ˜¯ä¸ºäº†æ¼”ç¤ºè¿™æ ·çš„é”™è¯¯æ˜¯å¦‚ä½•åœ¨ç”Ÿäº§ä¸­å·è¢­ä½ çš„ã€‚python æ‰“åŒ…ç®¡ç†å™¨ PIP çš„å·¥ä½œæ–¹å¼æ˜¯ï¼Œæ¯å½“æ‚¨ä¸æŒ‡å®šåŒ…åçš„ç‰ˆæœ¬æ—¶ï¼Œå®ƒæ€»æ˜¯å®‰è£…åŒ…çš„æœ€æ–°ç‰ˆæœ¬ã€‚è¿™éƒ¨åˆ†å¤§æ¦‚æ˜¯å¤§å®¶æ‰€æœŸå¾…çš„ã€‚ä½†æ˜¯å¦‚æžœè¿™ä¸ªåŒ…å·²ç»å®‰è£…äº†ï¼Œè€Œä½ æ²¡æœ‰æŒ‡å®šä¸€ä¸ªç‰ˆæœ¬ï¼Œé‚£ä¹ˆå³ä½¿æœ‰ä¸€ä¸ªæ›´æ–°çš„ç‰ˆæœ¬ï¼Œå®ƒä¹Ÿä¸ä¼šåšä»»ä½•äº‹æƒ…ã€‚

å› æ­¤ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåœºæ™¯ï¼Œå°†ä½¿è¿™ä¸ªé”™è¯¯ç›´åˆ°å¾ˆæ™šæ‰è¢«æ³¨æ„åˆ°:

*   åœ¨æœ¬åœ°-> PIP å®‰è£…->å®Œå…¨å®‰è£…å’Œéƒ¨ç½²-> Awesome ä¸­åˆ›å»ºæ–°é¡¹ç›®ã€‚
*   ä¸€æ®µæ—¶é—´åŽï¼Œä½ éƒ¨ç½²åˆ°ä¸€ä¸ªå¼€å‘/è´¨é‡ä¿è¯/ä¸´æ—¶æœåŠ¡å™¨-> PIP å®‰è£…->æ‰€æœ‰çš„è®¾ç½®åœ¨è¿™é‡Œä¹Ÿå¾ˆå®Œç¾Ž->å¤ªå¥½äº†ã€‚
*   ä½ æ‰‹é‡Œæœ‰å¯å‘è´§çš„äº§å“ã€‚æˆ‘ä»¬åŽ»ç›´æ’­å§ï¼-> PIP å®‰è£…->ä»£ç éƒ¨ç½²->å®ƒæ˜¯æ´»çš„ä¹¡äº²ï¼
*   çŽ°åœ¨ï¼Œå¦‚æžœæ‚¨çš„ç”Ÿäº§è®¾ç½®è¿è¡Œåœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè¯¥æœåŠ¡å™¨å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œçºµå‘æ‰©å±•ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½ä¸ä¼šæ³¨æ„åˆ°è¿™ä¸ªé”™è¯¯ï¼Œé™¤éžæ‚¨å‡ºäºŽæŸç§åŽŸå› å¿…é¡»è¿ç§»åˆ°å¦ä¸€å°æœåŠ¡å™¨ã€‚ä½†æ˜¯åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé«˜æµé‡æ˜¯é€šè¿‡æ°´å¹³æ‰©å±•ç³»ç»Ÿæ¥å¤„ç†çš„ï¼Œæ–¹æ³•æ˜¯é…ç½®ä¸€ä¸ªè§¦å‘å™¨æ¥ç›¸åº”åœ°ç”Ÿæˆæˆ–å…³é—­ç³»ç»Ÿã€‚è¿™æ„å‘³ç€ä¸€ä¸ªæ–°ç³»ç»Ÿæ€»æ˜¯éœ€è¦å…¨æ–°å®‰è£…æ•´ä¸ªé¡¹ç›®ï¼ŒåŒ…æ‹¬ä¾èµ–é¡¹ã€‚çŽ°åœ¨ï¼Œå½“ django-scarface åœ¨å…¶ 3.2 ç‰ˆæœ¬ä¸­æ”¾å¼ƒå¯¹ Python 2.7 çš„æ”¯æŒæ—¶ï¼Œç”Ÿäº§è®¾ç½®ä¸­çš„ä¸‹ä¸€ä¸ªè‡ªåŠ¨ç¼©æ”¾è§¦å‘å™¨å°†å¯¼è‡´å¦‚ä¸‹æ‰€ç¤ºçš„éžå¸¸éš¾çœ‹çš„é”™è¯¯ã€‚

```
IOError: [Errno 2] No such file or directory: '/tmp/pip-install-ji4l4h/django-scarface/django_scarface/__init__.pyâ€™ 
```

Enter fullscreen mode Exit fullscreen mode

æ‰€ä»¥æˆ‘ä»¬æ‰€éœ€è¦åšçš„å°±æ˜¯æŒ‡å®šæˆ‘ä»¬ä½œä¸ºä¾èµ–é¡¹ä½¿ç”¨çš„æ‰€æœ‰åŒ…çš„ç¨³å®šç‰ˆæœ¬ï¼Œè¿™ä¸ªé—®é¢˜å°†æ°¸è¿œä¸ä¼šå‘ç”Ÿã€‚ä½ å†ä¹Ÿä¸ç”¨æ‹…å¿ƒäº†ã€‚å¯¹å—ï¼Ÿä¸å®Œå…¨æ˜¯ã€‚

æˆ‘ä»¬ç”¨æ¥ç®€åŒ–ç”Ÿæ´»çš„è¿™äº›ä»¤äººæ•¬ç•çš„ OSS è½¯ä»¶åŒ…ï¼Œä¹Ÿå¯èƒ½çŠ¯å’Œæˆ‘ä»¬ä¸€æ ·çš„é”™è¯¯ã€‚ä»–ä»¬ä¹Ÿå¯èƒ½å¿½ç•¥äº†ç¡®å®šå…¶ä¾èµ–å…³ç³»çš„éœ€è¦ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†ä¼šé‡åˆ°ä¸Žä¸Šé¢ç›¸åŒçš„é—®é¢˜ï¼Œç”šè‡³æ›´ç³Ÿã€‚è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å­æ˜¯ï¼ŒèŠ¹èœä½¿ç”¨çš„æ¶ˆæ¯åº“ Kombu å‘å¸ƒäº†ä»–ä»¬çš„ 4.2 ç‰ˆæœ¬ï¼Œæ‰“ç ´äº†èŠ¹èœã€‚èŠ¹èœåœ¨ä»–ä»¬çš„`requirements.txt`ä¸­å°å¿ƒç¿¼ç¿¼åœ°æ²¡æœ‰ä¸º Kombu ç•™ä¸‹ä¸€ä¸ªç‰ˆæœ¬èŒƒå›´ï¼Œå½“ä»–ä»¬çš„`requirements.txt`é˜…è¯»ç±»ä¼¼`kombu>=4.0.2,<5.0`çš„ä¸œè¥¿æ—¶ï¼Œä»ç„¶ä¸å¾—ä¸é¢å¯¹è¿™ä¸ªé—®é¢˜ã€‚

æˆ‘ä»¬å¦‚ä½•æ£€æµ‹è¿™æ ·çš„ç ´æŸï¼Ÿåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæž„å»ºå’Œè¿è¡Œæµ‹è¯•çš„ CI/CD ç®¡é“å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ£€æµ‹ PIP å®‰è£…é”™è¯¯ã€‚è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬ CI/CD ç®¡é“åªæœ‰åœ¨æ–°ä»£ç è¢«æŽ¨é€æ—¶æ‰ä¼šè¢«è§¦å‘ã€‚åŒæ ·åœ¨èŠ¹èœçš„æƒ…å†µä¸‹ï¼Œå®‰è£…æ²¡æœ‰å¼•å‘ä»»ä½•é”™è¯¯ï¼Œåªæ˜¯å½“èŠ¹èœæœåŠ¡è¯•å›¾å¯åŠ¨å®ƒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ‹¥æœ‰åƒ Sentry è¿™æ ·çš„é”™è¯¯è®°å½•æœåŠ¡ä¼šæœ‰æ‰€å¸®åŠ©ã€‚å¤„ç†è¿™ä¸€é—®é¢˜çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ç›‘æŽ§æœåŠ¡ï¼Œè¿è¡Œè¯¦ç»†çš„å¥åº·æ£€æŸ¥ï¼Œå¦‚æ‰§è¡Œç³»ç»Ÿçš„å…³é”®éƒ¨åˆ†ï¼Œå¹¶ç¡®ä¿ä¸€åˆ‡æŒ‰é¢„æœŸå·¥ä½œã€‚æˆ‘ä»¬å¼ºçƒˆæŽ¨èè¿™äº›å®žè·µæ¥å¤„ç†ä¸€èˆ¬çš„ç”Ÿäº§ä¸­æ–­/é”™è¯¯ï¼Œå®ƒä»¬ä¹Ÿé€‚ç”¨äºŽæˆ‘ä»¬çš„æ¡ˆä¾‹ã€‚

å°±æ˜¯è¿™æ ·ï¼è¿™å°±æ˜¯æˆ‘è¦è¯´çš„ã€‚æ›´å¹´è½»ã€æ›´å¤©çœŸçš„ python ç¨‹åºå‘˜å¯èƒ½å¾ˆéš¾æ³¨æ„åˆ°è¿™äº›ç»†èŠ‚ã€‚ä½†æ˜¯æˆ‘çŽ°åœ¨èªæ˜Žå¤šäº†ã€‚æˆ‘åœ¨ã€Šå“¨å…µã€‹ä¸­ç›®ç¹äº†ä¸€äº›éžå¸¸ä¸‘é™‹çš„å †æ ˆç—•è¿¹ã€‚å †æ ˆè·Ÿè¸ªæœ‰åŠ©äºŽè°ƒè¯•ï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿæ­ç¤ºäº†ä¸€äº›çœ‹ä¼¼æ— å®³çš„é”™è¯¯ä¼šå¯¼è‡´å¤šä¹ˆå¯æ€•çš„ç»“æžœã€‚ä»–ä»¬ä¼šå¼ºè¿«ä½ æ”¹æ­£é”™è¯¯ã€‚ðŸ˜‚