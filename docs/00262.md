# 开发时请看 SQL 的日志

> [https://dev . to/达赖喇嘛/SQL-9o](https://dev.to/dala00/sql-89o)

我觉得最近在开发使用 SQL 的 APP 应用时，使用 ORM 几乎变得理所当然了。 但是，如果不确认实际执行的查询，有时会变得很麻烦，所以我认为在一定程度上一边看着开发时的日志一边前进比较好。

## 如何查看已执行的 SQL

例如，在 PHP 框架的情况下，如果是 Laravel 的话可以通过导入调试程序，如果是 CakePHP 的话可以通过导入调试工具包来看到打开页面时执行的 SQL 的列表。

[![](../Images/397105c23480a138d8aad0a201b66bf9.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--_5OyWE6O--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/yf12slakvo3r5nilrrau.png)

其他语言和框架，例如 Ruby on Rails 和 Phoenix 等，可以在运行开发服务器时看到 SQL 的历史记录。

## 实际上看什么好呢

基本上最好看的地方，是不是很重的 SQL，我想大概是 SQL 的执行次数。

如果是普通的简单 SQL 应该没什么问题，但是如果是连接、包含子查询或者使用函数的话，最好在该 SQL 的 EXPLAIN 上确认一下，看看索引是否有效等。 只是，这一带在讨论模式的时候，大概也会有所考虑，所以可能没关系的事情也很多。

另一个问题是执行次数。 以前我中途参加过现有的项目，有几个页面在一个页面内运行了 3000 多个查询。 我想大概就像对日历、数据一览的各个数据进行循环，再对获取的数据进行循环并执行 SELECT 一样。

为什么会变成这样呢，因为那是 Laravel 的项目，但最终因为没有放入 Debugbar，所以查询的执行次数没有被可视化，制作的本人也完全没有注意到。 后来因为我放了 Debugbar，触摸了那个页面时才注意到。

这种情况的解决方案是，不在循环中执行 SELECT，而是先获取一次所需的全部数据，然后在循环中只引用该数据，这样就几乎不需要执行 SELECT 了。

## 总结

如果现在完全没有看到在使用 SQL 的项目中运行的 SQL，我想稍微看一下就好了。

特别是正在燃烧的项目，有时谁都来不及想，就随便做了，所以用可怕的东西来可视化一下也许比较好……