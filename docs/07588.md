# 使用 npm 的语义版本控制

> 原文:[https://dev . to/flavio copes/semantic-versioning-using-NPM-1 pkf](https://dev.to/flaviocopes/semantic-versioning-using-npm-1pkf)

如果 Node.js 包中有一件很棒的事情，那就是所有人都同意对他们的版本编号使用语义版本化。

语义版本化的概念很简单:所有版本都有 3 个数字:`x.y.z`。

*   第一个数字是主要版本
*   第二个数字是次要版本
*   第三个数字是补丁版本

当你发布一个新版本时，你不只是随心所欲地增加一个数字，而是要有规则:

*   当您做出不兼容的 API 更改时，您就升级了主版本
*   当您以向后兼容的方式添加功能时，您升级了次要版本
*   当你进行向后兼容的错误修复时，你就升级了补丁版本

所有编程语言都采用了这个约定，每个`npm`包都遵守它是非常重要的，因为整个系统都依赖于它。

为什么这如此重要？

因为`npm`设置了一些规则，当我们运行`npm update`时，我们可以在 [`package.json`文件](https://flaviocopes.com/package-json/)中使用这些规则来选择它可以将我们的包更新到哪个版本。

规则使用这些符号:

*   `^`
*   `~`
*   `>`
*   `>=`
*   `<`
*   `<=`
*   `=`
*   `-`
*   `||`

让我们来看看这些规则的细节:

*   `^`:如果你写`^0.13.0`，运行`npm update`的时候可以更新到补丁和次要版本:`0.13.1`、`0.14.0`等等。
*   `~`:如果你写`~0.13.0`，当运行`npm update`时，它可以更新到补丁版本:`0.13.1`可以，但是`0.14.0`不行。
*   您接受任何高于您指定的版本
*   您接受等于或高于您指定版本的任何版本
*   您接受等于或低于您指定的任何版本
*   你接受比你指定的版本低的任何版本
*   你接受了确切版本
*   你接受一系列的版本。示例:`2.1.0 - 2.6.2`
*   你组合器械包。示例:`< 2.1 || > 2.6`

您可以组合其中一些符号，例如使用`1.0.0 || >=1.1.0 <1.2.0`来使用 1.0.0 或 1.1.0 以上但低于 1.2.0 的版本。

还有其他规则:

*   无符号:您只接受您指定特定版本(`1.2.1`)
*   `latest`:您想要使用最新版本