# ç”¨ç¾äººé±¼å›¾åœ¨(éš”ç¦»)èšä¼šä¸Šç»™æœ‹å‹ç•™ä¸‹æ·±åˆ»å°è±¡

> åŸæ–‡:[https://dev . to/okeeffed/impressing-friends-at-isolation-parties-with-mermaid-diagrams-njm](https://dev.to/okeeffed/impressing-friends-at-isolation-parties-with-mermaid-diagrams-njm)

*æ³¨æ„:è¿™æ˜¯æˆ‘æœ€å—æ¬¢è¿çš„å¸–å­ä¹‹ä¸€çš„å†åˆ†äº«ï¼Œæœ€åˆæ˜¯åœ¨ 2018 å¹´åº•å‘å¸ƒåˆ°æˆ‘çš„æ—§ç½‘ç«™ä¸Šçš„ã€‚ç°åœ¨å†æ¬¡åˆ†äº«ï¼Œä»¥ä¿æŒæˆ‘æ¯å¤©çš„è¿ç»­å‘å¸–ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥å‘å¸ƒä¸€äº›å·¥ä½œç‰¹å†™(åœ¨å‘¨äº”ï¼Œæˆ‘çŸ¥é“ğŸ¤¦).å¦‚æœæ‚¨å¸Œæœ›åœ¨å°†æ¥çœ‹åˆ°ä¸€äº›æ›´æ•´æ´çš„å›¾è¡¨å†…å®¹(ä½¿ç”¨åƒ D3 è¿™æ ·çš„åº“)ï¼Œè¯·ç›´æ¥å°†å®ƒä»¬æ·»åŠ åˆ°æ‚¨çš„ feed ä¸­ï¼*

[ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹åšæ–‡åŸæ–‡ã€‚](https://blog.dennisokeeffe.com/blog/diagrams-with-mermaid/)

è¿™æ˜¯åŠ¨æ€æ„å»º HTML å›¾è¡¨çš„ä¸€ä¸ªå°ä»‹ç»ã€‚

æˆ‘çœŸçš„ï¼ŒçœŸçš„å¸Œæœ›èƒ½å¤Ÿçœ‹åˆ°æˆ‘åœ¨èµ›é“ä¸Šå»ºé€ çš„ä¸€äº›ç­¹ç ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„æ¢ç´¢æ–¹å¼ã€‚

**å…¥é—¨**

**TLï¼›**åšå£«

```
create-react-app hello-mermaid
cd hello-mermaid
yarn add mermaid debounce 
```

Enter fullscreen mode Exit fullscreen mode

**åŸºç¡€çŸ¥è¯†**

å¯¹äºè¿™ä¸ªç‰¹æ®Šçš„ä¾‹å­ï¼Œæˆ‘å†³å®šåªä½¿ç”¨ create-react-app hello-mermaid æ¥å¯åŠ¨å’Œè¿è¡Œã€‚

ä¸€æ—¦å®‰è£…å®Œæ¯•ï¼Œå°±è¿›å…¥æ–‡ä»¶å¤¹å¹¶é€‰æ‹©`yarn add mermaid`æˆ–`npm install mermaid --save`ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘è¿˜æƒ³åŠ¨æ€æ›´æ–°å›¾è¡¨ï¼Œæ‰€ä»¥è¿˜æ·»åŠ äº† yarn add debounce æˆ– npm install debounceï¼Œå› ä¸ºæˆ‘å°†ä¸ºæ­¤ä½¿ç”¨ä¸€ä¸ª textarea html å…ƒç´ ï¼Œæˆ‘æƒ³åœ¨å»æŠ–ååªè§¦å‘ä¸€æ¬¡ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æˆ‘åœ¨ React ä¸­å…³äºå»æŠ–çš„åŸå§‹[åšå®¢å¸–å­ã€‚](https://blog.dennisokeeffe.com/blog/react-debounce/)

**ä»£ç **

æˆ‘å†³å®šå¼€å§‹ä½¿ç”¨ç¾äººé±¼çš„[ä»‹ç»å­¦ä¹ é¡µé¢ã€‚æŒ‰ç…§è¯´æ˜ï¼Œæˆ‘æ›´æ–°äº†æˆ‘çš„`src/App.js`æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:](https://mermaidjs.github.io/usage.html)

<figure>[![Updated CRA App.js file](../Images/d067880b86d03da23325829f2c309a32.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--SMsi_OdB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AEm4VE_j26ZA-ibM2HCNU6g.png) 

<figcaption>æ›´æ–° CRA App.js æ–‡ä»¶</figcaption>

</figure>

è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿé¦–å…ˆï¼Œæˆ‘æ­£åœ¨å¯¼å…¥æ‰€éœ€çš„åŒ…ã€‚

<figure>[![1\. Import downloaded packages](../Images/4bf74dc08754acfba625d0a4098d4b34.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--v7yLd2br--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AKjxm4QymKl9H_iYEFkBsBg.png) 

<figcaption>1ã€‚å¯¼å…¥ä¸‹è½½çš„åŒ…</figcaption>

</figure>

å…¶æ¬¡ï¼Œæˆ‘å·²ç»æ›´æ–°äº†æ¸²æŸ“ä»£ç ï¼Œç»™äº†æˆ‘ä¸€ä¸ª`div`æ¥å®šä½è¾“å‡ºçš„å›¾å½¢å’Œä¸€ä¸ªæˆ‘å¯ä»¥æ·»åŠ  markdown çš„æ–‡æœ¬åŒºåŸŸ:

<figure>[![2\. Updated render() method](../Images/a07a287f210cca30fea8a824f1423675.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--c5P2CACJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AeTBQKE05wFfpypfCl1hbtA.png) 

<figcaption>2ã€‚æ›´æ–°äº† render()æ–¹æ³•</figcaption>

</figure>

ç¬¬ä¸‰ï¼Œæˆ‘æƒ³åœ¨ mount ä¸Šç”¨ä¸€ä¸ªåŸºæœ¬å›¾è¡¨åˆå§‹åŒ–å›¾å½¢:

<figure>[![3\. Add in the componentDidMount lifecycle method](../Images/d1fe3ec2f20ffcba0c4c7a26bafff9b7.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--EmgXgZO8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AXvRvdLdVsngEO_y8Yhap1g.png) 

<figcaption>3ã€‚æ·»åŠ  componentDidMount ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</figcaption>

</figure>

æœ€åï¼Œæˆ‘æ·»åŠ äº†`handleChange`å‡½æ•°æ¥å°è¯•æ›´æ–°å›¾è¡¨ã€‚

<figure>[![4\. Handle any changes to the text box](../Images/b76c5b32cd1b97d473fa5c44b57ef555.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--qC0yvNzr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2Ak_FpEER8kB7aWIZPOf3L7Q.png) 

<figcaption>4ã€‚å¤„ç†å¯¹æ–‡æœ¬æ¡†</figcaption>

</figure>

çš„ä»»ä½•æ›´æ”¹

ç°åœ¨ï¼Œå½“æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸Šè¿è¡Œ`yarn start`å¹¶ä¸”ç½‘é¡µæ‰“å¼€æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹ç«™ç‚¹:

<figure>[![Aftermath of our updated App.js file](../Images/4374849997823a3961f5de34c0945d0f.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ISftXO46--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1018/1%2Aay1WRUuOalNzLIfZpjSQsQ.png) 

<figcaption>ä½™æ³¢æˆ‘ä»¬æ›´æ–° App.js æ–‡ä»¶</figcaption>

</figure>

å¤ªå¥½äº†ï¼ç°åœ¨ï¼Œç”±äºæˆ‘ä»¬çš„`handleChange`å‡½æ•°å’Œä¼˜é›…çš„å¤„ç†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŠ¨æ€æ›´æ–°å›¾è¡¨ã€‚

æˆ‘ä»ç½‘ä¸Šæ·»åŠ äº†ä¸€äº›ä¾‹å­ï¼Œä½ ç°åœ¨å¯ä»¥å¤åˆ¶å¹¶ç²˜è´´åˆ°æˆ‘ä»¬çš„æ–‡æœ¬æ¡†ä¸­ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼

```
graph  LR  A[Hard  edge]  -->|Link  text|  B(Round  edge)  B  -->  C{Decision}  C  -->|One|  D[Result  one]  C  -->|Two|  E[Result  two] 
```

Enter fullscreen mode Exit fullscreen mode

<figure>[![Graph LR after updating the textarea](../Images/6eca45122b5cad6b34507ba92edabf41.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--fFHfKY5v--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AihAdCedCAPFhvq43vUUMmA.png) 

<figcaption>å›¾ LR åæ›´æ–° textarea</figcaption>

</figure>

```
sequenceDiagram  Alice->>+John:  Hello  John,  how  are  you?  Alice->>+John:  John,  can  you  hear  me?  John-->>-Alice:  Hi  Alice,  I  can  hear  you!  John-->>-Alice:  I  feel  great! 
```

Enter fullscreen mode Exit fullscreen mode

<figure>[![Sequence diagram](../Images/50f60ae666a2b4a23dbf103465dc7494.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--b5jVodOJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2A0tXKjrWvtv2utVc0wKwWDQ.png) 

<figcaption>åºåˆ—å›¾</figcaption>

</figure>

æˆ‘ä»¬ç”šè‡³å¯ä»¥åšåƒå¡˜é¹…å›¾ä¸€æ ·å¤æ‚çš„äº‹æƒ…ï¼ç”¨æ›´å¤æ‚çš„ä¾‹å­æ›´æ–°`textarea`å¯ä»¥ç»™å‡ºå¦‚ä¸‹ç»“æœ:

```
gantt  dateFormat  :YYYY-MM-DD  title  :Adding  GANTT  diagram  functionality  to  mermaid  excludes  :excludes  the  named  dates/days  from  being  included  in  a  charted  task..  (Accepts  specific  dates  in  YYYY-MM-DD  format,  days  of  the  week  ("sunday")  or  "weekends",  but  not  the  word  "weekdays".)  section  A  section  Completed  task  :done,  des1,  2014-01-06,2014-01-08  Active  task  :active,  des2,  2014-01-09,  3d  Future  task  :  des3,  after  des2,  5d  Future  task2  :  des4,  after  des3,  5d  section  Critical  tasks  Completed  task  in  the  critical  line  :crit,  done,  2014-01-06,24h  Implement  parser  and  jison  :crit,  done,  after  des1,  2d  Create  tests  for  parser  :crit,  active,  3d  Future  task  in  critical  line  :crit,  5d  Create  tests  for  renderer  :2d  Add  to  mermaid  :1d  section  Documentation  Describe  gantt  syntax  :active,  a1,  after  des1,  3d  Add  gantt  diagram  to  demo  page  :after  a1  ,  20h  Add  another  diagram  to  demo  page  :doc1,  after  a1  ,  48h  section  Last  section  Describe  gantt  syntax  :after  doc1,  3d  Add  gantt  diagram  to  demo  page  :20h  Add  another  diagram  to  demo  page  :48h 
```

Enter fullscreen mode Exit fullscreen mode

<figure>[![Gantt chart example](../Images/308db8c895d464be317d35ad810a5e66.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--ZZUUvSMU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1024/1%2AQxOJoPnZewbNyKsniVAI_w.png) 

<figcaption>ç”˜ç‰¹å›¾ç¤ºä¾‹</figcaption>

</figure>

**æ¥ä¸‹æ¥çš„æ­¥éª¤**

éå¸¸é…·ï¼ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å¼€å§‹åˆ›å»ºä¸€äº›å¾ˆé…·çš„åŠ¨æ€æµã€‚æ¥ä¸‹æ¥å‘¢ï¼Ÿè¦æœ‰åˆ›æ„ï¼æˆ‘è®¡åˆ’ä»è¾“å‡ºä¸­è§£æ markdown æˆ– htmlï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å¸®åŠ©ç”Ÿæˆé‡è¦çš„æŠ¥å‘Šæˆ–ä¼ªä»£ç ï¼Œä»¥å¸®åŠ©æ„å»ºä¸€äº›åŸºç¡€è®¾æ–½æˆ–æ•°æ®åº“æ¨¡å¼ã€‚

ä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°å›è´­åè®®çš„æœ€ç»ˆä»£ç ã€‚

æ­¤å¤–ï¼ŒæŸ¥çœ‹ä»–ä»¬çš„æ–‡æ¡£ï¼Œçœ‹çœ‹ä½ è¿˜èƒ½åšäº›ä»€ä¹ˆï¼

[ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹åšæ–‡åŸæ–‡ã€‚](https://www.dennisokeeffe.com/blog/diagrams-with-mermaid)