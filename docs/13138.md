# 让您的拉动式请求得到更快审核的 3 条原则

> 原文:[https://dev . to/pull request/3-principles-to-get-your-pull-request-reviewed-faster-463g](https://dev.to/pullrequest/3-principles-to-get-your-pull-request-reviewed-faster-463g)

您和您的团队需要多长时间来审核、接受和合并拉动式请求？需要多长时间？

根据我的经验，拉取请求通过代码审查的周转时间从几分钟到几天不等。我甚至让 PRs 坐了几个星期等待代码审查。我学到了一些基本原则，可以帮助你快速审查代码，并提高拉取请求的周转时间。

### 从干净的代码开始

编写易读易懂的代码可以加快你的拉请求的代码审查周转时间。你的评审者和未来的贡献者应该能够通过阅读理解你的代码在做什么。除了编写良好的文档字符串(如果适用)，还要有意识地确保变量和函数名是自描述的，并尽量将方法限制为只执行一个函数。

可读的代码在代码审查过程之外也很有帮助。在大多数代码库中，人们阅读代码的大部分时间是由你和你的同事在添加代码后很长时间内进行调试和重构。

你是否曾经开始审查一个看起来很大的拉取请求，却发现它包含了一堆本应在`.gitignore`中的文件？让`.gitignore`保持最新是一个简单但经常被忽略的方法，这样可以让你的请求更容易被你的评审者理解。

要想知道应该包括什么，看看 GitHub 的`.gitignore`模板的[回购。](https://github.com/github/gitignore)

仅仅因为您的整个团队都知道他们不需要检查生成的文件或依赖项，就没有理由跟踪它们并将其与拉请求一起提交。对几行代码的快速更新可以减少回购的每个贡献者的每个拉请求的膨胀。

### 限制您的拉取请求的变更大小

冗长的代码审查周转时间的最常见的罪魁祸首是带有大量变更的拉式请求——无论是实际的变更行还是复杂性。为了引入一些简单的变更而创建的拉请求可能会突然变得与一些难以评审的重大变更不成比例。

<figure>[![Large pull request](../Images/8ec04ad5a65222f2cd95186ff3dd06fe.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--DkXhZV3U--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gxmrs9plvj0ws1wt8qlq.png)</figure>

甚至当我在一个拉请求中观察它时，我最终会将一个特性、一些代码重构和一两个 bug 修复组合在一起，而这些本来可以很容易地拆分成几个更易于管理的拉请求。具有强大的代码审查文化的团队鼓励这些更小的、更有策略的拉请求，而不是大的变更集。有时这需要额外的工作，但是你的团队的整体生产力(和理智)会感谢你。

然而，小心行事。这是一门需要仔细思考和练习的艺术。虽然它有助于分解变更，但是过度地将您的代码分割成难以理解的片段并不好。

虽然对于一个拉请求没有多少行完美的代码更改，但我建议在处理一个分支时，考虑一下要包含多少行代码以及有多复杂。考虑审查代码和变更语言的人。

根据代码的复杂性和具体情况，300 多行代码的变化可能大也可能小。

对于新项目或初创公司，他们往往有大量的拉取请求，因为推出一个功能比稳定性更重要。不幸的是，当这种情况发生时，项目开始支持付费客户，这些团队最终会花费大量的工程时间来修复 bug 和重构代码。

在产品中修复 bug 比在由较小的拉请求支持的严格的代码审查过程中发现它们要昂贵得多。

### 构建代码评审文化

高效的代码评审的一个重要组成部分来自于团队的文化及其对代码评审和代码质量的尊重。建立和维护这种文化并非易事。

你不能通过刻在石头上的戒律(或者一个 wiki)来建立代码评审文化，让所有人都遵循。在软件开发的每一个阶段，朝着正确的方向进行微小的推动和过程修正，就能建立文化。代码评审的重要性需要由工程经理和团队中的其他领导来设定和展示。

代码评审是客观协作和鼓励的地方，而不是评判的地方。至关重要的是，你的团队对代码审查的态度是积极的。

开发人员应该把拉请求看作是一个学习的机会，而不是害怕它们成为一种义务，容易受到对他们开发技能的攻击。你可以通过养成在拉请求中提醒注意写得很好的代码的习惯来帮助做到这一点，如果无效的判断溜了进来，要注意快速解决它。

开发过程中需要考虑和时间来实现来自质量代码评审的可维护代码库类型。为了从代码评审中获得高质量的反馈，您应该从计划开始。代码评审的时间应该是每个 sprint 计划中考虑的一个一致的项目。

<figure>[![Include code review time during planning](../Images/0b130f1e8eade2dba1351c55a0251ada.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--kysbHBDT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/g16br2llrqrwvhuwlc5n.jpg) 

<figcaption>计划期间包含代码评审时间</figcaption>

</figure>

如果在计划中不考虑代码评审时间，工程师倾向于首先发布他们的特性，然后评审他们同事的代码。这种缺乏对其他特性的关注导致他们的队友从代码审查中获得有用的反馈的延迟，并且减慢了整个团队的速度。

虽然在 sprint 规划中考虑代码审查会给额外的特性留下更少的空间，但是一个更干净、bug 更少的代码库会给未来的生产力带来好处。所有的特性发布涉众，包括非技术产品和项目经理，都应该考虑和支持代码评审。

*这篇文章最初发布在 [PullRequest 的博客](https://www.pullrequest.com/blog/?utm_medium=referral&utm_source=dev.to)上。让您的代码接受专业评审员的评审:[今天就报名](https://www.pullrequest.com/?utm_medium=referral&utm_source=dev.to)参加 PullRequest*