# 值得跟踪的交付指标

> 原文:[https://dev . to/Accel delivery/delivery-metrics-worth-tracking-4 oad](https://dev.to/acceldelivery/delivery-metrics-worth-tracking-4oad)

*这篇文章最初发表在[加速交付](https://accelerate.delivery/delivery-metrics/)博客*上

## [](#metrics-that-matter)衡量标准很重要

> 工程陷入了救火模式。
> 
> 我们有永无止境的积压。
> 
> 我们关心产品的质量。

我已经解释了我在 PBS 担任工程经理时遇到的一些问题。2018 年 4 月，我们改变了开发软件的方式。我们开始跟踪吞吐量和稳定性指标。我团队中的一些成员阅读了优秀的书籍《加速》,这本书介绍了对产品交付有深远影响的度量标准。

PBS 工程团队对如何提高 pbs.org 等产品的产量和稳定性有其他想法。下面是我们如何改变方法的简史。我们的软件开发人员面临的一个问题是有无穷无尽的工作要做。PBS 是非盈利组织；我们不能总是有更多的工程师。预算和人数很难获得。当我们找不到更多的工程师来做这项工作时，我们考虑了我们的选择。我们选择的第一个选择是少做工作。我们在冲刺阶段忽略了一些产品，专注于其他产品。工作完成了，但是我们生活在积压工作的阴影下。有些星期，我们解决的问题比我们创造的更多。几个星期...采用这种方法几个月后，我们改变了策略。如果我们不能增加更多的人，我们不能减少工作，我们能改变什么？

我们努力更有效地利用现有的工程师。我们通过跟踪软件交付性能来做到这一点。我的团队可以在问题层面做出常规决策。他们可以针对稳定性和吞吐量优化每个问题。这些小决定产生了显著的影响。这是一个图表，显示了我们创造的问题与解决的问题:

[![Created vs. Resolved](../Images/968c2e169d52d18e3058558ab9369f17.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--wahFs-S0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/fc7sw7z074koyed9xrzk.png)

注意到四月份的变化了吗？不断增长的绿色区域代表着进步！我们跟踪四个指标:

*   部署频率
*   变更失败率
*   平均恢复时间
*   周期

我想深入探讨每个指标。此外，我将评论我是如何注意到它对我们的开发工作产生影响的。

## [](#deployment-frequency)部署频率

> 我们多久部署一次产品

部署应该是非事件。部署不应该需要仔细审查或手动监控。他们应该感觉像是编写代码的副产品。理想情况下，部署是一个单一的增量变化。通过尽可能频繁地部署，我们激励了一些生产习惯。

首先，我们简化了生产部署。通过衡量产品开发的最后一英里，部署所花费的时间和精力，我们鼓励自动化。部署应该像按下按钮一样简单。那个按钮应该是很多人都可以接触和理解的。我们曾经有一个“发布经理”的角色。这个人知道将 git 存储库转化为生产服务的正确咒语。现在，任何工程师都可以进行部署，而且一天要做好几次。

第二，我们尽可能频繁地按下部署按钮。说到游戏化，你每按一个按钮就得一分。我们被激励去部署每一个通过审查的拉取请求。[特征标记使这变得更加容易](https://dev.to/trunk-development-feature-flags/)。如果一个拉请求代表部分完成的工作，我们把它放在一个特性标志后面。变化仍然是渐进的。这项工作已经投入生产，可能对一些用户有用。

最后，我们保持批量较小。常规部署不会带来变化。鼓励频繁部署有利于保持较小的变更集。这意味着，如果某个版本出现问题，应该很容易找到受影响的代码。它还可以限制变化的影响。

## [](#change-failure-rate-cfr)改变故障率(CFR)

> 我们必须回滚的部署的百分比

这一指标与“部署频率”密切相关。当该指标鼓励吞吐量时，“变更失败率”鼓励稳定性。这个指标表明你走得太快了。

如果我们注意到回滚有所增加，我就用这个指标来鼓励我的团队放慢速度。它就像一个转速表。我认为持续的 0% CFR 意味着你走得太慢了。我想给部署划个红线。回退一次来测试你能跑多快是值得的。对于不同的团队和产品，边界是不同的。例如，我对 web 开发中> 0%的 CFR 更放心。在网上回滚既便宜又快捷。谈到应用程序开发，我不喜欢回滚。打包软件的回滚既困难又缓慢。

## [](#mean-time-to-recovery-mttr)平均恢复时间(MTTR)

> 从服务故障开始到系统恢复所经过的时间

根据我的经验，MTTR 给稳定带来了紧迫感。当我们的系统失败时，我的团队知道时间不多了。好处是双重的:

*   我们知道当务之急是恢复稳定。
*   我们与同行保持信任。

信任对于任何软件开发组织都是至关重要的。他们知道我们在认真对待这个问题。他们可以在一个聊天频道中跟进并获取最新信息。

看完 MTTR 的比赛后，我们改变了处理恢复事件的方式。我们检查了我们的事件响应流程，并已采取措施将其正式化。我们使用的是[站点可靠性工程书籍](https://landing.google.com/sre/book/chapters/managing-incidents.html)中列出的流程的简化版本。我们的过程曾经是一种普遍的恐慌气氛。开发人员不知道他们是否应该参与到事件中。根本原因分析和补救措施没有公开或协调。利益相关者将很少得到关于情况的更新。采用我们的流程后，我们的恢复更加有序。在我们采用事件响应流程之前，我们没有任何 MTTR 指标。随着时间的推移，我想计算一下我们的响应时间的趋势。

另一个我们在看完《MTTR 是无可指责的死后》后采用的方法。这些分析了问题产生的原因，以及以后如何避免。事后分析是分享观点和知识的有用方式。每次我们从几篇文章中精心制作后，我们通常会复制/粘贴一个死后模板: [Hootsuite 的 5 个为什么](http://code.hootsuite.com/blameless-post-mortems/)和[无可指责的波特莫斯和公正的文化](https://codeascraft.com/2012/05/22/blameless-postmortems/)。

## [](#cycle-time-)周期时间 [*](https://dev.to/delivery-metrics/#note)

> 任务从开发开始到生产结束所需的时间(分钟)

这是我最喜欢的指标。如果我必须观察一个数字来衡量软件交付的健康程度，那就是这个。周期时间是克服软件开发中遇到的所有障碍所需的时间。上游依赖性、测试中的差距、验收审查和部署痛苦都集中在一个数字中。在 PBS，我们以几种方式对这一指标做出了反应。

首先，在我们开始工作之前，我们仔细检查上游拦截器的问题。我们正努力减少我们正在进行的工作量。如果我们开始开发并发现我们需要来自支持服务的东西，我们注定会停滞不前。在我们编写任何代码之前，提前识别阻塞程序会更有效率。

第二，周期时间激励我们保持小任务。一个小的任务可以更快的开发和回顾。变更的风险很低，所以我们也能更快地部署它。特性标志可以很好地保持任务的小规模。我们在 PBS 采用了特色标志，取得了巨大的成功。我们认识到功能标志是技术债务:

*   它们给我们的代码增加了一些复杂性。
*   我们最终必须移除旗帜。

尽管对我们来说，好处大于坏处。我喜欢查看影响三个带有特性标志的文件的拉请求。我不喜欢审查一份代表全部特征、影响 15 个文件、风险更大的公关。

## [](#backlog-0%CC%B8)积压——0̸

在 PBS 采用 [Accelerate](https://www.goodreads.com/book/show/35747076-accelerate) 指标的工程师们已经注意到了一个积极的趋势。在我们测量了我们的软件交付性能之后，我们可以改进它。除了数字和图表，还有其他好处。工作变得更有趣了！有些人听到“连续分娩”，觉得听起来很累。他们认为这意味着一个永无止境的，仔细审查的努力。工程师可以想象老板把他们叫到办公室，谈论为什么他们的周期时间昨天增加了 10 分钟。对我来说，没有什么比这更不真实的了。我们的工程努力尽快见天日。我们每天都发货。积压正在减少。我们正在创造一种我们引以为豪的产品。

*值得注意的是，Accelerate 将我的“周期时间”称为“交付时间”。我从[中了解到](https://www.agilealliance.org/glossary/lead-time/)“交付周期”是一个更长的指标。它表示从确定需求或者将问题放入 backlog 直到问题完成的时间。这里可能会有一些争议。一些人更适应 PBS 的“循环时间”,这就是我们坚持的。