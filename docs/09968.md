# JavaScript 通用 Windows 应用程序

> 原文:[https://dev . to/tuna xor/JavaScript-universal-windows-applications-58n 5](https://dev.to/tunaxor/javascript-universal-windows-applications-58n5)

我会在这个帖子上标记我做这些项目的历史/忧郁原因，如果你想跳过它，请继续

> 忧郁的东西开始了

有时我们热爱科技，有时我们只是希望科技带我们去我们从未想象过的地方！我曾经喜欢的技术之一是 Windows~~Metro~~T2ModernUniversal Apps 现在通常被称为 **UWP** 背后的概念

> 一个适用于所有平台的公共语言运行库

是的，目标是网络、手机、台式机、平板电脑、xbox，任何运行 windows cool 的东西！？这将把我们带到未来，所有的汽车都会飞起来，没有人会被任何事情冒犯....(连这最后一句都没有)

最令人惊奇的事情之一是你可以用 javascript 开始这样做！是的，带 javascript 的通用 Windows 应用程序！现在任何人都可以制作这些应用程序，我的意思是他们用 cordova 尝试了很多年，atom shell(电子)即将出现(或者已经出现了)，那么为什么 windows 不能呢？

嗯，说起来容易做起来难，在我记得 Windows 8.1 更新即将到来的时候，2014 年 4 月 8 日，微软发布了 Windows 8.1 更新
我还在上大学，我对为实现这一梦想所做的工作感到惊讶，但有一些条件不允许这种情况发生，特别是在 javascript 上(C#这篇文章不是关于你的！)不管你喜不喜欢，栈溢出并没有烤人(还没有...那么多)人使用 jQuery，AngularJs 仍然是一个老板，所以微软发布了他们自己的库来与 jQuery 和 interop 竞争，与其他框架如 Knockout，Angularjs 甚至 React！这个库叫做 **WinJS** ，它的外观和感觉与当时的 Windows 完全匹配。

它发展得很好，到了 4.4.x 版本，你可以做当时 UWP 应用程序允许你做的任何事情，为网络体验量身定制，因为你可以在 windows 应用程序之外使用它！对我来说这是一次很酷的经历，我还在看着这个梦。

遗憾的是，它没有增长太多，微软在手机市场上失败了，当时他们的商店里有很多狗屎(现在好了，正在恢复，但损害已经造成)，他们迫切需要改变他们的战略，所以 Windows 10 来改变事情！但是，由于缺乏开发人员，javascript 应用程序处于不利地位，一旦 windows 10 sdks 推出，他们就失去了导航/示例模板(即使在今天，这仍然是事实，我们只有空/winjs 模板，以及 PWA 支持的添加，但这是最近的事)，所以新的开发人员和其他开发人员(如果有)也停止了为 UWP 开发 javascript 应用程序，因为我们感觉好像落后了！

WinJS 进入了维护模式，到了今天陈旧的地步，称之为死，因为用别的方式称呼感觉不对

最后，我为自己感到难过，因为我确实想帮助生态系统，但我没有任何帮助我这样做的经验，所以在经历了否认梦想的痛苦过程后，我继续了我的 JavaScript 之旅

> 忧郁的东西结束了

几年后！现在我们口袋里和食物上放着 JavaScript！JavaScript 生态系统是最丰富的生态系统之一，语言本身发展得如此之快，如此之好，以至于我决定看看 UWP(在 JavaScript 中)目前在做什么，在玩转示例后，我认为你必须做所有的普通 JavaScript 才能创建一个好的应用程序，既然 WinJS lib 基本上已经死了，我为什么还要尝试用一个死库来做 DOM 操作呢？(抱歉，我太年轻了，不知道该如何处理 DOM 操作，所有的 JavaScript 怪癖在今天都只是一个笑话)

我认为这是为什么人们不为 UWP 应用选择这个项目的一个重要原因，你去那里，除了“祝你好运，这里没什么可做的”，你什么也没得到，所以既然 Edge 支持 ES2015，我就想*为什么我不把一些 ES2015 与今天的旧的不那么主流的技术混合搭配呢？*

因此，下列项目诞生了

液体错误:内部
液体错误:内部
液体错误:内部

是啊！在最后，我甚至包括了一些 Vue 和 Aurelia(没有反应角 6 家伙抱歉)样本，包括一些更保守的甚至可能被称为遗产选项与 anguarjs (1.7.x)和 winjs，让我告诉你一件事！

事实是，您可以完全访问 WinRT API！这意味着你可以做大多数事情，如果不是所有的事情，你可以用 C#或 Visual Basic 或 C++访问 WinRT API，不需要 WinJS，不需要框架...什么都没有，就在那里！，而你的目标是浏览器环境，所以如果 Edge 可以渲染，那么 UWP 的应用程序也可以

我认为，缺乏样板文件，缺乏展示在 JavaScript UWP 中使用日常技术可以做什么的人，是我们有时错过这个目标的原因，我知道有 Xamarin，但公平地说，每次我在新的或格式化的 PC 上安装它时，我都会根据模板创建一个项目，但它总是无法编译，所以我需要花几个小时来寻找解决方案。我知道它可以交叉编译到其他操作系统，但并不是每个人都需要它，也不是每个人都想换成 C#来做 windows 应用，有时你已经有了一些 web 应用，希望有一种方法来更好地分发你的内容，等等

我知道这不是最常见的用例，但如果你曾经觉得 JavaScript 中的 UWP 可以拯救你，但你没有这样做，因为你认为它没有支持，那么让我记住你，UWP 团队，Chakra 团队，甚至 Visual Studio 团队，支持这种目标，所以不要害怕瞄准它！因为最终如果他们停止 JavaScript 支持(当然不是)，它仍然是一个 Web 应用程序！几个变化，并准备在网上重新部署！

所以我在做这些项目中学到了很多，我终于觉得我至少为保持一个褪色的梦想活着做出了贡献，我有信心我将不再害怕地瞄准 UWP 应用程序，我已经得到了 Vue，Aurelia 甚至 AngularJS(如果必要的话，还有 transpiler/bundler)

如果你打算用 JavaScript 开发一个 UWP，请记住

## [](#es2015-modules)ES2015 模块

ES2015 模块语法是可用的，但你需要做一个完全合格的导入
`import util from ./util'`不会工作，会无声地失败，你需要做一些类似`import util from '/src/utils/util.js'`的事情，是的，有扩展！那真的很重要！另一个，如果`util`中的任何一个导入失败，它将使`util`脚本也无法被导入！

## [](#classes)类

使用它们！如果你对原型感到不舒服(即使类只是它们上面的糖)，你可以随意使用类的 OOP'nes，类和模块都很适合！，如果您想使用函数来实现完整的功能，也可以这样做！只要它在边缘工作，它就会在那里工作！

## [](#csp)CSP

安全性是很重要的，电子团队非常清楚地意识到这一点，包括在开发模式下控制台上的警告，所以你必须在启用 CSP 的情况下工作，没有 eval，没有内联的东西，没有新的函数，所以如果你的依赖项使用这一点，请确保他们有一个 CSP 兼容的版本，否则你将无法使用它，Vue 本身不能在 UWP 中使用，因为它使用这些东西来编译模板，但一旦它被编译，就没有使用这些功能！这就是为什么你可以安全地使用捆绑器！奥雷利亚也是如此

## [](#fonts)Fonts

准备好本地加载你的字体，因为 CSS 脚本通常会尝试从网上下载，CSP 策略会阻止这些资源

## [](#bundlers)捆扎机

如果你要使用像 webpack 这样的捆绑器，它喜欢散列编译的版本，代码分割之类的东西，它会干扰 visual studio 构建，visual studio 构建喜欢静态地知道它必须加载什么，什么对它可用，所以你的 dist 名称应该保持一致，直到名称不变，这样你就可以继续测试，还要记住在后台运行他们的构建/观察器脚本，这样你就可以不断刷新你的应用程序

## [](#anchor-tags)锚点标签

如果你不小心，这些可能会破坏你的应用程序的导航，例如在 Aurelia 路由器中，他们在 html `route-href="route:home"`中使用这样的东西，最终只是添加一个 href 属性，但这破坏了 UWP 应用程序，并最终重新加载你的应用程序，如果你的应用程序的路由器(不管它是不是 Aurelia)做这样的事情，尝试以编程方式调用该路由器。

因此...相当冗长！我希望你喜欢这篇文章(包括我的拼写错误和语法错误，还有我的插入语！)下面是项目的链接，如果你能提供反馈，我很乐意听到，如果你也能分享这些，我会很高兴，谢谢，祝周末愉快！

[https://github.com/AngelMunoz/WinJS-ES2015-UWP](https://github.com/AngelMunoz/WinJS-ES2015-UWP)
T3】https://github.com/AngelMunoz/Angularjs-ES2015-UWPT5】T6】https://github.com/AngelMunoz/Vue-UWPT8】T9】https://github.com/AngelMunoz/AureliaUWP