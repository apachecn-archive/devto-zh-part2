# è®©æˆ‘ä»¬æ„å»º Web ç»„ä»¶ï¼ç¬¬ 1 éƒ¨åˆ†:æ ‡å‡†

> åŸæ–‡:[https://dev . to/benny powers/let-build-web-components-part-1-the-standards-3e 85](https://dev.to/bennypowers/lets-build-web-components-part-1-the-standards-3e85)

åŸºäºç»„ä»¶çš„ UI æœ€è¿‘éå¸¸æµè¡Œã€‚äº‹å®ä¸Šï¼Œå®ƒæ˜¯å¦‚æ­¤çš„æˆç†Ÿï¼Œä»¥è‡³äºäººä»¬ç”šè‡³å¼€å§‹å°†è€æ´¾çš„ jQuery å°éƒ¨ä»¶é‡æ–°ç§°ä¸ºâ€œjQuery ç»„ä»¶â€ï¼›)

å½“æˆ‘ä»¬è¯´â€œç»„ä»¶â€æ—¶ï¼Œæˆ‘ä»¬ä¸»è¦æŒ‡çš„æ˜¯è‡ªåŒ…å«çš„ã€å¯é‡ç”¨çš„ UIï¼Œä¸€æ—¦ç¼–å†™å¥½ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å®ƒæ’å…¥åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•åœ°æ–¹ã€‚èŠ±å“¨çš„äº¤äº’æŒ‰é’®ï¼Œç‰¹åˆ«è®¾è®¡çš„ä¸‹æ‹‰å¼å¼•å·ï¼Œæˆ–è€…é•¿æœŸå—æ¬¢è¿çš„å¡ç‰‡å°éƒ¨ä»¶éƒ½æ˜¯éå¸¸é€‚åˆç»„ä»¶çš„è®¾è®¡ç±»å‹çš„ä¾‹å­ã€‚

æ‚¨çŸ¥é“ web æœ‰è‡ªå·±çš„æœ¬åœ°ç»„ä»¶æ¨¡å—ï¼Œä¸éœ€è¦ä½¿ç”¨ä»»ä½•åº“å—ï¼ŸçœŸå®æ•…äº‹ï¼ä½ å¯ä»¥ç¼–å†™ã€å‘å¸ƒå’Œé‡ç”¨å•æ–‡ä»¶ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥åœ¨ä»»ä½•å¥½çš„æµè§ˆå™¨å’Œæ¡†æ¶ä¸­å·¥ä½œã€‚è¯·ç»§ç»­é˜…è¯»ï¼Œäº†è§£å¦‚ä½•æ“ä½œï¼

## [](#overview)æ¦‚è¿°

`Web Components`æ˜¯ä¸€ä¸ªæ€»æ‹¬æœ¯è¯­ï¼ŒæŒ‡çš„æ˜¯ä¸€ç»„å››ä¸ªæµè§ˆå™¨æ ‡å‡†ï¼Œå®ƒä»¬å…±åŒå½¢æˆäº† web çš„æœ¬åœ°ç»„ä»¶æ¨¡å‹ã€‚

1.  [`<template>`å…ƒç´ ](#template-elements)è®©ä½ å¿«é€Ÿé‡ç”¨éƒ¨åˆ† <abbr title="document object model">DOM</abbr>
2.  [è‡ªå®šä¹‰å…ƒç´ ](#custom-elements)å°† <abbr title="JavaScript">JS</abbr> ç±»è¿æ¥åˆ°è‡ªå®šä¹‰ <abbr title="HyperText Markup Language">HTML</abbr> æ ‡ç­¾
3.  é˜´å½± DOM å°†ä½ çš„ç¾è€»éšè—åœ¨é¡µé¢çš„å…¶ä½™éƒ¨åˆ†
4.  ç”¨äºæ‰“åŒ…å’Œå‘å¸ƒç»„ä»¶çš„ JavaScript æ¨¡å—

è¿™äº›æ ‡å‡†ä¸­çš„æ¯ä¸€ä¸ªéƒ½æä¾›äº†æ‹¼å›¾çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ç¯‡ä»‹ç»æ€§çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†ç®€è¦ä»‹ç»å®ƒä»¬ï¼Œå¹¶è§£é‡Šå®ƒä»¬å¦‚ä½•åœ¨å®é™…çš„ web å¼€å‘ä¸­å¸®åŠ©æˆ‘ä»¬ã€‚

## [](#-raw-lttemplategt-endraw-elements)`<template>`å…ƒç´ 

ç»„ä»¶çš„åŸºæœ¬æ€æƒ³æ˜¯å¯é‡ç”¨ UIã€‚ä¸ºäº†åˆ›å»ºå®ƒï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§ä¸ºç»„ä»¶å®šä¹‰æ¨¡æ¿çš„æ–¹æ³•ã€‚å¦‚æœä½ ç†Ÿæ‚‰ Reactï¼Œé‚£ä¹ˆä½ å¯èƒ½ä»¥å‰ç”¨è¿‡ <abbr title="JavaScript XML">JSX</abbr> ã€‚å¦‚æœä½ æ›´å€¾å‘äº Angular ç±»å‹ï¼Œä½ å¯èƒ½å·²ç»åœ¨ JavaScript æ¨¡æ¿æ–‡æœ¬ä¸­å®šä¹‰äº†æ¨¡æ¿ã€‚

å…ƒç´ è®©æˆ‘ä»¬å®šä¹‰ HTML çš„ç‰‡æ–­ï¼Œè¿™äº›ç‰‡æ–­ç›´åˆ°è¢« JavaScript å…‹éš†åæ‰è¢«æ·»åŠ åˆ°æ–‡æ¡£ä¸­ã€‚æµè§ˆå™¨åªéœ€è¦è§£æ HTML ä¸€æ¬¡(ä¾‹å¦‚å½“æ–‡æ¡£åŠ è½½æ—¶)ï¼Œç„¶åå°±å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™å»‰ä»·åœ°å…‹éš†å®ƒã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡æ¿å…ƒç´ çš„å®é™…ä¾‹å­:

```
<template id="dialog-template">
  <dialog>
    <p></p>
    <button>âš“ï¸ All Ashore!</button>
  </dialog>
</template>

<label>
  Type a <abbr title="message"> ğŸ’Œ</abbr>
  <input id="input"/>
</label>

<button id="clone-it"><abbr title="Go!">ğŸ¦‘ Ahoy!</abbr></button>

<script>
  document.getElementById('clone-it').onclick = () => superAlert(input.value);

  function superAlert(message) {
    // get a reference to the template
    const template = document.getElementById('dialog-template');
    // clone or "stamp" the template's contents
    const clone = template.content.cloneNode(true);

    // Make any changes to the stamped content
    const diag = clone.firstElementChild;

    // <dialog> element polyfill
    dialogPolyfill.registerDialog(diag);

    diag.firstElementChild.textContent = message;
    diag.lastElementChild.onclick = function closeModal() {
      diag.close();
      diag.remove();
    }
    document.body.appendChild(diag)
    diag.showModal();
  }
</script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>[https://glitch.com/embed/#!/embed/wistful-ant?previewSize=100&path=index.html](https://glitch.com/embed/#!/embed/wistful-ant?previewSize=100&path=index.html)

ä½¿ç”¨`<template>`å…ƒç´ æ—¢ç®€å•åˆé«˜æ•ˆã€‚æˆ‘ç»„è£…äº†ä¸€ä¸ªæ„šè ¢çš„å°[åŸºå‡†](https://jsperf.com/template-element-vs-dom-api-vs-template-literals/1)ï¼Œå®ƒä»¥ä¸‰ç§æ–¹å¼æ„å»ºäº†ä¸€ä¸ªç®€å•çš„è¡¨:é€šè¿‡å…‹éš†ä¸€ä¸ªæ¨¡æ¿å…ƒç´ ï¼Œé€šè¿‡ç›´æ¥ä½¿ç”¨ DOM <abbr title="Application Programmer Interface">API</abbr> sï¼Œä»¥åŠé€šè¿‡è®¾ç½®`innerHTML`ã€‚å…‹éš†æ¨¡æ¿å…ƒç´ æ˜¯æœ€å¿«çš„ï¼ŒDOM APIs ç¨æ…¢ï¼Œè€Œ`innerHTML`æ˜¯è¿„ä»Šä¸ºæ­¢æœ€æ…¢çš„ã€‚

[![Template Elements: 55877 Operations / second. DOM APIs: 51666 Operations / second. Template Literals: 44102 Operations / second](../Images/9cdf7a2e7ebf49466bcd83593369bbbc.png)T2ã€‘](https://jsperf.com/template-element-vs-dom-api-vs-template-literals/1)

å› æ­¤,`<template>`å…ƒç´ è®©æˆ‘ä»¬å¯ä»¥è§£æ HTML ä¸€æ¬¡ï¼Œå¹¶æ ¹æ®éœ€è¦å¤šæ¬¡é‡ç”¨å®ƒã€‚å°±åƒæˆ‘ä»¬éœ€è¦çš„å¯é‡ç”¨ç»„ä»¶ä¸€æ ·ï¼

é˜…è¯»æ›´å¤šå…³äº [`<template>`å…ƒç´ ](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template)åŠå…¶ [DOM API](https://developer.mozilla.org/en-US/docs/Web/API/HTMLTemplateElement) at <abbr title="Mozilla Developer Network">MDN</abbr> çš„å†…å®¹ã€‚

## [](#custom-elements)è‡ªå®šä¹‰å…ƒç´ 

æˆ‘ä»¬è¦çœ‹çš„ç¬¬äºŒä¸ªæ ‡å‡†å«åšå®šåˆ¶å…ƒç´ ã€‚å®ƒç¡®å®å¦‚åŒ…è£…ç›’ä¸Šæ‰€è¯´çš„é‚£æ ·:å®ƒè®©ä½ å®šä¹‰è‡ªå·±çš„å®šåˆ¶ HTML æ ‡ç­¾ã€‚ç°åœ¨ä½ ä¸å¿…æ»¡è¶³äºç®€å•çš„è€`<div>`å’Œ`<span>`ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ç”¨`<super-div>`å’Œ`<wicked-span>`æ¥æ ‡è®°ä½ çš„é¡µé¢ã€‚

è‡ªå®šä¹‰å…ƒç´ å°±åƒå†…ç½®å…ƒç´ ä¸€æ ·å·¥ä½œï¼›å°†å®ƒä»¬æ·»åŠ åˆ°æ‚¨çš„æ–‡æ¡£ä¸­ï¼Œç»™å®ƒä»¬å­å…ƒç´ ï¼Œå¯¹å®ƒä»¬ä½¿ç”¨å¸¸è§„çš„ DOM APIsï¼Œç­‰ç­‰ã€‚æ‚¨å¯ä»¥åœ¨ä»»ä½•ä½¿ç”¨å¸¸è§„å…ƒç´ çš„åœ°æ–¹ä½¿ç”¨å®šåˆ¶å…ƒç´ ï¼Œ[åŒ…æ‹¬åœ¨æµè¡Œçš„ web æ¡†æ¶ä¸­](https://custom-elements-everywhere.com)

æ‰€æœ‰è‡ªå®šä¹‰å…ƒç´ æ ‡è®°åç§°éƒ½å¿…é¡»åŒ…å«ç ´æŠ˜å·ï¼Œä»¥åŒºåˆ«äºå†…ç½®å…ƒç´ ã€‚å½“ä½ æƒ³åœ¨åŒä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨`<bobs-input>`å’Œ`<sallys-input>`æ—¶ï¼Œè¿™ä¹Ÿæœ‰åŠ©äºé¿å…åç§°å†²çªã€‚åŒæ ·ï¼Œå®šåˆ¶å…ƒç´ å¯ä»¥æœ‰è‡ªå·±çš„å®šåˆ¶å±æ€§ã€DOM å±æ€§ã€æ–¹æ³•å’Œè¡Œä¸ºã€‚

å¦‚ä½•ä½¿ç”¨å®šåˆ¶å…ƒç´ çš„ä¸€ä¸ªä¾‹å­:

```
<section>
  <p>Twinkle, twinkle, little <super-span animation="shine">star</super-span>.</p>
  <awesome-button exuberant>Shine it!</awesome-button>
</section> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è‡ªå®šä¹‰å…ƒç´ è¢«å®šä¹‰ä¸º [JavaScript ç±»](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/class)ï¼Œå¹¶é€šè¿‡å…¶`define`æ–¹æ³•åœ¨`window.customElements`å¯¹è±¡ä¸Šæ³¨å†Œï¼Œè¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°:ä¸€ä¸ªå®šä¹‰å…ƒç´ åç§°çš„å­—ç¬¦ä¸²å’Œä¸€ä¸ªå®šä¹‰å…¶è¡Œä¸ºçš„ JavaScript ç±»ã€‚

è¿™ä¸ªä¾‹å­ç”¨äº†ä¸€ä¸ªæ— èŠçš„æ—§`<span>`å¹¶èµ‹äºˆå®ƒè¡¨æƒ…ç¬¦å·è¶…èƒ½åŠ›ï¼è¯•è¯•çœ‹ã€‚

```
customElements.define('super-span', class SuperSpan extends HTMLElement {
  /**
   * `connectedCallback` is a custom-element lifecycle callback
   * which fires whenever the element is added to the document
   */
  connectedCallback() {
    this.addEventListener('click', this.beAwesome.bind(this))
    this.style.display = 'inline-block';
    this.setAttribute('aria-label', this.innerText);
    switch (this.innerText) {
      case 'star': this.innerText = 'â­ï¸';
    }
  }

  /**
   * You can define your own methods on your elements.
   * @param  {Event} event
   * @return {Animation}
   */
  beAwesome(event) {
    let keyframes = [];
    let options = {duration: 300, iterations: 5, easing: 'ease-in-out'}
    switch (this.getAttribute('animation')) {
      case 'shine': keyframes = [
        {opacity: 1.0, blur: '0px', transform: 'rotate(0deg)'},
        {opacity: 0.7, blur: '2px', transform: 'rotate(360deg)'},
        {opacity: 1.0, blur: '0px', transform: 'rotate(0deg)'},
      ];
    }
    return this.animate(keyframes, options)
  }
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>[https://glitch.com/embed/#!/embed/ivory-fan?previewSize=100&path=index.html](https://glitch.com/embed/#!/embed/ivory-fan?previewSize=100&path=index.html)

å®šåˆ¶å…ƒç´ å…·æœ‰ç”Ÿå‘½å‘¨æœŸå›è°ƒå’Œè§‚å¯Ÿå±æ€§ç­‰å†…ç½®ç‰¹æ€§ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„æ–‡ç« ä¸­è®¨è®ºè¿™äº›å†…å®¹ã€‚å‰§é€:ä½ å¯ä»¥åœ¨ MDN ä¸Šé˜…è¯»[æ‰€æœ‰å…³äºå®šåˆ¶å…ƒç´ çš„å†…å®¹](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements)

## [](#shadow-dom)é˜´å½± DOM

ä»€ä¹ˆä¸œè¥¿æ½œä¼åœ¨æ–‡æ¡£æ ‘ä¸Šï¼Œè—åœ¨é˜´å½±é‡Œï¼Œè—åœ¨æ— è¾œçš„èŠ‚ç‚¹ä¸æ•¢æ¶‰è¶³çš„é»‘æš—åœ°æ–¹ï¼Ÿ

å“’å“’å“’å“’å“’å“’ï¼æš—å½± DOMï¼

> æˆ‘æ˜¯é»‘æš—ã€‚æˆ‘æ˜¯é»‘å¤œã€‚æˆ‘æ˜¯å½±å­ DOMï¼

[![Batman lurking in the shadows](../Images/85cccd039a55e13ec1ea9304fd588725.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--RrMhhoCl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gq600wk8fo1vg93854mf.png)

è™½ç„¶â€œå½±å­ DOMâ€å¬èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä½†äº‹å®è¯æ˜ä½ å·²ç»ä½¿ç”¨å®ƒå¾ˆå¤šå¹´äº†ã€‚æ¯æ¬¡æ‚¨ä½¿ç”¨å¸¦æœ‰æ§ä»¶çš„`<video>`å…ƒç´ ï¼Œæˆ–è€…å¸¦æœ‰æ•°æ®åˆ—è¡¨çš„`<input>`å…ƒç´ ï¼Œæˆ–è€…ç±»ä¼¼æ—¥æœŸé€‰æ‹©å™¨å…ƒç´ çš„å…¶ä»–å…ƒç´ æ—¶ï¼Œæ‚¨éƒ½åœ¨ä½¿ç”¨ Shadow DOMã€‚

å½±å­ DOM åªæ˜¯ä¸€ä¸ª HTML æ–‡æ¡£ç‰‡æ®µï¼Œå®ƒå¯¹ç”¨æˆ·æ˜¯å¯è§çš„ï¼ŒåŒæ—¶åˆä¸æ–‡æ¡£çš„å…¶ä½™éƒ¨åˆ†ç›¸éš”ç¦»ã€‚ç±»ä¼¼äº iframes å¦‚ä½•å°†ä¸€ä¸ªæ–‡æ¡£ä¸å¦ä¸€ä¸ªåµŒå…¥çš„æ–‡æ¡£åˆ†å¼€ï¼Œå½±å­æ ¹å°†ä¸€ä¸ªæ–‡æ¡£çš„ä¸€éƒ¨åˆ†ä¸ä¸»æ–‡æ¡£åˆ†å¼€ã€‚

ä¾‹å¦‚ï¼Œè§†é¢‘å…ƒç´ ä¸­çš„æ§ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ DOM æ ‘ï¼Œåƒè™è ä¾ ä¸€æ ·ç”Ÿæ´»åœ¨é¡µé¢çš„é˜´å½±ä¸­ã€‚å…¨å±€æ ·å¼ä¸ä¼šå½±å“è§†é¢‘æ§ä»¶ï¼Œåä¹‹äº¦ç„¶ã€‚

[![Screenshot of Firefox developer tools highlighting the use of a shadow root on wego.com](../Images/4e9abeca566d3c4fcd2676330c20b247.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--UWnCUCIr--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/zue201pl8hk31s6go5al.png) 

<figure>

<figcaption>ä¸€ä¸ªåœ¨ wego.com ä¸Šä½¿ç”¨é˜´å½± DOM çš„ä¾‹å­ï¼Œå°† DOM ä¸é¡µé¢çš„å…¶ä½™éƒ¨åˆ†éš”ç¦»å¼€æ¥</figcaption>

</figure>

ä¸ºä»€ä¹ˆå­¤ç«‹ DOM æ˜¯ä¸€ä»¶å¥½äº‹ï¼Ÿå½“åœ¨ä»»ä½•éå¹³å‡¡è§„æ¨¡çš„ web åº”ç”¨ä¸Šå·¥ä½œæ—¶ï¼Œ <abbr title="Cascading Style Sheets">CSS</abbr> è§„åˆ™å’Œé€‰æ‹©å™¨ä¼šå¾ˆå¿«å¤±æ§ã€‚ä½ å¯èƒ½ä¸ºé¡µé¢çš„ä¸€ä¸ªéƒ¨åˆ†ç¼–å†™äº†å®Œç¾çš„ CSSï¼Œä½†æ˜¯ä½ çš„é£æ ¼å´è¢«ä½ çš„å›¢é˜Ÿæˆå‘˜å¦å†³äº†ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œä½ æ·»åŠ åˆ°åº”ç”¨ç¨‹åºä¸­çš„æ–°å†…å®¹å¯èƒ½ä¼šåœ¨æ²¡æœ‰äººæ³¨æ„åˆ°çš„æƒ…å†µä¸‹ç ´åç°æœ‰çš„å†…å®¹ï¼

éšç€æ—¶é—´çš„æ¨ç§»ï¼Œé’ˆå¯¹è¿™ä¸ªé—®é¢˜å·²ç»å¼€å‘äº†è®¸å¤šè§£å†³æ–¹æ¡ˆï¼Œä»ä¸¥æ ¼çš„å‘½åçº¦å®šåˆ°â€œCSS-in-JSâ€ï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªç‰¹åˆ«ä»¤äººæ»¡æ„ã€‚æœ‰äº† shadow DOMï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­å†…ç½®äº†ä¸€ä¸ªå…¨é¢çš„è§£å†³æ–¹æ¡ˆã€‚

**Shadow DOM éš”ç¦» DOM èŠ‚ç‚¹**ï¼Œè®©ä½ è‡ªç”±åœ°è®¾è®¡ä½ çš„ç»„ä»¶ï¼Œä¸ç”¨æ‹…å¿ƒåº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ä¼šç ´åå®ƒä»¬ã€‚æ‚¨å¯ä»¥ç”¨ä¸€ç§ç®€å•ç›´æ¥çš„æ–¹å¼æ¥è®¾è®¡æ‚¨çš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ™¦æ¶©éš¾æ‡‚çš„ç±»åæˆ–è€…æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½å¡è¿›`style`å±æ€§:

```
<template id="component-template">
  <style>
    :host {
      display: block;
    }

    /* These styles apply only to button Elements
     * within the shadow root of this component */
    button {
      background: rebeccapurple;
      color: inherit;
      font-size: inherit;
      padding: 10px;
      border-radius: 4px;
      /* CSS Custom Properties can pierce the shadow boundary,
       * allowing users to style specific parts of components */
      border: 1px solid var(--component-border-color, ivory);
      width: 100%;
    }

  </style>

  <!-- This ID is local to the shadow-root. -->
  <!-- No need to worry that another #button exists. -->
  <button id="button">I'm an awesome button!</button>
</template>

<style>
  /* These styles affect the entire document, but not any shadow-roots inside of it */
  button {
    background: cornflowerblue;
    color: white;
    padding: 10px;
    border: none;
    margin-top: 20px;
  }

  /* Custom Elements can be styled just like normal elements.
   * These styles will be applied to the element's :host */
  button,
  awesome-button {
    width: 280px;
    font-size: inherit;
  }
</style>

<awesome-button></awesome-button>

<button id="button">I'm an OK button!</button>

<section id="display">
  <abbr title="click">ğŸ–±</abbr> a <abbr title="button">ğŸ”²</abbr>
</section> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>[https://glitch.com/embed/#!/embed/marked-piper?path=index.html](https://glitch.com/embed/#!/embed/marked-piper?path=index.html)

å½±å­ DOM æ˜¯ web ç»„ä»¶ä¸­çš„ç§˜å¯†æ­¦å™¨ã€‚è¿™æ˜¯å®ƒä»¬è‡ªæˆä¸€ä½“çš„åŸå› ã€‚è¿™è®©æˆ‘ä»¬æœ‰ä¿¡å¿ƒå°†å®ƒä»¬æ”¾å…¥é¡µé¢ï¼Œè€Œä¸ç”¨æ‹…å¿ƒç ´ååº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ã€‚

ä» Firefox 63 å¼€å§‹ï¼Œå®ƒå¯ä»¥åœ¨æ‰€æœ‰ä¼˜ç§€çš„æµè§ˆå™¨ä¸Šæœ¬åœ°ä½¿ç”¨ã€‚

é˜…è¯»æ›´å¤šå…³äº MDN ä¸Šçš„[é˜´å½± DOM](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM)

æœ‰äº†è¿™ä¸‰ä¸ªæ ‡å‡†:æ¨¡æ¿ã€å®šåˆ¶å…ƒç´ å’Œå½±å­ DOMï¼Œæˆ‘ä»¬å°±æ‹¥æœ‰äº†ç¼–å†™ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ä¸°å¯Œç»„ä»¶ ui æ‰€éœ€çš„ä¸€åˆ‡ï¼Œè€Œä¸éœ€è¦ä»»ä½•ç‰¹æ®Šçš„å·¥å…·æˆ–æ„å»ºæ­¥éª¤ã€‚ç¬¬å››ä¸ªæ ‡å‡†æ˜¯ JavaScript æ¨¡å—ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿåˆ†è§£ç”±å®šåˆ¶å…ƒç´ ç»„æˆçš„å¤æ‚åº”ç”¨ç¨‹åºï¼Œå¹¶å‘å¸ƒæˆ‘ä»¬çš„ç»„ä»¶ä¾›ä»–äººä½¿ç”¨ã€‚

## [](#javascript-modules)JavaScript æ¨¡å—

å½“æˆ‘ä»¬ä½¿ç”¨*æ¨¡å—*è¿™ä¸ªè¯æ—¶ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯ä¸€ä¸ªåŒ…å«å…¶è‡ªèº«èŒƒå›´çš„ç‹¬ç«‹è½¯ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘åœ¨æŸä¸ªæ¨¡å—ä¸­å®šä¹‰äº†ä¸€ä¸ªå˜é‡`foo`ï¼Œæˆ‘åªèƒ½åœ¨é‚£ä¸ªæ¨¡å—å†…éƒ¨ä½¿ç”¨è¿™ä¸ªå˜é‡ã€‚å¦‚æœæˆ‘æƒ³åœ¨å…¶ä»–æ¨¡å—ä¸­è®¿é—®`foo`ï¼Œæˆ‘éœ€è¦é¦–å…ˆæ˜¾å¼å¯¼å‡ºå®ƒã€‚

ä¸€æ®µæ—¶é—´ä»¥æ¥ï¼Œå¼€å‘äººå‘˜ä¸€ç›´åœ¨å¯»æ‰¾ç¼–å†™æ¨¡å—åŒ– JavaScript çš„æ–¹æ³•ï¼Œä½†ç›´åˆ°æœ€è¿‘(åœ¨è§„èŒƒä¸­æ˜¯ 2015 å¹´ï¼Œåœ¨å®è·µä¸­æ˜¯å»å¹´å·¦å³)ï¼ŒJavaScript æ‰æœ‰äº†è‡ªå·±çš„æ¨¡å—ç³»ç»Ÿã€‚

```
import { foo } from './foo.js'

const bar = 'bar'

export const baz = foo(bar) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å…³äºæ¨¡å—æœ‰[lot](https://dev.to/twhite/es6-modules-2bi)[åˆ°](https://dev.to/papaponmx/my-impressions-after-trying-to-use-es-modules-in-2018---3mga) [say](https://dev.to/omensah/-building-modular-javascript-application-with-es6-module-system--3h88) ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬çš„ç›®çš„æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥ç¼–å†™å’Œå‘å¸ƒ web ç»„ä»¶å°±è¶³å¤Ÿäº†ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥åŠä½ çš„èƒƒå£ã€‚

```
// super-span.js

const options = {duration: 300, iterations: 5, easing: 'ease-in-out'}
const keyframes = [
  {opacity: 1.0, blur: '0px', transform: 'rotate(0deg)'},
  {opacity: 0.7, blur: '2px', transform: 'rotate(360deg)'},
  {opacity: 1.0, blur: '0px', transform: 'rotate(0deg)'},
]

const template = document.createElement('template')
template.innerHTML = `
  <style>
    span {
      display: inline-block;
      font-weight: var(--super-font-weight, bolder);
    }
  </style>
  <span><slot></slot></span>
  <abbr title="click or mouse over">ğŸ–±</abbr>
`;

customElements.define('super-span', class SuperSpan extends HTMLElement {

  $(selector) {
    return this.shadowRoot && this.shadowRoot.querySelector(selector)
  }

  constructor() {
    super()
    this.shine = this.shine.bind(this)
    const root = this.attachShadow({mode: 'open'})
          root.appendChild(template.content.cloneNode(true))
    this.addEventListener('click', this.shine)
    this.addEventListener('mouseover', this.shine)
  }

  connectedCallback() {
    const slot = this.$('slot')
    const [node] = slot.assignedNodes()
    this.setAttribute('aria-label', node.textContent)
    node.textContent = 'â­ï¸'
  }

  shine(event) {
    this.$('span').animate(keyframes, options)
  }
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶ååœ¨æˆ‘ä»¬ app çš„ HTML:

```
<script type="module" src="./super-span.js"></script>
<super-span>star</super-span> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>[https://glitch.com/embed/#!/embed/truthful-plow?path=index.html](https://glitch.com/embed/#!/embed/truthful-plow?path=index.html)

æˆ‘çš„æœ‹å‹ä»¬ï¼Œç°åœ¨æ˜¯ä½ æ„è¯†åˆ° web ç»„ä»¶æœ‰å¤šæ£’çš„æ—¶å€™äº†ã€‚

ç°åœ¨ï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°å°†å…·æœ‰å‡ºè‰²è¡Œä¸ºå’Œè¯­ä¹‰çš„é¢„åˆ¶å®šåˆ¶å…ƒç´ å¯¼å…¥åˆ°æ‚¨çš„æ–‡æ¡£ä¸­ï¼Œè€Œæ— éœ€ä»»ä½•æ„å»ºæ­¥éª¤ã€‚

```
<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Be Excellent to Each Other</title>
    <script type="module" src="//unpkg.com/@power-elements/lazy-image/lazy-image.js?module"></script>
    <script type="module" src="//unpkg.com/@granite-elements/granite-alert/granite-alert.js?module"></script>
    <script type="module" src="//unpkg.com/@material/mwc-button/mwc-button.js?module"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <header>
      <h1>Cross-platform, Framework-Agnostic, Reusable Components</h1>
    </header>
    <main>

      <granite-alert id="alert" level="warning" hide>
        <lazy-image role="presentation"
            src="//placekitten.com/1080/720"
            placeholder="//web-components-resources.appspot.com/static/logo.svg"
            fade
        ></lazy-image>
      </granite-alert>

      <mwc-button id="button" raised>ğŸš€ Launch</mwc-button>

      <script>
        const alert = document.getElementById('alert')
        const button = document.getElementById('button')
        const message = document.getElementById('message')
        button.onclick = () => {
          alert.hide = !alert.hide;
          button.textContent = alert.hide ? 'ğŸš€ Launch' : 'â˜ ï¸ Close'
        }
      </script>
    </main>
  </body>
</html> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>[https://glitch.com/embed/#!/embed/road-physician?previewSize=100&path=index.html](https://glitch.com/embed/#!/embed/road-physician?previewSize=100&path=index.html)

## [](#conclusion)ç»“è®º

Web ç»„ä»¶æ ‡å‡†è®©æˆ‘ä»¬å¯ä»¥åˆ†è§£è‡ªåŒ…å«çš„ã€å¯é‡ç”¨çš„ UIï¼Œå®ƒå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œæ— éœ€ç¹ççš„æ„å»ºæ­¥éª¤ã€‚è¿™äº›ç»„ä»¶å¯ä»¥åœ¨ä»»ä½•ä½¿ç”¨å¸¸è§„å…ƒç´ çš„åœ°æ–¹ä½¿ç”¨:åœ¨æ™®é€šçš„ HTML ä¸­ï¼Œæˆ–è€…åœ¨åº”ç”¨ç¨‹åºçš„æ¡†æ¶é©±åŠ¨çš„æ¨¡æ¿ä¸­ã€‚

åœ¨æˆ‘ä»¬çš„ä¸‹ä¸€ç¯‡æ–‡ç« ã€Šä¸Šå¸ä¿ä½‘ã€‹ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£åˆ° [webcomponentsjs polyfills](https://www.webcomponents.org/polyfills) å¦‚ä½•è®©æˆ‘ä»¬è®¾è®¡ç»„ä»¶å’Œç¼–å†™åº”ç”¨ç¨‹åºï¼Œå³ä½¿æ˜¯åœ¨æµè§ˆå™¨æœ¬èº«ä¸æ”¯æŒå®ƒä»¬çš„æƒ…å†µä¸‹ã€‚

ğŸ˜€æ„Ÿè°¢é˜…è¯»ï¼ğŸ˜

æŸ¥çœ‹æœ¬ç³»åˆ—çš„ä¸‹ä¸€ç¯‡æ–‡ç« 

[![bennypowers](../Images/57370d6f6dab8d6651a3f138a1aaaa40.png)](/bennypowers) [## è®©æˆ‘ä»¬æ„å»º Web ç»„ä»¶ï¼ç¬¬ 2 éƒ¨åˆ†:èšåˆå¡«æ–™

### æœ¬å°¼Â·é²å°”æ–¯ğŸ‡®ğŸ‡±ğŸ‡¨ğŸ‡¦9 æœˆ 29 æ—¥ 1812 åˆ†é’Ÿé˜…è¯»

#webcomponents #javascript #html #polyfill](/bennypowers/lets-build-web-components-part-2-the-polyfills-dkh)

æ‚¨æƒ³å°±æ­¤å¤„æ¶‰åŠçš„ä»»ä½•ä¸»é¢˜è¿›è¡Œä¸€å¯¹ä¸€çš„è¾…å¯¼å—ï¼Ÿ[![Contact me on Codementor](../Images/97f0e0737ce864c47f2412396b01e737.png)T2ã€‘](https://www.codementor.io/bennyp?utm_source=github&utm_medium=button&utm_term=bennyp&utm_campaign=github)

## [](#errata)å‹˜è¯¯è¡¨

*   æœ¬æ–‡çš„å‰ä¸€ä¸ªç‰ˆæœ¬å±•ç¤ºäº†ä¸€ä¸ªåœ¨`constructor`ä¸­è®¿é—®è½»é‡çº§ DOM å±æ€§å’Œå­å¯¹è±¡çš„ä¾‹å­ã€‚è¿™ç§å·¥ä½œåº”è¯¥æ¨è¿Ÿåˆ°`connectedCallback`ã€‚
*   è‡ªä»è¿™ç¯‡æ–‡ç« å‘è¡¨ä»¥æ¥ï¼Œ[å¾®è½¯å·²ç»å¼€å§‹åœ¨ Edge](https://developer.microsoft.com/en-us/microsoft-edge/platform/status/customelements/) ä¸­å¼€å‘ web ç»„ä»¶æ ‡å‡†ã€‚æ´¾å¯¹æ—¶é—´ï¼