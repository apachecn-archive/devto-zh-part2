# 到目前为止，我在构建 Coravel(开源。NET 核心工具)-第 1 部分

> 原文：<https://dev.to/jamesmh/what-ive-learned-so-far-building-coravel-open-source-net-core-tooling---part-1-1h7k>

*注:[见我博客](https://www.blog.jamesmichaelhickey.com/what-i-ve-learned-so-far-building-coravel-open-source-net-core-tooling/)的规范帖子 T3】*

大约 4 个月前的一个晚上，我有几个小时的空闲时间。我真的很享受用构建应用程序的好处。网芯。但是我觉得它仍然缺少所有的“内置”特性，这些特性使得 [Laravel](https://laravel.com/) (PHP 框架)工作起来如此轻松。

毕竟，我只是想构建令人敬畏的应用程序，而不是修补那些老一套的东西。

如果我只想安排*我的代码*每周运行一次，该怎么办？我不想配置 Windows 任务计划程序。或者 Cron。我只想告诉我的代码自己调度。这应该很容易做到吧(就像 Laravel 那样)？

# 故事的开始

所以我开始学习一些。NET 核心，同时建立一个易于使用的调度程序-类似于 Laravel 的。只是为了挑战自己，看看我能不能做到。最终完成了“版本 1”。

我没有太多空闲时间，所以我需要确定我所做的事情是重要的。所以我决定把我在推特上的内容发在推特上，也许可以得到一些反馈。谁知道呢...

令我惊讶的是，大卫·福勒。NET Core Architect)做出了回应，[推文](https://twitter.com/jamesmh_dev/status/1010238650825756672/photo/1)获得了**比我想象中更多的**互动！

那是在一个星期五。在短短的**两天**[Coravel 回购](https://github.com/jamesmh/coravel)成为 GitHub 上排名第四的 C#回购！哇！我当时(现在仍是)超级谦卑和惊讶！

[![Coravel trending on GitHub](../Images/5ad38e5d0d59768a76a9fd873116bf12.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--6tJn239T--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://blog.jamesmichaelhickey.com/img/coravel-4th-github.png)

# 建筑更多特性

显然，人们认为这是一个有用的工具。所以我决定继续努力，开发我个人希望可用的其他功能:

*   易于使用的排队
*   一种简洁的缓存方式
*   易于配置的邮件程序，具有丰富的语法，并带有现成的响应电子邮件模板
*   CLI 生成文件等。

当我有时间的时候，我尽我所能去建造它们。今天，它的功能比我预想的还要多。

最初，调度程序只是一个有趣的挑战。但是现在人们已经开始使用它了。所以我不得不重写它，以便更灵活，更多的单元测试，线程安全等。

# 我学到了什么？

在这段旅程中，我学到了很多东西，并且每天都在学习。

我想开始记录其中的一些东西——并给那些想要建立自己的东西的人一些提示。基于. NET 的开源项目。

## 1。抓到你了

我没有构建 NuGet 包的经验。我以前从来没做过。

当我最初构建邮件功能时，它是一个独立的。“主”Coravel 项目引用的. NET 项目。我的想法是 NuGet 包只是吞下任何引用的项目并包含它们。

**错了。**

Nuget 包不会这样做。而且，听起来他们永远不会。

你是做什么的？据我所知，有两种解决方案:

*   将它们放入您的 **one** 包中
*   将其他项目打包成**单独的 NuGet** 包并引用它们

第二种选择确实迫使您专注于构建小型模块化包。

但 Coravel 背后的一个驱动理念是，它应该尽可能容易地启动和运行。多重包装，在我看来，是偏离了这一点。

我选择了选项 1。我不想维护一个以上的包(以及随之而来的额外维护)。

## 2。倾听社区的声音

但是当你做出错误的选择时会发生什么呢？

我收到了一些人的意见，他们不希望包含邮件程序的依赖项(MailKit 等)，而只是希望使用例如调度程序。很公平。

所以我进行了民意调查，看看其他人怎么想。

因为这个项目是给其他人使用的——了解人们通常想如何使用它是很重要的。

但是，我不喜欢维护多个包。这会带来的技术复杂性(拆分所有功能)现在也不需要。

因此，我决定将邮件程序拆分成它自己的 NuGet 包。

## 3。回去解决问题是可以的

所以，我做了一个错误的选择，将邮件打包到主 Coravel 包中。

那是罪过吗？没有。我是不是因此而自责？没有。

随着项目的发展，你会**发现人们如何使用你的项目并适应**。**积极倾听**人们想如何使用你的项目。

例如，我让人们提到他们不喜欢 Coravel 针对的事实。网芯和**不是**。净标准。

最初，Coravel 是专为设计的**。NET 核心应用程序。其中一个主要原则是 Coravel 只需要“挂钩”到本地。NET 核心工具，所以它是无缝的，非常容易配置。尤其是把东西挂钩到服务商、`IHostedService`接口等。**

然而，对一些依赖项的精简(由于其他人在 GitHub 上发布的一些问题)**让我了解了更多关于如何做的**。网芯作品。由于这些变化，切换到。NET 标准现在可能确实有意义了。所以我正在调查这件事。

这没关系。我可能本来就走了“错误”的路线。但是**我还在学习**。

> 从错误中吸取教训是可以的。我们就是这样获得经验的。回去把它做“对”。

## 4。建立一个项目需要时间——要长期坚持

我开始 Coravel 已经 4 个月了。我每天晚上都不停地编码 4 个小时吗？没有。

我有 7 个孩子。我们在家上学。我结婚了。我有一份全职工作。我有自己的生活。

我有很多空闲时间吗？没有。

我仅有的一点空闲时间必须分配给一些“重要”的项目，比如写博客。

如果我花时间写博客，那我就没时间做其他事情了，比如 Coravel。

对我来说是杂耍表演。可能对你也是。

我需要有一个长远的愿景，以确保我在几周内没有时间做某事时不会不知所措。

如果你想构建一个持久、有用和健壮的开源项目，这就是你所需要的。

## 5。拉取请求需要时间

谈论时间杀手...

拉取请求花费了**大量的**时间。**远超我的预期**。

人们有兴趣为我创造的东西做贡献，这让我非常兴奋。

但是开源并不意味着任何人都可以把项目改成自己想要的样子。我在 Coravel 创作的每件作品背后都有一个愿景和哲学。别人读不懂我的心思。

我的工作就是确保所有的贡献都符合这个愿景。这意味着(对我来说)解决看起来超级无关紧要的细节——对文档、变量命名等的一个单词的更改。

但是，对我来说，所有的小细节都很重要。这就是科拉韦尔的独特之处。这是它易于使用的原因。

所以，当你不只是接受左右拉动请求的时候，不要难过。**还是你的项目**。

# 直到下一次

我希望你喜欢到目前为止 Coravel 背后的故事以及我一路走来学到的一些东西。

我想很快再写一篇文章，重点介绍我学到的技术知识，并编写一些代码！

# 保持联系

别忘了在 [twitter](https://twitter.com/jamesmh_dev) 或 [LinkedIn](https://www.linkedin.com/in/jamesmhickey/) 上联系我！

# 导航您的软件开发生涯

一封电子邮件简讯，我将在其中回答订阅者的问题，并就以下主题提供建议:

✔:软件开发人员的一般阶段是什么？✔:我怎么知道自己处于哪个阶段？我如何进入下一阶段？
✔什么是技术领导者，我如何成为一名技术领导者？

听起来有趣吗？加入社区吧！