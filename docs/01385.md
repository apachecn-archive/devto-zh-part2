# 系统设计的实用方法

> 原文:[https://dev . to/plopcas/a-practical-approach-to-system-design-lo8](https://dev.to/plopcas/a-pragmatic-approach-to-system-design-lo8)

设计一个新系统不是一件容易的事情。在这篇文章中，我将介绍一种实用的系统设计方法，它将帮助你以可重复和一致的方式处理任何系统。

这种方法包括四个部分或步骤:

*   要求
*   容量
*   应用层
*   最佳化
*   最终考虑

#### 1。要求

首先明确所有要求。问问你的股东。他们可能是项目经理、产品负责人、业务分析师，甚至是面试官(如果你正在做的话)。

问尽可能多的问题来探究细节。关注两组不同的需求。

1.  功能性:它们指定系统应该做的事情，例如让用户发布推文、发送电子邮件或上传照片。
2.  非功能性:它们描述系统应该如何运行，例如在性能、可伸缩性、容量、可用性、延迟或安全性方面。

然后花点时间考虑你的设计目标。现在是平衡其中一些需求并在必要时做出妥协的时候了，例如一致性与可用性。

#### 2。容量

您的系统有多少用户？你需要多少数据？现在是时候澄清这些，应用基础数学并记下这些数字了。请记住，UTF-8 中的 1 个字符可以是 1 到 4 个字节。

用户数量、每秒请求数、千兆字节的内存……这些都是您通常在这里寻找的东西。

#### 3。应用层

任何系统都会有三层需要考虑。

1.  数据层:如果有数据库，是哪种类型？SQL/NoSQL/图形…你需要表格吗？如果需要，现在就设计模式。
2.  API/UI:你的系统会有什么样的界面？web UI 或 REST API 是一些选项，这取决于您的系统是做什么的。你甚至可能两者都有。如果需要，现在就设计 API，什么端点，如何命名它们，它们将接受和返回什么数据。
3.  业务逻辑:这是中间的肉，实际上解决项目发起人的业务问题的代码。此时，您应该考虑不同的算法和技术。如果你不知道从哪里开始，先尝试一个简单的方法，然后再优化。

此时，您应该能够画出系统的基本框图。现在还不要太担心细节，还有优化的空间。如果可以的话，使用白板，因为你很可能要移动东西几次。

#### 4。最佳化

至少有四件事需要考虑:

1.  冗余/复制:如果您需要高可用性，您将需要多节点形式的某种冗余。此外，您还需要决定如何在这些节点之间复制数据。
2.  分片:类似的概念，但现在用于您的数据库。根据您使用的 DB 技术，分片可能是现成的。但无论如何，花一分钟考虑一下这些选择是有好处的。
3.  缓存:应用程序中的一些数据很可能会被缓存，以减少延迟并提高性能。看看不同的 CDN 选项和应用内缓存。添加像 Redis 这样的键值内存数据存储是一个很好的选择。
4.  负载平衡:最后，根据您的容量分析，您的一些服务将需要某种形式的负载平衡，以便在节点之间分配负载。循环 DNS 和虚拟 IP 是最常见的。

#### 5。最终考虑

如果您遵循了这些步骤，您现在应该对您的系统有了一个相当全面的草稿。花几分钟时间浏览你收集和制作的所有信息，确保你涵盖了所有的需求。

想想你是否需要任何特殊的测试。单元、集成、功能、负载和安全是最常见的，很可能你会需要所有这些。

考虑基础设施即代码、容器、蓝/绿部署和持续集成等方面。您的系统应该与这些实践相兼容，以便于部署和维护。

在这一点上，还需要考虑你需要多少资源来构建这个系统，包括团队、时间和预算。

不要忘记在你的设计中包括安全性，你需要 API 网关吗？你的服务是内部的还是公开的？您是否使用基本身份验证、API 密钥、JWT 令牌…

记得和其他人分享你的设计！当涉及到系统设计时，很容易忽略一些东西，而且没有什么灵丹妙药，所以第二双眼睛总是有用的。