# 为什么你不写 UI 测试

> 原文:[https://dev.to/klamping/why-youre-not-writing-ui-tests-5fdd](https://dev.to/klamping/why-youre-not-writing-ui-tests-5fdd)

现在是星期五下午。

你的冲刺任务已经完成，除了一个。

你终于说服了你的项目经理，花一点空闲时间来研究编写自动化 UI 测试真的可以减少 bug。

[![Taskboard with single task in todo: 'Spike: UI testing functionality'](../Images/73ae2a37df4552d5a92601d7503152cf.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--0ODt5KRw--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://blog.kevinlamping.com/content/images/2018/05/Screen-Shot-2018-05-17-at-3.27.00-PM.png)

当你坐在那里，看着任务板上的单个项目，你内心有一种对整件事的痛苦感觉。

你有考试焦虑症。

您很高兴有机会尝试自动化测试；你觉得有很多好处的事情；但是你害怕你会浪费这个机会。

如果你花了这么多时间来设置你的测试，但是最后什么也没有得到呢？

出错的方式有很多:

*   测试可能太脆弱了，每一个微小的变化都会破坏它，以至于你不得不停止运行它们。
*   即使他们是可靠的，他们也不会测试任何有用的东西。
*   或者，在弄清楚如何使它们可靠和有用之后，如果你的队友不采用运行它们，你将不得不负责对它们进行每一次更新。
*   也许你正在测试的功能被废弃了，使得你的新测试毫无用处。
*   仅仅因为你今天有时间，并不意味着你明天就有时间对测试套件进行适当的维护。

这是测试列车出轨的很多方式。

难怪你对这一切感到焦虑。

从个人经历中，我知道这些恐惧会让人变得多么虚弱；并且它们不是不合理的。

构建一个好的自动化测试套件需要做大量的工作。这不是一个下午就能完成的事情。

再加上，真的很容易走错路；追寻无尽的足迹，试图解决一个从长远来看并不重要的问题。

为了避免所有这些，考试焦虑和浪费时间，定义什么是“好的考试”是很重要的:

1.  易于编写的测试只有在长期节省时间时才有价值。如果编写一个测试要花两周时间，你就不太可能看到时间倒流。
2.  **易于运行**测试成功的几率与测试在开发过程中的集成程度直接相关。如果运行您的测试需要所有这些额外的工作，您和您的团队将很快对它们失去兴趣/意志力。理想情况下，运行测试并不费力，因为它们完全与您的开发环境集成在一起。
3.  确保你知道测试失败的时间和原因。如果你忽视结果，花时间在考试上是没有好处的。
4.  有用的测试可以做很多事情，但是如果它实际上没有帮助，那还有什么意义呢？他们应该捕捉 bug，减少手工测试的工作量，并提高你的整体测试覆盖率。

这些是我对好测试的标准。

有了这个列表，我们现在可以正视考试焦虑，并告诉它闭嘴。

我们会这么说:

## 我在限制我的乐观

我相信这些测试会有所帮助，但我也知道试图测试一切是一个糟糕的计划。

我将尝试编写自动化程序，并会遇到一些不值得花费成本去修复的问题。

为了避免调试的无止境的兔子洞，我会继续努力。

## 我正在写一个测试

为了开始我的测试自动化工作，我必须“垂直地”思考。

[![Depiction of all the parts of a test architecture, including build system and test reporting](../Images/ffdc427b569061a1c53e0f806ed49236.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--XDGqpKIB--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://blog.kevinlamping.com/content/images/2018/05/Screen-Shot-2018-05-17-at-3.40.00-PM.png)

如果我开始写十几个测试，它们都不能满足标准 2 和 3，增加了它们变得无用的可能性。

相反，我将专注于一个测试，编写它，然后在编写更多测试之前，将它完全集成到我的系统中。

这样我就知道一个测试满足了“好的测试”的所有标准。

只有到那时，我才会回去编写更多的测试，这些测试现在自动带有那些内置的核心“好的测试”特性。

## 我对什么样的测试值得持怀疑态度

因为我知道我不可能测试所有的东西，我也知道我需要对我写的测试有所选择。

为一个简单的静态页面编写一个测试可能很容易，但是我也知道功能性不太可能被破坏并且通常是非关键的。

相反，我专注于“赚钱”页面。用户流推动着业务的发展，如果用户流中断，将会给用户和公司带来巨大的痛苦。

我还会权衡测试的收益和编写测试的痛苦。

我不是说我不会为重要的页面破例，但是如果一个页面有很多动态元素，需要几个星期的工作，我会权衡这个成本和这个页面真正的重要性。

## 我不会为未发布的功能编写自动化

虽然测试驱动开发可能对单元测试很有效，但对 UI 测试来说要困难得多。

我知道过早编写 UI 测试会导致大量的返工，因为这些新页面可能会在生命的最初几个月经历各种各样的变化。

相反，我会考虑新功能如何影响现有页面，并支持我对这些现有页面的测试，以确保新功能不会干扰它们。

然后，一旦新的流程稳定下来，我就可以回去写我的测试，相信它们会留下来。

## [](#i-wont-forget-the-sidebenefits)我不会忘记附带的好处

有了这些承诺，我知道生活中仍然没有保证。技术可能会让我失望，我计划的支持也可能不存在。

但是我确信自动化测试在自动化本身之外还有几个好处:

### [](#they-clarify-requirements)他们阐明要求

为了编写一个有效的测试，你必须知道你期望的输入和输出。

可悲的是，许多项目在开发的几个月里都没有人问这些基本的问题。

模型被制作出来，代码被编写出来，但是没有人问过这样一个基本问题:“用户如何得到他们需要的东西？”

通过编写测试，你必须明确你期望你的用户做什么。当这种情况发生时，你可能会发现，你期望的交互路径实际上是一种糟糕的体验。或者你从来没有定义过一个预期的交互路径。

### [](#tests-expose-assumptions)测试暴露假设

沿着这条思路，测试要求你直截了当。为了使 UI 测试成功，您必须有一个明确的计算机运行指令列表。

正因为如此，团队对软件如何工作所做的假设经常通过自动化测试暴露出来。

许多假设都是从可访问性的角度做出的。我们不知不觉地假设用户可以看到一个网站，忘记了每五个人中至少有一个人有身体障碍。

定义你如何使用软件的流程很容易，但是用户如何做可能完全不同。

通过在人类操作系统之外测试代码，你可以远离你的内在偏见和偏好，从不同的角度体验系统。

### 你只是在测试更多的代码

不管怎样，你在测试网站。

通过运行您的自动化，您增加了代码被询问的额外时间，给了您的团队多一次机会来捕捉每 15 次运行才出现的偷偷摸摸的 bug。

即使您没有让您的自动化运行，您仍然在检查代码以弄清楚您希望您的测试如何运行。即使这样做也可能暴露隐藏的缺陷或小错误，否则这些缺陷或小错误不会被注意到。

当然不是最高效的，但还是可以有效的。

## [](#youve-got-this)你已经得到了这个

所有这些的关键是记住一个好的测试的核心价值。

它们是:

1.  容易写
2.  易于运行
3.  高度可见
4.  有用的

这意味着你需要花时间去思考而不是去做。思考什么是重要的测试，以及如何在野外进行测试。

这可能感觉是浪费，但这种思考可能是测试良好开端的关键。

如果你患有考试焦虑症，了解它背后的恐惧，并建立你可以避免它们的信心。