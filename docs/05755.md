# ä¸º Preact è®¾ç½®æ•…äº‹ä¹¦

> åŸæ–‡:[https://dev . to/Nicky tonline/setting-up-story book-for-preact-p5a](https://dev.to/nickytonline/setting-up-storybook-for-preact-p5a)

æ›´æ–° 2019/06/30: Storybook ç°åœ¨å¯ä»¥é€šè¿‡ CLI é€‰æ‹©å®‰è£… Preactã€‚æ›´å¤šä¿¡æ¯è¯·è§[æ•…äº‹ä¹¦é¢„å‘Š](https://storybook.js.org/docs/guides/guide-preact)ã€‚TLDR `npx -p @storybook/cli sb init --type preact`ã€‚

åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡ Storybook å¸–å­[last Storybook å…¥é—¨](https://dev.to/nickytonline/getting-started-with-react-storybook-9jh)ä¸­ï¼Œæˆ‘å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•å®‰è£… React story bookï¼Œå¹¶ç»™å‡ºäº†æ‰€æœ‰ç»„ä»¶çš„å¿«é€Ÿåˆ†ç±»ã€‚æˆ‘å»ºè®®åœ¨è¿™é‡Œç»§ç»­ä¹‹å‰å¿«é€Ÿæµè§ˆä¸€ä¸‹ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Preact æ¥åˆ›å»ºå’Œè¿è¡Œ React Storybookã€‚å‡è®¾æ‚¨æƒ³è¦æ·»åŠ [æ•…äº‹ä¹¦](https://storybook.js.org)çš„é¡¹ç›®å·²ç»å®‰è£…äº† [Preact](https://github.com/developit/preact) ä½œä¸ºä¾èµ–é¡¹ã€‚

1.  ä¸€ä¸ªä¸´æ—¶çš„æ­¥éª¤æ˜¯é¦–å…ˆå®‰è£… Reactï¼Œæ‰€ä»¥è¿è¡Œ`npm install react`
2.  å¦‚æœä½ å·²ç»å®‰è£…äº† npxï¼Œè¿è¡Œ`npx @storybook/cli`(å¦‚æœä½ åœ¨ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„ node ä¸Šï¼Œå¤§å¤šæ•°äººåº”è¯¥æœ‰è¿™ä¸ª)ã€‚å¦‚æœæ²¡æœ‰è¿è¡Œ`npm install @storybook/cli -g`ã€‚
3.  æ¥ä¸‹æ¥ä»å‘½ä»¤è¡Œè¿è¡Œ`getstorybook`
4.  è¿™å°†å®‰è£…è¿è¡Œ Storybook æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚
5.  ç°åœ¨è®©æˆ‘ä»¬ä»ä¾èµ–é¡¹ä¸­å¸è½½`react`ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ preactï¼
6.  æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®‰è£… [preact-compat](https://github.com/developit/preact-compat) ï¼Œè¿™æ · preact å°±å¯ä»¥å¾ˆå¥½åœ°ä¸ Storybook é…åˆä½¿ç”¨ã€‚å¦‚æœæ‚¨éœ€è¦ preact-compat ä½œä¸ºå…¶ä»– react åº“çš„ä¾èµ–é¡¹ï¼Œè¯·å°†å…¶å®‰è£…åˆ° dependenciesï¼Œ`npm install preact-compat`ã€‚å¦åˆ™å°†å…¶ä½œä¸ºå¼€å‘ä¾èµ–é¡¹å®‰è£…ï¼Œå³`npm install preact-compat -D`
7.  å¿«åˆ°äº†ï¼
8.  æˆ‘ä»¬éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯å‘Šè¯‰[web pack](https://webpack.js.org)(story book åœ¨å¼•æ“ç›–ä¸‹ä½¿ç”¨çš„ä¸œè¥¿)ï¼Œä½¿ç”¨ preact-compatã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸º Storybook åˆ›å»ºä¸€ä¸ªå®šåˆ¶çš„ webpack é…ç½®æ–‡ä»¶ã€‚å¹¸è¿çš„æ˜¯ï¼ŒStorybook æ”¯æŒå¼€ç®±å³ç”¨ã€‚åœ¨ä½ çš„ package.json æ–‡ä»¶æ‰€åœ¨çš„æ ¹æ–‡ä»¶å¤¹ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ªåä¸º`.storybook`çš„æ–°æ–‡ä»¶å¤¹ã€‚å…¶ä¸­åŒ…å«ä¸æ•…äº‹ä¹¦é…ç½®ç›¸å…³çš„æ–‡ä»¶ã€‚åœ¨é‚£é‡Œåˆ›å»ºä¸€ä¸ªåä¸º`webpack.config.js`çš„æ–°æ–‡ä»¶ï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹å¹¶ä¿å­˜æ–‡ä»¶ã€‚

```
module.exports = {
  resolve: {
    extensions: [".js", "jsx"],
    alias: {
      react: "preact-compat",
      "react-dom": "preact-compat"
    }
  }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªè¶…çº§è£¸æœº webpack é…ç½®ã€‚æ‚¨å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ä»»ä½•æ‚¨å¯èƒ½éœ€è¦çš„ä¸œè¥¿ï¼Œå°±åƒä¸€ä¸ªå¸¸è§„çš„ webpack é…ç½®æ–‡ä»¶ä¸€æ ·ã€‚

1.  Storybook å°†åœ¨`./stories/index.stories.js`çš„åº”ç”¨ç¨‹åºæ ¹æ–‡ä»¶å¤¹ä¸­ä¸ºæ‚¨åˆ›å»ºä¸€äº›æ¼”ç¤ºæ•…äº‹
2.  æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œåˆ é™¤ React å¼•ç”¨ï¼Œå¹¶æ›¿æ¢ä¸º`import { h } from "preact";`
3.  å‰©ä¸‹è¦åšçš„å°±æ˜¯è¿è¡Œ`npm run storybook`å¹¶åœ¨æµè§ˆå™¨ä¸­å¯¼èˆªåˆ° Storybookã€‚

[![Storybook in action](../Images/54c32b9ff04db491e29bcc76dfc3801a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Znl3XWGN--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wfth0zitsjm9fv9g5vlu.gif)

## [](#extras)åŠ è´º

*   å¦‚æœä½ æƒ³çœ‹æœ€ç»ˆç»“æœçš„ä¾‹å­ï¼Œçœ‹çœ‹æˆ‘åœ¨ä»Šå¹´ä¸‰æœˆå¯¹ dev.to repo çš„ç¬¬ä¸€æ¬¡æ‰¿è¯ºã€‚

*   æˆ‘è¿˜æ²¡æœ‰æ—¶é—´ï¼Œä½†æ˜¯æˆ‘æ­£åœ¨[å’Œæ•…äº‹ä¹¦çš„ç»´æŠ¤è€…](https://dev.to/norbertdelangen/comment/4ccd)è®¨è®ºæ˜¯å¦å¯èƒ½æœ‰ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ Preact é…ç½®ã€‚

ä¹Ÿè®¸æˆ‘ä¼šåœ¨æŸä¸ªæ—¶å€™è°ˆåˆ°å®ƒï¼Œä½†æ˜¯å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œé‚£å°±å»åšå§ã€‚ğŸ™ƒ