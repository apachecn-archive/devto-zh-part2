# 干净的代码

> 原文:[https://dev.to/collinbarrett/clean-code-2fdn](https://dev.to/collinbarrett/clean-code-2fdn)

[![Clean Code](../Images/f66b534bf50165a5ca0074d2e88dfc6d.png)T2】](https://collinmbarrett.com/clean-code-1/)

我正在打开“大叔”鲍伯·马丁的“T2”的“干净代码”进行我的第三次阅读。这一编程经典作为一个基本的封面到封面阅读，以及一个伟大的专题案头参考。在过去的几年中，我曾多次希望我能重新分配我的大学学费，用于记忆和应用马丁在本书中概述的每一种实践，而不是我的课程作业。在我的职业生涯中，我经历过并继续经历这么多糟糕的代码，能够感知和“清理”是我能提供的最有价值的技能之一。

## [](#cost-and-lifecycle-of-messy-code)杂乱代码的成本和生命周期

Martin 以一个例子开始了这本书，这个例子展示了一个被坏代码困扰的通用应用程序生命周期。他描述了一家拥有“杀手级应用”的公司，该公司最终被关闭，因为他们不能在生命的后期提供功能和解决 bug。其中一名开发人员将原因描述为:

> 他们匆忙地将产品推向市场，在代码上弄得一团糟。

<figure>[![xkcd: Good Code](../Images/f473936316f70bb3e6ea9aa7aa971efe.png)](https://collinmbarrett.com/media/goodCodeXkcd_collinmbarrett.png) 

<figcaption id="caption-attachment-7062">[xkcd:好码](https://xkcd.com/844/)</figcaption>

</figure>

项目几乎总是在管理层、产品所有者和其他利益相关者的巨大压力下快速前进。效率确实是必不可少的，但是当开发人员屈服于压力并且动作太快时，他们就允许技术债务的建立和未来成本的增加。

如果混乱变得过于昂贵而无法修复和扩展，团队最终将被迫考虑关闭产品，或者招致完全“空中大重新设计”的成本。如果被选来处理重建的精英老虎队没有始终如一地保持干净的姿态，随着时间的推移，他们会招致同样的混乱。

向客户传递价值是经理和产品所有者的工作。专业开发人员的工作是保证代码质量并提供有效的成本估算。这种责任有时意味着对经理说“不”。

> 为了说明这一点，如果你是一名医生，有一个病人要求你在准备手术时停止所有愚蠢的洗手行为，因为这花费了太多的时间，那该怎么办？明明病人是老板；然而，医生应该绝对拒绝遵守。为什么？因为医生比病人更了解疾病和感染的风险。医生顺从病人是违反职业道德的(更不用说犯罪了)。
> 
> 程序员屈从于不了解制造混乱风险的经理的意志也是不专业的。

## [](#clean-code-defined)清理代码定义

Martin 向一些软件传奇人物寻求“干净代码”的定义拿起这本书的副本给你自己阅读，但我个人最喜欢的是来自[迈克尔羽毛](https://michaelfeathers.silvrback.com/bio)(*与遗留代码*有效工作的作者):

> 干净的代码总是看起来像是由关心它的人写的。没有什么明显的方法可以让它变得更好。所有这些事情都是代码的作者考虑过的，如果你试图想象改进，你会回到你现在的位置，坐在那里欣赏别人留给你的代码——那些深深关心这门手艺的人留下的代码。

## [](#authors-and-the-readwrite-ratio)作者和读写比

鲍勃大叔把程序员描述成一类作者，负责沟通好。我们大部分的时间(10:1)都花在了阅读代码上，所以当我们写代码时，我们必须让代码清晰明了。如果不能阅读现有的代码，就没有办法编写更多的代码。

## [](#boy-scout-rule)(男孩)童军法则

马丁在第一章结尾分享了一条改编的美国童子军规则:

> 让露营地比你发现时更干净。

[![Campsite Photo by Zach Betten, https://unsplash.com/photos/K9olx8OF36A](../Images/ab12def62fd3fdba9dba9396183043e6.png)T2】](https://collinmbarrett.com/media/campsite_collinmbarrett.jpg)

无论您是否选择[包括“男孩”](https://dev.to/ben/the-boy-scout-rule-is-now-the-scout-rule-420g)当提到它向前发展时，这个经典的规则可以为遵循它的开发团队提供巨大的价值。代码自然希望在内部腐烂，所以需要不断努力来保持它的干净。

我喜欢这个原则，并且我尝试在每次提交时都执行它。然而，当我在遗留(没有单元测试)应用程序中工作时，我确实感到紧张。在解决问题时，我可以或应该在什么级别和范围内进行安全清理？

TDD 纯粹主义者可能会说不要在没有单元测试的情况下做任何改变。如果我主要使用像 IDE([Visual Studio](https://collinmbarrett.com/tag/visual-studio/))和 IDE extensions (ReSharper)提供的重构工具，我个人很乐意执行重命名和方法提取之类的事情。如果清理需要我手动输入更改，我尽量不相信自己会在未经单元测试的代码库中这样做。

## [](#defining-the-developers-done)定义开发者的“完成”

对我来说，这本书是关于定义“完成”对软件开发者意味着什么。当然，“完成”应该包括 QA 验证和验收测试等步骤。然而，开发人员的更改在什么程度上是真正的代码完整呢？

“完成”的代码不应该只是工作。它应该是富于表现力的，易于导航的，并且易于扩展。

任何一个平庸的程序员都可以做出一些有用的东西。优秀的开发人员编写巧妙的代码，不仅是为了美观，也是为了便于定位和消除错误，扩展功能，以及在将来调整整个模块。专业开发人员有长远的观点，他们的代码反映了这一点。