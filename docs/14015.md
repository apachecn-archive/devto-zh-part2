# 用户界面布局:使用像素、点和密度

> 原文:[https://dev . to/mortoray/ui-layout-working-with-pixel-points-and-density-43hf](https://dev.to/mortoray/ui-layout-working-with-pixels-points-and-density-43hf)

设备有不同的物理分辨率和密度。一部手机可能宽 10 厘米，宽 800 像素，而另一部手机可能宽 8 厘米，宽 1200 像素。UI 引擎需要提供一些一致的方法来处理不同设备上的大小。

> 这篇文章是关于编写 UI 引擎的系列文章的一部分。

## [](#the-point)点到为止

我们将点定义为所有设备中具有相似大小的单元。在 UI 领域中,“点”没有具体的大小。在特定设备上，存在从点到设备像素(构成实际显示的小点)的映射。

> 一些系统称这些设备为独立像素，但称之为“像素”似乎是错误的，而且有点罗嗦。另外，也不要把它与打印点的传统含义混淆:点的含义在 UI 引擎中没有任何用处。

“像素到点”比率是一个点中包含的像素数量。例如，如果像素与点的比率为 3:1，则点宽度为 10 的形状将跨越 30 个像素进行渲染。

硬件屏幕密度通常决定了这种映射。给定两个物理大小相同的设备，一个可能具有 400x800 像素的分辨率，而另一个可能具有 800x1600 像素的分辨率。第二个装置的密度是第一个装置的两倍。如果第一个使用 1:1 的像素点比率，我们希望第二个使用 2:1 的比率。以这种方式定义的点在两个设备上将具有相同的视觉大小。

我们很少有这种精确的关系。设备供应商定义了对设备有意义的像素点比率，但不一定有一致的含义。UI 引擎不需要与特定的操作系统或设备具有相同的意义，但考虑供应商的映射以匹配其他应用程序设置的期望是有价值的。

> 密度的概念已经变得模糊不清:在某些情况下，它衡量的是每毫米像素的比率，在其他情况下是逻辑像素与点的比率，在其他情况下是设备分辨率之间的比率。最好参考像素点比例之类的具体东西。

## [](#point-imprecision)点穴不准

乍一看，有一个固定的点到毫米的映射似乎是可取的。然后，您可以设计一个 UI，并获得所有元素的相同实际大小，而不管具体的设备。

如果我们考虑设备的物理尺寸，它的分辨率，以及用户和编码者的期望，我们有理由不给 point 一个一致的物理尺寸。也许稍大的手机型号是为了产生更大的视觉效果。除了显示屏之外，它可能与较小的电话共享相同的图形硬件和软件设置。保持相同的点像素比可以满足用户和硬件的要求。

对于图形设计来说，有共同的分组会很方便。我们的手机有常见的比例，如 1:1、1.5:1、2:1、3:1 和 4:1。通过坚持这些标准缩放，我们可以更好地准备图像资产。图像可以以特定的密度为目标，并以 2 的幂进行放大/缩小，这比缩放到任意大小的图像更清晰——下面将详细介绍。最好是一个点的物理大小有点不一致，而不是像 2.1837:1 这样的比例。

然而，总会有密度不同寻常的设备。一个应用程序可能还希望以不同的比率渲染纹理，或者为了更高的目标密度。UI 引擎必须处理任何像素到点的比率。

> 点通常表示为整数值，图形设计也是如此。尽管没有这样的要求。UI 引擎中的点系统应该使用浮点。点和像素之间的转换必须保持相同的值，尤其是在需要像素精度的布局中。

## [](#pixel-precision)像素精度

像素对齐是讨论点时不可避免的一部分。不管你希望如何指定你的用户界面的大小和位置，你都希望有一个清晰的显示。要获得清晰的线条或图像边界，需要与像素对齐，而不是与点对齐。

由于各种原因，编码布局会导致位置与像素不对齐。您可能有 1.5:1 的比率，在这种情况下，宽度为 5 的矩形将覆盖 7.5 个像素。或者你可能试图将元素居中，结果却覆盖了所有地方的半个像素。这几乎是一个规则，而不是一个例外，你最终会得到大小和位置不能清晰地映射到像素。

为了获得清晰的渲染，我们希望在像素边界上对齐直线和图像。我们可以改为将 5 点宽的矩形大小改为 5.3333，这样它正好覆盖 8 个像素。我们可以将 0.5 的笔画宽度精确地更改为 1 或 2 个像素，并将其向左/向右移动部分点以使其正确对齐。

## [](#the-engine)发动机

UI 引擎应该在点的领域中工作。有必要定义一个从点到像素的映射，以满足硬件和 ui 设计的需要。布局必须允许浮点值，并且必须处理到像素边界的映射，以确保清晰的显示。图像元素，尤其是图标，需要考虑像素映射的大小调整模式。

当我们谈论布局时，我们将再次讨论像素正确性的问题。它会导致布局本身的空间混叠问题，而不仅仅是模糊的视觉效果。

> 阅读更多关于[写 UI 引擎](https://mortoray.com/topics/writing-a-ui-engine/)的文章。[在推特上关注我](https://twitter.com/edaqa)或者[脸书](https://www.facebook.com/mortoray/)，为了让我继续写作，考虑[成为赞助人](https://www.patreon.com/mortoray)。