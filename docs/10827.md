# å¸¦æœ‰ Vue.js å’Œ Hamoni Sync çš„å®æ—¶çœ‹æ¿æ¿

> åŸæ–‡:[https://dev . to/pmbanugo/real-time-kanban-board-with-vue js-and-hamoni-sync-52kg](https://dev.to/pmbanugo/real-time-kanban-board-with-vuejs-and-hamoni-sync-52kg)

[çœ‹æ¿](https://leankit.com/learn/kanban/kanban-board/)æ˜¯ä¸€ä¸ªå·¥ä½œæµç¨‹å¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥è®©ä½ ä¼˜åŒ–å·¥ä½œæµç¨‹ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨ Vue ä¸­æ„å»ºå®æ—¶çœ‹æ¿ã€‚

è¦ç»§ç»­å­¦ä¹ ï¼Œæ‚¨éœ€è¦äº†è§£ä¸€äº›å…³äº [Vue](https://vuejs.org/) å’Œå®ƒçš„[å•ä¸ªæ–‡ä»¶ç»„ä»¶](https://vuejs.org/v2/guide/single-file-components.html)çš„çŸ¥è¯†ã€‚æ‚¨è¿˜éœ€è¦ä»¥ä¸‹å·¥å…·:

1.  Node.js & npm(ç‚¹å‡»æ­¤[é“¾æ¥](https://nodejs.org/)ä¸ºæ‚¨çš„æ“ä½œç³»ç»Ÿä¸‹è½½å®‰è£…ç¨‹åº)
2.  Vue CLIã€‚å¦‚æœä½ æ²¡æœ‰è¿™ä¸ªï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ`npm install -g vue-cli`æ¥å®‰è£…å®ƒã€‚

å¦‚æœä½ æ²¡æœ‰å…³äº Vue çš„çŸ¥è¯†ï¼Œä½ å¯ä»¥åœ¨ç»§ç»­è¿™ç¯‡æ–‡ç« ä¹‹å‰é˜…è¯»æˆ‘çš„å‰ä¸€ç¯‡æ–‡ç« ã€‚

# [](#setup-the-project)è®¾ç½®é¡¹ç›®

æˆ‘ä»¬å°†ä½¿ç”¨ Vue CLI è®¾ç½®é¡¹ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºæ­å»º Vue.js é¡¹ç›®çš„ç®€å•å‘½ä»¤è¡Œç•Œé¢(CLI)ã€‚æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œ`vue init webpack-simple realtime-kanban-board`ã€‚ä½ ä¼šå¾—åˆ°ä¸€äº›æç¤ºï¼Œå½“è¯¢é—®ä½ æ˜¯å¦æƒ³ä½¿ç”¨`saas`æ—¶ï¼ŒæŒ‰ä¸‹å›è½¦é”®æ¥å—é»˜è®¤å€¼å¹¶é€‰æ‹©`y`ã€‚åœ¨è¿è¡Œè¯¥å‘½ä»¤ä¹‹å‰ï¼Œæ‚¨å¯ä»¥å°†`realtime-kanban-board`æ›´æ”¹ä¸ºæ‚¨å–œæ¬¢çš„é¡¹ç›®åç§°ã€‚è®¾ç½®å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ä»è„šæ‰‹æ¶æ¨¡æ¿å®‰è£…ä¾èµ–é¡¹:

```
cd realtime-kanban-board
npm install 
```

æˆ‘ä»¬å°†ä½¿ç”¨ [vue-kanban](https://github.com/BrockReece/vue-kanban) ä½œä¸ºå…·æœ‰æ‹–æ”¾åŠŸèƒ½çš„çœ‹æ¿ç»„ä»¶ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨ [Hamoni Sync](https://www.hamoni.tech/) æ¥å®æ—¶å­˜å‚¨å’ŒåŒæ­¥åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚å®ƒä»¬éƒ½åœ¨ npm ä¸Šï¼Œæˆ‘ä»¬å°†é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…å®ƒä»¬:

```
npm install vue-kanban hamoni-sync 
```

æˆ‘ä»¬éœ€è¦ä¸€äº›é¢å¤–çš„åŒ…è£¹ç»™å·´åˆ«å¡”ã€‚é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…å®ƒä»¬:

```
npm install --save-dev babel-plugin-transform-runtime babel-preset-stage-2 
```

# [](#add-vuekanban)æ·»åŠ è§†å›¾çœ‹æ¿

æˆ‘ä»¬å·²ç»æ­å»ºäº†åº”ç”¨ç¨‹åºï¼Œç°åœ¨å®ƒåŒ…å«äº†è¿è¡Œåº”ç”¨ç¨‹åºæ‰€å¿…éœ€çš„æ–‡ä»¶ã€‚ç”¨æ–‡æœ¬ç¼–è¾‘å™¨(æˆ– IDE)æ‰“å¼€æ–‡ä»¶`src/App.vue`,å¹¶ç”¨ä»¥ä¸‹å†…å®¹æ›¿æ¢å…¶å†…å®¹:

```
<template>
  <div id="app">
    <kanban-board :stages="stages" :blocks="blocks" @update-block="updateBlock">
      <div v-for="block in blocks" :slot="block.id" :key="block.id">
        <div>
          <strong>id:</strong> {{ block.id }}
        </div>
        <div>
          {{ block.title }}
        </div>
      </div>
    </kanban-board>
  </div>
</template>

<script>
import Vue from "vue";
import vueKanban from "vue-kanban";
import Hamoni from "hamoni-sync";

Vue.use(vueKanban);

export default {
  name: "app",
  data() {
    return {
      stages: ["on-hold", "in-progress", "needs-review", "approved"],
      blocks: [],
      listPrimitive: null
    };
  },
  methods: {
    updateBlock(id, status) {
      //TODO: add code to update the block
    }
  },
};
</script>

<style lang="scss">
@import "./assets/kanban.scss";
</style> 
```

ä¸Šé¢çš„ä»£ç ä½¿ç”¨äº†å¸¦æœ‰ä¸¤ä¸ªé“å…·`stages`å’Œ`blocks`çš„`kanban-board`ç»„ä»¶ã€‚`stages`é“å…·å®šä¹‰äº†æ¿å­çš„åˆ—ï¼Œ`blocks`åŒ…å«äº†ä»£è¡¨æ”¾ç½®åœ¨åˆ—ä¸Šçš„ä»»åŠ¡é¡¹çš„æ•°æ®ã€‚å½“å—ä»ä¸€ä¸ªé˜¶æ®µç§»åŠ¨åˆ°å¦ä¸€ä¸ªé˜¶æ®µæ—¶ï¼Œè§¦å‘`@update-block`äº‹ä»¶ã€‚æˆ‘ä»¬å°†åˆ©ç”¨è¿™ä¸€äº‹ä»¶å®æ—¶æ›´æ–°å…¬å‘Šæ¿ã€‚

# [](#add-hamoni-sync)Add Hamoni Sync

æˆ‘ä»¬å·²ç»æ·»åŠ äº†å¿…è¦çš„ä»£ç æ¥å°†çœ‹æ¿å‘ˆç°åˆ°é¡µé¢ä¸Šã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¾ç½® [Hamoni Sync](https://www.hamoni.tech/) æ¥å­˜å‚¨å’ŒåŒæ­¥`blocks`çš„æ•°æ®ã€‚Hamoni Sync æ˜¯ä¸€é¡¹è®©æ‚¨èƒ½å¤Ÿå®æ—¶åŒæ­¥åº”ç”¨ç¨‹åºçŠ¶æ€çš„æœåŠ¡ã€‚

è¦ä½¿ç”¨ Hamoni åŒæ­¥ï¼Œæˆ‘ä»¬éœ€è¦åˆå§‹åŒ–å®ƒå¹¶è¿æ¥åˆ° Hamoni æœåŠ¡å™¨ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¸æˆ·å’Œåº”ç”¨ç¨‹åº IDã€‚æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åœ¨ Hamoni ä¸­åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚

1.  æ³¨å†Œå¹¶ç™»å½• Hamoni [ä»ªè¡¨ç›˜](https://dashboard.hamoni.tech/)
2.  åœ¨æ–‡æœ¬å­—æ®µä¸­è¾“å…¥æ‚¨é¦–é€‰çš„åº”ç”¨ç¨‹åºåç§°ï¼Œç„¶åå•å‡»åˆ›å»ºæŒ‰é’®ã€‚è¿™å°†åˆ›å»ºåº”ç”¨ç¨‹åºï¼Œå¹¶å°†å…¶æ˜¾ç¤ºåœ¨åº”ç”¨ç¨‹åºåˆ—è¡¨éƒ¨åˆ†ã€‚
3.  å±•å¼€**è´¦æˆ· ID** å¡è·å–æ‚¨çš„è´¦æˆ· ID

[![Hamoni dashboard](../Images/4e41967431b35548bc44f1dd5b14ddc5.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--yUCiqUkM--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://docs.hamoni.tech/assets/dashboard.png)

å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°ç¬¬ 35 è¡Œçš„`App.vue`ã€‚

```
mounted: async function() {
  const accountId = "YOUR_ACCOUNT_ID";
  const appId = "YOUR_APP_ID";
  let hamoni;

  const response = await fetch("https://api.sync.hamoni.tech/v1/token", {
    method: "POST",
    headers: {
      "Content-Type": "application/json; charset=utf-8"
    },
    body: JSON.stringify({ accountId, appId })
  });

  const token = await response.json();
  hamoni = new Hamoni(token);

  hamoni
    .connect()
    .then(() => {
    hamoni
        .get("board")
        .then(listPrimitive => {
          this.listPrimitive = listPrimitive;
          this.blocks = listPrimitive.getAll();
          listPrimitive.onItemUpdated(item => {
          this.blocks.splice(item.index, 1, item.value);
          });
        })
        .catch(error => {
          if (error == "Error getting state from server") {
          hamoni
            .createList("board", blocks)
            .then(listPrimitive => {
              this.listPrimitive = listPrimitive;
              this.blocks = listPrimitive.getAll();
              listPrimitive.onItemUpdated(item => {
              this.blocks.splice(item.index, 1, item.value);
              });
            })
            .catch(console.log);
          }
        });
  });
  } 
```

åœ¨ç»“æŸæ ‡ç­¾`</script>`å‰æ·»åŠ ä»¥ä¸‹å†…å®¹:

```
const blocks = [
  {
    id: 0,
    status: "approved",
    title: "Buy coffee machine"
  },
  {
    id: 1,
    status: "in-progress",
    title: "Find better AirBnB options"
  },
  {
    id: 2,
    status: "on-hold",
    title: "Approve Q3 budget"
  },
  {
    id: 3,
    status: "approved",
    title: "Travel to Colombia"
  },
  {
    id: 4,
    status: "needs-review",
    title: "Add Redux to the app"
  },
  {
    id: 5,
    status: "approved",
    title: "Well, Sleep all day ğŸ‘©â€ğŸ¤"
  },
  {
    id: 6,
    status: "in-progress",
    title: "Find language exchange partner"
  }
]; 
```

æˆ‘ä»¬é€šè¿‡è°ƒç”¨ä» Sync çš„ä»¤ç‰Œ API è·å–çš„ä»¤ç‰Œæ¥åˆå§‹åŒ–å®ƒã€‚å»ºè®®ä»åç«¯è°ƒç”¨åŒæ­¥ä»¤ç‰ŒæœåŠ¡å™¨ï¼Œå¹¶å°†å“åº”ä»¤ç‰Œå‘é€åˆ°å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘å°†æŠŠå®ƒä»¬éƒ½æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚

å°†å­—ç¬¦ä¸²å ä½ç¬¦æ›¿æ¢ä¸ºæ‚¨å°†ä» Hamoni dashboard è·å¾—çš„å¸æˆ·å’Œåº”ç”¨ç¨‹åº IDã€‚ç„¶åæˆ‘ä»¬ç”¨`hamoni.connect()`è¿æ¥äº† appã€‚æˆ‘ä»¬é€šè¿‡è°ƒç”¨å­˜å‚¨åœ¨ Hamoni Sync ä¸Šçš„åº”ç”¨ç¨‹åºçŠ¶æ€åç§°æ¥æ£€ç´¢æ•°æ®ã€‚å¦‚æœå®ƒè¿˜ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å°†åˆ›å»ºå®ƒï¼Œç„¶åæ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨é¡¹ç›®æ›´æ–°æ—¶æ›´æ–° Vue çš„çŠ¶æ€ã€‚è¿™é€šè¿‡ç”¨ä»£ç è°ƒç”¨`onItemUpdated()`æ¥æ›´æ–°`item.index`ä¸Šçš„**å—**æ¥å®ç°ã€‚Hamoni Sync æä¾›äº†æ‰€è°“çš„[åˆ—è¡¨åŸè¯­](https://docs.hamoni.tech/list-primitive.html)ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé€šè¿‡è°ƒç”¨`hamoni.createList()`å¹¶ä¼ é€’ç»™å®ƒä¸€ä¸ªæ•°ç»„æ¥ä½¿ç”¨å®ƒã€‚

ç°åœ¨ï¼Œå½“ä¸€ä¸ªå—ä»ä¸€ä¸ªé˜¶æ®µç§»åŠ¨åˆ°å¦ä¸€ä¸ªé˜¶æ®µæ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–° Hamoni ä¸Šçš„çŠ¶æ€ã€‚æˆ‘ä»¬å°†æ›´æ–°ä¹‹å‰æ·»åŠ çš„å‡½æ•°`updateBlock(id, status)`

```
methods: {
    updateBlock(id, status) {
        let block = this.blocks[id];
        this.listPrimitive.update(id, { id, title: block.title, status });
    }
}, 
```

è¿™æ®µä»£ç å‘Šè¯‰ sync æ›´æ–°çŠ¶æ€ï¼Œä¸€æ—¦å®Œæˆï¼Œå®ƒå°†åŒæ­¥åˆ°æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯/è®¾å¤‡ã€‚

è¿™å°±æ˜¯æ‰€æœ‰éœ€è¦çš„ä»£ç ã€‚ç°åœ¨ï¼Œé€šè¿‡ä»å‘½ä»¤è¡Œè¿è¡Œ`npm run dev`æ¥è¿è¡Œåº”ç”¨ç¨‹åºï¼Œè¿™å°†åœ¨æ‚¨çš„é»˜è®¤æµè§ˆå™¨ä¸­å¯åŠ¨ web åº”ç”¨ç¨‹åºã€‚

[![realtime-kanban-vue.gif](../Images/4a1c9b9e857657d9a5d5ed187ee47b2a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--p2EDzG14--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn.filestackcontent.com/HT9934KSAuY1lbqC0Zng)

å°±æˆäº†ğŸš€å®æ—¶çœ‹æ¿ã€‚

# [](#thats-a-wrap)å°±è¿™ä¹ˆå®šäº†ï¼

æ‰€ä»¥æˆ‘ä»¬ç”¨ vue-kanban å’Œ Hamoni Sync æ­å»ºäº†ä¸€ä¸ªå®æ—¶çœ‹æ¿æ¿ã€‚Hamoni Sync å¯ä»¥è½»æ¾åœ°å°†å®æ—¶åŠŸèƒ½é›†æˆåˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ã€‚ä½ å¯ä»¥åœ¨ [GitHub](https://github.com/pmbanugo/realtime-kanban-vue) ä¸Šè·å¾—å®Œæ•´çš„ä»£ç ã€‚ç¼–ç å¿«ä¹ï¼ğŸ‘

# [](#resources)èµ„æº

*   vista CLI
*   [vue . js è¦é¢†ä»‹ç»](https://dev.to/pmbanugo/from-vanillajs-to-vuejs-a-guide-to-vue-essentials-5gii)
*   [vue çœ‹æ¿](https://github.com/BrockReece/vue-kanban)
*   [Hamoni Sync](https://www.hamoni.tech/)

> æ„Ÿè°¢ [Andrew Hedges](https://dev.to/segdeha) å’Œ [Gift](https://twitter.com/lauragift21) å®¡é˜…è¿™ç¯‡æ–‡ç« ã€‚