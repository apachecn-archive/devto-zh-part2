# 什么是适当的持续集成？

> 原文:[https://dev . to/markoa/what-is-proper-continuous-integration-585 c](https://dev.to/markoa/what-is-proper-continuous-integration-585c)

持续集成(CI)令人困惑。和所有的想法一样，每个人在实践中都有自己的版本。

CI 是我们在编写、测试和向最终用户交付软件时所面临问题的解决方案。它的核心承诺是可靠性。

持续集成的先决条件是拥有自动化测试套件。这不是一个简单的要求。学习编写自动化测试和掌握测试驱动开发需要多年的实践。然而，在不断增长的应用程序中，我们开发的测试可能会成为我们生产力的障碍。

### 我们在做 CI 吗？

让我们以两个开发团队为例，他们都在编写测试。第一个配置项构建运行大约 3 分钟。第二队计时 45 分钟。它们都使用 CI 服务器或基于云的 CI 服务，在特性分支上运行测试。他们都在可预测的周期内发布可靠的软件。但是他们都在做正确的*持续*集成吗？

Martin Fowler 最近分享了对 Jez Humble 执行的非正式 CI 认证流程的描述:

> 他通常通过要求他的[会议]听众举手来开始认证过程，如果他们做持续集成的话。通常大多数观众会举手。
> 
> 然后，他要求他们如果团队中的每个人都至少每天提交和推送一个共享主线(通常是 git 中的共享 master ),请举手。
> 
> 一半以上的手向下。
> 
> 然后，如果每次这样的提交都会导致自动构建和测试，他会要求他们继续举手。剩下的一半手放下了。
> 
> 最后，他问，如果构建失败，它通常会在 10 分钟内变回绿色。
> 
> 最后一个问题只剩下几只手了。那些人通过了他的认证测试。

### 软件开发还是刀光剑影？

如果 CI 构建需要足够长的时间，让我们在等待的时候有时间[去练习
剑术](https://xkcd.com/303/)，我们会以防御的方式处理我们的工作。我们倾向于在本地计算机上保留分支更长时间，因此每个开发人员的代码都处于明显不同的状态。合并更为罕见，它们变成了大而有风险的事件。在系统需要保持健康的规模上，重构变得很难。

对于一个缓慢的构建，每一次“git 推送”都会把我们送进地狱。我们要么等，要么找点别的事做，避免完全无所事事。如果我们上下文切换到其他东西，我们知道当构建完成时我们需要再次切换回来。问题是编程中的每一次任务切换都很困难，而且会消耗我们的精力。

*连续积分*中*连续*的点是**速度**。速度推动高生产率:我们希望尽快得到反馈。快速反馈循环让我们处于心流状态，这是我们工作快乐的源泉。

因此，为适当的持续集成的真正含义以及如何实现建立标准是很有帮助的。

### 10 分钟测试

很简单:**从推送新代码到
得到结果**，你花的时间是不是不到 10 分钟？如果是的话，恭喜你。您的团队已为高性能做好准备。如果没有，你的工作流程只有 CI 流程的元素，因为没有更好的术语。但是，这种缓慢会养成错误的习惯，伤害团队中所有开发人员的生产力。这最终抑制了公司整体的业绩。

没有人会着手建造一条非生产性的运输管道。然而，我们忙着写代码，直到我们感觉自己像一只沸腾的青蛙——我们不会注意到变化，直到我们接受事情本来的样子。*当然*我们的构建需要很长时间，我们有超过 10，000 行代码！

### 隧道尽头的光

但是，事情不一定要这样。不管您的测试套件有多大，并行测试可以将等待时间减少到几分钟或更少。一个快速托管的 CI 服务可以让您轻松地并行测试，并根据需要进行扩展，这可以带来很大的不同。这就是为什么对于我们在 [Semaphore](https://semaphoreci.com) 来说，提供最快的 CI/CD 性能是核心产品原则之一。通过并行化测试，您可以减少在等待时决定做什么所花费的时间，并使您的团队保持流畅的状态。

* * *

最初发布于信号量博客的[。很高兴在 dev.to 上分享—请在评论中发送您的反馈。✌️](https://semaphoreci.com/blog/2017/03/02/what-is-proper-continuous-integration.html)