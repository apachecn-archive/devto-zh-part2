# å°† JSON ä¸­åºåˆ—åŒ–çš„ C#å¯¹è±¡ä¼ é€’ç»™ Razor é¡µé¢

> åŸæ–‡:[https://dev . to/alexruzenhack/passing-serialized-c-object-in-JSON-to-razor-page-2h 48](https://dev.to/alexruzenhack/passing-serialized-c-object-in-json-to-razor-page-2h48)

æˆ‘æ­£åœ¨ä½¿ç”¨ C#å’Œ. net å°†æ¥è‡ªæ•°æ®åº“çš„æ•°æ®é›†ä¼ é€åˆ° Google Chart JavaScript æ¡†æ¶ã€‚NET æ ¸å¿ƒ MVC æ¡†æ¶ä¸‹çš„ Razor é¡µé¢ã€‚

ç¬¬ä¸€æ­¥å¾ˆç®€å•ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œç®€å•çš„æŸ¥è¯¢ä»¥è·å¾—æ•°æ®ï¼Œä½†æ˜¯ Google Chart æœ‰ä»–ä»¬ç‰¹æ®Šçš„æ–¹æ³•æ¥å¤„ç†æ•°æ®é›†ï¼Œå¹¶ä¸”å®ç°ä» POCO çš„ç®€å•è½¬æ¢æ˜¯ä¸å¤Ÿçš„ï¼Œç„¶åæˆ‘å†™äº†ä¸€ä¸ªè½¬æ¢å™¨:

```
private IEnumerable<Array> poco2GoogleChartDataset(IEnumerable<MyData> dataset)
{
    List<Array> googleDataset = new List<Array>();
    foreach (MyData data in dataset) {
        Array arr = new object[] { data.Label, data.Value };
        googleDataset.Add(arr);
    }
    return googleDataset.ToList();
} 
```

Enter fullscreen mode Exit fullscreen mode

ä½¿ç”¨`Newtonsoft.Json`ç¨‹åºé›†:
å°†è½¬æ¢çš„ç»“æœåºåˆ—åŒ–ä¸º JSON

```
// Top of the class
using Newtonsoft.Json;

// Hidden for brevity
ReportJson = JsonConvert.SerializeObject(poco2GoogleChartDataset(myDataset)); 
```

Enter fullscreen mode Exit fullscreen mode

å¦ä¸€æ–¹é¢ï¼Œåœ¨ Razor Page ä¸­ï¼Œæˆ‘éœ€è¦å°†è¿™ä¸ª JSON å¯¹è±¡ä¼ é€’ç»™ä¸€ä¸ª JavaScript å˜é‡ã€‚å¦‚æœæ‚¨åªæ˜¯ä½¿ç”¨ç®€å•çš„ Razor è¯­æ³•ä¼ é€’æ¨¡å‹å€¼ï¼Œå®ƒå°†ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºåœ¨ Razor æ¸²æŸ“è¿‡ç¨‹ä¸­å°†é€šè¿‡ HTML ç¼–ç ä¼ é€’å€¼ã€‚åƒè¿™æ ·:

```
// Razor Page
...
@section Scripts {
    function drawChart() {
        var jsonDataset = @Model.ReportJson;
        ...
    }
...
} 
```

Enter fullscreen mode Exit fullscreen mode

```
jsonDataset result:
[[\&#x22;Label\&#x22;, value]] 
```

Enter fullscreen mode Exit fullscreen mode

ä¸ºäº†ç»•è¿‡ HTML ç¼–ç ï¼Œå°†æ¨¡å‹å˜é‡ç”¨å®ƒä»¬çš„`Raw`æ–¹æ³•åŒ…è£…åˆ° HtmlHelper æŒ‡ä»¤ä¸­ã€‚è¿™è¾¹:

```
// Razor Page
...
@section Scripts {
    function drawChart() {
        var jsonDataset = @Html.Raw(Model.ReportJson);
        ...
    }
...
} 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨ï¼Œå€¼ç»“æœå°†æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œå‡†å¤‡åœ¨ Google Chart æ¡†æ¶ä¸­ä½¿ç”¨ã€‚

æˆ‘èŠ±äº†å‡ ä¸ªå°æ—¶æ‰è·å¾—è¿™ç§ç†è§£ï¼Œéƒ¨åˆ†åŸå› æ˜¯æˆ‘ä¸æŒæ¡ Razor è¯­æ³•ï¼Œä¹Ÿä¸äº†è§£ ASP.NET æ ¸å¿ƒ MVCï¼Œä¹Ÿä¸äº†è§£ C#ğŸ˜‚

å°±æ˜¯è¿™æ ·ï¼