# å¦‚ä½•åœ¨ Windows ä¸»æœºä¸Šç”¨ Laravel Homestead è®¾ç½® HTTPS

> åŸæ–‡:[https://dev . to/vintage sucks/how-to-setup-https-with-laravel-homestead-on-a-windows-host-odl](https://dev.to/vintagesucks/how-to-setup-https-with-laravel-homestead-on-a-windows-host-odl)

æœ¬æŒ‡å—å‡å®šæœ‰æµæµªè€…å’Œæ‹‰å‹’ç»´å°”å®¶å›­çš„ç»éªŒã€‚

Laravel Homestead æ˜¯ä¸€ä¸ªç”¨äºæœ¬åœ° Laravel å¼€å‘çš„æ˜“äºä½¿ç”¨çš„æµæµªè€…ç›’å­ï¼Œä½†æ˜¯å¦‚æœæ‚¨ä»¥å‰ä»æœªåšè¿‡ï¼Œè®© SSL åœ¨ Windows ä¸»æœºä¸Šå·¥ä½œå¯èƒ½ä¼šå¾ˆæ£˜æ‰‹ã€‚æœ¬æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨ Firefox ä¸­å¯ç”¨ SSL ä»¥åŠå¦‚ä½•ä¿¡ä»»è¯ä¹¦ã€‚

å…ˆå†³æ¡ä»¶:

*   [ä½œæ›²å®¶](https://getcomposer.org/)
*   [ç«ç‹](https://www.mozilla.org/firefox/)
*   [æµæµªè€…](https://www.vagrantup.com/)

å‡ºäºæ¼”ç¤ºç›®çš„ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Laravel é¡¹ç›®:

```
composer create-project --prefer-dist laravel/laravel ssl-example 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„é¡¹ç›®é…ç½®ä¸€ä¸ª Homestead å®ä¾‹:

```
cd ssl-example
composer require laravel/homestead --dev
vendor\\bin\\homestead make 
```

Enter fullscreen mode Exit fullscreen mode

æ‚¨åº”è¯¥ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°ä»¥ä¸‹è¾“å‡º:

```
Homestead Installed! 
```

Enter fullscreen mode Exit fullscreen mode

ç¼–è¾‘`Homestead.yaml`å¹¶è¿›è¡Œä»¥ä¸‹æ›´æ”¹:

```
-       map: homestead.test +       map: laravel.localhost
        to: /home/vagrant/code/public
+ ssl: true 
```

Enter fullscreen mode Exit fullscreen mode

> æ³¨æ„:è¯·éšæ„å°†æ•´ä¸ªæŒ‡å—ä¸­çš„`laravel.localhost`æ›´æ”¹ä¸ºæ‚¨é€‰æ‹©çš„æœ¬åœ°åŸŸã€‚

æ‚¨çš„`Homestead.yaml`ç°åœ¨çœ‹èµ·æ¥åº”è¯¥ç±»ä¼¼äºè¿™ä¸ª:

```
ip: 192.168.10.10
memory: 2048
cpus: 1
provider: virtualbox
authorize: ~/.ssh/id_rsa.pub
keys:
    - ~/.ssh/id_rsa
folders:
    -
        map: 'D:\Documents\GitHub\ssl-example'
        to: /home/vagrant/code
sites:
    -
        map: laravel.localhost
        to: /home/vagrant/code/public
databases:
    - homestead
name: ssl-example
hostname: ssl-example
ssl: true 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨`C:\Windows\System32\drivers\etc\hosts`ä¸­æ·»åŠ ä»¥ä¸‹ä¸€è¡Œ:

> æ³¨æ„:IP åœ°å€åº”è¯¥ä¸`Homestead.yaml`
> åŒ¹é…

```
192.168.10.10 laravel.localhost 
```

Enter fullscreen mode Exit fullscreen mode

å®‰è£…å®¶å›­æµæµªç®±:

```
vagrant box add laravel/homestead 
```

Enter fullscreen mode Exit fullscreen mode

è®©æˆ‘ä»¬å¼€å§‹æˆ‘ä»¬çš„æµæµªç›’å­:

```
vagrant up 
```

Enter fullscreen mode Exit fullscreen mode

å¦‚æœæ‚¨ä½¿ç”¨æœ¬æŒ‡å—å‘ç°æœ‰è™šæ‹Ÿæœºæ·»åŠ  SSLï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:

```
vagrant reload --provision 
```

Enter fullscreen mode Exit fullscreen mode

è¯·ç­‰å¾…ï¼Œç›´åˆ°è®¾ç½®è¿‡ç¨‹å®Œæˆã€‚

ç°åœ¨ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­è®¿é—® [http://laravel.localhost](http://laravel.localhost) :

[![Laravel over HTTP](../Images/c5f5610a7269e0676b412a5555db722c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--xQisC0MP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://nikol.as/img/2018/10/laravel-http.png)

ç°åœ¨æˆ‘ä»¬éœ€è¦ä»è™šæ‹Ÿæœºè·å– CA è¯ä¹¦:

```
vagrant ssh -c 'cat /etc/nginx/ssl/ca.homestead.ssl-example.crt' > ca.homestead.ssl-example.crt 
```

Enter fullscreen mode Exit fullscreen mode

> æ³¨æ„:æ›´æ”¹`ssl-example`ä»¥åŒ¹é…æ‚¨çš„`Homestead.yaml`ã€‚

ä½ ç°åœ¨åº”è¯¥åœ¨ä½ çš„`ssl-example`æ–‡ä»¶å¤¹ä¸­æœ‰`ca.homestead.ssl-example.crt`ã€‚

åœ¨ Powershell ä¸­ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†è¯ä¹¦æ·»åŠ åˆ°è¯ä¹¦å­˜å‚¨ä¸­:

```
certutil -addstore -enterprise -f "Root" ca.homestead.ssl-example.crt 
```

Enter fullscreen mode Exit fullscreen mode

> æ³¨æ„:ç°åœ¨æ‚¨å¯ä»¥ä»`ssl-example`æ–‡ä»¶å¤¹ä¸­ç§»é™¤`ca.homestead.ssl-example.crt`ã€‚

æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦è®© Firefox ä¿¡ä»»è¿™ä¸ªè¯ä¹¦ã€‚

åœ¨ Firefox ä¸­ï¼Œå¯¼èˆªåˆ°`about:config`ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰ç«ç‹çš„é…ç½®ç¼–è¾‘å™¨ï¼Œè¯·é˜…è¯»[è¿™ç¯‡ä»‹ç»](https://support.mozilla.org/kb/about-config-editor-firefox)ã€‚

å°†`security.enterprise_roots.enabled`è®¾ç½®ä¸º`true`å¹¶é‡å¯ Firefoxã€‚

ç°åœ¨ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿåœ¨æµè§ˆå™¨ä¸­è®¿é—®[https://laravel . localhost](https://laravel.localhost)ã€‚

[![Laravel over HTTPS](../Images/2cd481998864e695cda4c30d9839904f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--SecQ_QU9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://nikol.as/img/2018/10/laravel-https.png)

æ­å–œä½ ï¼ğŸ‰