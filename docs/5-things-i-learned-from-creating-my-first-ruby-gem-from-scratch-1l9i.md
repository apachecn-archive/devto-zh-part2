# 从零开始制作我的第一颗红宝石，我学到了 5 件事

> 原文：<https://dev.to/morinoko/5-things-i-learned-from-creating-my-first-ruby-gem-from-scratch-1l9i>

我很自豪地说，前几天我发表了我的第一颗红宝石，这是我从零开始创作的！从整体上反思这个项目，我意识到我学到了很多关于创建工作程序的过程(尽管很简单)，所以我想分享一下。我认为这些想法可能对像我这样的初学者特别有帮助。

顺便说一下，gem 是一个 CLI 应用程序，可以让您通过从外部来源(链接到源代码等)抓取数据来找到配方。在帖子末尾)。不是革命性的，但仍然很有趣:)

以下是我学到的五点，帮助我思考编码过程:

## 1。在编写任何代码之前，先写出一个计划

因为我已经习惯了写代码和一个教程或者程序，而这些程序只限于几行代码，所以我真的认为写一个计划是理所当然的。

在我的头脑中，我知道我想要建造什么，所以我为什么要浪费时间写下来呢？事实证明，我的书面计划是我最宝贵的资源之一。它帮助我弄清楚从哪里开始，我可能需要什么样的类和方法，以及我需要如何让用户与我的程序交互。如果没有计划，我很确定我会一直盯着一个空屏幕挠头。

我不认为计划需要超级详细，但只要足够让你想象程序的整个流程(至少这是我为像我这样的小程序所做的)。我通过想象用户将如何与程序交互，以及程序将基于用户的动作做什么来编写我的计划(例如，选择“搜索食谱”将提示用户输入关键字，然后用户可以从中选择食谱列表)。我没有包括任何技术上的东西，比如“数据会被抓取器抓取”，而是让计划指导我写代码。

当然，如果有特定的规格需要满足，我认为它们也可以包含在编码计划中，或者可能包含在单独的规格表中。

## 2。首先用伪代码写会有帮助

我读过很多关于伪代码的完整代码。作者大力提倡使用伪代码，这无疑帮助我想出了代码中更复杂的部分。基本思想是在编写任何实际代码之前，用简单的英语准确地写出您希望某一段代码做什么。我想这就像是你在每个方法、类等里面写出来的一个迷你计划。然后，这将引导你通过任何复杂的逻辑和你需要写的代码行的技术细节。

我可以肯定地说，用简单的英语来思考代码要比直接跳到技术细节和逻辑上容易得多，比如说，一个复杂的循环。每一行伪代码都可以被翻译成相应的工作代码，此外，伪代码通常会给出很好的注释，这使得您的代码在将来更容易理解和管理。

我想在未来尝试的另一件事是，当我需要可视化类、方法和数据如何相互连接时，画出图表。我发现自己在试图找出为什么我试图在程序中传递的数据没有得到正确处理时感到沮丧。而不是盲目地试图解决这个和那个，我认为这将有助于实际画出来，这样我就可以用我的眼睛看到到底发生了什么。

## 3。循序渐进，根据需要使用“假”数据

这真的帮助我完成了我的 gem 项目，没有被拖延或陷入代码中，直到后来我才需要这些代码。显然你不能一步写完整个程序，但是你仍然需要一些东西来处理，对吗？如果你不知道从哪里开始或者陷入困境，试着把事情分成更小的部分。

例如，一次处理一个方法，让它工作并准确输出您需要的内容，然后再将它编织到其余的代码中。或者，对于一个复杂的嵌套循环，从内部开始，逐步完成，在移出一层之前让每个部分都工作。

如果您需要/想要让某个方法或类工作，可以使用假数据，但是程序中处理、创建或传递数据的其他部分还没有完成。

对于我的 CLI gem，我决定在编写我的类(Recipe 类和 Scraper 类)之前让命令行接口逻辑工作，这样我至少可以在命令行中运行程序。CLI 需要相应地处理用户输入和输出数据，例如配方列表和配方细节。为了确保 CLI 逻辑首先正常工作，我只是通过手写来伪造配方数据，并在测试 CLI 时使用它。

后来，当我在设置 recipe 类时，我做了同样的事情:我没有真正的数据，因为 scraper 还没有完成，但我想确保 Recipe 类可以首先处理数据，所以我手工编写了一些 Recipe 数据，并用它来构建 Recipe 类的方法。一旦工作正常，我需要做的就是用 Scraper 类获得真实数据，然后程序的其余部分就可以工作了。

## 4。确保每个类和方法只有一个任务或目的

将每个“工作”分成不同的方法和类是 OOP 和一般编程的基础之一，但我也发现它使编码、组织程序变得更容易，并与小步骤工作密切相关。因为每个方法应该只处理一项工作，所以它保持每个方法中的代码不那么复杂和简短，把它打包成一个整洁的小盒子。这些“盒子”可以很容易地在其他方法或类中使用，而不需要重复代码(保持干燥！).

当单个方法中的代码变得太复杂或太难看时，我也喜欢使用这种技术来提取代码。例如，将复杂的计算或数据处理循环移到它自己的方法中。或者将经常使用的操作放入一个命名良好的方法中，使代码更容易阅读——这些方法并不真的需要复杂的代码，但我觉得将某些部分分离出来以提高代码的可读性通常是值得的。

## 5。在你的博客或笔记中写下编码过程

最后但同样重要的是，我发现写下我的编码过程对我的学习记忆和更深的理解有很大的帮助。写下你正在做的事情需要你真正思考你为什么要做你所做的事情，并查找你不完全理解的事情，以便解释它们。我也喜欢这个想法，我的博客帖子可能有一天会帮助其他人经历和我一样的经历。另一个巨大的好处是，你的博客(或笔记)会成为你自己的参考手册，供以后参考！

## 额外收获:如果先编写测试，事情可能会更简单(TDD！)

我曾经使用测试驱动开发的应用程序，通常是 Rspec，我认为首先编写测试也将与计划程序和使用小步骤/假数据携手并进。实际上，我还不知道如何编写测试，但这是我要学习的事情之一。

### 关于宝石

你可以查看一下 [Git 库](https://github.com/morinoko/find-recipe-cli-app)或者在【Rubygems.org】的[上看到它。](https://rubygems.org/gems/find_recipe)

### 更多信息

关于我如何创建 CLI gem 的深入阅读，您可以在我的博客上看到我的“创建我的第一个 CLI Gem”系列:

*   [第 1 部分:与捆扎机一起规划和设置](https://dev.to/morinoko/creating-my-first-cli-gem-part-1-planning-and-set-up-with-bundler-2pnh-temp-slug-5044286?preview=a8f4992b7f6cdfd54ba9fce21409e79451682d850bef80436c4023d762b5b84c43525da87aeee858edba595792b19622388fb91c7224d65ad1682e73)
*   [第 2 部分:启动并运行命令行界面](https://dev.to/morinoko/creating-my-first-cli-gem-part-2-getting-the-command-line-interface-up-and-running-3a85-temp-slug-4637673?preview=31b4ab73a7c41d39eaa898e6b3b0f00a9a1c35b7fa27de3334ede836bdaf5011d96192bc0cb666c61983e97fdf9a4d65c5132e2b41f08bad9b40a746)
*   [第 3 部分:使用 Nokogiri 为我的对象收集数据](https://dev.to/morinoko/creating-my-first-cli-gem-part-3-using-nokogiri-to-scrape-data-for-my-objects-39d8-temp-slug-8222410?preview=59c8d3dac0fea2b839b0bc1be1596528f159228a81980e06b248f5830074b733bed70a2bd246549be9bac394986e3bf458df66fd07c216daadcbc9ec)