# Vue.js 101 todo PWA æ•™ç¨‹

> åŸæ–‡:[https://dev.to/vinceumo/vuejs-101-todo-pwa-tutorial-4bne](https://dev.to/vinceumo/vuejs-101-todo-pwa-tutorial-4bne)

æœ¬æ•™ç¨‹çš„ç›®çš„æ˜¯ç»™ vue.js â¤.ä¸€ä¸ªä»‹ç»

è¿™äº›å†…å®¹æœ€åˆæ˜¯ä¸º DAM Digital London çš„ä¸€ä¸ªç ”è®¨ä¼šç¼–å†™çš„ã€‚

Vue.js æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢(UI)çš„æ¸è¿›å¼æ¡†æ¶ã€‚

æœ¬æ•™ç¨‹å‡è®¾ä½ å·²ç»æœ‰ä¸€äº›å…³äº HTMLã€CSS å’Œ Javascript çš„ä¸­çº§çŸ¥è¯†ã€‚å¦‚æœä½ æ²¡æœ‰è¿™äº›é¢†åŸŸçš„ä»»ä½•çŸ¥è¯†ï¼Œå¯ä»¥å»çœ‹çœ‹ [freeCodeCamp](https://www.freecodecamp.org/) ï¼Œä»–ä»¬æœ‰å¾ˆå¥½çš„èµ„æºæ¥å­¦ä¹ è¿™äº›è¯é¢˜ğŸ˜‰ã€‚

ä»¥ä¸‹æ˜¯æœ¬æ•™ç¨‹å°†æ¶‰åŠçš„ä¸»é¢˜:

*   v ç»‘å®šæŒ‡ä»¤
*   ç±»å’Œæ ·å¼ç»‘å®š
*   äº‹ä»¶å¤„ç†
*   å±æ€§ä¸­çš„æ•°æ®ç»‘å®š
*   åˆ—è¡¨å‘ˆç°
*   æ’å€¼-èƒ¡å­
*   è¡¨å•è¾“å…¥ç»‘å®š-å¤é€‰æ¡†
*   v å‹è½¦
*   æ–¹æ³•
*   æ¡ä»¶æ¸²æŸ“
*   è™šæ‹Ÿä¸­é¢‘
*   v-å¦åˆ™
*   PWA ç®€ä»‹

æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿæ‹¥æœ‰å¤šä¸ªå¾…åŠäº‹é¡¹åˆ—è¡¨çš„å¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åºã€‚

[![todo app screenshot](../Images/7c3a18b767a4e00246bfc203c7c4afe5.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--tQs4uCsA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://image.ibb.co/g3g8Gy/Screenshot_2018_07_17_Todo_list.png)

## å…¥é—¨

ä» github ä¸­å…‹éš†[èµ·å§‹ææ–™ã€‚å®ƒåŒ…æ‹¬åŸºæœ¬çš„ HTMLï¼ŒCSS å’Œ JSã€‚](https://github.com/vinceumo/todo-vue-starter-materials)

ä½ å¯ä»¥åœ¨ [github](https://github.com/vinceumo/todo) ä¸Šæ‰¾åˆ°è¿™ä¸ªæ•™ç¨‹çš„æœ€ç»ˆä»£ç ï¼Œå¦‚æœä½ ç‚¹å‡»è¿™ä¸ª[é“¾æ¥](http://vinceumo.github.io/todo)å°±å¯ä»¥çœ‹åˆ°æ¼”ç¤ºã€‚

Vue CDN å·²ç»åŒ…å«åœ¨æˆ‘ä»¬çš„ index.html ä¸­ï¼Œè¿˜æœ‰æˆ‘ä»¬çš„ CSS å’Œ content/js/app.jsğŸ˜ƒã€‚

## åœ¨æ‰‹æœºä¸Šåˆ‡æ¢å¯¼èˆª

é¦–å…ˆï¼Œæ‰‹æœºä¾§è¾¹å¯¼èˆª(ğŸ“±< 850px)åº”è¯¥æ˜¾ç¤ºå’Œéšè—ã€‚

[![toggle nav](../Images/e30709a9113512a75b778f663bf3aac6.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--6QKWGQPi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://image.ibb.co/c7qGmy/menu.gif)

å½“æˆ‘ä»¬ç‚¹å‡»**èœå•**æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›`<nav>`åˆ‡æ¢ç±»åˆ«`.is-open`ã€‚

åœ¨ vue.js ä¸­ï¼Œ`v-bind`å…è®¸æˆ‘ä»¬åœ¨ html å±æ€§ä¸­ç»‘å®šæ•°æ®ã€‚å¦‚`v-bind:id=""`ã€`v-bind:style=""`ã€`v-bind:data-target=""`ç­‰ã€‚`v-bind`çš„ç®€ç§°æ˜¯`:`ã€‚

åœ¨`index.html`ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`v-bind:class`åŠ¨æ€ä¼ é€’`.is-open`ã€‚å¦‚æœ`isNavOpen`ä¸ºçœŸï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†æ·»åŠ æˆ‘ä»¬çš„ç±»ã€‚

```
<nav v-bind:class="{'is-open': isNavOpen}">
<!-- ... -->
</nav> 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨`content/js/app.js`ä¸­ï¼Œæˆ‘ä»¬çš„æ•°æ®ä¸­éœ€è¦`isNavOpen`ã€‚å¦‚æœä½ æŠŠæœ€åä¸€ä¸ªçš„å€¼æ”¹æˆ**çœŸ**ï¼Œå¯¼èˆªå°±ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚

vue.js ä¸­çš„**æ•°æ®**å±æ€§æ˜¯æˆ‘ä»¬å­˜å‚¨åº”ç”¨ç¨‹åºæ•°æ®å’Œ UI çŠ¶æ€çš„åœ°æ–¹ã€‚ä¾‹å¦‚ï¼Œ`isNavOpen`é»˜è®¤è®¾ç½®ä¸º falseï¼Œä½†æ˜¯é€šè¿‡å°†å…¶å€¼æ”¹ä¸º trueï¼Œæˆ‘ä»¬å¯ä»¥å°†ç±» *is-open* ç»‘å®šåˆ° DOMã€‚

åœ¨æˆ‘ä»¬çš„ app.js ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ `isNavOpen: false`ã€‚

```
var app = new Vue({
  el: "#app",
  data: {
    isNavOpen: false
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨æˆ‘ä»¬æƒ³åœ¨ç‚¹å‡»**èœå•**æŒ‰é’®æ—¶æ”¹å˜`isNavOpen`çš„å€¼ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨â€œç‚¹å‡»â€äº‹ä»¶å¤„ç†ç¨‹åºã€‚åœ¨ vue.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`v-on:`æˆ–`@` (Shorthands)ï¼Œæ¥ç›‘å¬ DOM äº‹ä»¶ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦ç›‘å¬ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ã€‚ç„¶åæˆ‘ä»¬å°†ä½¿ç”¨`v-on:click` / `@click`ã€‚

```
<button v-on:click="isNavOpen = !isNavOpen" class="menu">Menu</button> 
```

Enter fullscreen mode Exit fullscreen mode

æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’ä¸€ä¸ªå†…è” javascript è¯­å¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•(å‡½æ•°)ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹çš„åé¢çœ‹åˆ°å¦‚ä½•ä½¿ç”¨æœ€åä¸€ä¸ªã€‚

### æ–‡çŒ®å¼•ç”¨

*   [ç±»å’Œæ ·å¼ç»‘å®š](https://vuejs.org/v2/guide/class-and-style.html)
*   [äº‹ä»¶å¤„ç†](https://vuejs.org/v2/guide/events.html)
*   [v-bind æŒ‡ä»¤](https://vuejs.org/v2/api/#v-bind)
*   [å±æ€§ä¸­çš„æ•°æ®ç»‘å®š](https://vuejs.org/v2/guide/syntax.html#Attributes)

## å°†å¾…åŠäº‹é¡¹åˆ—è¡¨ç»‘å®šåˆ°ä¾§è¾¹å¯¼èˆª

åœ¨`content/js/app.js`ä¸­ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€äº›è™šæ‹Ÿåˆ—è¡¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ•´åˆæˆ‘ä»¬çš„ä¾§è¾¹å¯¼èˆªã€‚

```
var app = new Vue({
  el: "#app",
  data: {
    isNavOpen: false,
    todoLists: [
      {
        title: "âœˆï¸ Trip to japan",
        keyword: "japan",
        items: [
          { name: "Eat ramen", isCompleted: true },
          { name: "Visit mt Fuji", isCompleted: false },
          { name: "Learn japanese", isCompleted: false }
        ]
      },
      {
        title: "ğŸ‚ Ski trip to the Alps",
        keyword: "Alps",
        items: [
          { name: "Find a chalet", isCompleted: true },
          { name: "Learn how to ski", isCompleted: false }
        ]
      },
      {
        title: "ğŸ‰ Groceries",
        keyword: "Food",
        items: [
          { name: "Apples", isCompleted: false },
          { name: "Banana", isCompleted: true },
          { name: "Tomatoes", isCompleted: false },
          { name: "Bread", isCompleted: true }
        ]
      }
    ]
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

ä¸ºäº†åœ¨ä¾§è¾¹å¯¼èˆªä¸­å‘ˆç°æˆ‘ä»¬çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨`v-for`æŒ‡ä»¤ã€‚

```
<nav v-bind:class="{'is-open': isNavOpen}">
  <ul>
    <li v-for="todoList in todoLists">
      <button>
        {{todoList.title}}
        <span>
          {{todoList.items.length}}
        </span>
      </button>
    </li>
    <li>
      <button class="is-add">Create a new list</button>
    </li>
  </ul>
</nav> 
```

Enter fullscreen mode Exit fullscreen mode

`todoLists`æ˜¯æºæ•°æ®ï¼Œ`todoList`æ˜¯ç”¨äºåœ¨æ•°ç»„ä¸­è¿­ä»£çš„åˆ«åã€‚

æˆ‘ä»¬ä½¿ç”¨â€œå°èƒ¡å­â€è¯­æ³•`{{}}`å°†æ–‡æœ¬ç»‘å®šåˆ°è§†å›¾ã€‚å°èƒ¡å­æ ‡ç­¾è¢«æ›¿æ¢ä¸º`todoLists`ä¸­çš„ç›®æ ‡å€¼ã€‚

### æ–‡çŒ®å¼•ç”¨

*   [åˆ—è¡¨æ¸²æŸ“](https://vuejs.org/v2/guide/list.html)
*   [æ’å€¼-å°èƒ¡å­](https://vuejs.org/v2/guide/syntax.html#Text)

## ä¸»è¦ç« èŠ‚

### è¡¨å¤´

æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨ä¸»è¦éƒ¨åˆ†çœ‹åˆ°æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†åªå‘ˆç°ç¬¬ä¸€ä¸ª`todoLists`åˆ—è¡¨(ç´¢å¼• 0)ã€‚

åœ¨`content/js/app.js` = > `data`ä¸­æ·»åŠ `currentListIndex: 0`ã€‚

```
var app = new Vue({
  el: "#app",
  data: {
    isNavOpen: false,
    currentListIndex: 0,
    todoLists: [
      //...
    ]
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨æ ‡é¢˜ä¸­ä½¿ç”¨å°èƒ¡å­è¯­æ³•ç»‘å®šåˆ—è¡¨çš„æ ‡é¢˜ã€‚

```
<h1>{{todoLists[currentListIndex].title}}</h1> 
```

Enter fullscreen mode Exit fullscreen mode

é¡µçœ‰æœ‰ä¸€ä¸ªèƒŒæ™¯å›¾åƒã€‚æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨[å»æ¯›åˆºæº](https://source.unsplash.com/)æ¥è·å¾—ä¸€ä¸ªéšæœºå›¾åƒã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸€ä¸ªå…³é”®å­—æ¥è·å–æ ‡é¢˜çš„ç›¸å…³å›¾åƒã€‚

```
https://source.unsplash.com/featured/?{KEYWORD},{KEYWORD} 
```

Enter fullscreen mode Exit fullscreen mode

å½“æˆ‘ä»¬åœ¨å±æ€§ä¸­ç»‘å®šå…³é”®å­—æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`v-bind`

```
<header v-bind:style="'background-image: url(https://source.unsplash.com/featured/?' + todoLists[currentListIndex].keyword + ')'">
  <!-- ... -->
</header> 
```

Enter fullscreen mode Exit fullscreen mode

### Todos

ä¸ºäº†åœ¨ä¸»è¦éƒ¨åˆ†å‘ˆç°æˆ‘ä»¬çš„ todosï¼Œæˆ‘ä»¬å°†éœ€è¦ä½¿ç”¨`v-for`ã€‚å› ä¸ºæˆ‘ä»¬å¸Œæœ›æ¯ä¸ªè¾“å…¥éƒ½æœ‰å•ç‹¬çš„ ID å’Œåç§°ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ for å¾ªç¯`v-for="(value, index) in object"`ä¸­ä¼ é€’ç´¢å¼•ã€‚

æˆ‘ä»¬ä½¿ç”¨`v-bind`åˆ°*æ£€æŸ¥/å‹¾é€‰*æˆ‘ä»¬çš„ todos è¾“å…¥ï¼Œå¦‚æœè¿™äº›è¾“å…¥å·²ç»æ£€æŸ¥è¿‡çš„è¯ã€‚

å½“æˆ‘ä»¬ç‚¹å‡»å¤é€‰æ¡†æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨`v-model`ä»æˆ‘ä»¬çš„ todos æ›´æ–°`isCompleted`çš„å€¼ã€‚å½“æˆ‘ä»¬çš„å¤é€‰æ¡†è¢«é€‰ä¸­æ—¶ï¼ŒisCompleted å°†è·å¾— true å€¼ï¼Œçˆ¶ç±»`li`å°†è‡ªåŠ¨è·å¾—ç±»`.is-completed`ï¼Œå› ä¸º isCompleted æ˜¯`true`ã€‚

`v-model`æŒ‡ä»¤åˆ›å»ºäº†ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®šï¼Œè¿™æ„å‘³ç€å½“å€¼è¢«æ›´æ–°æ—¶ï¼ŒUI ä¹Ÿä¼šè¢«æ›´æ–°ã€‚

```
<ul>
  <li v-for="(todo, index) in todoLists[currentListIndex].items" v-bind:class="{'is-completed': todo.isCompleted}">
    <label v-bind:for="'todo' + index">
      <input
      type="checkbox"
      v-bind:name="'todo' + index"
      v-bind:id="'todo' + index"
      v-bind:checked="todo.isCompleted"
      v-model="todo.isCompleted">
      {{todo.name}}
    </label>
    <button class="is-danger">Edit todo</button>
  </li>
  <li>
    <button class="is-add">New Todo</button>
  </li>
</ul> 
```

Enter fullscreen mode Exit fullscreen mode

### æ–‡çŒ®å¼•ç”¨

*   [è¡¨å•è¾“å…¥ç»‘å®š-å¤é€‰æ¡†](https://vuejs.org/v2/guide/forms.html#Checkbox)
*   [v å‹è½¦](https://vuejs.org/v2/api/#v-model)

## æ”¹å˜å½“å‰åˆ—è¡¨

æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæ”¹å˜å½“å‰æ˜¾ç¤ºçš„åˆ—è¡¨ã€‚è¿™ä¸ªæ˜¯æˆ‘ä»¬ app çš„æ•°æ®é‡Œ`currentListIndex`è®¾ç½®çš„ã€‚å½“æˆ‘ä»¬ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªåˆ—è¡¨é¡¹æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å°†`currentListIndex`æ›´æ”¹ä¸ºè¿™ä¸ªåˆ—è¡¨é¡¹çš„ç´¢å¼•ï¼Œå¹¶å…³é—­æ‰“å¼€çš„ä¾§è¾¹å¯¼èˆªã€‚

æˆ‘ä»¬è¿˜éœ€è¦å‘ç”¨æˆ·æ˜¾ç¤ºå½“å‰æ˜¾ç¤ºçš„åˆ—è¡¨ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬æ·»åŠ äº†ç±»`.is-active` if `currentListIndex === index`ã€‚

```
<li v-for="(todoList, index) in todoLists"  v-bind:class="{'is-active' : currentListIndex === index}">
    <button v-on:click="currentListIndex = index; isNavOpen = false">
        {{todoList.title}}
        <span>
            {{todoList.items.length}}
        </span>
    </button>
</li> 
```

Enter fullscreen mode Exit fullscreen mode

## åˆ›å»ºæ–°åˆ—è¡¨

### åˆ‡æ¢å·¥å…·æ¡

å½“ç‚¹å‡»**åˆ›å»ºæ–°åˆ—è¡¨**æ—¶ï¼Œæˆ‘ä»¬æ˜¾ç¤º`.sidebar`ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›å°†ç±»`.is-open`æ·»åŠ åˆ°è¿™ä¸ªç±»ä¸­ï¼Œç„¶åå¦‚æœè¿™ä¸ªç±»åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¯æ‰“å¼€çš„ï¼Œåˆ™å…³é—­å¯¼èˆªæ ã€‚è¿™æ ·åšçš„æ–¹å¼ä¸æˆ‘ä»¬åœ¨æ‰‹æœºä¸Šå¯¼èˆªçš„æ–¹å¼éå¸¸ç›¸ä¼¼ã€‚

åœ¨æˆ‘ä»¬çš„æ•°æ®ä¸­ï¼Œæˆ‘ä»¬å°†é¦–å…ˆæ·»åŠ ä¸€ä¸ªæ–°æ¡ç›®`isSidebarOpen: false` :

```
var app = new Vue({
  el: "#app",
  data: {
    isNavOpen: false,
    isSidebarOpen: false,
    currentListIndex: 0
    //...
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨è®©æˆ‘ä»¬å°†æˆ‘ä»¬çš„ç±»`.is-open`ç»‘å®šåˆ°æˆ‘ä»¬çš„`.sidebar` :

```
<div class="sidebar" v-bind:class="{'is-open' : isSidebarOpen}">
 <!-- ... -->
</div> 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œç‚¹å‡»**åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨**ï¼Œè¿™å°†æ‰“å¼€ä¾§æ ï¼Œå¹¶å…³é—­æ‰‹æœºä¸Šçš„å¯¼èˆª:

```
<button class="is-add" v-on:click="isSidebarOpen = true; isNavOpen = false;">Create a new list</button> 
```

Enter fullscreen mode Exit fullscreen mode

å¾ˆå¥½ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥æ‰“å¼€ä¾§è¾¹æ äº†ğŸ‰ã€‚

ç°åœ¨ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»**å–æ¶ˆ** :
æ—¶ï¼Œè®©æˆ‘ä»¬å…³é—­ä¾§æ 

```
<button type="button" class="is-danger" v-on:click="isSidebarOpen = false">Cancel</button> 
```

Enter fullscreen mode Exit fullscreen mode

### æ·»åŠ æ–°åˆ—è¡¨

ä¸ºäº†åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥æ ‡é¢˜ä¸º*çš„*å’Œå…³é”®å­—ä¸º*çš„*çš„å€¼ã€‚å½“ç”¨æˆ·ç‚¹å‡»**åˆ›å»ºåˆ—è¡¨**æ—¶ï¼Œæˆ‘ä»¬å°†æŠŠæˆ‘ä»¬çš„æ–°å€¼æ¨é€åˆ°æ•°æ®ä¸­çš„`todoLists`ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªè¾“å…¥ä¸ºç©ºï¼Œæˆ‘ä»¬å°†æ˜¾ç¤ºä¸€ä¸ªé»˜è®¤å€¼ã€‚

åœ¨æˆ‘ä»¬çš„ *app.js* ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª`tempNewList`æ•°ç»„ï¼Œå®ƒå°†å­˜å‚¨æˆ‘ä»¬è¾“å…¥çš„å€¼ã€‚

```
var app = new Vue({
  el: "#app",
  data: {
    isNavOpen: false,
    isSidebarOpen: false,
    currentListIndex: 0,
    tempNewList: [
      {
        title: null,
        keyword: null
      }
    ]
    //...
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨`v-model`ç»‘å®šæˆ‘ä»¬çš„è¾“å…¥ã€‚

```
<form>
  <h3>Create a new list</h3>
  <label for="listTitle">Title:</label>
  <input id="listTitle" name="listTitle" type="text" placeholder="My amazing next trip to south america" v-model="tempNewList.title">
  <label for="listKeyword">Keyword:</label>
  <input id="listKeyword" name="listKeyword" type="text" placeholder="Colombia" v-model="tempNewList.keyword">
  <div class="buttons">
      <button type="button" class="is-danger" v-on:click="isSidebarOpen = false">Cancel</button>
      <button type="button" class="is-confirm">Create List</button>
  </div>
</form> 
```

Enter fullscreen mode Exit fullscreen mode

å¥½äº†ï¼Œç°åœ¨è®©æˆ‘ä»¬å°†æ–°çš„`tempNewList`å€¼æ¨é€åˆ°`todoLists`ã€‚

åˆ›å»ºä¸€ä¸ªå«åš`addNewList`çš„**æ–¹æ³•**ã€‚ä¸€ä¸ª**æ–¹æ³•**æ˜¯ä¸€ä¸ªå­˜å‚¨ä¸ºå¯¹è±¡å±æ€§çš„å‡½æ•°ã€‚è¿™é‡Œçš„å¯¹è±¡æ˜¯ vue å®ä¾‹ã€‚åœ¨ vue ä¸­ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å°†å­˜å‚¨åœ¨ä¸€ä¸ª`methods`å¯¹è±¡ä¸­ã€‚

`addNewList`æ–¹æ³•å°†éµå¾ªä»¥ä¸‹åœºæ™¯:

1.  å¦‚æœ*æ ‡é¢˜*ä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤å­—ç¬¦ä¸²`"ğŸ•µï¸â€ List with no name"`
2.  å¦‚æœ*å…³é”®å­—*ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨é»˜è®¤å­—ç¬¦ä¸²`"earth"`
3.  å°†æˆ‘ä»¬çš„å€¼æ¨è‡³`todoLists`
4.  å°†å½“å‰åˆ—è¡¨æ›´æ”¹ä¸ºæ–°åˆ—è¡¨
5.  å…³é—­ä¾§è¾¹æ 
6.  é‡ç½®æˆ‘ä»¬è¾“å…¥çš„å€¼

```
var app = new Vue({
  el: "#app",
  data: {
    //...
  },
  methods: {
    addNewList: function() {
      var listTitle = this.tempNewList.title;
      var listKeyword = this.tempNewList.keyword;
      if (listTitle == null) {
        listTitle = "ğŸ•µï¸â€ List with no name";
      }
      if (listKeyword == null) {
        listKeyword = "earth";
      }
      this.todoLists.push({
        title: listTitle,
        keyword: listKeyword,
        items: []
      });
      this.currentListIndex = this.todoLists.length - 1;
      this.isSidebarOpen = false;
      this.tempNewList.title = null;
      this.tempNewList.keyword = null;
    }
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

æœ€åï¼Œæˆ‘ä»¬å°†æŠŠæˆ‘ä»¬çš„æ–¹æ³•ç»‘å®šåˆ°æˆ‘ä»¬çš„**åˆ›å»ºåˆ—è¡¨**æŒ‰é’®ã€‚

```
<button type="button" class="is-confirm" v-on:click="addNewList">Create List</button> 
```

Enter fullscreen mode Exit fullscreen mode

### æ–‡çŒ®å¼•ç”¨

*   [æ–¹æ³•äº‹ä»¶å¤„ç†ç¨‹åº](https://vuejs.org/v2/guide/events.html#Method-Event-Handlers)

## ç¼–è¾‘åˆ—è¡¨

å¥½ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿç¼–è¾‘ç°æœ‰çš„åˆ—è¡¨ã€‚æˆ‘ä»¬å°†èƒ½å¤Ÿç¼–è¾‘æ ‡é¢˜ï¼Œå…³é”®å­—å’Œåˆ é™¤åˆ—è¡¨ã€‚

### åˆ‡æ¢ä¾§è¾¹æ å†…å®¹

åˆ›å»ºä¸€ä¸ªæ–°æ–¹æ³•`openSidebar`ã€‚è¿™ä¸€ä¸ªå°†:

1.  æ‰“å¼€è¾¹æ 
2.  æ˜¾ç¤ºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„è¡¨å•
3.  å¦‚æœæ­¤å¯¼èˆªæ‰“å¼€ï¼Œè¯·å°†å…¶å…³é—­

åœ¨æ•°æ®ä¸­ï¼Œè®©æˆ‘ä»¬æ·»åŠ `sidebarContentToShow: null`ï¼Œè¿™å°†è®©æˆ‘ä»¬çŸ¥é“åº”è¯¥æ˜¾ç¤ºä»€ä¹ˆå½¢å¼ã€‚

```
var app = new Vue({
  el: "#app",
  data: {
    isNavOpen: false,
    isSidebarOpen: false,
    sidebarContentToShow: null,
    currentListIndex: 0
    //...
  },
  methods: {
    //...
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬å°†åœ¨ä¾§æ ä¸­åˆ‡æ¢ 4 ä¸ªè¡¨å•:

1.  `"createNewList"`
2.  `"editList"`
3.  `"createNewTodo"`
4.  `"editTodo"`

åœ¨æˆ‘ä»¬çš„ HTML ä¸­ï¼Œæˆ‘ä»¬å°†æ ¹æ®`sidebarContentToShow`çš„å€¼æœ‰æ¡ä»¶åœ°å‘ˆç°è¡¨å•ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`v-if`æŒ‡ä»¤ã€‚å¦‚æœæ¡ä»¶ä¸ºçœŸï¼Œå®ƒå°†å…è®¸æˆ‘ä»¬æ¸²æŸ“æˆ‘ä»¬çš„å—ã€‚æˆ‘ä»¬éœ€è¦å–æ¶ˆè¡¨å•çš„æ³¨é‡Šï¼Œå¹¶æ·»åŠ ä¸€ä¸ª`v-if`æŒ‡ä»¤ã€‚

```
<div class="sidebar" v-bind:class="{'is-open' : isSidebarOpen}">
  <div class="sidebar-content">
      <form v-if="sidebarContentToShow === 'createNewList'">
          <h3>Create a new list</h3>
          <!-- ... -->
      </form>
      <form v-if="sidebarContentToShow === 'editList'">
        <h3>Edit list</h3>
          <!-- ... -->
      </form>
      <form v-if="sidebarContentToShow === 'createNewTodo'">
        <h3>Create a new todo</h3>
          <!-- ... -->
      </form>
      <form v-if="sidebarContentToShow === 'editTodo'">
        <h3>Edit todo</h3>
          <!-- ... -->
      </form>
  </div>
</div> 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»**åˆ›å»ºæ–°åˆ—è¡¨**æ—¶ï¼Œä¾§æ å‡ºç°ï¼Œæˆ‘ä»¬çœ‹åˆ°...æ²¡æœ‰ä»»ä½•ä¸œè¥¿ğŸ˜±ã€‚è¯´æ˜æ­£å¸¸è®°ä½ï¼Œ`sidebarContentToShow`è®¾ç½®ä¸ºç©ºğŸ˜‰ã€‚

ä¸ºäº†æ”¹å˜`sidebarContentToShow`çš„å€¼ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª`openSidebar`æ–¹æ³•ï¼Œå®ƒå°†æ‰“å¼€ä¾§è¾¹æ å¹¶æ”¹å˜æˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºçš„è¡¨å•ã€‚

```
var app = new Vue({
  el: "#app",
  data: {
    //...
  },
  methods: {
    openSidebar: function(contentToShow) {
      this.isSidebarOpen = true;
      this.isNavOpen = false;
      this.sidebarContentToShow = contentToShow;
    }
    //...
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨æˆ‘ä»¬å¯ä»¥æ”¹å˜**åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨**ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨`openSidebar`

```
<button class="is-add" v-on:click="openSidebar('createNewList')">Create a new list</button> 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬ç°åœ¨æ­£åœ¨æ¸²æŸ“**åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨è¡¨å•**ã€‚æ­£å¦‚ä½ å¯èƒ½å·²ç»çŒœåˆ°çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨**ç¼–è¾‘åˆ—è¡¨**æŒ‰é’®é‡ç”¨æˆ‘ä»¬çš„æ–¹æ³•ã€‚

```
<button class="is-primary" v-on:click="openSidebar('editList')">Edit list</button> 
```

Enter fullscreen mode Exit fullscreen mode

### ç¼–è¾‘åˆ—è¡¨è¡¨å•

#### åˆ é™¤åˆ—è¡¨

æˆ‘ä»¬å°†ä»**åˆ é™¤åˆ—è¡¨**æŒ‰é’®å¼€å§‹ã€‚åˆ›å»ºä¸€ä¸ªåä¸º`deleteList`çš„æ–°æ–¹æ³•ã€‚å®ƒå°†åˆ é™¤å½“å‰æ˜¾ç¤ºçš„åˆ—è¡¨å¹¶æ˜¾ç¤ºç¬¬ä¸€ä¸ªåˆ—è¡¨ã€‚

```
//...
deleteList: function() {
  this.todoLists.splice(this.currentListIndex, 1);
  this.currentListIndex = 0;
  this.isSidebarOpen = false;
}
//... 
```

Enter fullscreen mode Exit fullscreen mode

```
<button type="button" class="is-danger" v-on:click="deleteList">Delete list</button> 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤åˆ—è¡¨ï¼Œä½†å¦‚æœæˆ‘ä»¬è¯•å›¾åˆ é™¤æ‰€æœ‰åˆ—è¡¨ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåœæ­¢å·¥ä½œã€‚

```
[Vue warn]: Error in render: "TypeError: todoLists[currentListIndex] is undefined" 
```

Enter fullscreen mode Exit fullscreen mode

æ­£å¦‚æ‚¨å¯èƒ½å·²ç»çŒœåˆ°çš„ï¼Œæˆ‘ä»¬æœ‰è¿™ä¸ªé”™è¯¯ï¼Œå› ä¸ºæˆ‘ä»¬çš„`todoLists`æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬ä»ç„¶è¯•å›¾å‘ˆç°ä¾èµ–äº`todoLists`å€¼çš„åº”ç”¨ç¨‹åºçš„æŸä¸ªéƒ¨åˆ†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨æ¡ä»¶æ¸²æŸ“`v-if`å’Œ`v-else`ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†åªæ¸²æŸ“æˆ‘ä»¬çš„ä¸»è¦å†…å®¹ï¼Œå¦‚æœ`todoLists.length > 0`ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`v-else`æ˜¾ç¤ºä¸€ä¸ªæ›¿ä»£çš„ä¸»è¦å†…å®¹ï¼Œè¿™å°†æœ‰åŠ©äºç”¨æˆ·åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨ã€‚

```
<main v-if="todoLists.length > 0">
  <!-- ... -->
</main>
<main v-else>
  <header style="background-image: url(https://source.unsplash.com/featured/?cat">
      <div class="header-content">
          <h1>Please create a new list</h1>
          <button class="is-add" v-on:click="openSidebar('createNewList')">Create a new list</button>
      </div>
  </header>
</main> 
```

Enter fullscreen mode Exit fullscreen mode

#### æ”¹å˜æ ‡é¢˜å’Œå…³é”®å­—å€¼

è®©æˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„**ç¼–è¾‘åˆ—è¡¨**è¡¨å•ã€‚æˆ‘ä»¬å¸Œæœ›:

*   ä½¿ç”¨`v-model`å°†æˆ‘ä»¬çš„è¾“å…¥ä¸æ­£ç¡®çš„`todoLists`å…ƒç´ ç»‘å®šã€‚
*   å½“æˆ‘ä»¬ç‚¹å‡» **done** æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦å…³é—­æˆ‘ä»¬çš„æ»‘å—ã€‚
*   åªæœ‰åœ¨`todoLists.length > 0`çš„æƒ…å†µä¸‹æ‰å¸Œæœ›å‘ˆç°æ­¤è¡¨å•

```
<form v-if="sidebarContentToShow === 'editList' && todoLists.length > 0">
    <h3>Edit list</h3>
    <label for="listTitle">Title:</label>
    <input id="listTitle" name="listTitle" type="text" placeholder="My amazing next trip to south america" v-model="todoLists[currentListIndex].title">
    <label for="listKeyword">Keyword:</label>
    <input id="listKeyword" name="listKeyword" type="text" placeholder="Colombia" v-model="todoLists[currentListIndex].keyword">
    <div class="buttons">
        <button type="button" class="is-danger" v-on:click="deleteList">Delete list</button>
        <button type="button" class="is-confirm" v-on:click="isSidebarOpen = false">Done</button>
    </div>
</form> 
```

Enter fullscreen mode Exit fullscreen mode

### æ–‡çŒ®å¼•ç”¨

*   [æ¡ä»¶æ¸²æŸ“](https://vuejs.org/v2/guide/conditional.html)
*   [v-if](https://vuejs.org/v2/api/#v-if)
*   [v-else](https://vuejs.org/v2/guide/conditional.html#v-else)

## åˆ›å»ºå’Œç¼–è¾‘å¾…åŠäº‹å®œ

æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢å·²ç»åŸºæœ¬å®Œæˆï¼Œæˆ‘ä»¬è¿˜éœ€è¦:

*   åœ¨åˆ—è¡¨ä¸­åˆ›å»ºæ–°çš„å¾…åŠäº‹é¡¹
*   ç¼–è¾‘å’Œåˆ é™¤ç°æœ‰å¾…åŠäº‹é¡¹

å¬èµ·æ¥åƒæˆ‘ä»¬å¯¹åˆ—è¡¨æ‰€åšçš„ï¼Œå¯¹å—ï¼Ÿè¿™å°†æ˜¯å‡ ä¹ç›¸åŒçš„æ­¥éª¤ã€‚

#### åˆ›å»ºå¾…åŠäº‹å®œ

åœ¨æˆ‘ä»¬çš„æ•°æ®ä¸­åˆ›å»ºä¸€ä¸ªæ–°å…ƒç´ `tempNewList` :

```
tempNewTodo: [
  {
    name: null,
    isCompleted: false
  }
], 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨`todoLists`
ä¸­æ·»åŠ æ–°çš„ todo åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­

```
addNewTodo: function() {
  var todoName= this.tempNewTodo.name;
  var todoCompleted = this.tempNewTodo.isCompleted;
  if (todoName == null) {
    todoName = "ğŸ•µï¸â€ unnamed todo";
  }
  this.todoLists[this.currentListIndex].items.push({
    name: todoName,
    isCompleted: todoCompleted
  });
  this.isSidebarOpen = false;
  this.tempNewTodo.name = null;
  this.tempNewTodo.isCompleted = false;
} 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨è®©æˆ‘ä»¬æ·±å…¥æˆ‘ä»¬çš„ HTMLã€‚

æˆ‘ä»¬éœ€è¦ç”¨**create newdo**è¡¨å•æ‰“å¼€ä¾§æ ã€‚

```
<button class="is-add" v-on:click="openSidebar('createNewTodo')">New Todo</button> 
```

Enter fullscreen mode Exit fullscreen mode

æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€åšçš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`v-model`ç»‘å®šæˆ‘ä»¬çš„è¾“å…¥ï¼Œå¹¶ä½¿ç”¨`addNewTodo`æ–¹æ³•æ¥æ¨é€æˆ‘ä»¬çš„æ–°å€¼ã€‚

```
<form v-if="sidebarContentToShow === 'createNewTodo'">
    <h3>Create a new todo</h3>
    <label for="todoName">Name:</label>
    <input id="todoName" name="todoName" type="text" placeholder="Do things..." v-model="tempNewTodo.name">
    <label for="todoCompleted"><input name="todoCompleted" id="todoCompleted" type="checkbox" v-bind:checked="tempNewTodo.isCompleted" v-model="tempNewTodo.isCompleted"> Is completed</label>
    <div class="buttons">
        <button type="button" class="is-danger" v-on:click="isSidebarOpen = false">Cancel</button>
        <button type="button" class="is-confirm" v-on:click="addNewTodo">Create todo</button>
    </div>
</form> 
```

Enter fullscreen mode Exit fullscreen mode

ç”±äºæˆ‘ä»¬ç°åœ¨æ­£åœ¨å°†`isCompleted`çš„æ•°æ®ç»‘å®šåˆ°æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨å¯¼èˆªä¸­æ˜¾ç¤ºå·²å®Œæˆå¾…åŠäº‹é¡¹çš„æ•°é‡ã€‚

åœ¨æˆ‘ä»¬çš„ **app.js** ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª`totalTodosCompleted`æ–¹æ³•ï¼Œä¼ é€’å½“å‰ todoList çš„ç´¢å¼•ã€‚

```
totalTodosCompleted: function(i){
  var total = 0;
  for (var j = 0; j < this.todoLists[i].items.length; j++) {
    if(this.todoLists[i].items[j].isCompleted){
      total++;
    }
  }
  return total;
} 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨åœ¨æˆ‘ä»¬çš„`navigation`ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æˆ‘ä»¬çš„æ–°æ–¹æ³•è¿”å›å·²å®Œæˆçš„ todos çš„æ€»æ•°ã€‚

```
<li v-for="(todoList, index) in todoLists" v-bind:class="{'is-active' : currentListIndex === index}">
    <button v-on:click="currentListIndex = index; isNavOpen = false">
        {{todoList.title}}
        <span>
            {{totalTodosCompleted(index)}} / {{todoList.items.length}}
        </span>
    </button>
</li> 
```

Enter fullscreen mode Exit fullscreen mode

#### [t1ã€ç¼–è¾‘å…¨éƒ¨ã€‘](#edit-a-todo)

è¦ç¼–è¾‘ todoï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å°†è¦ç¼–è¾‘çš„ todo çš„ç´¢å¼•ï¼Œåœ¨æˆ‘ä»¬çš„æ•°æ®ä¸­ï¼Œåˆ›å»º`currentTodoIndex`ã€‚

```
currentTodoIndex: 0, 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬éœ€è¦ä¸€ä¸ª`deleteTodo`æ–¹æ³•æ¥åˆ é™¤å½“å‰çš„ todoã€‚

```
deleteTodo: function() {
  this.todoLists[this.currentListIndex].items.splice(this.currentTodoIndex, 1);
  this.isSidebarOpen = false;
  this.currentTodoIndex = 0;
} 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„ HTMLã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬æƒ³æ‰“å¼€æ»‘å—å¹¶æ”¹å˜`currentTodoIndex`çš„å€¼ã€‚

```
<button class="is-primary" v-on:click="openSidebar('editTodo'); currentTodoIndex = index">Edit todo</button> 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨æˆ‘ä»¬çš„ **editTodo** è¡¨å•ä¸­ï¼Œæˆ‘ä»¬å°†:

*   ä»…å½“`todoLists[currentListIndex].items.length > 0`æ—¶æ˜¾ç¤ºæˆ‘ä»¬çš„è¡¨å•
*   ç»‘å®šå¾…åŠäº‹é¡¹åç§°ï¼Œå¦‚æœå®Œæˆï¼Œä½¿ç”¨`v-model`
*   å½“æˆ‘ä»¬ç‚¹å‡»*åˆ é™¤å¾…åŠäº‹å®œ*æ—¶ï¼Œè§¦å‘æ–¹æ³•`deleteTodo`
*   å½“æˆ‘ä»¬ç‚¹å‡»*å®Œæˆ*æ—¶ï¼Œå…³é—­æˆ‘ä»¬çš„ä¾§è¾¹æ 

```
<form v-if="sidebarContentToShow === 'editTodo' && todoLists[currentListIndex].items.length > 0">
  <h3>Edit todo</h3>
  <label for="todoName">Todo:</label>
  <input id="todoName" name="todoName" type="text" placeholder="Do things..." v-model="todoLists[currentListIndex].items[currentTodoIndex].name">
  <label for="todoCompleted"><input name="todoCompleted" id="todoCompleted" type="checkbox" v-bind:checked="todoLists[currentListIndex].items[currentTodoIndex].isCompleted" v-model="todoLists[currentListIndex].items[currentTodoIndex].isCompleted"> Is completed</label>
  <div class="buttons">
      <button type="button" class="is-danger" v-on:click="deleteTodo">Delete todo</button>
      <button type="button" class="is-confirm" v-on:click="isSidebarOpen = false">Done</button>
  </div>
</form> 
```

Enter fullscreen mode Exit fullscreen mode

ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰æˆ‘ä»¬ todo çš„ UI ç°åœ¨å·²ç»å®Œæˆäº†ï¼

## æœ¬åœ°å­˜å‚¨

å½“æˆ‘ä»¬é‡æ–°åŠ è½½é¡µé¢æ—¶ï¼Œå®ƒå›åˆ°æˆ‘ä»¬çš„è™šæ‹Ÿå€¼ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°å­˜å‚¨æˆ‘ä»¬çš„åˆ—è¡¨å’Œå¾…åŠäº‹é¡¹ï¼Œé‚£è¯¥æœ‰å¤šå¥½ï¼Ÿ

æˆ‘ä»¬å°†ä½¿ç”¨ [window.localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) ã€‚å®ƒæ˜¯[ç½‘ç»œå­˜å‚¨ API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API) çš„ä¸€éƒ¨åˆ†ã€‚

æœ¬åœ°å­˜å‚¨å…è®¸æˆ‘ä»¬å­˜å‚¨æ²¡æœ‰æˆªæ­¢æ—¥æœŸçš„æ•°æ®ã€‚

åœ¨æˆ‘ä»¬çš„ **app.js** ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ–¹æ³•`updateTodoLocalStorage`

```
//...
updateTodoLocalStorage: function () {
  localStorage.setItem('todoLocalStorage', JSON.stringify(this.todoLists));
}
//... 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬ä½¿ç”¨ Web å­˜å‚¨ API ä¸­çš„`setItem()`æ–¹æ³•ã€‚æˆ‘ä»¬ä¼ é€’ä»¥ä¸‹å‚æ•°:

*   `setItem(keyName, keyValue);`
    *   `keyName`:æˆ‘ä»¬æƒ³è¦åˆ›å»º/æ›´æ–°çš„å¯†é’¥çš„åç§°(`'todoLocalStorage'`)ã€‚
    *   `keyValue`:æˆ‘ä»¬å¸Œæœ›èµ‹äºˆæ‚¨æ­£åœ¨åˆ›å»º/æ›´æ–°çš„å¯†é’¥çš„å€¼(`JSON.stringify(this.todoLists)`)ã€‚

æˆ‘ä»¬ç°åœ¨æƒ³åœ¨æ¯æ¬¡æ›´æ–° todos æˆ– lists çš„å€¼æ—¶ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚Vue å…è®¸æˆ‘ä»¬ä½¿ç”¨`watch`é€‰é¡¹å¯¹æ•°æ®å˜åŒ–åšå‡ºååº”ã€‚æ¯å½“æˆ‘ä»¬çš„`todoLists`å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬å°±ä¼šè°ƒç”¨æˆ‘ä»¬çš„`updateTodoLocalStorage`æ–¹æ³•ã€‚å› ä¸ºæˆ‘ä»¬çš„å¯¹è±¡æœ‰åµŒå¥—çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³æ£€æµ‹è¿™äº›å€¼å†…éƒ¨çš„å˜åŒ–ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡`deep: true`è¿™æ ·åšã€‚

```
var app = new Vue({
  el: "#app",
  data: {
    //...
  },
  watch: {
    todoLists: {
      handler() {
        this.updateTodoLocalStorage();
      },
      deep: true
    }
  },
  methods: {
    //...
    updateTodoLocalStorage: function() {
      localStorage.setItem("todoLocalStorage", JSON.stringify(this.todoLists));
    }
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨è®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œçœ‹çœ‹**æœ¬åœ°å­˜å‚¨**ã€‚å¦‚æœæˆ‘ä»¬åˆ›å»º/æ›´æ–°ä¸€ä¸ªåˆ—è¡¨æˆ–å¾…åŠäº‹é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„`todoLocalStorage`å­˜å‚¨è¢«æ›´æ–°ã€‚

ç°åœ¨ï¼Œå½“æˆ‘ä»¬åŠ è½½é¡µé¢æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„`todoLists`è®¾ç½®ä¸ºæˆ‘ä»¬çš„`todoLocalStorage`ã€‚Vue è‡ªå¸¦[ç”Ÿå‘½å‘¨æœŸæŒ‚é’©](https://vuejs.org/v2/api/#created)ã€‚æˆ‘ä»¬å°†ä½¿ç”¨`created: function()`æ¥è®¾å®šæˆ‘ä»¬çš„ä»·å€¼è§‚ã€‚æˆ‘ä»¬ä¹Ÿå°†ç§»é™¤æˆ‘ä»¬çš„è™šæ‹Ÿä»·å€¼ã€‚

```
var app = new Vue({
  el: "#app",
  data: {
    //...
    todoLists: []
  },
  created: function() {
    this.todoLists = JSON.parse(
      localStorage.getItem("todoLocalStorage") || "[]"
    );
  },
  watch: {
    //...
  },
  methods: {
    //...
  }
}); 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬é‡æ–°åŠ è½½ï¼Œå…³é—­å¹¶é‡æ–°æ‰“å¼€æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬æ‰€æœ‰çš„å¾…åŠäº‹é¡¹å’Œåˆ—è¡¨éƒ½å·²ä¿å­˜ğŸ¤Ÿã€‚

### æ–‡çŒ®å¼•ç”¨

*   [è§‚å¯Ÿè€…](https://vuejs.org/v2/guide/computed.html#Watchers)
*   [å·²åˆ›å»º](https://vuejs.org/v2/api/#created)

# å¥–åŠ±-ç¦»çº¿æ¸è¿›å¼ç½‘ç»œåº”ç”¨ç¨‹åº(PWA)

åœ¨æœ¬æ•™ç¨‹çš„è¿™ä¸ªé™„åŠ éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è®¾ç½®ä¸€ä¸ªæ¸è¿›å¼ web åº”ç”¨ç¨‹åº(PWA)å’ŒæœåŠ¡å·¥äººï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨æ™ºèƒ½æ‰‹æœºä¸Šç¦»çº¿ä½¿ç”¨è¿™ä¸ª Web åº”ç”¨ç¨‹åºã€‚

## è®¾ç½® PWA

PWA æ˜¯:

> æ¸è¿›å¼ web åº”ç”¨ç¨‹åºæ˜¯å¸¸è§„ç½‘é¡µæˆ–ç½‘ç«™çš„ Web åº”ç”¨ç¨‹åºï¼Œä½†å¯ä»¥åƒä¼ ç»Ÿåº”ç”¨ç¨‹åºæˆ–æœ¬åœ°ç§»åŠ¨åº”ç”¨ç¨‹åºä¸€æ ·å‡ºç°åœ¨ç”¨æˆ·é¢å‰ã€‚åº”ç”¨ç¨‹åºç±»å‹è¯•å›¾å°†å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨æä¾›çš„åŠŸèƒ½ä¸ç§»åŠ¨ä½“éªŒçš„ä¼˜åŠ¿ç»“åˆèµ·æ¥ã€‚ *[ç»´åŸºç™¾ç§‘](https://en.wikipedia.org/wiki/Progressive_Web_Apps)*

å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªåˆ©ç”¨æœ€æ–°æŠ€æœ¯çš„ç½‘ç»œåº”ç”¨ï¼Œæ„Ÿè§‰å°±åƒä¸€ä¸ªæœ¬åœ°åº”ç”¨ã€‚

è¦è®¾ç½®æˆ‘ä»¬çš„ PWAï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª`manifest.json`æ–‡ä»¶ï¼Œå¹¶è®¾ç½®æˆ‘ä»¬çš„æœåŠ¡äººå‘˜ã€‚

PWA å¿…é¡»æ¥è‡ªå®‰å…¨çš„æ¥æº(HTTPS)ã€‚

*   [æ¸è¿›å¼ç½‘ç»œåº”ç”¨åˆå­¦è€…æŒ‡å—](https://www.smashingmagazine.com/2016/08/a-beginners-guide-to-progressive-web-apps/)
*   [æ¸è¿›å¼ç½‘ç»œåº”ç”¨â€”â€”è°·æ­Œ](https://duckduckgo.com/?q=progressive+web+app+definition&t=ffab&atb=v123-1&ia=about)

### ç”Ÿæˆå›¾æ ‡èµ„äº§

é¦–å…ˆï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­åŒ…å«æ‰€æœ‰çš„å›¾æ ‡èµ„äº§ã€‚å›¾æ ‡å·²ç»ä½¿ç”¨[https://realfavicongenerator.net/](https://realfavicongenerator.net/)ç”Ÿæˆã€‚å®ƒä»¬åŒ…å«åœ¨`content/img/`ä¸­ã€‚

åœ¨æˆ‘ä»¬çš„ HTML çš„å¤´éƒ¨ï¼Œæˆ‘ä»¬å¸Œæœ›åŒ…å«:

```
<link rel="apple-touch-icon" sizes="180x180" href="content/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="content/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="content/img/favicon-16x16.png">
<link rel="mask-icon" href="content/img/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="content/img/favicon.ico">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-config" content="content/img/browserconfig.xml">
<meta name="theme-color" content="#77c4d3"> 
```

Enter fullscreen mode Exit fullscreen mode

### Web åº”ç”¨æ¸…å•

Web åº”ç”¨ç¨‹åºæ¸…å•(manifest.json)æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒæä¾›äº†å…³äºæˆ‘ä»¬çš„ web åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ï¼Œå¦‚å›¾æ ‡ã€åº”ç”¨ç¨‹åºçš„åç§°ç­‰ã€‚è¿™æ˜¯ç”¨äº PWAs çš„æŠ€æœ¯çš„ä¸€éƒ¨åˆ†ã€‚æ‚¨å¯ä»¥åœ¨ [MDN web docs](https://developer.mozilla.org/en-US/docs/Web/Manifest) ä¸Šè·å¾—æœ‰å…³ Web åº”ç”¨æ¸…å•çš„æ›´å¤šä¿¡æ¯ã€‚

åœ¨æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ã€‚

```
{  "name":  "todo",  "short_name":  "todo",  "author":  "Vincent Humeau",  "lang":  "en-GB",  "icons":  [  {  "src":  "content/img/android-chrome-192x192.png",  "sizes":  "192x192",  "type":  "image/png"  },  {  "src":  "content/img/android-chrome-512x512.png",  "sizes":  "512x512",  "type":  "image/png"  }  ],  "theme_color":  "#77c4d3",  "background_color":  "#77c4d3",  "display":  "standalone",  "orientation":  "portrait",  "scope":  "/todo/",  "start_url":  "/todo/"  } 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨æˆ‘ä»¬çš„ HTML æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åŒ…å«å®ƒã€‚

```
<link rel="manifest" href="manifest.json"> 
```

Enter fullscreen mode Exit fullscreen mode

### æœåŠ¡äººå‘˜

ä»€ä¹ˆæ˜¯æœåŠ¡äººå‘˜ï¼Ÿ

> æœåŠ¡å·¥ä½œå™¨æ˜¯ä¸€ç§æ–°çš„æµè§ˆå™¨åŠŸèƒ½ï¼Œå®ƒæä¾›ç‹¬ç«‹äºç½‘é¡µè¿è¡Œçš„äº‹ä»¶é©±åŠ¨è„šæœ¬ã€‚ä¸å…¶ä»–å·¥ä½œäººå‘˜ä¸åŒï¼ŒæœåŠ¡å·¥ä½œäººå‘˜å¯ä»¥åœ¨äº‹ä»¶ç»“æŸæ—¶å…³é—­ï¼Œè¯·æ³¨æ„ç¼ºå°‘æ¥è‡ªæ–‡æ¡£çš„ä¿ç•™å¼•ç”¨ï¼Œå¹¶ä¸”ä»–ä»¬å¯ä»¥è®¿é—®åŸŸèŒƒå›´çš„äº‹ä»¶ï¼Œå¦‚ç½‘ç»œè·å–ã€‚æœåŠ¡äººå‘˜ä¹Ÿæœ‰å¯è„šæœ¬åŒ–çš„ç¼“å­˜ã€‚é™¤äº†èƒ½å¤Ÿé€šè¿‡è„šæœ¬å“åº”æ¥è‡ªç‰¹å®šç½‘é¡µçš„ç½‘ç»œè¯·æ±‚ä¹‹å¤–ï¼Œè¿™è¿˜ä¸ºåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§â€œç¦»çº¿â€çš„æ–¹å¼ã€‚*[W3C/service worker-Github](https://github.com/w3c/ServiceWorker)T3ã€‘*

æœ¬æ•™ç¨‹ä¸æ‰“ç®—æ·±å…¥ä»‹ç»æœåŠ¡äººå‘˜ï¼Œæ‚¨å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€äº›ä¸é”™çš„æ•™ç¨‹å’Œèµ„æº:

*   [å¦‚ä½•è®¾ç½®åŸºæœ¬æœåŠ¡å·¥ä½œè€…(å¸¦ç¼“å­˜)- bitsofcode(è§†é¢‘)](https://www.youtube.com/watch?v=BfL3pprhnms)
*   [æœåŠ¡äººå‘˜:ä»‹ç»](https://developers.google.com/web/fundamentals/primers/service-workers/)
*   [pwa builder-service workers](https://www.pwabuilder.com/serviceworker)
*   [pwa builder-service workers](https://www.pwabuilder.com/serviceworker)
*   [ç¯å¡”](https://developers.google.com/web/tools/lighthouse/)
*   [ç”¨æœåŠ¡äººå‘˜åˆ¶ä½œä¸€ä¸ªç®€å•çš„ç¦»çº¿ç½‘ç«™](https://css-tricks.com/serviceworker-for-offline/)
*   [æœåŠ¡äººå‘˜å…¥é—¨](https://www.sitepoint.com/getting-started-with-service-workers/)

å¯¹äºæˆ‘ä»¬çš„æœåŠ¡äººå‘˜ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ Omranic çš„[è¦ç‚¹](https://gist.github.com/Omranic/4e648fa38caab7b8207d3e237fde0c77#create-service-worker)

åœ¨æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`sw.js`æ–‡ä»¶ã€‚

åœ¨æˆ‘ä»¬çš„**index.html**:

```
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('sw.js');
        });
    }
</script> 
```

Enter fullscreen mode Exit fullscreen mode

ç„¶åï¼Œåœ¨æˆ‘ä»¬çš„ **sw.js** ä¸­ï¼Œæˆ‘ä»¬å°†ç¼“å­˜æ‰€æœ‰çš„èµ„äº§ï¼Œä½¿æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå¯ä»¥ç¦»çº¿ä½¿ç”¨:

```
var shellCacheName = "pwa-todo-v1";
var filesToCache = [
  "./",
  "./index.html",
  "./content/css/screen.min.css",
  "./content/js/app.js",
  "https://cdn.jsdelivr.net/npm/vue",
  "https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css"
]; 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€éµå¾ªè¿™ä¸€è¦ç‚¹ï¼Œå¹¶æ·»åŠ éƒ¨åˆ†**ç›‘å¬å®‰è£…äº‹ä»¶**ã€**æ›´æ–°èµ„äº§ç¼“å­˜**å’Œ**ä»ç¼“å­˜ç¦»çº¿æœåŠ¡åº”ç”¨å¤–å£³**ã€‚

* * *

æœ¬æ•™ç¨‹ç°åœ¨ç»ˆäºå®Œæˆäº†ã€‚æˆ‘ä»¬çš„ **todo vue.js PWA** ç°åœ¨å¯ä»¥åœ¨è¿™é‡Œè®¿é—®ã€https://vinceumo.github.io/todo

* * *

*   [Vincent-humau . com](http://vincent-humeau.com/)