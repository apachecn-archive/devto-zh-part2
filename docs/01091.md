# å®‰è£… AUR è½¯ä»¶åŒ…çš„ç–‘éš¾è§£ç­”

> åŸæ–‡:[https://dev . to/nab bisen/trouble shooting-around-installing-aur-packages-neg](https://dev.to/nabbisen/troubleshooting-around-installing-aur-packages-neg)

# [](#summary)æ€»ç»“

â€œéº»çƒ¦æ˜¯æˆ‘çš„äº‹ã€‚â€
å½“æˆ‘è¯•å›¾é€šè¿‡ [AUR](http://aur.archlinux.org) å®‰è£…ä¸€ä¸ªåŒ…æ—¶ï¼Œæˆ‘å¾ˆå¹¸è¿åœ°é‡åˆ°äº† 3 + 1 ä¸ªé—®é¢˜ã€‚
æˆ‘å†³å®šè®°å½•å®ƒä»¬ï¼Œå› ä¸ºå…³äºå¦‚ä½•è§£å†³å®ƒä»¬çš„çŸ¥è¯†ä¼¼ä¹å¯¹å°†æ¥å®‰è£… AUR è½¯ä»¶åŒ…æ—¶å‡ºç°çš„å…¶ä»–é—®é¢˜æœ‰æ‰€å¸®åŠ©ã€‚

# [](#troubles)çƒ¦æ¼

å½“æˆ‘è¯•å›¾é€šè¿‡ AUR
å°†ä¸€ä¸ªåä¸º qperf çš„åŒ…å®‰è£…åˆ°æˆ‘çš„ [Manjaro Linux](https://manjaro.org/) ä¸Šæ—¶ï¼Œå®ƒä»¬å°±å‘ç”Ÿäº†

```
$  git clone https://aur.archlinux.org/qperf.git
$  cd qperf
$  makepkg -si 
```

**æ³¨: [qperf](https://wiki.archlinux.org/index.php/InfiniBand#qperf_-_Measure_performance_over_RDMA_or_TCP.2FIP) æ˜¯ä¸€æ¬¾æµ‹é‡ç½‘ç»œå¸¦å®½å’ŒèŠ‚ç‚¹é—´å»¶è¿Ÿçš„å·¥å…·ã€‚*
**æ³¨æ„:è¿™ç¯‡å¸–å­ä¸æ˜¯å…³äºå¦‚ä½•ä½¿ç”¨ qperfã€‚è¿™ä¸ä»…ä»…æ˜¯å®‰è£…å®ƒã€‚*

<center>âœ¿âœ¿âœ¿</center>

### [](#-1st-trouble-lack-of-dependencies)#ç¬¬ä¸€ä¸ªéº»çƒ¦:ç¼ºä¹ä¾èµ–æ€§

#### [](#the-point)ç‚¹åˆ°ä¸ºæ­¢

*   ç”±äºç¼ºå°‘åŒ…çš„ä¾èµ–æ€§ï¼ŒMaking æœ‰æ—¶ä¼šå¤±è´¥ã€‚ä¾èµ–å…³ç³»å¹¶ä¸æ€»æ˜¯è‡ªåŠ¨è§£å†³çš„ã€‚

`makepkg -si`å¯¼è‡´å¤±è´¥ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯:

```
$  # qperf
$  makepkg -si
==>  Making package: qperf 0.4.11-3 ([datetime])
==>  Checking runtime dependencies...
==>  Installing missing dependencies...
error: target not found: rdma-core ==>  ERROR: 'pacman' failed to install missing dependencies. 
```

æ—¥å¿—çš„æœ€åä¸€è¡Œæåˆ°â€œé”™è¯¯:â€˜pacmanâ€™æœªèƒ½å®‰è£…ç¼ºå¤±çš„ä¾èµ–é¡¹ã€‚â€
è¿™æ˜¯å› ä¸ºç¼ºä¹â€œä¾èµ–æ€§â€:

[![](../Images/27f6a3aba28a2595721f7d98e69b3f54.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--d_29Th2e--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/b32w5ottqrmoofmhy2r9.png)

åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œåä¸º rdma-core çš„åŒ…æ²¡æœ‰å®‰è£…ï¼Œä¹Ÿæ²¡æœ‰è‡ªåŠ¨è§£æã€‚å› æ­¤ï¼Œæˆ‘å¿…é¡»äº‹å…ˆæ‰‹åŠ¨å®‰è£… rdma-coreã€‚

æ³¨æ„:æˆ‘ä¸å¾—ä¸ä½¿ç”¨ AURï¼Œå› ä¸ºåœ¨ Manjaro åŒ…ç®¡ç†å™¨ä¸­æ²¡æœ‰æ‰¾åˆ°å®ƒã€‚

```
$  git clone https://aur.archlinux.org/rdma-core.git
$  cd rdma-core 
```

<center>âœ¿âœ¿âœ¿</center>

### [](#-2nd-trouble-gpg-signatures)#ç¬¬äºŒä¸ªéº»çƒ¦:GPG ç­¾å

#### [](#the-point)ç‚¹åˆ°ä¸ºæ­¢

*   æœ‰æ—¶éœ€è¦æ¥æ”¶æ–°çš„ gpg å¯†é’¥ã€‚

**æ³¨:æ ¹æ® ArchWiki çš„è¯´æ³•ï¼Œ [GPG](https://wiki.archlinux.org/index.php/GnuPG) æ˜¯ GnuPGï¼Œâ€œä¸€ä¸ªç”± [RFC4880](https://tools.ietf.org/html/rfc4880) å®šä¹‰çš„ [OpenPGP](http://openpgp.org/about/) æ ‡å‡†çš„å®Œæ•´ä¸”å…è´¹çš„å®ç°â€ï¼Œå®ƒâ€œå…è®¸ä½ å¯¹ä½ çš„æ•°æ®å’Œé€šä¿¡è¿›è¡ŒåŠ å¯†å’Œç­¾åã€‚â€*

å®‰è£… rdma-core å¤±è´¥ï¼Œå‡ºç°ä»¥ä¸‹é”™è¯¯:

```
$  makepkg -si
... ==>  Retrieving sources...
 ->  Cloning rdma-core git repo...
 ... ==>  Validating source files with sha512sums...
 rdma-core ... Skipped ==>  Verifying source file signatures with gpg...
 rdma-core git repo ... FAILED (unknown public key [gpg-key-id]) ==>  ERROR: One or more PGP signatures could not be verified! 
```

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å¿…é¡»æ¥æ”¶ä¸Šé¢æ—¥å¿—ä¸­ç»™å‡ºçš„å¯†é’¥ä½œä¸ºâ€œæœªçŸ¥å…¬é’¥â€:

```
gpg --recv-keys [gpg-key-id] 
```

**æ³¨æ„:`gpg`å¯ä»¥é€šè¿‡ Manjaro åŒ…ç®¡ç†å™¨å®‰è£…ã€‚*

ç„¶ååˆ¶ä½œæˆåŠŸå®Œæˆ:

```
$  # rdma-core
$  makepkg -si
... ==>  Starting package()...
... ==>  Installing package rdma-core with pacman -U...
[sudo] password for [user]:
loading packages...
resolving dependencies...
looking for conflicting packages...

Packages (1) rdma-core-20.1-2

Total Installed Size:  2.24 MiB

:: Proceed with installation? [Y/n] y ... (1/3) Reloading system manager configuration...
(2/3) Reloading device manager configuration...
(3/3) Arming ConditionNeedsUpdate... 
```

<center>âœ¿âœ¿âœ¿</center>

### [](#-ubiquitous-trouble-torture-or-annoyance)# *æ— å¤„ä¸åœ¨*çƒ¦æ¼:æŠ˜ç£¨è¿˜æ˜¯çƒ¦æ¼

#### [](#the-point)ç‚¹åˆ°ä¸ºæ­¢

*   å½“ç›®æ ‡çœ‹èµ·æ¥å¾ˆé¥è¿œæ—¶ï¼Œè¦æœ‰è€å¿ƒï¼Œæ ¹æ®éœ€è¦ä¼‘æ¯ä¸€ä¼šå„¿ï¼Œç„¶åå°è¯•å¦ä¸€ç§æ–¹å¼ã€‚é‡åˆ°å¦ä¸€ä¸ªé”™è¯¯æœ‰ç‚¹è¿›å±•...

ä¾èµ–é—®é¢˜è§£å†³äº†ï¼Œæ‰€ä»¥æˆ‘å›åˆ°åˆ¶ä½œ qperfã€‚
ç„¶åä¸€ä¸ªæ–°çš„(ä¸‹ä¸€ä¸ª)é”™è¯¯å‡ºç°:

```
$  # qperf
$  makepkg -si
... ==>  Starting build()...
... -- Build files have been written to: [build-path]
[34/235] Creating man page umad_init.3
FAILED: libibumad/man/umad_init.3 ... /usr/bin/pandoc: error while loading shared libraries: libHSzip-archive-0.3.3-9ZXjqhjfOlnGJKb3W7x2JJ-ghc8.6.1.so: cannot open shared object file: No such file or directory
[36/235] Building C object libibverbs/CMakeFiles/ibverbs.dir/cmd.c.o
ninja: build stopped: subcommand failed. ==>  ERROR: A failure occurred in build().
 Aborting... 
```

æˆ‘å…»æˆäº†ä¸€ä¸ªä¹ æƒ¯ï¼Œåœ¨è¿™æ ·çš„æ—¶å€™æ€è€ƒï¼Œè¿™æ ·çš„æƒ…å†µä¼šæé«˜æˆ‘ï¼Œç»™æˆ‘æ–°çš„çŸ¥è¯†å’Œè§†é‡ã€‚

<center>âœ¿âœ¿âœ¿</center>

### [](#-3rd-trouble-old-libraries)#ç¬¬ä¸‰éº»çƒ¦:è€å›¾ä¹¦é¦†

#### [](#the-point)ç‚¹åˆ°ä¸ºæ­¢

*   åˆ¶ä½œè¿‡ç¨‹ä¼´éšç€å‡ ä¸ªåº“ï¼Œç”±äºå®ƒä»¬æ²¡æœ‰æ›´æ–°ï¼Œå¯èƒ½ä¼šå‡ºç°é”™è¯¯ã€‚

ä¸Šè¿°é”™è¯¯çš„åŸå› æ˜¯ä¸€äº›è½¯ä»¶åŒ…çš„ç‰ˆæœ¬å¤ªæ—§äº†ã€‚(åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯â€œhaskell-zip-archiveâ€åº“ï¼Œå› ä¸ºæ—¥å¿—ä¸­æåˆ°äº†â€œlibHSzip-archive-...ã€‚æ‰€ä»¥:...:æ²¡æœ‰è¿™æ ·çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚)

[![](../Images/b447ca0353f6575ca1709d7a56bd92b2.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--oRIqRyF9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/azlk8kirdrzsgompe1ms.jpg)

æˆ‘æŒ‰ç…§ Manjaro è½¯ä»¶åŒ…ç»ç†çš„æŒ‡å¯¼æ›´æ–°äº†æ‰€æœ‰å¯ç”¨çš„è½¯ä»¶åŒ…ã€‚

<center>âœ¿âœ¿âœ¿</center>

### [](#after-all)æ¯•ç«Ÿ

```
$  # qperf
$  makepkg -si
... ==>  Finished making: qperf 0.4.11-3 ([datetime])
==>  Installing package qperf with pacman -U...
loading packages...
resolving dependencies...
looking for conflicting packages...

Packages (1) qperf-0.4.11-3

Total Installed Size:  0.17 MiB ==>  Finished making: qperf 0.4.11-3 ([datetime])
==>  Installing package qperf with pacman -U...
loading packages...
resolving dependencies...
looking for conflicting packages...

Packages (1) qperf-0.4.11-3

Total Installed Size:  0.17 MiB

:: Proceed with installation? [Y/n] y ... :: Processing package changes... ... :: Running post-transaction hooks... ... :: Proceed with installation? [Y/n] y ... :: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate... 
```

å®ŒæˆğŸ˜†