# 忽略代码度量和分析的无效原因

> 原文:[https://dev . to/scotthannen/invalid-reasons-for-ignore-code-metrics-and-analysis-1ih 6](https://dev.to/scotthannen/invalid-reasons-for-ignoring-code-metrics-and-analysis-1ih6)

这里有一个尴尬但真实的故事:在我使用。我只在 VB.NET 写代码。我不知道有多少东西我谷歌了两次。

> `httprequest add authentication headers .NET`

...读几个结果...

> `vb.net httprequest add authentication headers`

有一天，我检查了一个别人正在开发的新应用程序，发现他是用 C#写的，到处都是大括号和分号。我最初的反应是反动的。我们一直用 VB.NET！它能做 C#能做的事！变化会让我们慢下来！我们应该先讨论这个问题！

起初我准备开战，但我很快意识到，无论输赢，我都站在了错误的一边。如果我以某种方式赢得了这场战斗，奖励将是*而不是*学习 C#。我的简历上会怎么写？所以我翻了个身，立即开始努力用 C#编写新代码。不到一周，我就度过了难关，不到两周，我就再也不想回去了。

这说明，当我们不想做一些新的或不同的事情时，我们经常可以找到理由不去做，即使这些理由很弱或事实上不准确。

这就把我们带到了代码度量和静态分析。就像我不想从 VB.NET 转换到 C#一样，我们可能有蹩脚的理由为什么我们不应该生成或关心度量我们代码方面的指标，比如每个方法的行数、每个接口的方法数、测试覆盖率或圈复杂度。

以下是一些例子:

### [](#1-you-shouldnt-use-code-metrics-to-manage-developers)1。你不应该使用代码度量来管理开发人员

正确。代码度量和分析是开发人员的工具。作为开发人员，我们主动使用无数的工具。这些工具没有什么不同。

### [](#2-ive-never-heard-of-them)2。我从未听说过他们

我也很久没听说过他们了。但是现在你已经读到这里，你已经听说过他们了。你不会不知道的。嘣沙卡拉卡！

### [](#3-the-only-metric-that-matters-is-the-value-you-deliver)3。唯一重要的指标是你交付的价值

原谅我的直言不讳，但是这种推理是基于对影响软件交付的因素的深刻的，也许是自愿的无知。这就好比说，唯一重要的汽车“指标”是行驶里程和转售价值，所以我们不应该关注轮胎压力、发动机温度和上次换油后的里程数。这是合理的想法吗？如果我们不检查我们的轮胎压力或跟踪我们的机油变化，我们不是把“唯一重要的指标”置于危险之中吗？

这在两个方面与我们代码的价值相关。首先，如果重要的价值是通过交付缺陷最少的新特性来提供的，那么我们难道不想知道代码中的问题，这些问题可能会导致我们以指数级的缓慢速度交付价值，并带来更多的缺陷吗？分析度量并不是降低交付价值的重要性——而是确保我们不断交付更多的价值。以越来越多的阻碍后续成就为代价来实现业务目标并不是交付价值。

第二，软件必须维护，可能是由我们的继任者来维护。难道我们软件的可维护性不是其价值的很大一部分吗？我希望如此。

我并不是说度量和分析是确保我们通过交付可维护代码来提供价值的唯一方法。相反，认为代码度量与交付价值不一致的观点是无知和错误的。是专家初学者的[语言。](https://daedtech.com/how-stagnation-is-justified-language-of-the-expert-beginner/)

### [](#4-code-metrics-are-not-predictive)4。代码度量不是预测性的

度量和分析的目的不是预测缺陷。他们测量指示代码可维护性的因素。大的、不连贯的类和具有高圈复杂度的长方法本来就很难阅读和理解。它们更难进行单元测试，这意味着更多的时间花费在手动端到端测试上。修改需要更长的时间，而且，根据我的经验，更有可能产生新的缺陷。

不过，有一个简单的测试方法。运行 Visual Studio 指标或使用静态分析器。看看它指出的任何过度复杂的类或方法。你想对它们做重大的改变，甚至是小的改变吗？如果不是，那么分析已经成功地确定了潜在的改进领域。

### [](#5-each-component-is-a-snowflake)5。每个组件都是一片雪花

据说软件的每个单元都是独一无二的，因此没有一种度量标准可以完美地度量它们。确实如此。没有一种血压测量方法对每个人都是完美的，但我们还是会检查它。显然，对于每一个方法或一个类的方法数，没有完美的代码行数，但是如果我们的雪花有 20 个公共方法和 2000 行代码，它就是一块冰雹。

### [](#6-different-tools-measure-cyclomatic-complexity-differently)6。不同的工具测量圈复杂度不同

没错，但是这种差别通常是微不足道的。我们车上的速度计只有 95-99%的准确度，但是如果他们说我们正在以 120 英里的时速行驶，我们通常会减速。

高圈复杂度并不自动意味着一个方法是一个问题。它只是给了我们一个理由来检查这个方法，看看它是否是可测试的和充分测试的。也许有一个巨大的`switch`语句不值得重构，我们可以决定忽略它。在每个案例中，我们都在运用自己的判断。度量标准不会强迫我们改变任何东西。

我只是暗示了度量和分析为什么有用。讨论潜在的反对意见——有些可以理解，有些不那么理解——占据了整篇文章。为了阅读更多关于这个主题的文章，我推荐[这个系列的文章](https://blog.ndepend.com/category/code-metrics/)。