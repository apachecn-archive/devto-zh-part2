# å¸¦ ES6+çš„ç°ä»£ JS

> åŸæ–‡:[https://dev.to/kevinlangleyjr/modern-js-with-es6-3i4n](https://dev.to/kevinlangleyjr/modern-js-with-es6-3i4n)

è¿™æ˜¯æˆ‘åœ¨ 2018 å¹´[word camp Miami](https://miami.wordcamp.org/2018/)ä¸Šè®²æˆçš„ [*æ·±åº¦å­¦ä¹  JavaScript*](https://twitter.com/wordcampmiami/status/961616862214672384)è¯¾ç¨‹çš„ [Modern JS with ES6](https://www.youtube.com/watch?v=2CQO-o5lXSE) çš„é™„å¸¦åšæ–‡ã€‚

æ ¹æ® StackOverflow 2018 å¹´å¼€å‘è€…è°ƒæŸ¥ï¼Œåœ¨ 2018 å¹´çš„ä»Šå¤©ï¼ŒJavaScript æ˜¯ç½‘ç»œä¸Šæœ€å—æ¬¢è¿çš„è¯­è¨€ã€‚

ä½†æ˜¯æˆ‘ä»¬ä»Šå¤©æ‰€çŸ¥é“å’Œå–œçˆ±çš„ JavaScriptï¼Œå·²ç»ä¸æ˜¯ 2000 å¹´ç”šè‡³ 2010 å¹´åˆçš„é‚£ä¸ª JavaScript äº†ã€‚

è®©æˆ‘ä»¬å¼€å§‹å§ï¼

## [](#es)ES_ï¼Ÿï¼Ÿï¼Ÿ

ES æ˜¯ ECMAScript çš„ç¼©å†™ã€‚æ¯å½“æ‚¨çœ‹åˆ° ES åé¢è·Ÿä¸€ä¸ªæ•°å­—æ—¶ï¼Œå®ƒå°±å¼•ç”¨è¯¥ç‰ˆæœ¬çš„ ECMAScriptã€‚

ç›´åˆ°æœ€è¿‘ï¼Œåœ¨ ES6 æˆ– ES2015 ä¸­ï¼ŒJavaScript æ‰åœ¨è¯­æ³•å’Œå¢åŠ çš„åŠŸèƒ½ä¸Šæœ‰äº†æœ€å¤§çš„é£è·ƒã€‚è¿™äº›æ·»åŠ æ—¨åœ¨ä½¿å¤§è§„æ¨¡ JavaScript å¼€å‘å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

*   ES1:1997 å¹´ 6 æœˆ
*   ES2:1998 å¹´ 6 æœˆ
*   es3:1999 å¹´ 12 æœˆ
*   ES4:åºŸå¼ƒ
*   es5:2009 å¹´ 12 æœˆ
*   es 6/es 2015:2015 å¹´ 6 æœˆ
*   es 7/es 2016:2016 å¹´ 6 æœˆ
*   it ' s 8/es 2017:2017 å¹´ 6 æœˆ
*   æ˜¯ 2018 å¹´ 9 æœˆ:2018 å¹´ 6 æœˆ
*   æ˜¯ 2019 å¹´ 10 æœˆ:2019 å¹´ 6 æœˆ
*   es 11/es 2020:2020 å¹´ 6 æœˆ
*   æ˜¯çš„ã€‚ä¸‹ä¸€ä¸ª:è¿™ä¸ªæœ¯è¯­æ˜¯åŠ¨æ€çš„ï¼ŒæŒ‡çš„æ˜¯ ECMAScript çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ã€‚

## [](#tc39)TC39

[TC39](https://tc39.es/) æ˜¯è´Ÿè´£æ¨è¿› ECMAScript è§„èŒƒå¹¶ä¸º JavaScript è¯­è¨€æ ‡å‡†åŒ–è¿™äº›è§„èŒƒçš„å°ç»„ã€‚

å¯¹è§„èŒƒçš„æ‰€æœ‰æ›´æ”¹éƒ½æ˜¯åœ¨ä¸€ä¸ªè¿‡ç¨‹ä¸­å¼€å‘çš„ï¼Œè¯¥è¿‡ç¨‹å°†ä¸€ä¸ªåŠŸèƒ½ä»æ¦‚å¿µé˜¶æ®µå‘å±•åˆ°å®Œå…¨æˆç†Ÿå’ŒæŒ‡å®šçš„åŠŸèƒ½ã€‚

*   é˜¶æ®µ 0 -æ–¯ç‰¹åŠ³ç€æ£®
*   ç¬¬ä¸€é˜¶æ®µ-ææ¡ˆ
*   ç¬¬äºŒé˜¶æ®µ-è‰ç¨¿
*   ç¬¬ä¸‰é˜¶æ®µ-å€™é€‰äºº
*   ç¬¬ 4 é˜¶æ®µ-å®Œæˆ

æ‚¨å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ° TC39 çš„æ´»åŠ¨ææ¡ˆåˆ—è¡¨ã€‚

## [](#modules)æ¨¡å—

æ¨¡å—å…è®¸æ‚¨å¼‚æ­¥åŠ è½½ä»£ç ï¼Œå¹¶ä¸ºæ‚¨çš„ä»£ç æä¾›ä¸€ä¸ªæŠ½è±¡å±‚ã€‚è™½ç„¶ JavaScript å¾ˆä¹…ä»¥å‰å°±æœ‰æ¨¡å—äº†ï¼Œä½†å®ƒä»¬ä»¥å‰æ˜¯é€šè¿‡åº“å®ç°çš„ï¼Œå¹¶æ²¡æœ‰å†…ç½®åˆ°è¯­è¨€æœ¬èº«ä¸­ã€‚ES6 æ˜¯ JavaScript è¯­è¨€é¦–æ¬¡æ‹¥æœ‰å†…ç½®æ¨¡å—çš„æ—¶å€™ã€‚

ä»æ¨¡å—ä¸­å¯¼å‡ºæœ‰ä¸¤ç§æ–¹æ³•ã€‚

*   æŒ‡å®šå‡ºå£
*   é»˜è®¤å¯¼å‡º

### [](#named-exports)å‘½åå‡ºå£

ä½¿ç”¨å‘½åå¯¼å‡ºï¼Œæ‚¨åªéœ€ç”¨`export`é¢„å…ˆè€ƒè™‘æ‚¨æƒ³è¦å¯¼å‡ºçš„å†…å®¹ã€‚

```
// mathlib.js

export function square(x) {
  return x * x;
}

export function add(x, y) {
  return x + y;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶åå¯ä»¥ä½¿ç”¨ä¸æ‚¨å¯¼å‡ºçš„å¯¹è±¡ç›¸åŒçš„åç§°å¯¼å…¥å®ƒä»¬ã€‚

```
// main.js

import { square, add } from './mathlib';

console.log(square(9)); // 81

console.log(add(4, 3)); // 7 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#default-export)é»˜è®¤å¯¼å‡º

ä½¿ç”¨é»˜è®¤å¯¼å‡ºï¼Œæ‚¨åªéœ€ç”¨`export default`é¢„å…ˆè€ƒè™‘æ‚¨æƒ³è¦å¯¼å‡ºçš„å†…å®¹ã€‚

```
// foo.js
export default () => {
  console.log('Foo!');
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
// main.js
import foo from './foo';

foo(); // Foo! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#default-and-named-exports)é»˜è®¤å’Œå‘½åå‡ºå£

è¿™ä¸¤ç§æ–¹å¼ç”šè‡³å¯ä»¥æ··åˆä½¿ç”¨ï¼

```
// foobar.js

export default () => {
  console.log('Foo!');
}

export const bar() => {
  console.log( 'Bar!' )
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
// main.js

import foo, { bar } from './foobar';

foo(); // Foo!

bar(); // Bar! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#variable-scoping)å˜é‡ä½œç”¨åŸŸ

### [](#-raw-var-endraw-vs-raw-let-endraw-vs-raw-const-endraw-)`var` vs `let` vs `const`

`var`æ˜¯å‡½æ•°ä½œç”¨åŸŸè¿˜æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œå–å†³äºä¸Šä¸‹æ–‡ã€‚

å¦‚æœåœ¨ä¸€ä¸ªå‡½æ•°ä¸­å®šä¹‰äº†ä¸€ä¸ª`var`,é‚£ä¹ˆå®ƒçš„ä½œç”¨åŸŸå°†ä¼šæ˜¯è¿™ä¸ªå°é—­å‡½æ•°ä»¥åŠå…¶ä¸­å£°æ˜çš„ä»»ä½•å‡½æ•°ã€‚å¦‚æœåœ¨ä»»ä½•å‡½æ•°ä¹‹å¤–å£°æ˜ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯å…¨å±€èŒƒå›´çš„ã€‚

```
if ( true ) {
  var foo = 'bar';
}

console.log( foo ); // bar

function hello() {
  var x = 'hello';
  function world() {
    var y = 'world';
    console.log(x); // hello (function `hello()` encloses `x`)
    console.log(y); // world (`y` is in scope)
  }
  world();
  console.log(x); // hello (`x` is in scope)
  console.log(y); // ReferenceError `y` is scoped to `world()`
}

hello(); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`let`å’Œ`const`æ˜¯å—èŒƒå›´çš„ã€‚

```
if ( true ) {
  let foo = 'bar';
  const bar = 'foo';
}

console.log( foo ); // ReferenceError.
console.log( bar ); // ReferenceError. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å¯ä»¥ç”¨èŠ±æ‹¬å·`{}`åˆ›å»ºæ–°çš„å—èŒƒå›´ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ‰€ç¤ºã€‚

`let`å’Œ`const`

```
let first = 'First string';

{ // Each layer of curly brackets gives us a new block scope.
  let second = 'Second string';
    {
      let third = 'Third string';
    }
    // Accessing third here would throw a ReferenceError.
}
// Accessing second here would throw a ReferenceError. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`const`å˜é‡åªèƒ½èµ‹å€¼ä¸€æ¬¡ã€‚ä½†å®ƒä¸æ˜¯ä¸€æˆä¸å˜çš„ã€‚

```
const foo = { bar: 1 };

foo = 'bar'; // 'foo' is read only. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥æ›´æ”¹å±æ€§ï¼

```
const foo = { bar: 1 };

foo.bar = 2;
console.log(foo); // { bar: 2 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`Object.freeze()`é˜²æ­¢æ”¹å˜å±æ€§ã€‚å†»ç»“å¯¹è±¡ä¼šè¿”å›æœ€åˆä¼ å…¥çš„å¯¹è±¡ï¼Œå¹¶å¯¹è¯¥å¯¹è±¡äº§ç”Ÿå¤šç§å½±å“ã€‚

å®ƒå°†é˜²æ­¢æ–°çš„å±æ€§è¢«æ·»åŠ åˆ°å®ƒï¼Œç°æœ‰çš„å±æ€§è¢«åˆ é™¤ï¼Œæ”¹å˜å±æ€§å€¼ï¼Œç”šè‡³é˜²æ­¢åŸå‹è¢«æ”¹å˜ã€‚

ä½¿ç”¨`Object.freeze()`
ä½¿å¯¹è±¡çš„å±æ€§ä¸å¯å˜

```
const foo = { bar: 1 };

Object.freeze(foo);
foo.bar = 3; // Will silently fail or in strict mode, will return a TypeError
console.log(foo.bar); // 2 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦ä¸€ä¸ªé€‰æ‹©æ˜¯**å¯†å°**ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥é˜²æ­¢æ”¹å˜å¯¹è±¡çš„ç»“æ„ã€‚

[![Seal](../Images/16f5c76916f959115eb78377138dea0b.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--xGaUchQk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/kevinlangleyjr-dev/image/upload/v1620847917/blog/modern-js/7093270813_fdafd6e704_o_f1brtj.jpg) 
[å›¾ç‰‡æ¥æº:ä¼Šå¨ƒÂ·é‡Œçº³å°”è¿ª](https://www.flickr.com/photos/evarinaldiphotography/7093270813)

ç­‰ç­‰ï¼Œä¸ï¼Œä¸æ˜¯é‚£åªæµ·è±¹ï¼

[![Seal](../Images/b908a9cbc35c123004cf90a7bfe20836.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--KaQxnerF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/kevinlangleyjr-dev/image/upload/v1620844147/blog/modern-js/amy-asher-giZJHm2m9yY-unsplash_ts6ic7.jpg) 
[å›¾ç‰‡æ¥æº:è‰¾ç±³Â·é˜¿ä»€](https://unsplash.com/photos/giZJHm2m9yY)

æ˜¯çš„ï¼Œä¸ã€‚ä¹Ÿä¸æ˜¯é‚£ä¸€ä¸ª...

```
const foo = { bar: 1 };

Object.seal(foo);
foo.baz = false; // Will silently fail or in strict mode, will return a TypeError
foo.bar = 2;
console.log( foo ); // { bar: 2 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#hoisting)åŠè£…

JavaScript ä¸­çš„æå‡æ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œåœ¨ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œå˜é‡å’Œå‡½æ•°å£°æ˜è¢«ç§»åŠ¨åˆ°å®ƒä»¬çš„ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚

è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å‡½æ•°å’Œå˜é‡æ¥åšè¿™ä»¶äº‹:

```
sayHello();

function sayHello() {
  console.log('Hello!');
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
console.log( foobar ); // undefined (note: not ReferenceError!)
var foobar = 'Woot!' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ ES6 ä¸­ï¼Œç±»ã€`let`å’Œ`const`å˜é‡è¢«æå‡ï¼Œä½†æ˜¯å®ƒä»¬è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œä¸åƒ`var`å˜é‡å’Œå‡½æ•°ã€‚

```
new Thing(); // TypeError
class Thing{};

console.log(foo); // 'foo' was used before it was defined
let foo = true;

console.log(bar); // 'bar' was used before it was defined
const bar = true; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#temporal-dead-zone)å¤ªé˜³ç©´æ­»åŒº

[![TARDIS](../Images/926c4b1153d0961206a106099a5284ec.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--eG6wCDZi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/kevinlangleyjr-dev/image/upload/v1631465914/blog/modern-js/25031662202_51c0be73c9_o_klr3xa.jpg) 
[å›¾ç‰‡æ¥æº:è´¾å°”æ–¯Â·ç‰¹æ©å¸ƒå°”](https://www.flickr.com/photos/gilest/25031662202/)

è™½ç„¶æ—¶é—´æ­»åŒºå¬èµ·æ¥åƒæ˜¯ã€Šç¥ç§˜åšå£«ã€‹ä¸­çš„æƒ…èŠ‚ï¼Œä½†å®ƒè¿œæ²¡æœ‰å¬èµ·æ¥é‚£ä¹ˆå¯æ€•ã€‚

ä»ç¨‹åºå—å¼€å§‹åˆ°åˆå§‹åŒ–å¤„ç†å®Œæ¯•ï¼Œ`const`æˆ–`let`å˜é‡å¤„äºæ—¶é—´æ­»åŒºã€‚

```
if ( true ) {

  // TDZ starts!
  const doSomething = function () {
    console.log( thing ); // OK!
  };

  doSomething(); // ReferenceError
  let thing = 'test'; // TDZ ends.
  doSomething(); // Called outside TDZ!
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨åˆå§‹åŒ–ä¹‹å‰å¼•ç”¨å—ä¸­çš„å˜é‡ä¼šäº§ç”Ÿä¸€ä¸ª`ReferenceError`ï¼Œä¸ç”¨`var`å£°æ˜çš„å˜é‡ç›¸åï¼Œå®ƒåªæœ‰`undefined`å€¼å’Œç±»å‹ã€‚

## [](#but-what-should-i-use-raw-var-endraw-raw-let-endraw-raw-const-endraw-)ä½†æ˜¯ï¼Œæˆ‘è¯¥ç”¨ä»€ä¹ˆå‘¢ï¼Ÿï¼ï¼Ÿ`var`ï¼Ÿ`let`ï¼Ÿ`const`ï¼Ÿ

`const`å’Œ`let`çš„å”¯ä¸€åŒºåˆ«æ˜¯`const`ä½¿å¥‘çº¦ä¸ä¼šå‘ç”Ÿé‡æ–°ç»‘å®šã€‚

> é»˜è®¤ä½¿ç”¨`const`ã€‚ä»…åœ¨éœ€è¦é‡æ–°ç»‘å®šæ—¶ä½¿ç”¨`let`ã€‚`var`ä¸åº”ç”¨äº ES2015ã€‚
> 
> é©¬è’‚äºšæ–¯Â·æ‹œæ©æ–¯- V8 å·¥ç¨‹å¸ˆ@è°·æ­Œ
> 
> å°†`var`ç”¨äºé¡¶çº§å˜é‡ï¼Œå°†`let`ç”¨äºè¾ƒå°èŒƒå›´å†…çš„å±€éƒ¨å˜é‡ã€‚åªæœ‰åœ¨ç¼–å†™äº†ä¸€äº›ä»£ç ï¼Œå¹¶ä¸”ä½ æœ‰ç†ç”±ç¡®ä¿¡ä¸åº”è¯¥æœ‰å˜é‡é‡åˆ†é…ä¹‹åï¼Œæ‰å¯ä»¥å°†`let`é‡æ„ä¸º`const`ã€‚
> 
> å‡¯å°”Â·è¾›æ™®æ£®â€”â€”Getify Solutions çš„åˆ›å§‹äºº

æˆ‘ä¸ªäººéµå¾ªé»˜è®¤ä½¿ç”¨`const`çš„ç¬¬ä¸€ç§æ–¹æ³•ï¼Œä»ä¸ä½¿ç”¨`var`ï¼Œåªæœ‰å½“æˆ‘çŸ¥é“æˆ‘éœ€è¦é‡æ–°åˆ†é…å˜é‡æ—¶æ‰ä½¿ç”¨`let`ã€‚

## [](#iterables-amp-looping)è¿­ä»£å¼&å¾ªç¯

å½“ä½¿ç”¨`var`è¿›è¡Œè¿­ä»£æˆ–å¾ªç¯æ—¶ï¼Œæ‚¨ä¼šå°†ä¸€ä¸ªå…¨å±€å˜é‡æ³„æ¼åˆ°çˆ¶ä½œç”¨åŸŸï¼Œå¹¶ä¸”è¯¥å˜é‡ä¼šåœ¨æ¯æ¬¡è¿­ä»£ä¸­è¢«è¦†ç›–ã€‚

```
for ( var i = 0; i < 10; i++ ) {
  setTimeout( function() {
    console.log( 'Number: ' + i );
  }, 1000 );
}

// Number: 10
// Number: 10
// Number: 10
// Number: 10
// Number: 10
// Number: 10
// Number: 10
// Number: 10
// Number: 10
// Number: 10 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ä¸€ä¸ª`for`å¾ªç¯ä¸­ä½¿ç”¨`let`å…è®¸æˆ‘ä»¬å°†å˜é‡çš„èŒƒå›´é™å®šåœ¨å®ƒçš„å—ä¸­ã€‚

```
for ( let i = 0; i < 10; i++ ) {
  setTimeout( function() {
    console.log( 'Number: ' + i );
  }, 1000 );
}

// Number: 0
// Number: 1
// Number: 2
// Number: 3
// Number: 4
// Number: 5
// Number: 6
// Number: 7
// Number: 8
// Number: 9 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#es6-also-gives-us-a-new-way-to-loop-over-iterables)ES6 ä¹Ÿç»™äº†æˆ‘ä»¬ä¸€ç§æ–°çš„æ–¹æ³•æ¥å¾ªç¯éå† iterablesï¼

ä½¿ç”¨ä¸€ä¸ª`for...of`è¯­å¥ä»¥éå¸¸ç®€æ´çš„è¯­æ³•å¾ªç¯éå†ä¸€ä¸ª iterableã€‚

```
const iterable = [10, 20, 30];

for (const value of iterable) {
  console.log(value);
}

// 10
// 20
// 30 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨ç”šè‡³å¯ä»¥è¿­ä»£`NodeLists`è€Œä¸å¿…ä½¿ç”¨ä»»ä½•å…¶ä»–çš„è¯¡è®¡ï¼ğŸ¤¯

```
const articleParagraphs = document.querySelectorAll('article > p');

for (const paragraph of articleParagraphs) {
  paragraph.classList.add('read');
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[![Mind Blown Gif](../Images/e39b8cfb72003cf0d3223f235ad9b0f4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--96LMbxTC--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://res.cloudinary.com/kevinlangleyjr-dev/image/upload/v1631466460/blog/modern-js/blow-mind-mind-blown_oz6qpc.gif)

ç”šè‡³ï¼Œç”¨å®ƒæ¥è¿­ä»£å­—ç¬¦ä¸²ä¸­çš„å­—æ¯ï¼

```
const foo = 'bar';
for (const letter of foo) {
  console.log(letter);
}

// b
// a
// r 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#arrow-functions)ç®­å¤´åŠŸèƒ½

ç®­å¤´å‡½æ•°æ˜¯ä¼ ç»Ÿå‡½æ•°è¡¨è¾¾å¼çš„ä¸€ç§æ›´ç®€æ´çš„æ›¿ä»£å½¢å¼ã€‚

```
// Traditional function expression.
const addNumbers = function (num1, num2) {
  return num1 + num2;
}

// Arrow function expression.
const addNumbers = (num1, num2) => {
  return num1 + num2;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç®­å¤´å‡½æ•°å¯ä»¥æœ‰éšå¼è¿”å›:

```
// Arrow function with implicit return and without any arguments.
const sayHello = () => console.log( 'Hello!' );

// Arrow function with implicit return and a single argument.
const sayHello = name => console.log( `Hello ${name}!` );

// Arrow function with implicit return and multiple arguments.
const sayHello = (firstName, lastName) => console.log( `Hello ${firstName}  ${lastName}!` ); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#what-about-raw-this-endraw-)é‚£`this`å‘¢ï¼Ÿ

éšç€ ES6 çš„å¼•å…¥ï¼Œ`this`çš„å€¼æ˜¯ä»å®ƒçš„å‘¨å›´ç¯å¢ƒæˆ–å‡½æ•°çš„å°é—­è¯æ³•ä¸Šä¸‹æ–‡ä¸­æå–çš„ã€‚å› æ­¤ï¼Œä½ ä¸å†éœ€è¦`bind()`ã€`that`æˆ–`self`ï¼

```
function Person(){
  this.age = 0;

  setInterval(function() {
    this.age++; // `this`refers to the Window ğŸ˜’
  }, 1000);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
function Person(){
  var that = this;
  this.age = 0;

  setInterval(function() {
    that.age++; // Without arrow functions. Works, but is not ideal.
  }, 1000);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
function Person(){
  this.age = 0;

  setInterval(() => {
    this.age++; // `this` properly refers to the person object. ğŸ‰ğŸ‰ğŸ‰
  }, 1000);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#when-should-i-not-use-arrow-functions)ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Ÿ

æŸ¥çœ‹æˆ‘çš„æ–‡ç« ï¼Œå…³äºåœ¨ JavaScript ä¸­ä»€ä¹ˆæ—¶å€™ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°

## [](#default-arguments)é»˜è®¤å‚æ•°

è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬å‡½æ•°ã€‚

```
function calculateTotal( subtotal, tax, shipping ) {
return subtotal + shipping + (subtotal * tax);
}

const total = calculateTotal(100, 0.07, 10); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬ä¸ºå‡½æ•°è¡¨è¾¾å¼ä¸­çš„å‚æ•°æ·»åŠ ä¸€äº›é»˜è®¤å€¼ï¼

è€åŠæ³•ğŸ˜•

```
function calculateTotal( subtotal, tax, shipping ) {
  if ( tax === undefined ) {
    tax = 0.07;
  }

  if ( shipping === undefined ) {
    shipping = 10;
  }

  return subtotal + shipping + (subtotal * tax);
}

const total = calculateTotal(100); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç¨å¾®å¥½ä¸€ç‚¹

```
function calculateTotal( subtotal, tax, shipping ) {
  tax = tax || 0.07;
  shipping = shipping || 10;

  return subtotal + shipping + (subtotal * tax);
}

const total = calculateTotal(100); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æœ‰äº† ES6+ï¼ğŸ‰ğŸ‰ğŸ‰

```
function calculateTotal( subtotal, tax = 0.07, shipping = 10 ) {
  return subtotal + shipping + (subtotal * tax);
}

const total = calculateTotal(100); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#what-if-i-wanted-to-only-pass-in-the-first-and-third-argument)å¦‚æœæˆ‘æƒ³åªä¼ ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°å‘¢ï¼Ÿ

```
function calculateTotal( subtotal, tax = 0.07, shipping = 10 ) {
  return subtotal + shipping + (subtotal * tax);
}

const total = calculateTotal(100, , 20); // SyntaxError! Cannot pass empty spaces for argument.

const total = calculateTotal(100, undefined, 20); // ğŸ‰ğŸ‰ğŸ‰ğŸ‰ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#destructuring)è§£æ„

ææ„å…è®¸æ‚¨ä»å­˜å‚¨åœ¨å¯¹è±¡æˆ–æ•°ç»„ä¸­çš„ä»»ä½•æ•°æ®ä¸­æå–å¤šä¸ªå€¼ã€‚

```
const person ={
  first: 'Kevin',
  last: 'Langley',
  location: {
    city: 'Beverly Hills',
    state: 'Florida'
  }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½¿ç”¨ä¸Šé¢çš„å¯¹è±¡ï¼Œè®©æˆ‘ä»¬ä»å¯¹è±¡çš„å±æ€§ä¸­åˆ›å»ºä¸€äº›å˜é‡ã€‚

```
const first = person.first;
const last = person.last; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ ES6 ä¹‹å‰ï¼Œæˆ‘ä»¬åªèƒ½åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ï¼Œå¹¶å°†å…¶åˆ†é…ç»™æƒ³è¦æå–çš„å¯¹è±¡å±æ€§ã€‚

```
const { first, last, location } = person;

const { city, state } = location; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯åœ¨ ES6+ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»æå–çš„æ•°æ®ä¸­ææ„å˜é‡å¹¶åˆ›å»ºæ–°çš„å˜é‡ã€‚

æ‚¨è¿˜å¯ä»¥å°†æå–çš„æ•°æ®å‘½åä¸ºä¸åŒçš„å˜é‡åï¼

```
const { first: fName, last: lName } = person;

const { city: locationCity, state: locationState } = person.location; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®ƒç”šè‡³å¯ä»¥å¤„ç†åµŒå¥—å±æ€§ï¼

```
const { first, last, location: { city } } = person;

console.log( city ); // Beverly Hills 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### å¦‚æœæˆ‘è¯•å›¾ç ´åä¸€ä¸ªä¸å­˜åœ¨çš„è´¢äº§ä¼šæ€ä¹ˆæ ·ï¼Ÿ

è¯¥å˜é‡çš„è¿”å›å€¼å°†æ˜¯`undefined`ã€‚

```
const settings = { color: 'white', height: 500 };
const { width, height, color } = settings;

console.log(width);// undefined
console.log(height); // 500
console.log(color);// white 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ ç”šè‡³å¯ä»¥åœ¨ä½ çš„ææ„å‡½æ•°ä¸­è®¾ç½®é»˜è®¤å€¼ï¼

```
const settings = { color: 'white', height: 500 };
const { width = 200, height = 200, color = 'black' } = settings;

console.log(width);// 200
console.log(height); // 500
console.log(color);// white 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ ä¹Ÿå¯ä»¥ææ„æ•°ç»„ï¼

```
const details = ['Kevin', 'Langley', 'kevinlangleyjr.com'];
const [first, last, website] = details;

console.log(first);// Kevin
console.log(last);// Langley
console.log(website); // kevinlangleyjr.com 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#spread-and-rest)ä¼ æ’­å¼€æ¥...å’Œ...ä¼‘æ¯

åœ¨ ES6 ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šè¿è¡Œ`.apply()`æ¥ä¼ å…¥ä¸€ç»„å‚æ•°ã€‚

```
function doSomething (x, y, z) {
  console.log(x, y, z);
}

let args = [0, 1, 2];

// Call the function, passing args.
doSomething.apply(null, args); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#spread-operator)...ä¼ æ’­ç®—å­

ä½†æ˜¯åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ‰©å±•æ“ä½œç¬¦`...`æ¥ä¼ é€’å‚æ•°ã€‚

```
function doSomething (x, y, z) {
  console.log(x, y, z);
}

let args = [0, 1, 2];

// Call the function, without `apply`, passing args with the spread operator!
doSomething(...args); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ spread è¿ç®—ç¬¦æ¥ç»„åˆæ•°ç»„ã€‚

```
let array1 = ['one', 'two', 'three'];
let array2 = ['four', 'five'];

array1.push(...array2) // Adds array2 items to end of array.
array1.unshift(...array2) //Adds array2 items to beginning of array. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å¯ä»¥åœ¨æ•°ç»„çš„ä»»æ„ç‚¹ç»„åˆå®ƒä»¬ï¼

```
let array1 = ['two', 'three'];
let array2 = ['one', ...array1, 'four', 'five'];

console.log(array2); // ["one", "two", "three", "four", "five"] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ spread æ“ä½œç¬¦æ¥åˆ›å»ºæ•°ç»„çš„å‰¯æœ¬ã€‚

```
let array1 = [1,2,3];
let array2 = [...array1]; // like array1.slice()

array2.push(4);

console.log(array1); // [1,2,3]
console.log(array2); // [1,2,3,4] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ææ„ä¸­ä½¿ç”¨ spread è¿ç®—ç¬¦ã€‚

```
const players = ['Kevin', 'Bobby', 'Nicole', 'Naomi', 'Jim', 'Sherry'];
const [first, second, third, ...unplaced] = players;

console.log(first); // Kevin
console.log(second); // Bobby
console.log(third); // Nicole
console.log(unplaced); // ["Naomi", "Jim", "Sherry"] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
const { x, y, ...z } = { x: 1, y: 2, a: 3, b: 4 };

console.log(x); // 1
console.log(y); // 2
console.log(z); // { a: 3, b: 4 } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ spread æ“ä½œç¬¦æ¥æ‰©å±•èŠ‚ç‚¹åˆ—è¡¨ã€‚

```
const elements = [...document.querySelectorAll('div')];

console.log(elements); // Lists all the div's on the page. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#rest-operator)...Rest è¿ç®—ç¬¦

rest æ“ä½œç¬¦å…è®¸æˆ‘ä»¬æ›´å®¹æ˜“åœ°å¤„ç†å¯å˜æ•°é‡çš„å‡½æ•°å‚æ•°ã€‚

```
function doMath(operator, ...numbers) {
  console.log(operator); // 'add'
  console.log(numbers); // [1, 2, 3]
}

doMath('add', 1, 2, 3); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#template-literals)æ¨¡æ¿æ–‡å­—

ES6 ä¸­å¼•å…¥çš„æ¨¡æ¿æ–‡å­—æ˜¯ä¸€ç§åˆ›å»ºå­—ç¬¦ä¸²çš„æ–°æ–¹æ³•ã€‚

```
const name = 'Kevin';

// The old way...
console.log('Hello, ' + name + '!'); // Hello, Kevin! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
const name = 'Kevin';

// With ES6 template literals.
console.log(`Hello, ${name}!`); // Hello, Kevin! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨æ¨¡æ¿æ–‡æœ¬ä¸­ï¼Œæ‚¨å¯ä»¥è®¡ç®—è¡¨è¾¾å¼ã€‚

```
const price = 19.99;
const tax = 0.07;
const total = `The total price is ${price + (price * tax)}`;

console.log(total); // The total price is 21.3893 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½¿ç”¨æ¨¡æ¿æ–‡å­—ï¼Œæ‚¨å¯ä»¥æ›´å®¹æ˜“åœ°åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²ã€‚

```
console.log('This is some text that flows across\ntwo lines!');

// This is some text that flows across
// two lines!

console.log(`But so does
this text!`);

// But so does
// this text! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#new-string-methods)æ–°çš„å­—ç¬¦ä¸²æ–¹æ³•

åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€äº›éå¸¸æœ‰ç”¨çš„æ–°çš„å­—ç¬¦ä¸²æ–¹æ³•ã€‚

### [T1ã€‚å¼€å§‹äº()](#startswith)

è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ª boolï¼ŒæŒ‡ç¤ºå­—ç¬¦ä¸²æ˜¯å¦ä»¥å­å­—ç¬¦ä¸²å¼€å¤´ï¼Œä»ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°æä¾›çš„ç´¢å¼•å¼€å§‹ï¼Œé»˜è®¤ä¸º`0`ã€‚

#### [](#syntax)è¯­æ³•

```
startsWith( searchString )
startsWith( searchString, position ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#examples)ä¾‹å­

```
const str = 'Learn JavaScript Deeply';

console.log(str.startsWith('Learn'));// true
console.log(str.startsWith('JavaScript'));// false
console.log(str.startsWith('Deeply', 17));// true 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [T1ã€‚ç«¯ç‚¹()](#endswith)

è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ª boolï¼ŒæŒ‡ç¤ºå­—ç¬¦ä¸²æ˜¯å¦ä»¥å­å­—ç¬¦ä¸²ç»“å°¾ï¼Œå¯é€‰å‚æ•° length ç”¨ä½œ`str`çš„é•¿åº¦ï¼Œé»˜è®¤ä¸º`str.length`ã€‚

#### [](#syntax)è¯­æ³•

```
endsWith( searchString )
endsWith( searchString, length ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#examples)ä¾‹å­

```
const str = 'Learn JavaScript Deeply';

console.log(str.endsWith('Deeply'));// true
console.log(str.endsWith('Learn'));// false
console.log(str.endsWith('JavaScript', 16));// true 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [T1ã€‚åŒ…æ‹¬()](#includes)

è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ª boolï¼ŒæŒ‡ç¤ºå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å­å­—ç¬¦ä¸²ï¼Œä»ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°æä¾›çš„ç´¢å¼•å¼€å§‹ï¼Œé»˜è®¤ä¸º`0`ã€‚

#### [](#syntax)è¯­æ³•

```
includes( searchString )
includes( searchString, position ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#examples)ä¾‹å­

```
const str = 'Learn JavaScript Deeply';

console.log(str.includes('JavaScript'));// true
console.log(str.includes('Javascript'));// false
console.log(str.includes('PHP'));// false 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [T1ã€‚é‡å¤()](#repeat)

æ­¤æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«æŒ‡å®šæ•°é‡çš„åŸå§‹å­—ç¬¦ä¸²å‰¯æœ¬çš„ä¸²è”ã€‚

#### [](#syntax)è¯­æ³•

```
repeat( count ) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#examples)ä¾‹å­

```
const str = 'Deeply';

console.log(str.repeat(3));// DeeplyDeeplyDeeply
console.log(str.repeat(2.5));// DeeplyDeeply (converts to int)
console.log(str.repeat(-1));// RangeError 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#enhanced-object-literals)å¢å¼ºçš„å¯¹è±¡æ–‡å­—é‡

```
const first = 'Kevin';
const last = 'Langley';
const age = 29; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬å°†å˜é‡åˆ†é…ç»™å¯¹è±¡çš„å±æ€§ï¼

```
const person = {
  first: first,
  last: last,
  age: age
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨è®©æˆ‘ä»¬å†åšä¸€æ¬¡ï¼Œä½†æ˜¯è¿™æ¬¡ç”¨çš„æ˜¯å¯¹è±¡æ–‡å­—ã€‚

```
const person = {
  first,
  last,
  age
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨ç”šè‡³å¯ä»¥å°†å¯¹è±¡æ–‡å­—ä¸æ™®é€šçš„é”®å€¼å¯¹æ··åˆä½¿ç”¨ã€‚

```
const person = {
  firstName: first,
  lastName: last,
  age
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å¯¹è±¡åˆå§‹åŒ–å™¨ä¸Šçš„æ–¹æ³•å®šä¹‰ä½¿ç”¨è¾ƒçŸ­çš„è¯­æ³•ã€‚

ES5 ä¸­æˆ‘ä»¬éƒ½ç†Ÿæ‚‰çš„è¯­æ³•...

```
var obj = {
  foo: function() {
    console.log('foo');
  },
  bar: function() {
console.log('bar');

}

}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨å¯ä»¥ç”¨æ–°çš„æ–¹æ³•å®šä¹‰è¯­æ³•æ¥ç®€åŒ–ï¼

```
const obj = {
  foo() {
    console.log('foo');
  },
  bar() {
    console.log('bar');
  }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ–è€…ç”šè‡³å®šä¹‰åœ¨è¿è¡Œæ—¶åœ¨å¯¹è±¡æ–‡å­—ä¸­è®¡ç®—çš„é”®ã€‚

```
let i = 0;
const a = {
  ['foo' + ++i]: i,
  ['foo' + ++i]: i,
  ['foo' + ++i]: i
};

console.log(a.foo1); // 1
console.log(a.foo2); // 2
console.log(a.foo3); // 3 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬ç”¨é”®çš„å­—ç¬¦ä¸²æ¨¡æ¿æ–‡å­—æ¥æ¸…ç†ä¸€ä¸‹å§ï¼

```
let i = 0;
const a = {
  [`foo${++i}`]: i,
  [`foo${++i}`]: i,
  [`foo${++i}`]: i
};

console.log(a.foo1); // 1
console.log(a.foo2); // 2
console.log(a.foo3); // 3 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#new-array-methods)æ–°çš„é˜µåˆ—æ–¹æ³•ï¼

### [](#arrayfind)Array.find()

`Array.find`é™æ€æ–¹æ³•è¿”å›æ‰€æä¾›çš„æ•°ç»„ä¸­æ»¡è¶³æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå€¼ï¼Œå¦‚æœæ²¡æœ‰å…ƒç´ åŒ¹é…ï¼Œåˆ™è¿”å› undefinedã€‚

#### [](#syntax)è¯­æ³•

```
// Arrow function
Array.find( element => { conditional } )
Array.find((element, index) => { conditional } )
Array.find((element, index, array) => { conditional } )

// Callback function
Array.find(callbackFn)
Array.find(callbackFn, thisArg)

// Inline callback function
Array.find(function callbackFn(element) { conditional })
Array.find(function callbackFn(element, index) { conditional })
Array.find(function callbackFn(element, index, array){ conditional })
Array.find(function callbackFn(element, index, array) { conditional }, thisArg) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#examples)ä¾‹å­

```
const posts = [
  {
    id: 1,
    title: 'Hello World!'
  },
  {
    id: 2,
    title: 'Learn JS Deeply!'
  }
];

const post = posts.find(post => post.id === 2);
console.log(post); // {id: 2, title: "Learn JS Deeply!"} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#arrayfindindex)Array.findIndex()

`Array.findIndex`é™æ€æ–¹æ³•è¿”å›æ‰€æä¾›æ•°ç»„ä¸­æ»¡è¶³æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå€¼çš„ç´¢å¼•ï¼Œå¦‚æœæ²¡æœ‰å…ƒç´ åŒ¹é…ï¼Œåˆ™è¿”å› undefinedã€‚

#### [](#syntax)è¯­æ³•

```
// Arrow function
Array.findIndex( element => { conditional } )
Array.findIndex((element, index) => { conditional } )
Array.findIndex((element, index, array) => { conditional } )

// Callback function
Array.findIndex(callbackFn)
Array.findIndex(callbackFn, thisArg)

// Inline callback function
Array.findIndex(function callbackFn(element) { conditional })
Array.findIndex(function callbackFn(element, index) { conditional })
Array.findIndex(function callbackFn(element, index, array){ conditional })
Array.findIndex(function callbackFn(element, index, array) { conditional }, thisArg) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#examples)ä¾‹å­

```
const posts = [
  {
    id: 1,
    title: 'Hello World!'
  },
  {
    id: 2,
    title: 'Learn JS Deeply!'
  }
];

const post = posts.findIndex(post => post.id === 2);
console.log(post); // 1 - Remember, this is zero based! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#arrayfrom)Array.from()

é™æ€æ–¹æ³•è®©ä½ ä»ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡å’Œå¯è¿­ä»£å¯¹è±¡ä¸­åˆ›å»ºã€‚

#### [](#syntax)è¯­æ³•

```
// Simple without any mapping
Array.from(arrayLike);

// Arrow function mapping (Can't utilize the third argument for the `thisArg` argument since the mapping uses an arrow function)
Array.from(arrayLike, element => [...] );
Array.from(arrayLike, (element, index) => [...] );

// Mapping named function
Array.from(arrayLike, mapFn );
Array.from(arrayLike, mapFn, thisArg); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#examples)ä¾‹å­

ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸èƒ½ç®€å•åœ°å¾ªç¯éå†ä¸€ä¸ªèŠ‚ç‚¹åˆ—è¡¨ã€‚

```
const headers = document.querySelectorAll('h1');
const titles = headers.map(h1 => h1.textContent); // TypeError: headers.map is not a function 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½†æ˜¯ï¼Œä½¿ç”¨`Array.from`æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°å¾ªç¯å®ƒä»¬ï¼

```
const headers = document.querySelectorAll('h1');
const headersArray = Array.from(headers);
const titles = headersArray.map(h1 => h1.textContent);

// Or we can use the `mapFn` parameter of `Array.from`.

const titles = Array.from(
  document.querySelectorAll('h1'),
  h1 => h1.textContent
); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#arrayindexof)Array.indexOf()

é™æ€æ–¹æ³•è¿”å›ä¼ å…¥å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ã€‚

#### [](#syntax)è¯­æ³•

```
Array.indexOf(searchElement)
Array.indexOf(searchElement, index) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#examples)ä¾‹å­

```
const values = Array.of(123, 456, 789);

console.log(values); // [123,456,789] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#arrayof)(æ•°ç»„ç¼–å·)

é™æ€æ–¹æ³•`Array.of`åˆ›å»ºä¸€ä¸ªæ–°çš„`Array`,å®ƒåŒ…å«ä¼ é€’ç»™å®ƒçš„å€¼ï¼Œè€Œä¸ç®¡å‚æ•°çš„ç±»å‹æˆ–æ•°é‡ã€‚

è¿™ä¸`Array`æ„é€ å‡½æ•°æ–¹æ³•ä¹‹é—´çš„æœ€å¤§åŒºåˆ«æ˜¯å®ƒä»¬å¦‚ä½•å¤„ç†å•ä¸ªæ•´æ•°å‚æ•°ã€‚`Array.of(5)`å°†åˆ›å»ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œä½†æ˜¯`Array(5)`åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º 5 çš„ç©ºæ•°ç»„ã€‚

#### [](#syntax)è¯­æ³•

```
Array.of(firstElement)
Array.of(firstElement, secondElement, ... , nthElement) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#examples)ä¾‹å­

```
const values = Array.of(123, 456, 789);
console.log(values); // [123,456,789] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#promises)æ‰¿è¯º

Promise å¯¹è±¡ç”¨äºå¼‚æ­¥æ“ä½œï¼Œè¡¨ç¤ºè¯¥æ“ä½œçš„æœ€ç»ˆå®Œæˆæˆ–å¤±è´¥ï¼ŒåŠå…¶ç»“æœå€¼ã€‚ <sup>[1](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)</sup> æ‰¿è¯ºå¸¸ç”¨äºå¼‚æ­¥å–æ•°æ®ã€‚

æ‰¿è¯ºå­˜åœ¨äºå››ç§çŠ¶æ€ä¹‹ä¸€:

*   **å¾…å®š** -å®šä¹‰æ—¶ï¼Œè¿™æ˜¯æ‰¿è¯ºçš„åˆå§‹çŠ¶æ€ã€‚
*   **å®Œæˆ** -å½“æ“ä½œæˆåŠŸå®Œæˆæ—¶ã€‚
*   **æ‹’ç»** -å½“æ“ä½œå¤±è´¥æ—¶ã€‚
*   **ç»“ç®—** -å½“å®ƒå®Œæˆæˆ–è¢«æ‹’ç»æ—¶ã€‚

```
const promiseA = new Promise( ( resolve, reject ) => {
  setTimeout( () => {
    resolve('Resolved!');
  }, 300 );
} ); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[![Promise Harry Potter Gif](../Images/e28bd9a35dc74e73a15758188e015bb8.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--tqhjnrNp--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://res.cloudinary.com/kevinlangleyjr-dev/image/upload/v1635020656/blog/modern-js/promise_z67bfm.gif)

### [](#promise-api)æ‰¿è¯º API

Promise ç±»ä¸­æœ‰ 6 ä¸ªé™æ€æ–¹æ³•:

#### [](#-raw-promiseall-endraw-)`Promise.all`

`.all()`æ–¹æ³•æ¥å—`Promise`å¯¹è±¡çš„ iterable ä½œä¸ºå®ƒå”¯ä¸€çš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå•ç‹¬çš„`Promise`å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è§£æä¸ºä¼ é€’ç»™å®ƒçš„`Promise`å¯¹è±¡çš„ç»“æœæ•°ç»„ã€‚å½“*ä¼ å…¥çš„æ‰€æœ‰*æ‰¿è¯ºè§£æ**æˆ–**å°†æ‹’ç»æ—¶ï¼Œä»è¯¥æ–¹æ³•è¿”å›çš„æ‰¿è¯ºå°†è¢«è§£æï¼Œå¦‚æœå…¶ä¸­ä»»ä½•ä¸€ä¸ªè¢«æ‹’ç»çš„è¯ã€‚

#### [](#-raw-promiseallsettled-endraw-)`Promise.allSettled`

`.allSettled()`æ–¹æ³•æ¥å—ä¸€ä¸ªç”±`Promise`å¯¹è±¡ç»„æˆçš„ iterable ä½œä¸ºå®ƒå”¯ä¸€çš„å‚æ•°ï¼Œå¹¶å°†è¿”å›ä¸€ä¸ª`Promise`å¯¹è±¡ï¼Œå½“æ‰€æœ‰å¯¹è±¡éƒ½é€šè¿‡ resolve æˆ– reject è§£å†³æ—¶ï¼Œè¯¥å¯¹è±¡å°†é€šè¿‡ä¸€ä¸ªå¯¹è±¡æ•°ç»„è§£ææ¯ä¸ª`Promise`å¯¹è±¡çš„ç»“æœã€‚`.allSettled()`å’Œ`.all()`æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œåè€…æ ¹æ®ä¼ å…¥æ‰¿è¯ºçš„ç»“æœæ¥è§£å†³æˆ–æ‹’ç»ï¼Œè€Œå‰è€…å°†åœ¨æ‰€æœ‰ä¼ å…¥çš„`Promise`å¯¹è±¡éƒ½ç”¨`resolve` **æˆ–** `reject`è§£å†³åè§£å†³ã€‚

#### [](#-raw-promiseany-endraw-)`Promise.any`

`.any()`æ–¹æ³•æ¥å—ä¸€ä¸ª`Promise`å¯¹è±¡çš„ iterable ä½œä¸ºå®ƒå”¯ä¸€çš„å‚æ•°ï¼Œå¹¶å°†è¿”å›ä¸€ä¸ªå•ä¸ªçš„`Promise`å¯¹è±¡ï¼Œå½“ä»»ä½•ä¼ å…¥çš„`Promise`å¯¹è±¡è§£ææ—¶ï¼Œè¯¥å¯¹è±¡è§£æï¼Œå¹¶å¸¦æœ‰è¢«è§£æçš„åŸå§‹`Promise`å¯¹è±¡çš„å€¼ã€‚

#### [](#-raw-promiserace-endraw-)`Promise.race`

`.race()`æ–¹æ³•æ¥å—ä¸€ä¸ª`Promise`å¯¹è±¡çš„ iterable ä½œä¸ºå®ƒå”¯ä¸€çš„å‚æ•°ï¼Œå¹¶ä¸”å°†è¿”å›ä¸€ä¸ª`Promise`å¯¹è±¡ï¼Œä¸€æ—¦ä¸€ä¸ªä¼ å…¥çš„`Promise`å¯¹è±¡è§£ææˆ–æ‹’ç»ï¼Œè¯¥å¯¹è±¡å°±ä¼šè§£ææˆ–æ‹’ç»ã€‚

#### [](#-raw-promiseresolve-endraw-)`Promise.resolve`

`.resolve()`æ–¹æ³•è¿”å›ä¸€ä¸ªç”¨æä¾›çš„å€¼è§£æçš„`Promise`å¯¹è±¡ã€‚å¦‚æœä¸€ä¸ª`thenable`(æœ‰ä¸€ä¸ª`then`æ–¹æ³•)æ˜¯è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿”å›çš„`Promise`å¯¹è±¡å°†è·Ÿéšé‚£ä¸ª`then`ï¼Œç›´åˆ°è¿”å›æœ€ç»ˆå€¼ã€‚

#### [](#-raw-promisereject-endraw-)`Promise.reject`

`.reject()`æ–¹æ³•è¿”å›ä¸€ä¸ªè¢«æ‹’ç»çš„`Promise`å¯¹è±¡ï¼Œå¹¶ç»™å‡ºæ‹’ç»çš„åŸå› ã€‚

### [](#lets-jump-into-some-examples)æˆ‘ä»¬æ¥è·³å‡ ä¸ªä¾‹å­å§ï¼

```
const p1 = new Promise( (resolve, reject) => {
  resolve('Learn JavaScript Deeply!');
} );

p1.then(data => console.log(data)); // Learn JavaScript Deeply 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#promises-can-even-be-chained)æ‰¿è¯ºç”šè‡³å¯ä»¥è¿é”ï¼

```
const p2 = new Promise( (resolve, reject) => {
  setTimeout( () => resolve( 1 ), 1000 ); // Resolve with `1` after 1 second.
} );

p2
  .then( value => {
    console.log( value ); // 1
    return value * 2;
  } )
  .then( value => {
    console.log( value ); // 2
    return value * 4;
  } )
  .then( value => {
    console.log( value ); // 8
    return value * 2;
  } ); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#lets-look-at-some-more-in-depth-examples)è®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›æ›´æ·±å…¥çš„ä¾‹å­ã€‚

é€šå¸¸ï¼Œåœ¨å°è¯•è·å–æ•°æ®æ—¶ï¼Œæ‚¨ä¼šé‡åˆ°ä½¿ç”¨æ‰¿è¯ºçš„æƒ…å†µã€‚

```
const postsPromise = fetch('https://miami.wordcamp.org/2018/wp-json/wp/v2/posts');

console.log(postsPromise);

// Promise {pending}
// __proto__: Promise
// [[PromiseStatus]]: "pending"
// [[PromiseValue]]: undefined

postsPromise
  .then(data => console.log(data));

// Response {type: "cors", url: "https://miami.wordcamp.org/2018/wp-json/wp/v2/posts", redirected: false, status: 200, ok: true, ...}

postsPromise
  .then(data => data.json()) // Get's JSON value from fetch.
  .then(data => console.log(data)) // Console log the value.
  .catch(err => console.error(err)); // Catch any errors.

// {id: 5060, date: "2018-03-15T17:41:09", ...}
// {id: 4954, date: "2018-03-14T00:21:10", ...}
// {id: 4943, date: "2018-03-13T19:16:11", ...}
// {id: 4702, date: "2018-03-10T11:04:36", ...}
// ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‚¨å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„`.catch`æ–¹æ³•æ•è·æ‰¿è¯ºä¸­æŠ›å‡ºçš„é”™è¯¯ã€‚

```
const p = new Promise((resolve, reject) => {
  reject(Error('Uh oh!'));
});

p.then(data => console.log(data)); // Uncaught (in promise) Error: Uh oh!

p
  .then(data => console.log(data))
  .catch(err => console.error(err)); // Catch the error! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#classes)ç±»

åœ¨å¹•åï¼ŒES6 ç±»å¹¶ä¸æ˜¯ä»€ä¹ˆå…¨æ–°çš„ä¸œè¥¿ã€‚å®ƒä»¬ä¸»è¦æä¾›æ›´æ–¹ä¾¿çš„è¯­æ³•æ¥åˆ›å»ºè€å¼çš„æ„é€ å‡½æ•°ã€‚

```
// Class declaration
class Animal {

}

// Class expression
const Animal = class {} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
class Animal {

  constructor(name) {
    this.name = name;
  }

  speak() {
    console.log(`${this.name} makes a noise.`);
  }
}

class Dog extends Animal {
  speak() {
    console.log(`${this.name} barks!`);
  }
}

const puppy = new Dog('Spot');
puppy.speak(); // Spot barks! 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
class Animal {
  constructor(name) {
    this.name = name;
  }
  speak() {
    console.log(`${this.name} makes a noise.`);
  }
}

class Dog extends Animal {
  constructor(name, breed) {
    this.breed = breed;
  }

  speak() {
    console.log(`${this.name} barks!`);
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#asyncawait)å¼‚æ­¥/ç­‰å¾…

ES2017 æˆ– ES8 ä¸­å¢åŠ äº†`await`å…³é”®å­—å’Œ`async`åŠŸèƒ½ã€‚å®ƒä»¬å®é™…ä¸Šåªæ˜¯æ‰¿è¯ºä¹‹ä¸Šçš„è¯­æ³•ç³–ï¼Œæœ‰åŠ©äºä½¿å¼‚æ­¥ä»£ç æ›´å®¹æ˜“ã€æ›´å¹²å‡€åœ°è¯»å†™ã€‚å°†`async`å…³é”®å­—æ·»åŠ åˆ°å‡½æ•°ä¸­æ˜¯ä¸ºäº†è¡¨ç¤ºå®ƒå°†è¿”å›ä¸€ä¸ªè¦è§£å†³çš„æ‰¿è¯ºï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›å€¼ã€‚

ç›®å‰ï¼Œä½ åªèƒ½åœ¨ä¸€ä¸ª`async`å‡½æ•°ä¸­ä½¿ç”¨`await`å…³é”®å­—ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå…³äº[é¡¶çº§ await](https://github.com/tc39/proposal-top-level-await) çš„å¼€æ”¾æè®®ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹ä¸€äº›æ‰¿è¯ºï¼Œä»¥åŠå¦‚ä½•å°†å®ƒä»¬è½¬æ¢æˆ async/awaitï¼

```
const getUser = username => {
  return fetch(`https://api.github.com/users/${username}`)
  .then( response => {
    if ( ! response.ok ) {
      throw new Error( `HTTP error! Response status: ${response.status}` );
    }
    return response.json();
  } )
  .catch( e => console.error( e ) );
}

const user = getUser( 'kevinlangleyjr' );
console.log( user ); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œè®©æˆ‘ä»¬å°†å®ƒæ”¹ä¸ºä½¿ç”¨ async/awaitã€‚

```
const getUser = async username => {

  try {

    const response = await fetch(`https://api.github.com/users/${username}`)

    if ( ! response.ok ) {
      throw new Error( `HTTP error! Response status: ${response.status}` );
    }

    const user = await response.json();

    return user;

  } catch ( e ) {
    console.error( e );
  }
}

const user = getUser( 'kevinlangleyjr' );
console.log( user ); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸åŒä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬ç°åœ¨å°†æ•´ä¸ªå‡½æ•°ä½“åŒ…è£…åœ¨ä¸€ä¸ª`try/catch`å—ä¸­ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ‰§è¡Œ`await`æ“ä½œã€‚è¿™å°†æ•æ‰æˆ‘ä»¬æ‰€ç­‰å¾…çš„æ‰¿è¯ºä¸­çš„ä»»ä½•é”™è¯¯ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¹Ÿåœ¨å‡½æ•°å®šä¹‰çš„å‰é¢æ”¾ç½®äº†`async`å…³é”®å­—ï¼Œè¿™æ˜¯`await`æ­£å¸¸å·¥ä½œæ‰€å¿…éœ€çš„ã€‚

## [](#setweakset)Set/WeakSet

Set å¯¹è±¡å…è®¸æ‚¨å­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼ã€‚è™½ç„¶å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æœ‰ä¸¤ä¸ªå¾ˆå¤§çš„åŒºåˆ«ã€‚ç¬¬ä¸€ä¸ªæ˜¯æ•°ç»„å¯ä»¥æœ‰é‡å¤çš„å€¼ï¼Œè€Œé›†åˆä¸èƒ½ã€‚å¦ä¸€ä¸ªæ˜¯æ•°ç»„æ˜¯æŒ‰ç´¢å¼•æ’åºçš„ï¼Œè€Œé›†åˆåªèƒ½æŒ‰æ’å…¥çš„é¡ºåºè¿­ä»£ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨`.entries()`æ•è·é›†åˆä¸­çš„æ¡ç›®ï¼Œè¿™å°†ä¿æŒå¯¹åŸå§‹æ’å…¥å¯¹è±¡çš„å¼•ç”¨ã€‚

Map å’Œ Set éƒ½æœ‰`keys()`å’Œ`values()`æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ Set ä¸Šï¼Œè¿™äº›æ–¹æ³•å°†è¿”å›ç›¸åŒçš„å¯è¿­ä»£å€¼ï¼Œå› ä¸º Set ä¸æ˜¯é”®å€¼å¯¹ï¼Œè€Œåªæ˜¯å€¼ã€‚

```
const set = new Set();

set.add( 9 );      // Set(1) { 9 }
set.add( 9 );      // Set(1) { 9 } Ignored because it already exists in the set.
set.add( 7 );      // Set(2) { 9, 7 }
set.add( 7 );      // Set(2) { 9, 7 } Ignored because it already exists in the set.
set.add( 'Text' ); // Set(3) { 9, 7, 'Text' }
set.add( true );   // Set(4) { 9, 7, 'Text', true }

const user = {
  name: 'Kevin',
  location: 'Florida'
};

set.add( user );   // Set(5) { 9, 7, 'Text', true, { value: { location: 'Florida', name: 'Kevin' } } }

set.has( 9 );    // true
set.has( true ); // true

const newUser = {
  name: 'Kevin',
  location: 'Florida'
};

set.has( newUser );  // false - This doesn't do object property matching, it is an object reference check.

set.has( user );  // true

// Use .entries() to capture all the values in the set.

const entries = set.entries();

console.log( entries ); // SetIterator {9 => 9, 7 => 7, 'Text' => 'Text', true => true, {â€¦} => {â€¦}}

set.delete( true );  // true - This change is still reflected in entries because it keeps the reference

set.has( true );  // false

console.log( entries ); // SetIterator {9 => 9, 7 => 7, 'Text' => 'Text', {â€¦} => {â€¦}}

set.size // 5

// Iterating over a set is pretty simple but you have a few options.
for ( let item of set.values() ) {
  console.log( item );
}

// Is the same as,
for ( let item of set.keys() ) {
  console.log( item );
}

// And is also the same as,
for ( let [key, value] of set.entries() ) {
  console.log( key );
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

Set å’Œ WeakSet çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œåè€…åªæ¥å—å¯¹è±¡ï¼Œè€Œå‰è€…å¯ä»¥æ¥å—ä»»ä½•ç±»å‹çš„å€¼ã€‚å¦ä¸€ä¸ªå¤§çš„åŒºåˆ«æ˜¯å¼±é›†åˆæŒæœ‰å¯¹å…¶ä¸­å¯¹è±¡çš„å¼±å¼•ç”¨ã€‚å› æ­¤ï¼Œå¦‚æœ WeakSet ä¸­æ²¡æœ‰å¯¹æŸä¸ªå¯¹è±¡çš„è¿›ä¸€æ­¥å¼•ç”¨ï¼Œè¿™äº›å¯¹è±¡å°±å¯ä»¥è¢«åƒåœ¾å›æ”¶ã€‚WeakSet ä¹Ÿæ˜¯ä¸å¯æšä¸¾çš„ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•åˆ—å‡ºå…¶ä¸­çš„å½“å‰å¯¹è±¡ï¼Œä½†æ˜¯æ‚¨å¯ä»¥`.add()`ã€`.delete()`ï¼Œå¹¶æ£€æŸ¥ WeakSet `.has()`æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚

```
let ws = new WeakSet();
let user = { name: 'Kevin', location: 'Florida' };
ws.add( user );
console.log( ws.has( user ) ); // true
user = null; // The reference to `user` within the WeakSet will be garbage collected shortly after this point. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœæ‚¨ä½¿ç”¨ä¸Šé¢çš„ä»£ç ç¤ºä¾‹ï¼Œç„¶ååœ¨ Chrome å¼€å‘å·¥å…·ä¸­é€šè¿‡å•å‡» Performance é€‰é¡¹å¡ä¸‹çš„åƒåœ¾æ¡¶æ¥å¼ºåˆ¶åƒåœ¾æ”¶é›†ï¼Œæ‚¨ä¼šçœ‹åˆ°`ws`ä¸å†ä¿å­˜å¯¹`user`çš„å¼•ç”¨ã€‚

[![Force JavaScript garbage collection in Chrome](../Images/c8a2d3b2dd181e7b59192ac6552e7d89.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--liakRNSL--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/kevinlangleyjr-dev/image/upload/v1637687473/blog/modern-js/garbage-collection_u4khbx.png)

## [](#mapweakmap)åœ°å›¾/WeakMap

å¦ä¸€æ–¹é¢ï¼ŒMap å¯¹è±¡æŒæœ‰é”®-å€¼å¯¹ï¼Œè·Ÿè¸ªæ’å…¥é¡ºåºï¼Œå¹¶ä¸”å¯ä»¥å°†å¯¹è±¡æˆ–åŸºå…ƒå€¼ç”¨äºé”®å’Œå€¼ã€‚

è™½ç„¶å¯¹è±¡ä¸åœ°å›¾éå¸¸ç›¸ä¼¼ï¼Œè€Œä¸”åœ¨ ES6 ä¸­å¼•å…¥å¯¹è±¡ä¹‹å‰ï¼Œå®ƒä»¬ä¸€ç›´è¢«ç”¨æ¥ä»£æ›¿åœ°å›¾ï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›å…³é”®çš„åŒºåˆ«ã€‚æ˜ å°„å¯ä»¥æœ‰ä»»ä½•ç±»å‹å€¼çš„é”®ï¼ŒåŒ…æ‹¬å‡½æ•°å’Œå¯¹è±¡ï¼Œè€Œå¯¹è±¡åªèƒ½æœ‰å­—ç¬¦ä¸²å’Œç¬¦å·ä½œä¸ºé”®ã€‚æ‚¨ä¸èƒ½ç›´æ¥è¿­ä»£å¯¹è±¡ï¼Œä½†æœ‰å‡ ç§æ–¹æ³•å¯ä»¥è¿­ä»£åœ°å›¾ã€‚å¦å¤–ï¼Œ`JSON.stringify()`æ²¡æœ‰åŸç”Ÿæ”¯æŒï¼Œä½†æ˜¯é€šè¿‡ä¸€ç‚¹[çš„å·¥ä½œ](https://stackoverflow.com/questions/29085197/how-do-you-json-stringify-an-es6-map)æ˜¯å¯èƒ½çš„ã€‚

```
const map = new Map();

map.set( 1, 'Learn' );// Map(1) {1 => 'Learn'}
map.set( 2, 'JavaScript' );// Map(2) {1 => 'Learn', 2 => 'JavaScript'}
map.set( 3, 'Deeply' );// Map(3) {1 => 'Learn', 2 => 'JavaScript', 3 => 'Deeply'}
map.set( 3, 'Very Deeply' );// Map(3) {1 => 'Learn', 2 => 'JavaScript', 3 => 'Very Deeply'} - Overwrite value of Deeply set on line above.

map.set(
  '1',
  'Different string value for the string key of 1.'
);  // Map(4) {1 => 'Learn', 2 => 'JavaScript', 3 => 'Very Deeply', '1' => 'Different string value for the string key of 1.'}

map.set(
  true,
  'Different string value for the bool of true.'
);  // Map(5) {1 => 'Learn', 2 => 'JavaScript', 3 => 'Very Deeply', '1' => 'Different string value for the string key of 1.', true => 'Different string value for the bool of true.'}

map.size // 5

map.delete( true );  // Map(4) {1 => 'Learn', 2 => 'JavaScript', 3 => 'Very Deeply', '1' => 'Different string value for the string key of 1.'}

map.delete( '1' );  // Map(3) {1 => 'Learn', 2 => 'JavaScript', 3 => 'Very Deeply'}

map.clear();  // Map(0) {size: 0}

/* New example with objects for keys. */

const user1 = { name: 'James' };
const user2 = { name: 'Kevin' };

// New Map for votes.
const votes = new Map();
votes.set( user1, 10 );  // Map(1) {{ name: 'James' } => 10}
votes.has( user1 );  // true
votes.has( user2 );  // false - Not set yet.
votes.set( user2, 20 );  // Map(2) {{ name: 'James' } => 10, { name: 'Kevin' } => 20}

votes.has( user1 );  // true
votes.has( user2 );  // true

votes.get( user1 );  // 10
votes.get( user2 );  // 20

votes.size // 2 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#references)å‚è€ƒæ–‡çŒ®

1.  [https://developer . Mozilla . org/en-US/docs/Web/JavaScript/Reference/Global _ Objects/Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)