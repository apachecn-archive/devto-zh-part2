# Kotlin developer - const æä¾›çš„æ‰“å­—æŠ€å·§

> åŸæ–‡:[https://dev . to/bright devs/typescript-tips-from-kot Lin-developer-const-jde](https://dev.to/brightdevs/typescript-tips-from-kotlin-developer---const-jde)

å¦‚ä»Šï¼Œæˆ‘å¤§å¤šç”¨ Kotlin ç¼–ç¨‹è¯­è¨€ç¼–å†™ä»£ç ã€‚å½“æˆ‘å¼€å§‹ç ”ç©¶ Java 7 ä»£ç åº“æ—¶ï¼Œæˆ‘å¯¹å®ƒäº§ç”Ÿäº†å…´è¶£ï¼Œå¹¶å¾ˆå¿«åŒå€¦äº†è¿™ç§è¯­è¨€ã€‚åœ¨ [Bright Inventions](https://brightinventions.pl) æˆ‘ä»¬ç»å¸¸åœ¨åç«¯ã€å‰ç«¯å’Œç§»åŠ¨å¼€å‘ä¸­ä½¿ç”¨ TypeScriptï¼Œæ‰€ä»¥æˆ‘æƒ³åˆ†äº«ä¸€äº›åœ¨ä½¿ç”¨ Kotlin æ—¶å­¦åˆ°çš„å…³äº TypeScript çš„æƒ³æ³•å’ŒæŠ€å·§ã€‚ç‰¹åˆ«æ˜¯è¿™ç¯‡æ–‡ç« æ˜¯å…³äºå¸¸é‡å˜é‡çš„ã€‚

## å°½å¯èƒ½ä½¿ç”¨`const`

ä½¿ç”¨ä¸å¯å˜å˜é‡æœ‰åŠ©äºå¯¹ç¨‹åºçš„æµç¨‹å’ŒçŠ¶æ€è¿›è¡Œæ¨ç†ã€‚å®ƒæœ‰åŠ©äºç¼–è¯‘å™¨æä¾›æ›´æ™ºèƒ½çš„æç¤ºï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¯ç©ºç±»å‹æ—¶ã€‚

åœ¨ Kotlin ä¸­ï¼Œ`val`å…³é”®å­—è¡¨ç¤ºåˆå§‹åŒ–åå€¼ä¸å˜çš„å˜é‡ï¼Œä¾‹å¦‚:

```
val x: Int
val y = 3
x = 2
x = 20 // Error: Val cannot be reassigned
y = 30 // Error: Val cannot be reassigned 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨[æ‰“å­—ç¨¿](https://www.typescriptlang.org/)ä¸­ï¼Œè¿™ç§æƒ…å†µç”¨`const` :
å¤„ç†

```
const x: number // Error: 'const' declarations must be initialized
const y: number = 3

y = 30 // Error: Cannot assign to 'y' because it is constant or read-only property 
```

Enter fullscreen mode Exit fullscreen mode

## ç¼–è¯‘è€…çš„æœ€çˆ±`const`

å½“æˆ‘ä»¬ä½¿ç”¨`const`æ—¶ï¼Œç¼–è¯‘å™¨å˜å¾—æ›´èªæ˜çš„ç¬¬ä¸€ç§æ–¹å¼æ˜¯ç©ºæ£€æŸ¥ã€‚å½“æ‚¨å¯ç”¨ [`strictNullChecks`](https://www.typescriptlang.org/docs/handbook/compiler-options.html) æ—¶ï¼ŒKotlin å’Œ TypeScript ç¼–è¯‘å™¨éƒ½çŸ¥é“æŸäº›å†…å®¹æ˜¯å¦å¯ä»¥ä¸ºç©ºã€‚

```
const firstName: string | null = getFirstName()
let lastName: string | null = getLastName()

if (firstName !== null && lastName !== null) {
    setTimeout(() => {
        console.log(firstName.length)
        console.log(lastName.length) // Error: Object is possibly 'null'
    })
} 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨å‰ä¸¤è¡Œä¸­ï¼Œæˆ‘ä»¬å£°æ˜`firstName`å’Œ`lastName`æŒæœ‰`string`æˆ–`null`ã€‚ç”¨è¾…åŠ©å‡½æ•°`getFirstName`å’Œ`getLastName`åˆå§‹åŒ–å˜é‡ã€‚åœ¨æˆ‘ä»¬æ£€æŸ¥äº†`firstName`å’Œ`lastName`ç»å¯¹ä¸ä¸ºç©ºä¹‹åï¼Œæˆ‘ä»¬è§¦å‘ä¸€äº›å¼‚æ­¥å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒä½¿ç”¨`firstName.length`ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬ä½¿ç”¨`lastName.length`æ—¶ï¼Œç¼–è¯‘å™¨æŠ¥é”™`Object is possibly 'null'`ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç©ºæ£€æŸ¥å’Œ`console.log`è¯­å¥*ä¹‹é—´ï¼Œæœ‰å¯èƒ½*ä¼šæ”¹å˜`lastName`å€¼ã€‚é€šè¿‡æŸ¥çœ‹ä»£ç ï¼Œæˆ‘ä»¬å¯èƒ½çŸ¥é“è¿™ä¸æ˜¯çœŸçš„ã€‚ç„¶è€Œï¼Œç¼–è¯‘å™¨ä¸èƒ½åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½ 100%ç¡®å®šã€‚è°¢å¤©è°¢åœ°ï¼Œæˆ‘ä»¬æœ‰`const`ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç¼–è¯‘å™¨åˆ†äº«æˆ‘ä»¬çš„çŸ¥è¯†ã€‚

## ç¼–è¯‘å™¨ç”¨`const`æ•æ‰ bug

å› ä¸º`const`å’Œ`val`åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼Œç¼–è¯‘å™¨å¯ä»¥é˜²æ­¢å¦ä¸€ç±» bugã€‚çœ‹ä¸€ä¸‹ä»£ç ç¤ºä¾‹ blowã€‚æœ‰ä¸€ä¸ª bugğŸ›å¦‚æœæˆ‘ä»¬ç”¨`const`è€Œä¸æ˜¯`let`ï¼Œè¿™å¾ˆå®¹æ˜“é¿å…ã€‚

```
let firstName: string = person.firstName
let lastName: string = person.lastName

const parsed = parseFormData((data: {name: string }) => {
    let first: string | null, last: string | null
    let parts = data.name.split('  ')
    lastName = parts[0]
    firstName = parts[1]
    return { firstName: first, lastName: last }
})

if (parsed.firstName !== firstName || parsed.lastName !== lastName) { 
    // submit changes
} 
```

Enter fullscreen mode Exit fullscreen mode

ä½ å¯èƒ½å·²ç»å‘ç°äº†è¿™ä¸ªæ¼æ´ã€‚ç„¶è€Œï¼Œå°¤å…¶æ˜¯å¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œåœ¨é•¿æ—¶é—´è¡€æ¶²ä¸­çš„å’–å•¡æ°´å¹³å¤§å¤§ä½äºæ‰€éœ€æ°´å¹³åï¼Œå¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½æ‰¾å‡ºåŸå› ã€‚ä¸è¿‡æœ‰ä¸€ä¸ªéå¸¸ç®€å•çš„è¡¥æ•‘æ–¹æ³•ã€‚é€šè¿‡å°†`firstName`å’Œ`lastName`å£°æ˜ä¸ºå¸¸é‡å˜é‡ï¼Œç¼–è¯‘å™¨ä¸ºæˆ‘ä»¬æ•æ‰åˆ°äº†é”™è¯¯:

```
lastName = parts[0] // Error: Cannot assign 'lastName' because it is a constant or a read-only property
firstName = parts[1] // Error: Cannot assign 'firstName' because it is a constant or a read-only property 
```

Enter fullscreen mode Exit fullscreen mode

æœ€åˆå‘å¸ƒäº [brightinventions.pl](https://brightinventions.pl/blog/)

ä½œè€… Piotr Mionskowskiï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆ@å…‰æ˜å‘æ˜
[é‚®ç®±](//piotr.mionskowski@brightinventions.pl) [Stackoverflow](https://stackoverflow.com/users/155213/miensol) [ä¸ªäººåšå®¢](https://miensol.pl/)