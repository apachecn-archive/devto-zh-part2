# åŒ…èµ·æ¥ğŸ’°Javascript ä¸­çš„è´ªå©ªç®—æ³•

> åŸæ–‡:[JavaScript-3gac ä¸­çš„ https://dev.to/albertywu/bag-it-up è´ªå©ªç®—æ³•](https://dev.to/albertywu/bag-it-up--greedy-algorithms-in-javascript-3gac)

* * *

#### [](#overview)æ¦‚è¿°

javascript å·¥ç¨‹å¸ˆä»¬ä¸å¤ªç†è§£çš„ä¸€ä¸ªæƒ³æ³•(é™¤éä½ ç¢°å·§åœ¨ä¸ºé¢è¯•åšå‡†å¤‡)æ˜¯è´ªå©ªç®—æ³•çš„ä½¿ç”¨ã€‚ä¸€ä¸ª[è´ªå©ªç®—æ³•](https://en.wikipedia.org/wiki/Greedy_algorithm)åšå‡ºå½“å‰çœ‹èµ·æ¥æœ€å¥½çš„é€‰æ‹©ï¼Œå¹¶è§£å†³éšåå‡ºç°çš„å­é—®é¢˜ã€‚ç”¨ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»æ¥è¯´ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªå­é—®é¢˜çš„ç»“æœæ”¾åœ¨ä¸€ä¸ªâ€œè¢‹å­â€é‡Œï¼Œç„¶åç”¨æ›´å°çš„å­é—®é¢˜æ¥é‡å¤ã€‚å½“å­é—®é¢˜ä¸ºç©ºæ—¶(æ²¡ä»€ä¹ˆå¯åšçš„äº†)ï¼Œæˆ‘ä»¬è¿”å›åŒ…ä¸­çš„å†…å®¹ã€‚

äº‹å®è¯æ˜ï¼Œè¿™ç§ç­–ç•¥å¯ä»¥ä¸ºå®é™…é—®é¢˜å¸¦æ¥ä¸€äº›éå¸¸ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æ¢ç´¢å››ä¸ªçœ‹ä¼¼ä¸åŒçš„é—®é¢˜ï¼Œå®ƒä»¬æœ‰å‡ ä¹ç›¸åŒçš„è§£å†³æ–¹æ¡ˆ(æç¤º:å®ƒä»¬éƒ½ä½¿ç”¨è´ªå©ªç®—æ³•)ã€‚æœ€åï¼Œæˆ‘ä»¬å°†ä»”ç»†çœ‹çœ‹æ‰€æœ‰å››ä¸ªé—®é¢˜çš„å…±åŒç»“æ„ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼

* * *

#### [](#example-coin-change-problem)ä¸¾ä¾‹:ç¡¬å¸æ‰¾é›¶é—®é¢˜

```
You are given coins of different denominations and a total amount of 
money. Write a function that returns the smallest set of coins that 
sums to that amount. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ç»§ç»­ä¹‹å‰ï¼ŒèŠ±ç‚¹æ—¶é—´è€ƒè™‘ä¸€ä¸‹ä½ ä¼šæ€ä¹ˆåšâ€¦(ç­”æ¡ˆå°±åœ¨ä¸‹é¢)

* * *

```
function makeChange(amount, coins, bag = []) {
  if (amount === 0) return bag
  let largestCoin = getLargestCoin(amount, coins)
  return makeChange(amount - largestCoin, coins, bag.concat([largestCoin]))
}

function getLargestCoin(amount, coins) {
  let sortedCoins = coins.sort((a, b) =\> a - b)
  for (let i = sortedCoins.length - 1; i \>= 0; i--) {
    if (sortedCoins[i] \<= amount) return sortedCoins[i]
  }
  throw new Error('no coin that divides amount')
}

console.log(
  makeChange(42, [1, 5, 10, 25])
)
// [25, 10, 5, 1, 1] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä¿å­˜ä¸€ä¸ªç¡¬å¸â€œåŒ…â€ï¼Œå¹¶é€’å½’åœ°å°†ç¬¦åˆæˆ‘ä»¬é€‰æ‹©æ ‡å‡†çš„ç¡¬å¸æ·»åŠ åˆ°åŒ…ä¸­ã€‚å¦‚æœæœ€å¤§çš„ç¡¬å¸æœ‰å€¼`C`ï¼Œæˆ‘ä»¬å°†`C`æ·»åŠ åˆ°è¢‹å­ä¸­ï¼Œå¹¶ç”¨`amount - C`è°ƒç”¨`makeChange`ã€‚è¿™ä¸€ç›´æŒç»­åˆ°`amount`ä¸º 0ï¼Œå¹¶ä¸”ç¡¬å¸è¢‹è¢«è¿”å›ã€‚

å…³äºè¡¨è¾¾å¼`{ ...bag, ...{ [fn(array[0])]: matches } }`çš„ä¸€ä¸ªå¿«é€Ÿæ³¨é‡Šï¼Œå› ä¸ºé‚£é‡Œå‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ã€‚é¦–å…ˆï¼Œ`{ ...a, ...b }`æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿™å«åš[ç‰©ä½“å±•å¼€](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#Spread_in_object_literals)ã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆå°†å¯¹è±¡ a å’Œ b æ”¾åœ¨ä¸€èµ·åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚æ‰€ä»¥`{ ...bag, ...somethingElse }`ä¼šæŠŠå¯¹è±¡`bag`å’Œå¯¹è±¡`somethingElse`ç»“åˆèµ·æ¥ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œ`somethingElse`æ˜¯å¯¹è±¡`{ [fn(array[0])]: matches }`ï¼Œå®ƒæ˜¯æˆ‘ä»¬è¦æ’å…¥åŒ…ä¸­çš„æ–°ç»„ã€‚

æˆ‘ä¹Ÿæ¥è§£é‡Šä¸€ä¸‹`{ [key]: value }`å’Œ`{ key: value }`çš„åŒºåˆ«ã€‚é‚£äº›æ–¹æ‹¬å·è¡¨ç¤º[è®¡ç®—å±æ€§](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names)ã€‚ä½ å¯ä»¥æŠŠä»»ä½•è¡¨è¾¾å¼æ”¾åœ¨æ–¹æ‹¬å·ä¹‹é—´ï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„å€¼å°†æˆä¸ºé”®å€¼ã€‚å› æ­¤ï¼Œä¾‹å¦‚`{ [1 + 1]: 2}`å°†ä¸`{ 2: 2 }`ç›¸åŒã€‚

* * *

#### [](#example-groupby)ä¾‹å¦‚:groupBy

```
Implement the "groupBy" function which takes an array A and a function F,
and returns an object composed of keys generated from the results of 
running each element of A through F. The corresponding value of each key 
is an array of elements responsible for generating the key. 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ç»§ç»­ä¹‹å‰ï¼ŒèŠ±ç‚¹æ—¶é—´è€ƒè™‘ä¸€ä¸‹ä½ ä¼šæ€ä¹ˆåšâ€¦(ç­”æ¡ˆå°±åœ¨ä¸‹é¢)

* * *

```
/*
  input: [6.1, 4.2, 6.3]
  function: Math.floor
  output: { '4': [4.2], '6': [6.1, 6.3] }
*/

function groupBy(array, fn, bag = {}) {
  if (array.length === 0) return bag
  let matches = array.filter(x =\> fn(x) === fn(array[0]))
  let rest = array.filter(x =\> fn(x) !== fn(array[0]))
  return (
    groupBy(
    rest,
    fn,
    { ...bag, ...{ [fn(array[0])]: matches } }
    )
  )
}

console.log(
  groupBy([6.1, 4.2, 6.3], Math.floor)
)
// { '4': [4.2], '6': [6.1, 6.3] } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¿ç•™ä¸€ä¸ªç»„â€œåŒ…â€ï¼Œå¹¶é€’å½’åœ°å°†ç¬¦åˆæˆ‘ä»¬é€‰æ‹©æ ‡å‡†çš„ç»„æ·»åŠ åˆ°åŒ…ä¸­ã€‚ç„¶åç”¨æ›´æ–°åçš„åŒ…è°ƒç”¨å‰©ä½™å…ƒç´ ä¸Šçš„`groupBy`ã€‚è¿™ä¸€ç›´æŒç»­åˆ°åŸå§‹æ•°ç»„ä¸ºç©ºï¼Œè¢‹å­è¢«è¿”å›ã€‚

* * *

#### [](#example-activity-selection-problem)ä¸¾ä¾‹:æ´»åŠ¨é€‰æ‹©é—®é¢˜

å¦ä¸€ä¸ªç»å…¸é—®é¢˜æ˜¯[æ´»åŠ¨é€‰æ‹©é—®é¢˜](https://en.wikipedia.org/wiki/Activity_selection_problem)ã€‚

```
Imagine you are trying to schedule a room for multiple competing events, 
each having its own time requirements (start and end time). How do you 
schedule the room such that you can host the maximum number of events 
with no scheduling conflicts? 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ç»§ç»­ä¹‹å‰ï¼ŒèŠ±ç‚¹æ—¶é—´è€ƒè™‘ä¸€ä¸‹ä½ ä¼šæ€ä¹ˆåšâ€¦(ç­”æ¡ˆå°±åœ¨ä¸‹é¢)

* * *

```
class Appointment {
  constructor(name, from, to) {
    this.name = name
    this.from = from
    this.to = to
  }
}

// push new appointments onto bag one-by-one until no more appointments are left
function getMaxAppointments(appointments, bag = []) {
  if (appointments.length === 0) return bag
  let selectedAppointment = appointments.sort((a, b) =\> a.to - b.to)[0] // sort from earliest end to latest end
  let futureCandidates = appointments.filter(a =\> a.from \> selectedAppointment.to)
  return getMaxAppointments(
    futureCandidates,
    bag.concat([selectedAppointment])
  )
}

let a1 = new Appointment('brush teeth', 0, 2)
let a2 = new Appointment('wash face', 1, 3)
let a3 = new Appointment('make coffee', 3, 5)
let a4 = new Appointment('blowdry hair', 3, 4)
let a5 = new Appointment('take shower', 4.5, 6)
let a6 = new Appointment('eat cereal', 7, 10)

console.log(
  getMaxAppointments([a1, a2, a3, a4, a5, a6]).map(a =\> a.name)
) 
// ['brush teeth', 'blowdry hair', 'take shower', 'eat cereal'] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

#### [](#example-collect-anagrams)ä¸¾ä¾‹:æ”¶é›†å­—è°œ

å¯¹äºæˆ‘ä»¬çš„æœ€åä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†è€ƒè™‘å¯¹å­—è°œè¿›è¡Œåˆ†ç»„çš„é—®é¢˜ã€‚

```
Given an array of strings, group anagrams together.

For example:
Input: ["eat", "tea", "tan", "ate", "nat", "bat"],
Output:
[
  ["ate","eat","tea"],
  ["nat","tan"],
  ["bat"]
] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ç»§ç»­ä¹‹å‰ï¼ŒèŠ±ç‚¹æ—¶é—´è€ƒè™‘ä¸€ä¸‹ä½ ä¼šæ€ä¹ˆåšâ€¦(ç­”æ¡ˆå°±åœ¨ä¸‹é¢)

* * *

```
function collectAnagrams(words, bag = []) {
  if (words.length === 0) return bag
  let matches = words.filter(w =\> isAnagram(w, words[0]))
  let rest = words.filter(w =\> !isAnagram(w, words[0]))
  return collectAnagrams(
    rest,
    bag.concat([matches])
  )
}

function stringSorter(a, b) { return a.localeCompare(b) }

function isAnagram(a, b) {
  let aSorted = a.toLowerCase().split('').sort(stringSorter).join('')
  let bSorted = b.toLowerCase().split('').sort(stringSorter).join('')
  return aSorted === bSorted
}

let x = ['bag', 'gab', 'foo', 'abg', 'oof', 'bum']
console.log(collectAnagrams(x))
// [['bag', 'gab', 'abg'], ['foo', 'oof'], ['bum']] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

#### [](#the-common-structure)å¸¸è§çš„ç»“æ„

é‚£ä¹ˆæ‰€æœ‰è¿™äº›é—®é¢˜æœ‰ä»€ä¹ˆå…±åŒç‚¹å‘¢ï¼Ÿå¯¹äºå¾ªç¯ä¸­çš„æ¯æ¬¡è¿­ä»£ï¼Œæˆ‘ä»¬ä»è¾“å…¥ä¸­é€‰æ‹©ä¸€ä¸ªé¡¹ç›®å­é›†ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°åŒ…ä¸­ã€‚å‰©ä½™çš„é¡¹ä½œä¸ºä¸‹ä¸€ä¸ªè¾“å…¥ä¼ é€’ç»™å¾ªç¯çš„ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚å½“è¾“å…¥ä¸ºç©ºæ—¶ï¼Œæˆ‘ä»¬è¿”å›è¢‹å­ã€‚

ä½¿ç”¨æˆ‘ä»¬çš„ groupBy ç¤ºä¾‹ï¼Œä¸‹å›¾å¯èƒ½æœ‰åŠ©äºæ¾„æ¸…é—®é¢˜:

[![visualization](../Images/b32cadd9c508adeb1a20a89898ea87f1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--9PpHA1OT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/1920766/45563508-693f4680-b802-11e8-9891-1879d832b4ff.jpg)

å¦‚æœä½ å¯¹ä¼ªä»£ç æ›´ç†Ÿæ‚‰ï¼Œè¿™é‡Œæ˜¯æˆ‘ä»¬åœ¨å‰é¢æ‰€æœ‰ä¾‹å­ä¸­ä½¿ç”¨çš„æ¨¡å¼:

```
function bagItUp(things, bag = []) {
  if (things is empty) return bag
  let thingsToPutInBag = ...
  let restOfThings = ...
  return bagItUp(
    restOfThings,
    bag + thingsToPutInBag
  ) 
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

#### [](#connect)è¿æ¥

ä½ æ€ä¹ˆæƒ³å‘¢?ä½ åœ¨å·¥ä½œæˆ–ä¸ªäººé¡¹ç›®ä¸­æœ‰æ²¡æœ‰ç”¨è´ªå¿ƒç®—æ³•è§£å†³è¿‡ç±»ä¼¼çš„é—®é¢˜ï¼Ÿè¯·åœ¨ä¸‹é¢çš„è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼Œæˆ–è€…åœ¨ [twitter](https://twitter.com/albertywu) ä¸Šå‘Šè¯‰æˆ‘ï¼