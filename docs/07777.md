# æœ¬åœ°è£…è½½ Docker å·

> åŸæ–‡:[https://dev.to/adamkdean/mount-docker-volume-locally-59mg](https://dev.to/adamkdean/mount-docker-volume-locally-59mg)

ç¼–è¾‘ 2021 å¹´ 10 æœˆ 25 æ—¥:ä¼¼ä¹è¿™ä¸å†ç®¡ç”¨ã€‚è¿™å°±æ˜¯è§£å†³åŠæ³•ã€‚

è¿™æ˜¯å¾ˆé…·çš„ä¸œè¥¿ã€‚

æ‚¨å¯ä»¥æ‹¥æœ‰ä¸€ä¸ª docker å·`docker volume create example`ï¼Œå¹¶ä¸”å¯ä»¥å°†è¯¥å·æŒ‚è½½åˆ°ä¸€ä¸ªå®¹å™¨`docker run -v example:/path image`ã€‚æ‚¨è¿˜å¯ä»¥å°†æœ¬åœ°ç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œ`docker run -v $(pwd)/local:/path image`ã€‚ä½†æ˜¯æ‚¨ä¸èƒ½å°†æœ¬åœ°ç›®å½•æŒ‚è½½åˆ°å·ä¸Šã€‚

åœºæ™¯:æ‚¨æœ‰ä¸€ä¸ªå·ï¼Œæ‚¨æœ‰ä¸€ä¸ªä½¿ç”¨è¯¥å·çš„å®¹å™¨ï¼Œå¹¶ä¸”æ‚¨æœ‰ä¸€äº›éœ€è¦åœ¨ docker ä¹‹å¤–æœ¬åœ°è®¿é—®è¯¥å·æ•°æ®çš„è½¯ä»¶ã€‚

ğŸš«`docker run -v $(pwd)/local:example image`æ²¡ç”¨ã€‚

ä½ ä¹Ÿä¸èƒ½åœ¨åŒä¸€ä¸ªåœ°æ–¹å®‰è£…ä¸¤ä¸ªä¸œè¥¿ã€‚

ğŸš«ä¹Ÿä¸ä¼šèµ·ä½œç”¨ã€‚

è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸­é—´ç¬¦å·é“¾æ¥å®¹å™¨ã€‚

æˆ‘ç§°è¿™ä¸ªè§£å†³æ–¹æ¡ˆä¸ºåœ°å›¾ä½“ç§¯ã€‚

```
#
# map volume
#
FROM busybox
RUN mkdir /volume
RUN ln -s /local /volume
CMD tail -f /dev/null 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨è¿™ä¸ª docker æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç›®å½•(ç¨åå°†ç”¨ä½œæŒ‚è½½ç‚¹)ï¼Œç„¶åæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘ç›¸åŒä½ç½®çš„ symlink ç›®å½•ã€‚

```
$ docker build -t mapvolume .
$ docker volume create my_precious_data
$ docker run -d -v my_precious_data:/volume -v $(pwd)/my_precious_data:/local mapvolume 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå·`my_precious_data`ï¼Œç„¶åè¿è¡Œ mapvolumeï¼Œé¦–å…ˆå°†å·`my_precious_data`æŒ‚è½½åˆ°å®¹å™¨è·¯å¾„`/volume`ï¼Œç„¶åå°†æœ¬åœ°ç›®å½•`$(pwd)/my_precious_data`æŒ‚è½½åˆ°å®¹å™¨è·¯å¾„`/local`ï¼Œæ­£å¦‚æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œå®ƒå®é™…ä¸Šæ˜¯`/volume`ã€‚

ç°åœ¨ï¼Œæ‚¨å·²ç»å°† docker å·æŒ‚è½½åˆ°äº†æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚

**æ›´æ–°:**æˆ‘ä»Šå¤©æ„è¯†åˆ°åŸæ¥çš„ dockerfile æ–‡ä»¶ä¸ä¼šç»§ç»­å­˜åœ¨äº†ã€‚å› æ­¤ï¼Œæˆ‘å°† CMD æ”¹ä¸º`CMD tail -f /dev/null`,ä»¥ä¿æŒå®¹å™¨æ´»åŠ¨ã€‚æ„Ÿè°¢[bigdatums.net](http://bigdatums.net/2017/11/07/how-to-keep-docker-containers-running/)å¸¦æ¥çš„ç‰‡æ®µã€‚