# 那天我黑了特洛伊·亨特的网站删除了我的数据

> 原文:[https://dev . to/prj seal/the-day-I-hacked-troy-hunts-website-to-delete-my-data-1j7c](https://dev.to/prjseal/the-day-i-hacked-troy-hunts-website-to-delete-my-data-1j7c)

## 让我们从头开始

那天早上，我正在听我最喜欢的播客之一， [MS DEV Show](http://msdevshow.com/) 。他们就网络安全采访了特洛伊·亨特。从密码安全到数据泄露，甚至是成人玩具中的 IOT。有一件事引起了我的兴趣，那就是 Troy 建立了一个允许你破解它的网站。它叫做 http://hack-yourself-first.com，上面有大约 50 个漏洞和不良做法。他要求我们尝试找出漏洞，看看我们能否自己破解。

## 接受挑战

我自己没有做过太多的黑客工作，但是我意识到作为一个网站开发者，我应该知道我的网站可能面临的黑客漏洞。因此，我需要能够抵御他们。特洛伊有一门 [pluralsight 课程](https://pluralsight.pxf.io/c/1192775/424552/7490?u=https%3A%2F%2Fwww.pluralsight.com%2Fcourses%2Fhack-yourself-first)，如果你想找出所有的漏洞，它会引导你通过所有的漏洞。

## 让我们做一些乌合之众编程

我把它展示给我的同事，我们开了一个团队会议，看看我们能发现什么。我们看到了一些基本错误，比如将密码和电子邮件存储为 cookies，以及更改 url 值以查看其他用户的详细信息等。其中的很多我就不多提了，因为我觉得自己去经历是有价值的。我们观察了一段时间，大多数漏洞都很简单，我们认为它们并没有反映现实生活，但我们必须记住，这些是人们确实会犯的错误的例子。我们至少很高兴我们的网站没有这些漏洞。

## 我错在这里

我在测试注册表格，所以我输入了我的名字和工作电子邮件地址，但是没有办法在用户资料界面编辑它。我可以黑掉网站给自己管理员权限。我可以看到所有用户及其密码的完整列表，包括我的。这意味着其他黑客也可以看到我的工作邮箱地址。我担心这会让我成为黑客的目标。因此，为了删除我输入的电子邮件地址，学习 SQL 注入符合我们的利益。

## 我们需要做一些适当的黑客工作

我们能想到的删除我的电子邮件地址的唯一方法是使用 SQL 注入。 [SQL 注入](https://www.owasp.org/index.php/SQL_Injection)长期以来一直是网站的头号漏洞。Troy 肯定让这个站点对 SQL 注入保持开放，否则如果这个站点不能展示最大的问题，那么它还有什么意义呢？我们没走多远。我们首先更改一个 URL，使其返回所有结果，而不仅仅是查询字符串中的值。我们尝试了几种不同的方法，最终成功了，这意味着我们成功了。

## SQL 注入示例

这个 url 使用 SQL 注入来获得所有结果

[http://hack-yourself-first.com//CarsByCylinders?气缸= V6 % 27% 20 或%201%3D1%20 - %27](http://hack-yourself-first.com//CarsByCylinders?Cylinders=V6%27%20OR%201%3D1%20--%27)

## 现在我们可以使用 SQL 注入，我们需要清除我的数据

为了能够更新我的电子邮件地址，我们首先需要知道这个表的名称。凭借一点 SQL 知识和谷歌搜索，我们设法让它列出数据库中所有的表名。这感觉太棒了。我们正在成为 l33t 黑客。接下来，我们需要找出我的电子邮件地址存储在哪个表中。我们尝试了几个会员表，但在用户名或电子邮件栏上没有任何进展。然后我们意识到它必须存储在用户配置文件表中。我们编写了一个查询来告诉我们用户配置文件表中的列名，果然它有一个 email 列。答对了。我们编写了一个查询，将我的电子邮件地址更新为不同的地址。当我们查询表格，看到我的电子邮件地址已经不在那里，但我的新电子邮件地址在那里，这种感觉真好。

## 好了接下来呢？

我们就这样算了吗？当然不是。你什么时候有机会破坏别人真正的网站而不让他们生你的气？毕竟这是他的挑战。我们试图截断和丢弃一些表，但它不允许。所以我们改成只删除记录。我们设法从站点的主表中删除了所有记录。成功了。在那之后，数据就消失了。该网站不再正常工作，我们感到非常自豪。

## 结论

作为一组开发人员，这是一个很好的团队练习。我们都提出了自己的想法，我们都学到了很多。你一定要看看这个网站，看看你能发现哪些漏洞。我故意没有告诉你我们是如何做的细节，因为这是一个学习练习，我认为如果我只给你答案，你不会学到。如果您正在努力找出漏洞，或者您想要了解如何进行 SQL 注入，您可能需要参加 [pluralsight 课程](https://pluralsight.pxf.io/c/1192775/424552/7490?u=https%3A%2F%2Fwww.pluralsight.com%2Fcourses%2Fhack-yourself-first)，您可以获得 10 天的免费试用。