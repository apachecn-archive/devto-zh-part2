# ä»‹ç»åˆºæ¿€-Flatpickr åŒ…è£…å™¨ğŸ“…

> åŸæ–‡:[https://dev . to/adrienpoly/introducing-stimulus-flat pickr-wrapper-5c 23](https://dev.to/adrienpoly/introducing-stimulus-flatpickr-wrapper--5c23)

è‡ªä»ä»Šå¹´å¹´åˆå‘å¸ƒä»¥æ¥ï¼Œæˆ‘çœŸçš„å¾ˆå–œæ¬¢ä½¿ç”¨åˆºæ¿€æ–¹æ¡ˆã€‚è¿™ä¸€æ¬¡ï¼Œæˆ‘å¯ä»¥è½»æ¾åœ°ç»„ç»‡æˆ‘çš„ JS ä»£ç ï¼Œè€Œä¸éœ€è¦ä¸€ä¸ªæˆç†Ÿçš„å‰ç«¯æ¡†æ¶ã€‚

Stimulus-flatpickr wrapper ä½œä¸ºä¸€ä¸ªå®éªŒå¼€å§‹ï¼Œæˆ‘éœ€è¦åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ flatpickrï¼Œå¹¶ä¸ºå®ƒæ„å»ºä¸€ä¸ªåˆºæ¿€æ§åˆ¶å™¨ã€‚æˆ‘å¾ˆå¿«æ„è¯†åˆ°ä¸ºè¿™ä¸ªåº“é…å¤‡ä¸€ä¸ªé€šç”¨çš„åˆºæ¿€æ§åˆ¶å™¨æ˜¯æœ‰æ„ä¹‰çš„ã€‚

ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªç®€å•è€Œæœ‰è¶£çš„ä¾‹å­æ¥æ¼”ç¤ºè¿™ä¸ªåŒ…ã€‚æˆ‘æœ€è¿‘ç”¨æ—¥æœŸé€‰æ‹©å™¨å·¥ä½œäº†ä¸€æ®µæ—¶é—´ï¼Œæ„è¯†åˆ°å°†ä¸€ä¸ªå­—æ®µè½¬æ¢æˆæ—¥æœŸé€‰æ‹©å™¨æ€»æ˜¯éå¸¸ç®€å•çš„ï¼Œä½†æ˜¯è¦ä½¿å®ƒæˆä¸ºä¸€ä¸ªçœŸæ­£æ˜“äºä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œè¿˜éœ€è¦å¾ˆå¤šå°ç»†èŠ‚ã€‚

**ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„é¢„è®¢ç³»ç»Ÿï¼Œç”¨æˆ·:**

*   åªèƒ½é€‰æ‹©å¯ç”¨æ—¥æœŸ(å·²ç»é¢„è®¢çš„æ—¥æœŸå¿…é¡»ç¦ç”¨)
*   è·å–ä»¥ä»–çš„è¯­è¨€æ˜¾ç¤ºçš„æ—¥æœŸé€‰æ‹©å™¨
*   æŸ¥çœ‹åŒºåŸŸè®¾ç½®æ ¼å¼çš„è¾“å…¥å­—æ®µä¸­çš„æ—¥æœŸ
*   æŸ¥çœ‹æ‰€æœ‰é¢„è®¢çš„åˆ—è¡¨
*   æ‰€æœ‰è¿™äº›éƒ½åœ¨ä¸€ä¸ªé¡µé¢åº”ç”¨ç¨‹åºä¸­å¾—åˆ°äº†å¾ˆå¥½çš„ä½“ç°

æ ˆç›¸å½“ç®€å•:Railsã€Stimulusã€Turbolinks å’Œç”¨äºæ—¥æœŸé€‰æ‹©è§£å†³æ–¹æ¡ˆçš„ Flatpickrã€‚

æœ€ç»ˆï¼Œæˆ‘ä»¬å°†ä¸å†éœ€è¦ä»»ä½• Ajaxï¼Œåªéœ€è¦ä¸åˆ° 10 è¡Œçš„ Javascript ä»£ç å°±å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ğŸ‰ğŸ‰ğŸ‰

## [](#lets-get-started-new-app-and-stimulus-setup)è®©æˆ‘ä»¬å¼€å§‹:æ–°åº”ç”¨ç¨‹åºå’Œåˆºæ¿€è®¾ç½®

è¿™é‡Œæœ‰å‡ ä¸ªæ•™ç¨‹ï¼Œæˆ‘ä¸ä¼šæ¶‰åŠæ‰€æœ‰çš„ç»†èŠ‚ï¼Œä½†æ˜¯å¦‚æœä½ å·²ç»å®‰è£…äº† webpackï¼Œåœ¨ä½ çš„ Rails åº”ç”¨ç¨‹åºä¸­è®¾ç½®æ¿€åŠ±å°±æ˜¯è¿™ä¹ˆç®€å•:

```
rails webpacker:install:stimulus 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†å‘æ‚¨çš„`package.json`æ·»åŠ åˆºæ¿€åŒ…ï¼Œåœ¨æ‚¨çš„ä¸»`application.js`æ–‡ä»¶ä¸­æ·»åŠ åˆå§‹åŒ–ä»£ç ï¼Œå¹¶åœ¨ javascript ä¸‹ä¸ºæ‚¨æ‰€æœ‰çš„æ–°`Stimulus`æ§åˆ¶å™¨æ·»åŠ ä¸€ä¸ªæ–°çš„æ§åˆ¶å™¨ç›®å½•

ä½ å¯ä»¥é˜…è¯»è¿™ç¯‡æ–‡ç« æ¥äº†è§£æ›´å¤šå…³äºåœ¨ä½ çš„ rails ä¸­è®¾ç½®æ¿€åŠ±çš„ç»†èŠ‚

åœ¨ä»Šå¤©çš„æ¼”ç¤ºä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„åº”ç”¨ç¨‹åº

```
 rails new --webpack=stimulus stimulus-flatpickr 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

...åˆ«å¿˜äº†æ·»åŠ åŒ…è£…

```
 #app/views/layouts/application.html.erb
  ...
  <%= stylesheet_pack_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  ... 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#appointment-model-and-controller)é¢„çº¦æ¨¡å¼å’Œæ§åˆ¶å™¨

æˆ‘ä»¬æ­£åœ¨åšä¸€ä¸ªé¢„è®¢å¼•æ“ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…·æœ‰å•åˆ— start_at date å’Œä¸€ä¸ªç”¨äºè·å–æ¥ä¸‹æ¥ n å¤©çš„`up_comings`çº¦ä¼šçš„`scope`æ–¹æ³•çš„çº¦ä¼šæ¨¡å‹(æˆ‘ä»¬åªèƒ½é¢„è®¢æ¥ä¸‹æ¥ 60 å¤©çš„çº¦ä¼š)ã€‚

```
#models/appointment.rb
class Appointment < ApplicationRecord
  validates :start_at, uniqueness: true

  scope :up_comings, ->(nb_days) {
                       where('start_at >= ? AND start_at < ?',
                             Time.zone.now,
                             Time.zone.now + nb_days.days).order(start_at: :asc)
                     }
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬çš„æ§åˆ¶å™¨éå¸¸æ ‡å‡†(ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåªå¤„ç†æˆåŠŸè·¯å¾„ğŸ‘¶æ— é”™è¯¯ç®¡ç†)

```
class AppointmentsController < ApplicationController
  before_action :set_appointment, only: %i[update destroy]

  def index
    @appointments = Appointment.up_comings(60)
    @appointments_dates = @appointments.pluck(:start_at)
    @appointment = Appointment.new
  end

  def create
    redirect_to appointments_path if Appointment.create(appointment_params)
  end

  def update
    redirect_to appointments_path if @appointment.update(appointment_params)
  end

  def destroy
    @appointment.destroy
    redirect_to appointments_path
  end

  private

  def set_appointment
    @appointment = Appointment.find(params[:id])
  end

  def appointment_params
    params.require(:appointment).permit(:start_at)
  end
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#stimulusflatpickr-controller)åˆºæ¿€-flatpickr æ§åˆ¶å™¨

æ ¹æ®[æ–‡æ¡£](https://github.com/adrienpoly/stimulus-flatpickr#advanced-usage)ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåˆºæ¿€æ§åˆ¶å™¨ï¼Œå®ƒå°†æ‰©å±•é€šç”¨åˆºæ¿€-flatpickr æ§åˆ¶å™¨ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ·»åŠ æˆ‘ä»¬å°†éœ€è¦çš„åŒ…

```
 yarn add stimulus-flatpickr 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶æ·»åŠ æ–°çš„æ§åˆ¶å™¨

```
// ./controllers/flatpickr_controller.js
import Flatpickr from "stimulus-flatpickr";
import "flatpickr/dist/themes/dark.css";

// creates a new Stimulus controller by extending stimulus-flatpickr wrapper controller
export default class extends Flatpickr {} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#the-views)è§‚ç‚¹

è®©æˆ‘ä»¬æ”¾ä¸€ä¸ªå°ç»“æ„ï¼Œå·¦è¾¹æ˜¯é¢„è®¢è¡¨å•ï¼Œå³è¾¹æ˜¯å³å°†åˆ°æ¥çš„çº¦ä¼šåˆ—è¡¨ã€‚

```
#app/views/appointments/index.html.erb
<div class="main">
  <h2><%= t ".title" %></h2>
  <div class="row">
    <div class="col">
      <h3><%= t ".new" %></h3>
      <%= render "form", appointment: @appointment %>
    </div>
    <div class="col">
      <h3><%= t ".appointments" %></h3>
      <%= render @appointments %>
    </div>
  </div>
</div>

#app/views/appointments/_appointment.html.erb
<div class="appointments">
  <%= render "form", appointment: appointment %>
  <%= link_to "x", appointment_path(appointment), method: :delete%>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»¥åŠæˆ‘ä»¬çš„å½¢å¼ï¼Œæ‰€æœ‰çš„é­”æ³•éƒ½å°†åœ¨é‚£é‡Œå‘ç”ŸğŸ‰

```
#app/views/appointments/_form.html.erb
<%= form_with model: appointment do |f| %>
  <%= f.text_field :start_at,
      data: {
        controller: "flatpickr",
        flatpickr_min_date: Time.zone.now,
        flatpickr_max_date: Time.zone.now + 60.days,
        flatpickr_disable: Appointment.up_comings(60).pluck(:start_at),
      } %>
<% end %> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

**è¿™æ˜¯ç†è§£**çš„é‡è¦éƒ¨åˆ†:

æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª`flatpickr_controller.js`ï¼Œæ‰€ä»¥æ¯å½“ä¸€ä¸ª HTML å…ƒç´ æœ‰ä¸€ä¸ª`data-controller="flatpickr"`å±æ€§æ—¶ï¼Œåˆºæ¿€æ§åˆ¶å™¨å°±ä¼šå¼€å§‹åŠ¨ä½œã€‚

å› æ­¤ï¼Œåœ¨è§†å›¾ä¸­ï¼Œ`data: { controller: "flatpickr" }`å°†è¢«è½¬æ¢ä¸º`data-controller="flatpickr"`,ä»è€Œå°†è¯¥å­—æ®µè½¬æ¢ä¸º datepickerã€‚

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ•°æ®å±æ€§(`data-flatpickr-the-kebab-case-option-name)`)å°†é€‰é¡¹ä¼ é€’ç»™ datepickerã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªæœ€å°å’Œæœ€å¤§æ—¥æœŸæ¥ç¦ç”¨ä»Šå¤©ä¹‹å‰çš„æ‰€æœ‰å†…å®¹å’Œä»Šå¤©+ 60 å¤©ä¹‹åçš„æ‰€æœ‰å†…å®¹ã€‚

æ­¤å¤–ï¼Œæˆ‘ä»¬ä¸ºä¸‹ä¸€æ­¥åšå‡†å¤‡ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¼ é€’å½“å‰é¢„è®¢çš„æ•°ç»„æ¥ç¦ç”¨å·²ç»é¢„è®¢çš„æ—¥æœŸã€‚

## [](#submit-on-select)é€‰æ‹©æ—¶æäº¤

è®©ç”¨æˆ·é€‰æ‹©æ—¥æœŸæ—¶è‡ªåŠ¨æäº¤(ä¸å®Œç¾çš„ UXï¼æˆ‘çŸ¥é“ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†ç®€å•çš„æ¼”ç¤ºç›®çš„)ã€‚
flatpickr æ§åˆ¶å™¨å…·æœ‰æ‰€æœ‰å¯ç”¨çš„å®˜æ–¹ flat pickr æŒ‚é’©(æ‰“å¼€ã€å…³é—­ã€æ›´æ”¹ç­‰)ã€‚åœ¨è¿™é‡Œï¼Œå½“å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æäº¤è¡¨å•ã€‚æ‰€ä»¥è®©æˆ‘ä»¬é‡å†™`change()`å‡½æ•°ã€‚

```
export default class extends Flatpickr {
  // automatically submit form when a date is selected
  change(selectedDates, dateStr, instance) {
    const form = this.element.closest("form");
    Rails.fire(form, "submit");
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#going-live)å³å°†ä¸Šçº¿

æ­¤æ—¶æˆ‘ä»¬æœ‰ä»¥ä¸‹ç»“æœ:

[![stimulus-flatpickr demo](../Images/b16fcdab74350f9dd37a0f9edf2e0262.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--mCFSMUQY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/x73wolvxxqxovspv2cdu.gif)

æˆ‘ä»¬å¼€å§‹æœ‰ä¸€äº›äº’åŠ¨....é…·çš„æ˜¯é»˜è®¤å®‰è£…çš„ Turbolinks ä¼šè‡ªåŠ¨å¯åŠ¨å¹¶`Ajaxify`æ‰€æœ‰é“¾æ¥ã€‚æ‰€æœ‰çš„åˆºæ¿€æ§åˆ¶å™¨éƒ½æ˜¯ä¸ Turbolinks ä¸€èµ·è®¾è®¡çš„ã€‚**æ‰€ä»¥è¿™é‡Œä¸ç”¨åšåˆ«çš„ï¼Œå°±æ˜¯ç®¡ç”¨ï¼**ã€‚æ²¡æœ‰è‡ªå®šä¹‰ Ajax è°ƒç”¨æˆ– SRJ æ¥è·å¾—è¿™ä¸ª SPA çš„å¤–è§‚å’Œæ„Ÿè§‰ã€‚ğŸ’ª ğŸš€ â¤ï¸

## [](#localizing-the-date-picker-and-the-date-format)æœ¬åœ°åŒ–æ—¥æœŸé€‰æ‹©å™¨å’Œæ—¥æœŸæ ¼å¼

æˆ‘ä»¬æœ‰ä¸€ä¸ªæ°´ç–—å¤–è§‚å’Œæ„Ÿè§‰ï¼Œä»¥åŠæˆ‘ä»¬çš„é¢„è®¢å¼•æ“çš„å¯ç”¨æ€§ã€‚ä¸‹ä¸€æ­¥æ˜¯æ­£ç¡®åœ°å°†å…¶æœ¬åœ°åŒ–ã€‚ç›®å‰ï¼Œå®ƒåªæœ‰è‹±è¯­å’Œæ—¥æœŸæ ¼å¼ï¼Œå¦‚æœç›¸å½“éš¾çœ‹`2018-09-12`ğŸ‘ã€‚

#### [](#date-formats)æ—¥æœŸæ ¼å¼

stimulus-flatpickr åŒ…è£…å™¨æä¾›äº†ä¸€ä¸ªæ¯”æ ‡å‡†åº“æ›´å¥½çš„**é¢å¤–ç‰¹æ€§**ï¼Œå®ƒå°†æŠŠ`strftime`æ—¥æœŸæ ¼å¼è½¬æ¢æˆ flatpickr è‡ªå®šä¹‰æ—¥æœŸæ ¼å¼ã€‚

å› æ­¤ï¼Œä¸ºäº†å®šåˆ¶æ—¥æœŸæ ¼å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ¬åœ°æ ¼å¼ç›´æ¥ä¼ é€’ç»™æ—¥æœŸé€‰æ‹©å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
data: {
  controller: "flatpickr",
  flatpickr_alt_input: true,
  flatpickr_alt_format: t("date.formats.long"),
  flatpickr_default_date: appointment.start_at,
  flatpickr_disable: @appointments_dates - [appointment.start_at],
  flatpickr_min_date: Time.zone.now,
  flatpickr_max_date: Time.zone.now + 60.days,
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“åŒºåŸŸè®¾ç½®ä¸º`:en`æ—¶ï¼Œ`flatpickr_alt_format: t("date.formats.long")` - >å°†è¾“å‡º`"%B %d, %Y"`ï¼Œå½“åŒºåŸŸè®¾ç½®ä¸º`:fr`æ—¶ï¼Œ`"%e %B %Y"`å°†è‡ªåŠ¨è½¬æ¢ä¸ºæœ€è¿‘çš„ flatpickr æ ¼å¼ã€‚å°½å¯èƒ½çš„å¹²ç‡¥ğŸ‰ï¼

#### [](#translations)ç¿»è¯‘

æˆ‘ä»¬ç°åœ¨å‡ ä¹ä»€ä¹ˆéƒ½æœ‰äº†ã€‚æœ€åä¸€ç‚¹æ˜¯æ­£ç¡®ç¿»è¯‘æ¯ä¸ªåœ°åŒºçš„ datepickerã€‚

æˆ‘ä»¬å°†åœ¨åˆºæ¿€æ§åˆ¶å™¨ä¸­å¯¼å…¥ä¸åŒçš„åœ°åŒºã€‚æ¯å½“ Turbolinks æ— å£°åœ°æ›¿æ¢é¡µé¢çš„å†…å®¹æ—¶ï¼Œåˆºæ¿€æ§åˆ¶å™¨çš„`initialize()`å‡½æ•°å°±è¢«è°ƒç”¨ã€‚è¿™æ˜¯æˆ‘ä»¬å°†è¦è®¾ç½®å±€éƒ¨å˜é‡å¹¶å°†å…¶ä¼ é€’ç»™ flatpickr çš„åœ°æ–¹ã€‚

æˆ‘ä»¬æœ€ç»ˆçš„æ§åˆ¶å™¨æ˜¯è¿™æ ·çš„

```
import Flatpickr from "stimulus-flatpickr";

// import a theme (could be in your main CSS entry too...)
import "flatpickr/dist/themes/dark.css";

// import the translation files and create a translation mapping
import { French } from "flatpickr/dist/l10n/fr.js";
import { english } from "flatpickr/dist/l10n/default.js";

// create a new Stimulus controller by extending stimulus-flatpickr wrapper controller
export default class extends Flatpickr {
  locales = {
    fr: French,
    en: english
  };

  initialize() {
    //set the locale and also sets the global flatpickr settings 
    this.config = {
      locale: this.locale,
      altInput: true,
      showMonths: 2,
      animate: false
    };
  }

  // automatically submit form when a date is selected
  change(selectedDates, dateStr, instance) {
    const form = this.element.closest("form");
    Rails.fire(form, "submit");
  }

  get locale() {
    if (this.data.has("locale")) {
      return this.locales[this.data.get("locale")];
    }
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#thats-all-folks)é‚£éƒ½æ˜¯ä¹¡äº²ä»¬ï¼

[![stimulus-flatpickr demo](../Images/bd4d77c7299767ce1d56117e15deb87a.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--EkAlC1qA--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/i0xi1gv0keumrynau78r.gif)

ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ•´ä¸ªæ¼”ç¤ºé¡¹ç›®ğŸ‘‰[https://github.com/adrienpoly/rails_stimulus_flatpickr](https://github.com/adrienpoly/rails_stimulus_flatpickr)

**æ›´é‡è¦çš„**åˆºæ¿€-flatpickr åŒ…è£…å™¨ğŸ‘‰https://github.com/adrienpoly/stimulus-flatpickr

æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªä»‹ç»ã€‚æˆ‘ä¸ªäººè®¤ä¸ºï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°è¶Šæ¥è¶Šå¤šçš„æ ‡å‡†åˆºæ¿€æ§åˆ¶å™¨ï¼ŒRails ç¤¾åŒºå°†ä¼šè¶Šæ¥è¶Šå¤šåœ°æ”¾å¼ƒåªç”¨äºå‰ç«¯åŒ…çš„å®çŸ³ã€‚

æˆ‘ä¸æ˜¯ç»éªŒä¸°å¯Œçš„é«˜çº§å¼€å‘äººå‘˜ï¼Œæ‰€ä»¥è¯·éšæ„**è¯„è®ºã€é—®é¢˜ã€å…¬å…³**ã€‚ä»–ä»¬éƒ½æ˜¯å—æ¬¢è¿çš„ï¼Œå¦‚æœä½ è§‰å¾—è¿™ä¸ªåŒ…æ˜¯æœ‰ç”¨çš„ï¼Œç¦»å¼€å®ƒä¸€ä¸ªæ˜æ˜Ÿâ­

å¿«ä¹ç¼–ç ğŸ‰