# Azure Pipelines -å°† CI/CD ä» GitHub æ·»åŠ åˆ° Azure Functions âš¡

> åŸæ–‡:[https://dev . to/azure/azure-pipelines-adding-ci-CD-from-github-to-azure-functions-2d h6](https://dev.to/azure/azure-pipelines-adding-ci-cd-from-github-to-azure-functions-2dh6)

å»å¹´å‘å¸ƒäº† Azure Devopsã€‚ä¸ GitHub çš„ CI é›†æˆçœ‹èµ·æ¥å¾ˆæ•´æ´ï¼Œæ‰€ä»¥æˆ‘æƒ³æˆ‘åº”è¯¥åœ¨ä¸€äº›æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºä¸­å°è¯•ä¸€ä¸‹ã€‚

ä¸‹é¢æ˜¯æˆ‘å¦‚ä½•ç€æ‰‹é…ç½®ä¸€ä¸ªéå¸¸ç®€å•çš„è®¾ç½®ï¼

[![](../Images/e0fa2c217ba118b36bb270c4931bed0f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--E9sqdkx5--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AN8tgXcKNJ6eHOOzhXExsDQ.png)

å…ˆå†³æ¡ä»¶:

*   ä¸€ä¸ªç°æœ‰çš„ Azure åŠŸèƒ½ App â€” ( [æ•™ç¨‹](https://docs.microsoft.com/en-us/azure/azure-functions/functions-create-function-app-portal?WT.mc_id=fnciblog-devto-debryen))
*   GitHub å­˜å‚¨åº“ï¼Œå…¶ä¸­åŒ…å«æ‚¨çš„å‡½æ•°ä»£ç ã€‚å¦‚æœä½ æ²¡æœ‰ï¼Œå¯ä»¥åˆ†å‰æˆ‘çš„[è¶…çº§ç®€å•å‡½æ•°](https://github.com/deanobalino/functions-simple) repoï¼Œè·Ÿç€èµ°ã€‚

è®©æˆ‘ä»¬ä» GitHub å¸‚åœºçš„ Azure Pipelines æ’ä»¶å¼€å§‹ã€‚

[![](../Images/3e72f0feed0ca78487dd4bfe6ca50b88.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--qVk-qTi8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2Az6LyL8U8YFG9_yorn0tfRA.png)

è®©æˆ‘ä»¬ç€æ‰‹åˆ¶å®šä¸€ä¸ªè®¡åˆ’ã€‚

[![](../Images/a7fef6dee981a54962bb6a22e5205346.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Vt3JmZEd--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A5EXPH3EFFBMfs8vOsKNUUg.png)

Azure Pipelines å¯¹å…¬å…±å’Œç§äººé¡¹ç›®éƒ½æ˜¯å…è´¹çš„ï¼Œå…¬å…±åº“ç”šè‡³å¯ä»¥å…è´¹è·å¾— 10 ä¸ªå¹¶è¡Œä½œä¸šã€‚å› æ­¤ï¼Œé™¤éæ‚¨çš„ç§æœ‰å­˜å‚¨åº“éœ€è¦å¤šä¸ªå¹¶è¡Œä½œä¸šï¼Œæˆ‘ä»¬åœ¨æœ¬æ•™ç¨‹ä¸­è‚¯å®šä¸éœ€è¦ï¼Œå¦åˆ™æ‚¨å¯ä»¥é€‰æ‹© free è®¡åˆ’ã€‚

ç»§ç»­å®‰è£… marketplace åº”ç”¨ç¨‹åºï¼Œå¹¶ç™»å½•åˆ°æ‚¨çš„ Azure å¸æˆ·ã€‚æ‚¨åº”è¯¥è¢«é‡å®šå‘åˆ° Azure Devops é—¨æˆ·ã€‚æ‚¨ç°åœ¨å·²ç»å‡†å¤‡å¥½ä¸ºæˆ‘ä»¬çš„æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºè®¾ç½® Azure ç®¡é“äº†ï¼ğŸ˜€

é¦–å…ˆï¼Œé€‰æ‹©æ‚¨çš„å­˜å‚¨åº“ï¼Œæˆ‘å°†ä½¿ç”¨æˆ‘çš„å‡½æ•°â€”â€”ç®€å•å­˜å‚¨åº“ã€‚

[![](../Images/625df3349e067aee9e0d029ee6545be6.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--mUqdGOph--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AI8afZGM29MVnyIWoOlzGuw.png)

Pipelines ç°åœ¨å°†åˆ†æ git å­˜å‚¨åº“å¹¶æ¨èä¸€ä¸ªåˆå­¦è€…æ¨¡æ¿ã€‚è¿™å¯èƒ½ä¼šæ ¹æ®æ‚¨çš„åº”ç”¨ç¨‹åºè€Œæœ‰æ‰€ä¸åŒï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œéšæ„ä½¿ç”¨ã€‚ä½†æˆ‘å°†é€‰æ‹©â€œStarter Template â€,å› ä¸ºæˆ‘ä»¬å°†æ”¾å¼ƒå®ƒï¼Œä»å¤´å¼€å§‹ç¼–å†™æˆ‘ä»¬çš„æ„å»ºç®¡é“ã€‚

[![](../Images/6c1018b8fab99c1705149ce5d721aa62.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--pGziVU75--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2ArinlFzP_rR5EQ5w5QLbLjw.png)

è¿™å°±æ˜¯å¥‡è¿¹å¼€å§‹å‘ç”Ÿçš„åœ°æ–¹ã€‚é€šè¿‡åˆ›å»ºä¸€ä¸ªåä¸º`azure-pipelines.yml`çš„ YAML æ–‡ä»¶ï¼Œå°†æ„å»ºç®¡é“å®šä¹‰ä¸ºä»£ç ã€‚æˆ‘ä»¬ä¸€ä¼šå„¿å°±å†™æˆ‘ä»¬çš„ã€‚ä½†æ˜¯è®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ä¸ºä»€ä¹ˆè¿™å¾ˆæ£’ã€‚

*   æ‚¨å°†æ‚¨çš„`azure-pipelines.yml`æ–‡ä»¶æ”¾åœ¨æ‚¨çš„å­˜å‚¨åº“çš„æ ¹ç›®å½•ä¸‹ã€‚
*   åœ¨æ¨é€é“¾æ¥çš„ GitHub åº“æ—¶ï¼ŒPipelines å°†è§¦å‘æ„å»ºï¼Œè¿™å°†éµå¾ª`azure-pipelines.yml`ä¸­æ¦‚è¿°çš„æ­¥éª¤å’Œé…ç½®
*   å› æ­¤ï¼Œæ‚¨å¯ä»¥å°†æ„å»ºç®¡é“é…ç½®æ”¾åœ¨ GitHub ä¸­æ§åˆ¶çš„åº”ç”¨ç¨‹åºä»£ç å’Œç‰ˆæœ¬æ—è¾¹ã€‚

é‚£ä¹ˆï¼Œæˆ‘ä»¬æ„å»ºç®¡é“çš„`azure-pipelines.yml`æ–‡ä»¶çœ‹èµ·æ¥åƒä»€ä¹ˆå‘¢ï¼Ÿ

**ä»£ç†é…ç½®**

æˆ‘ä»¬çš„ YAML æ–‡ä»¶çš„ç¬¬ä¸€éƒ¨åˆ†å®šä¹‰äº†å°†è¿è¡Œæˆ‘ä»¬çš„ä½œä¸šçš„ä»£ç†æ± ã€‚è¿™äº›æ˜¯ä¸ºæˆ‘ä»¬è¿è¡Œæ„å»ºæ­¥éª¤çš„ä¸»æœºã€‚è¿™é‡Œæˆ‘ä»¬å†³å®šä½¿ç”¨è¿è¡Œ Ubuntu çš„æ‰˜ç®¡ Linux ä»£ç†ã€‚

```
pool:
  vmImage: 'Ubuntu 16.04' 
```

**æ„å»ºæ­¥éª¤**

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æˆ‘ä»¬çš„æ„å»ºæ­¥éª¤ã€‚æˆ‘ä»¬çš„æ„å»ºå°†æœ‰ä¸‰ä¸ªæ­¥éª¤ã€‚

1.  è¿è¡Œä¸€ä¸ª`npm install`
2.  ä¸ºæˆ‘ä»¬çš„ä»£ç åˆ›å»ºä¸€ä¸ª zip å­˜æ¡£
3.  å‘å¸ƒæˆ‘ä»¬çš„æ„å»ºå·¥ä»¶ï¼Œä»¥ä¾›æˆ‘ä»¬çš„å‘å¸ƒç®¡é“è·å–

å½“ç„¶ï¼Œåœ¨çœŸå®ç¯å¢ƒä¸­ï¼Œæ‚¨å¯èƒ½ä¼šè¿è¡Œ mocha æ¥æ‰§è¡Œæµ‹è¯•ï¼Œè¿›è¡Œä¸€äº›é™æ€ä»£ç åˆ†æï¼Œæˆ–è€…ä½¿ç”¨åƒ [funcpack](https://github.com/Azure/azure-functions-pack) è¿™æ ·çš„å·¥å…·æ¥æ”¹è¿›å†·å¯åŠ¨ã€‚æ‰€æœ‰è¿™äº›ä¹Ÿå¾ˆå®¹æ˜“åœ¨ç®¡é“å†…å®ç°ã€‚ä½†æ˜¯ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†åšæŒè¿™ä¸‰ä¸ªæ­¥éª¤ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨`script`æ­¥éª¤è¿è¡Œ`npm install`ã€‚ä¸è¨€è‡ªæ˜ã€‚

```
steps:
  - script: |
      npm install
    displayName: "npm install" 
```

å…¶æ¬¡ï¼Œæˆ‘ä»¬ä½¿ç”¨å†…ç½®çš„å­˜æ¡£ä»»åŠ¡åˆ›å»ºä»£ç çš„å­˜æ¡£ã€‚

```
- task: ArchiveFiles@2
    displayName: "Archive files"
    inputs:
      rootFolderOrFile: "$(System.DefaultWorkingDirectory)"
      includeRootFolder: false
      archiveFile: "$(System.DefaultWorkingDirectory)/$(Build.BuildId).zip" 
```

è„šæœ¬ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä»£ç†ä¸»æœºä¸Šè¿è¡Œå‘½ä»¤è¡Œè„šæœ¬ï¼Œä»»åŠ¡æ˜¯æ¥è‡ª Azure Devops æˆ–å¸‚åœºä¸­çš„ç¬¬ä¸€æ–¹çš„é¢å¤–åŠŸèƒ½ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨`ArchiveFiles`ä»»åŠ¡æ¥æ‰“åŒ…æˆ‘ä»¬çš„ä»£ç ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå¼•ç”¨ Azure Devops æä¾›ç»™æˆ‘ä»¬çš„ä¸€äº›æœ‰ç”¨çš„å˜é‡ï¼Œä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨è¿™äº›å˜é‡æ¥æ ‡è¯†`$(System.DefaultWorkingDirectory)`å’Œ`$(Build.BuildId)`ï¼Œä»¥å®šä½æˆ‘ä»¬çš„ä»£ç å¹¶ç”¨ä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°ä¿å­˜å®ƒã€‚

æœ€åï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªä»»åŠ¡æ¥å‘å¸ƒæˆ‘ä»¬çš„æ„å»ºå·¥ä»¶ã€‚

```
- task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '$(System.DefaultWorkingDirectory)'
      name: 'drop' 
```

è¿™é‡Œï¼Œæˆ‘ä»¬å°†å·¥ä»¶æ”¾å…¥åä¸º`drop`çš„`DefaultWorkingDirectory`ä¸­ã€‚å½“æˆ‘ä»¬éƒ¨ç½²åˆ° Azure Functions æ—¶ï¼Œæˆ‘ä»¬å°†ä»å‘å¸ƒæ¸ é“ä¸­è·å¾—è¿™ä¸€ç‚¹ã€‚

è¿™å°±æ˜¯æˆ‘ä»¬æ„å»ºç®¡é“çš„å…¨éƒ¨å†…å®¹ï¼æˆ‘ä»¬å®šä¹‰æ„å»ºç®¡é“çš„`azure-pipelines.yml`æ–‡ä»¶å·²ç»å®Œæˆï¼Œæœ€ç»ˆæ–‡ä»¶åº”è¯¥æ˜¯è¿™æ ·çš„:

```
pool:
  vmImage: 'Ubuntu 16.04'
steps:
  - script: |
      npm install
    displayName: "npm install"
  - task: ArchiveFiles@2
    displayName: "Archive files"
    inputs:
      rootFolderOrFile: "$(System.DefaultWorkingDirectory)"
      includeRootFolder: false
      archiveFile: "$(System.DefaultWorkingDirectory)/$(Build.BuildId).zip"
  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: '$(System.DefaultWorkingDirectory)'
      name: 'drop' 
```

æ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ä¸­åˆ é™¤ starter æ¨¡æ¿ï¼Œå¹¶ç”¨ç±»ä¼¼äºä¸Šé¢çš„ YAML æ–‡ä»¶æ›¿æ¢å®ƒã€‚ç„¶åç‚¹å‡»â€œä¿å­˜å¹¶è¿è¡Œâ€ã€‚è¿™å°†æç¤ºæ‚¨å°†`azure-pipelines.yml`æäº¤åˆ°é“¾æ¥çš„ GitHub å­˜å‚¨åº“ã€‚æ·»åŠ å¯é€‰çš„æäº¤æè¿°ï¼Œç„¶åå†æ¬¡å•å‡»â€œä¿å­˜å¹¶è¿è¡Œâ€ã€‚

## [](#release-pipeline)é‡Šæ”¾ç®¡é“

å› æ­¤ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»æ„å»ºäº†æˆ‘ä»¬çš„æ„å»ºç®¡é“ï¼Œå¹¶å‘å¸ƒäº†æˆ‘ä»¬çš„æ„å»ºå·¥ä»¶ã€‚æˆ‘ä»¬ç°åœ¨éœ€è¦åˆ›å»ºä¸€ä¸ªå‘å¸ƒç®¡é“æ¥å°†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ° Azure åŠŸèƒ½ä¸­ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä»Šå¤©å‘å¸ƒç®¡é“ä¸æ”¯æŒ YMLã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†åœ¨ GUI ä¸­åˆ›å»ºå®ƒã€‚

é¦–å…ˆï¼Œå•å‡» Devops é—¨æˆ·ä¸­ç®¡é“æ ‡é¢˜ä¸‹çš„å‘å¸ƒï¼Œç„¶åå•å‡»â€œæ–°å»ºâ€æŒ‰é’®ã€‚

[![](../Images/53c498f18f5f925b167a6fdd72e2d8de.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--5NavX6t1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A2YxuDMammuL4m1iZAbcbZg.png)

æˆ‘ä»¬å°†ä½¿ç”¨â€œAzure åº”ç”¨æœåŠ¡éƒ¨ç½²â€æ¨¡æ¿ï¼Œå› æ­¤æˆ‘ä»¬å°†é€‰æ‹©è¯¥æ¨¡æ¿ï¼Œç„¶åç‚¹å‡»â€œåº”ç”¨â€ã€‚

[![](../Images/2020bda6afdabf1ab9eeeaa94cdf9eba.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--iona2jbt--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AlETmCaABKu46EdHcfj38qw.png)

å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥ç»™ä½ çš„èˆå°èµ·ä¸€ä¸ªåå­—ã€‚æ‰€ä»¥æˆ‘æŠŠæˆ‘çš„å‘½åä¸ºâ€œéƒ¨ç½²åˆ° Azure åŠŸèƒ½â€

[![](../Images/bdf3e7e209c5c66a0ec5295692ff4d4f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--CHiAiqvD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A532kwsCudR7You0VwWsKew.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æˆ‘ä»¬å¸Œæœ›åœ¨å‘å¸ƒç®¡é“ä¸­æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä½œä¸ºè¿™ä¸ªé˜¶æ®µçš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬å°†ç‚¹å‡» pipeline ä¸­çš„â€œ1 jobï¼Œ1 taskâ€é“¾æ¥æ¥å®Œæˆè¿™äº›è®¾ç½®ã€‚

[![](../Images/e29a184f0266af950bbe9d2d4937af58.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--5U19xVku--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2Akk_K7JZgGBDnJU50ZDgcnQ.png)

ç³»ç»Ÿä¼šè­¦å‘Šæ‚¨ï¼Œæˆ‘ä»¬çš„åº”ç”¨æœåŠ¡éƒ¨ç½²ä»»åŠ¡ç¼ºå°‘ä¸€äº›è®¾ç½®ã€‚è®©æˆ‘ä»¬æŠŠè¿™äº›ä¿®å¥½ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æˆæƒ Azure Devops å’Œæˆ‘ä»¬çš„åŠŸèƒ½åº”ç”¨ç¨‹åºæ‰€åœ¨çš„ Azure å¸æˆ·ä¹‹é—´çš„è¿æ¥ã€‚å¦‚æœæ‚¨ä½¿ç”¨ä¸ Azure ç›¸åŒçš„å¸æˆ·ç™»å½• Azure Devopsï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿä»ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©ç›¸å…³çš„è®¢é˜…ã€‚é€‰æ‹©åï¼Œç‚¹å‡»â€œæˆæƒâ€ã€‚ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªå¼¹å‡ºçª—å£ï¼Œè¦æ±‚ä½ ç™»å½•ä½ çš„ Azure å¸æˆ·å¹¶æˆæƒï¼Œåœ¨åå°ï¼Œè¿™æ˜¯åˆ›å»ºä¸€ä¸ªå…·æœ‰è´¡çŒ®è€…è§’è‰²çš„æœåŠ¡ä¸»ä½“ï¼Œå…è®¸ Azure Devops éƒ¨ç½²åˆ°ä½ çš„è®¢é˜…ä¸­çš„åŠŸèƒ½åº”ç”¨ç¨‹åºã€‚

ç¡®ä¿æ‚¨å·²å°†åº”ç”¨ç¨‹åºç±»å‹è®¾ç½®ä¸ºâ€œåŠŸèƒ½åº”ç”¨ç¨‹åºâ€ï¼Œç„¶åæ‚¨åº”è¯¥èƒ½å¤Ÿä»â€œåº”ç”¨ç¨‹åºæœåŠ¡åç§°â€ä¸‹çš„é¢„å¡«å……ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©æ‚¨çš„åŠŸèƒ½åº”ç”¨ç¨‹åºã€‚

æˆ‘ä»¬å°†ä¿ç•™ Package æˆ– folder å­—æ®µçš„é»˜è®¤å€¼`$(System.DefaultWorkingDirectory)/**/*.zip`ï¼Œå®ƒå°†ä»è¿™é‡Œè·å–æˆ‘ä»¬æ„å»ºç®¡é“çš„å·²å‘å¸ƒå·¥ä»¶ã€‚

[![](../Images/dc49427623751846172dff84b941a5ab.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--DkKLjK-J--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AaUUrfNKIuShhpYgxWB-SDw.png)

å›åˆ°é—¨æˆ·ä¸­çš„â€œç®¡é“â€é€‰é¡¹å¡ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰æˆ‘ä»¬çš„å‘å¸ƒï¼Œæˆ‘ä»¬å¸Œæœ›å®ƒéƒ¨ç½²å“ªä¸ªæ„å»ºå·¥ä»¶ã€‚æ‰€ä»¥ç‚¹å‡»â€œæ·»åŠ å·¥ä»¶â€ã€‚

[![](../Images/13fd4c2e9a7cc789a2fb1ad013c5677e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--mD-xs9OJ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2A0hpZsdNgBvsBRjMwKe72Ug.png)

è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨æ„å»ºç®¡é“çš„è®¾ç½®æ¥é…ç½®æˆ‘ä»¬çš„å·¥ä»¶ã€‚åªéœ€ä½¿ç”¨é¢„å¡«å……çš„ä¸‹æ‹‰èœå•å®Œæˆè¡¨å•ï¼Œå¹¶é€‰æ‹©æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„æ„å»ºç®¡é“çš„å€¼ã€‚

[![](../Images/4d45bdd48e9bec7615269540019d5a65.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--lMl7N5Sl--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AG0hM65QmxqgotLt1wyjDgw.png)

æ‰€ä»¥ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå·¥ä»¶ï¼Œä»¥åŠä¸ºè¿™ä¸ªç‰ˆæœ¬æ‰§è¡Œçš„ä¸€äº›æ­¥éª¤ã€‚æˆ‘ä»¬ç°åœ¨éœ€è¦è®¾ç½®ä¸€ä¸ªè¿ç»­éƒ¨ç½²è§¦å‘å™¨ã€‚è¿™å°†å‘Šè¯‰ Azure Devops ä½•æ—¶è¿è¡Œæˆ‘ä»¬çš„ç‰ˆæœ¬ã€‚ç»§ç»­ç‚¹å‡»æˆ‘ä»¬å·¥ä»¶æ—è¾¹çš„é—ªç”µç¬¦å·ã€‚

[![](../Images/e811b6d688f7cddfc6f1bdaf3b0e6e19.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--xIJekdRm--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2ArM1hemumrruplZEw4ATAkQ.png)

æˆ‘ä»¬å¯ä»¥å‘Šè¯‰æœåŠ¡åœ¨æ¯æ¬¡æœ‰æ–°çš„æ„å»ºå¯ç”¨æ—¶åˆ›å»ºä¸€ä¸ªå‘å¸ƒï¼Œè¿™å°†æ˜¯ç”±äºæˆ‘ä»¬ä¹‹å‰è®¾ç½®çš„ GitHub CI é›†æˆï¼Œæˆ‘ä»¬æ¯æ¬¡æäº¤åˆ°æˆ‘ä»¬çš„ä¸»åˆ†æ”¯ã€‚å› æ­¤ï¼Œé€‰ä¸­å¤é€‰æ¡†ä»¥å¯ç”¨æŒç»­éƒ¨ç½²è§¦å‘å™¨ã€‚

[![](../Images/07fb020294ab86f13b21957cafe6a07e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--_mX9swRi--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2ABQknfvxlN_drpHOnPlhKcg.png)

## [](#testing)æµ‹è¯•

ç°åœ¨æˆ‘ä»¬æœ‰äº† GitHub CI ä¸æˆ‘ä»¬çš„æ„å»ºç®¡é“çš„é›†æˆï¼Œå®Œæˆåå°†é€šè¿‡æˆ‘ä»¬çš„å‘å¸ƒç®¡é“è§¦å‘æˆ‘ä»¬å¯¹ Azure åŠŸèƒ½çš„æŒç»­éƒ¨ç½²ã€‚

ä¸ºäº†æ£€æŸ¥è¿™ä¸€ç‚¹ï¼Œåœ¨ä½ çš„å‡½æ•°ä»£ç ä¸­ç¼–è¾‘ä¸€äº›ä¸œè¥¿ï¼Œæäº¤ç»™ gitï¼Œç„¶åæ¨é€åˆ°ä½ é“¾æ¥çš„ GitHub åº“ã€‚åä¸‹æ¥ï¼Œçœ‹å¥‡è¿¹å‘ç”Ÿâ€¦

**æ³¨æ„:**å¦‚æœä½¿ç”¨æˆ‘çš„å‡½æ•°â€”â€”ç®€å•çš„ä¾‹å­ï¼Œä½ å¯ä»¥ç®€å•åœ°æ”¹å˜`/hello/index.js`çš„å“åº”ä½“ã€‚

å¦‚æœä½ ç‚¹å‡» Buildsï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°åœ¨æ¨é€åˆ° GitHub æ—¶ï¼Œä¸€ä¸ªæ–°çš„æ„å»ºå·²ç»å¼€å§‹äº†ã€‚å•å‡»è¯¥ç‰¹å®šæ„å»ºå°†æä¾›è¯¥æ„å»ºçš„æ‘˜è¦ã€‚ä¸€æ—¦å®Œæˆï¼Œä½ åº”è¯¥æœ‰ä¸€ä¸ªå¤§çš„ç»¿è‰²å¤é€‰æ ‡è®°ï¼

[![](../Images/166e0038ed5d927e96d4148ce80242a5.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--YhKRu0x9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AkiHGVlV-0ENJjEh_4TfTBg.png)

å¦‚æœæ‚¨æƒ³æ›´æ·±å…¥åœ°äº†è§£è¿™äº›æ­¥éª¤ï¼Œå¯ä»¥å•å‡» Logs é€‰é¡¹å¡ï¼ŒæŸ¥çœ‹æ„å»ºçš„æ¯ä¸ªæ­¥éª¤ä»¥åŠæ¯ä¸ªæ­¥éª¤èŠ±è´¹çš„ç¡®åˆ‡æ—¶é—´ï¼Œå¦‚æœæ‚¨å•å‡»å…¶ä¸­ä¸€ä¸ªæ­¥éª¤ï¼Œå°†ä¼šçœ‹åˆ°åº•å±‚ä»£ç†è¿è¡Œè¯¥æ„å»ºæ­¥éª¤æ—¶çš„åŸå§‹æ—¥å¿—ã€‚

[![](../Images/2ee2dac4a6587789a6fb538774fcd0c4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--utP-31oV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AePwM2JH2THZvsecoUgkgCg.png)

ä¸€æ—¦æˆ‘ä»¬çš„æ„å»ºå®Œæˆï¼Œæˆ‘ä»¬çš„æŒç»­éƒ¨ç½²è§¦å‘å™¨åº”è¯¥å·²ç»å¯åŠ¨ï¼Œæˆ‘ä»¬çš„å‘å¸ƒç®¡é“åº”è¯¥å·²ç»å¯åŠ¨ã€‚ç‚¹å‡»å·¦ä¾§çš„â€œå‘å¸ƒâ€,æŸ¥çœ‹æˆ‘ä»¬çš„æ¸ é“è¿›å±•æƒ…å†µã€‚

[![](../Images/a3068129001d2d4d46a32751ad03a495.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--Dmend_aR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/1%2AGlv3WJR0jJQtUDafmhtHdg.png)

åœ¨è¿™é‡Œï¼Œæ‚¨å°†çœ‹åˆ°å‘å¸ƒç®¡é“å·²ç»è¢«è§¦å‘ï¼Œå¹¶ä¸”æ‚¨åº”è¯¥çœ‹åˆ°æˆ‘ä»¬çš„é˜¶æ®µâ€œéƒ¨ç½²åˆ° Azure Functionsâ€çªå‡ºæ˜¾ç¤ºä¸ºç»¿è‰²ï¼Œå¹¶å¸¦æœ‰ä¸€ä¸ªå¤é€‰æ ‡è®°ï¼Œè¡¨æ˜å·²ç»æˆåŠŸã€‚

ç°åœ¨ä½ å¯ä»¥æ‰§è¡Œä½ çš„ Azure å‡½æ•°ï¼Œå¹¶çœ‹åˆ°ä½ æ‰€åšçš„æ”¹å˜å·²ç»ç”Ÿæ•ˆã€‚å¿«ä¹çš„æ—¥å­ï¼

## [](#woohoo)å‘œå‘œ

å°±è¿™æ ·ï¼Œç°åœ¨æ‚¨å·²ç»ä½¿ç”¨ Azure ç®¡é“ä¸ºæ‚¨çš„ Azure åŠŸèƒ½è®¾ç½®äº† CI/CDï¼Œç›´æ¥ä»æ¨é€è‡³æ‚¨çš„ GitHub åº“ğŸ˜€

å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°äº†è§£ï¼Œå°±å»çœ‹çœ‹ Azure Devops æ–‡æ¡£ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥åœ¨æˆ‘ä»¬æ‰€åšçš„åŸºç¡€ä¸Šæ„å»ºå¤šç§ç¯å¢ƒã€å‘å¸ƒå…³å¡ã€é¡¹ç›®ç®¡ç†ç­‰ç­‰ï¼