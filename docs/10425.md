# 从哲基尔到雨果

> 原文:[https://dev . to/benrcongdon/switching-from-Jekyll-to-Hugo-1gj 7](https://dev.to/benrcongdon/switching-from-jekyll-to-hugo-1gj7)

我最近经历了将我博客的静态站点生成器从[杰基尔](https://jekyllrb.com/)切换到[雨果](https://gohugo.io/)的过程。两者都是很棒的工具，但是随着时间的推移，我更新了我的网站，我开始感到受到 Jekyll 的约束——并希望转向更稳定和更强大的工具。

## [](#context)上下文

我真的很喜欢哲基尔。它的安装速度很快，附带了一种极具表现力的模板语言(有时这很危险)，并且有 Github 的全面支持——所有这些都降低了部署和维护个人网站的门槛。

也就是说，当你开发一个有意义的复杂网站时，Jekyll 的生成时间开始飙升。我经常有 7 秒以上的站点生成时间，这使得我的网站的格式修改工作变得非常辛苦。

此外，我不是 Ruby 生态系统的最大粉丝——主要是因为我在安装依赖项时遇到了麻烦。我已经学会接受 Python 的依赖性管理缺点——它们通常通过坚持使用单一工具并按预期使用来改善。鲁比……我从来都没有好好表现过。毫无疑问，我在设置一个完全干净的环境时，遇到了 Nokogiri 或 Bundler 的一些拜占庭安装错误。我不可避免地陷入一些令人绝望的堆积如山的问题，让我烦恼了一个下午。

## [](#jekylls-moat)哲基尔的护城河

尽管如此，我还是坚持使用了 Jekyll 好几年——我在离开它的过程中付出了巨大的转换成本:自从我开始上大学以来，它是我最有经验的 SSG，并且一直在我的网站上使用。然而，我达到了一个临界点。

在使用 Netlify 一段时间后，Github Pages 给予 Jekyll 的“护城河”消失了。在 Netlify 上部署 Hugo、Gatsby 或 Pelican 生成的站点和部署 Jekyll 生成的站点一样容易(对于 HTTPS 来说也是如此！).

事实上，使用 Netlify 进行部署的体验(在我看来)优于 Github 页面，因为*您实际上可以看到部署日志和构建失败消息*，而不是从 Github 收到一封普通的电子邮件，说“出了问题”。

## [](#why-hugo)为什么是雨果？

就像我很想把哲基尔从*换成*一样，我对把*换成*雨果也很感兴趣。

我对 Jekyll 最大的抱怨是页面生成时间。Hugo 吹嘘它可以拥有亚毫秒级的页面生成时间——我发现这有点过于乐观了。然而，我的站点的总生成时间从 7 秒多下降到了 300 毫秒，所以我认为这是一个胜利。

**雨果是用 go 写成的**这是一个相当肤浅的改 SSGs 的理由，但是……我喜欢 Go。这是一种冗长的语言，但这使得用它编写的项目易于阅读。它的模板系统真的很好，Hugo 做了聪明的添加，以获得与 Liquid (Jekyll 的模板系统)相似的表达能力，并显著提高了性能。

**Hugo 是一个单一的二进制文件**与 Jekyll 相比，维护 Hugo 站点的安装和依赖管理过程是微不足道的——你只需要下载单一的`hugo`二进制文件。就是这样。不要乱用软件包安装程序或系统库(*咳* Nokogiri 对 lxml 的爱恨交加*咳*)。

## [](#hiccups-during-conversion)转换时打嗝

为了理解 Hugo 的惯例，我跟随了 Sara Soueidan 的优秀的"[从 Jekyll+Github 页面迁移到 Hugo+Netlify](https://www.sarasoueidan.com/blog/jekyll-ghpages-to-hugo-netlify/) "指南。有很多关于 Hugo 的介绍，但是我发现这一个是全面的。

从雨果到哲基尔的转变过程是这样的:

1.  用 Go 模板语言重写我的 Jekyll 页面模板。
2.  重组我的网站的模板和内容，以适应雨果的目录结构。
3.  重组我的文件以符合雨果的期望。
4.  用`gulp`添加一些资产管道魔法来缩小资产和编译 SASS。
5.  修复我在步骤 1-4 中没有发现的任何其他错误。

一旦你理解了雨果的“哲学”，这其中的大部分就不言自明了然而，我仍然遇到了几个值得一提的问题:

**雨果对目录结构比哲基尔敏感得多。这是雨果最讨厌的一件事。哲基尔会渲染任何东西。除了少数特殊目录(即`_partials`、`_includes`等)。)Jekyll 基本上将站点源代码中的每个文件都呈现到构建目录中。**

雨果是有选择性的。如果一个页面没有一个有效的模板或者模板有问题，这个页面就不会被构建——通常是安静的，没有错误的。

您确实必须遵循 Hugo 在文档中列出的模板查找顺序，否则您将面临严重的挫折。我建议为每种页面类型设置默认布局(例如在`_default`文件夹中),这样你就不会遇到“安静的非渲染”问题。

Hugo 在模板方面远不如 Jekyll 灵活。在《化身博士》中，一切皆有可能。想在你的前部添加一些液体吗？当然，为什么不呢？拉起你所有的 SCSS，在一个模板中运行一个 SCSS 编译器？是的，你可以。

雨果要保守得多。它更清楚地区分了什么是模板，什么是“内容”。这对于我的一些高度定制的定制页面(即我的[项目](https://benjamincongdon.me/projects)页面)来说有点麻烦——让这些页面模板化“感觉”不对，但 Hugo 要求它们无论如何都是模板。

然而，我发现从长远来看，我花在编写和编辑模板上的时间比添加 Markdown 格式的内容要少得多。只要我能得到一套舒适的 Hugo 模板，跨越内容和模板之间的区别，Hugo 真的不再有任何限制。

雨果比哲基尔更像一个 CMS。在转换过程中，我多次感觉 Hugo 对于我的用例来说是过度设计的。我没有一个有多个作者/订阅源的网站，也没有足够的内容，所以对类别和标签的一流支持是至关重要的。

然而雨果包含了所有这些甚至更多。有点力不从心。Hugo 具有自上而下的工程产品的特征——“对它认为用户需要的东西做出规定”——与 Jekyll 自下而上的方法相比，“你只构建你实际使用的功能”。

然而，通过让*其他人*为你做所有这些项目布局决策，结果是一个相当干净和一致的项目目录。

我仍然发现自己不得不*关闭*Hugo 的许多更高级的功能，以避免不必要的页面生成(比如为*的每个*博客文章标签设置一个单独的页面)。

**Hugo 的插件生态系统不太丰富**想为你的 SSG 装一个 SASS 编译器或者 HTML minifier 插件？那些是为哲基尔而存在的，但不是为雨果。幸运的是，许多人都遇到了这个问题，所以在`gulp`生态系统中对 Hugo 的支持真的很好。Gulp 拥有顶级的资产管道管理插件，所以如果你愿意在你的 SSG 中加入一点 Node.js，这就不是问题了。

## [](#my-final-setup)我的最终设置

最后，我的资产管道看起来很像 Netlify 的[维克多-雨果](https://github.com/netlify/victor-hugo)模板。我使用 gulp 来编译我的 SASS 并缩小我的资产(HTML、图片等)。“victor-hugo”模板还引入了 [BrowserSync](https://browsersync.io/) ，它增加了重建时的自动刷新，以及其他一些细节。

你可能会说，我实际上是用 Ruby 生态系统换来了 Golang *和* Node.js 生态系统——你是对的。然而，比起在 Ruby 的生态系统中，我对自己在这个环境中解决问题的能力更有信心，所以我认为这是一个胜利。

我希望我不会对设置做太多的改动。对于这样一个我真正关心的是写作的项目来说，稳定性是有价值的，而所有的 SSG 脚手架都是次要的。

## [](#conclusion)结论

最终，这可以理解为又一篇“为什么我从 X 美元转到 Y 美元”的文章。我已经给雨果一个旋转，我喜欢到目前为止。它速度快，该表达的地方表达，该保守的地方保守。

作为一条规则，我试着不要因为一时兴起而改变技术组合。我已经说服自己，换成 Hugo 有很大的好处，所以我希望在接下来的几年里，我会坚持这个新的设置。