# æ­å¼€ Array.reduce()çš„ç¥ç§˜é¢çº±:å¦‚ä½•ç†è§£å®ƒä»¥åŠä½•æ—¶åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒ

> åŸæ–‡:[https://dev . to/Nicky hajal/demystifying-array reduce-how-to-understand-it-when-use-it-in-your-code-5b 96](https://dev.to/nickyhajal/demystifying-arrayreduce-how-to-understand-it-and-when-to-use-it-in-your-code-5b96)

ES5 å’Œæ›´é«˜ç‰ˆæœ¬çš„ JavaScript å¸¦æ¥äº†å‡ ä¸ªå¤„ç†æ•°ç»„çš„æ–°æ–¹æ³•ã€‚å®ƒä»¬ä¸­çš„è®¸å¤šå·²ç»æˆä¸ºä½¿ç”¨æ•°ç»„æ‰§è¡Œå¸¸è§ä»»åŠ¡çš„æœ€ä½³å®è·µï¼ŒJavaScript ä½¿ç”¨å®ƒä»¬ä¼šå¥½å¾—å¤šã€‚

`Array.map()`å’Œ`Array.filter()`æ˜¯ä¸¤ä¸ªæ—¥å¸¸é©±åŠ¨çš„ ES5 å¢åŠ çš„ä¾‹å­ï¼Œå®ƒä»¬æ˜¯å¤§å¤šæ•° JS å¼€å‘è€…çš„ä¸»é£Ÿã€‚

å·¥å…·ç®±ä¸­ä¸€ä¸ªåŒæ ·æœ‰ç”¨ä½†é€šå¸¸ä¸å¤ªä¸ºäººæ‰€çŸ¥çš„å·¥å…·æ˜¯`Array.reduce()`ã€‚æœ€è¿‘ï¼Œæˆ‘è¶Šæ¥è¶Šé¢‘ç¹åœ°ä½¿ç”¨`reduce`,ä½†æ˜¯éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½æ„Ÿè§‰åˆ°å®ƒçš„è‡ªç„¶ï¼Œæˆ‘ç»å¸¸çœ‹åˆ°å…¶ä»–å¼€å‘äººå‘˜åœ¨åŠªåŠ›ä½¿ç”¨å®ƒ...æˆ–è€…æ ¹æœ¬ä¸ç”¨å®ƒã€‚

## [](#reduce-is-often-taught-wrong-and-therefore-misunderstood)Reduce å¸¸è¢«æ•™é”™ï¼Œå› è€Œè¢«è¯¯è§£

åœ¨æˆ‘çœ‹æ¥ï¼Œæ··ä¹±çš„ä¸€å¤§åŸå› æ˜¯`reduce`åªæ˜¯æ•™é”™äº†ã€‚äº‹å®ä¸Šï¼Œæˆ‘ç”šè‡³è§‰å¾—åä¸ºçš„*æ˜¯é”™è¯¯çš„(å°½ç®¡ï¼Œå½“ç„¶ï¼Œreducer çš„æ¦‚å¿µå’Œåç§°è¿œåœ¨å®ƒè¢«æ·»åŠ åˆ° JavaScript ä¹‹å‰å°±æœ‰äº†)ã€‚*

æ•™æˆå‡é€Ÿå™¨æ—¶æœ€å¸¸è§çš„ä¾‹å­æ˜¯è¿™æ ·çš„:

```
const array = [1, 2, 3, 4];
const sum = array.reduce((accumulator, currentItem) => {
    return accumulator + currentItem;
}, 0);

// sum = 10 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ¸…æ¥šåœ°æ˜¾ç¤ºäº†å‡é€Ÿå™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æ‚¨åœ¨ä¸€ä¸ªæ•°ç»„ä¸Šè°ƒç”¨`reduce()`,å¹¶å‘å®ƒä¼ é€’ä¸€ä¸ªåˆå§‹å€¼ä»¥åŠä¸€ä¸ªä¸ºè¯¥æ•°ç»„çš„æ¯ä¸€é¡¹è¿è¡Œçš„å‡½æ•°ã€‚

`reduce`å‘ä¼ é€’çš„å‡½æ•°å‘é€:

1)å½“å‰é¡¹ç›®å’Œ
2)å‰ä¸€æ¬¡å›è°ƒè¿”å›çš„å€¼(æˆ–åˆå§‹çŠ¶æ€ï¼Œå½“ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶)

`reduce`çš„æœ€ç»ˆå€¼æ˜¯æœ€åä¸€æ¬¡è°ƒç”¨å†…éƒ¨ reducer å‡½æ•°æ—¶è¿”å›çš„å€¼ã€‚

å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œreducer å¯¹æ•°ç»„çš„å€¼æ±‚å’Œå¹¶è¿”å›æ€»å€¼ã€‚

## [](#so-adding-arrays-of-numbers-is-that-all-raw-reduce-endraw-does)å¦‚æ­¤...å°†æ•°å­—æ•°ç»„ç›¸åŠ ï¼Œè¿™å°±æ˜¯æ‰€æœ‰çš„`Reduce`å—ï¼Ÿ

è¿™ä¸ªä¾‹å­æˆ‘è§è¿‡å¾ˆå¤šæ¬¡ï¼Œä½†å¾ˆå°‘çœ‹åˆ°æ›´æ·±å…¥çš„è§£é‡Šã€‚

â€œå—¯ï¼Œæœ‰æ„æ€ã€‚â€æˆ‘æƒ³ï¼Œéšç€æˆ‘ä¸€å¤©çš„ç»§ç»­ã€‚

é‚£ä¹ˆï¼Œå‡å‹å™¨åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿå®ƒä»¬åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

è¿™æ‰æ˜¯çœŸæ­£çš„åŠ›é‡:

## [](#reducers-are-useful-when-you-want-to-process-an-array-but-output-something-that-isnt-an-array)å½“ä½ æƒ³å¤„ç†ä¸€ä¸ªæ•°ç»„**ä½†è¾“å‡ºä¸æ˜¯æ•°ç»„**çš„ä¸œè¥¿æ—¶ï¼Œå½’çº¦å™¨å¾ˆæœ‰ç”¨

è¿™å°±æ˜¯æˆ‘ä»¬è¦è¯´çš„ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚

æ¯•ç«Ÿï¼Œè¿™ä¸æ­£æ˜¯æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­æ‰€åšçš„å—ï¼Ÿæˆ‘ä»¬æ¥æ”¶ä¸€ä¸ªæ•°ç»„å¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬â€œå‡å°‘â€æ•°ç»„æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†æˆ‘ä»¬å¹¶ä¸æ€»æ˜¯å¿…é¡»è¾“å‡ºåƒæ•´æ•°è¿™æ ·ç®€å•çš„ä¸œè¥¿ã€‚

ä¸¾è¿™ä¸ªä¾‹å­:

```
const trips = [{type: 'car', dist: 42}, {type: 'foot', dist: 3}, {type:'flight', dist: 212}, {type: 'car', dist: 90}, {type: 'foot', dist: 7}] 

const distanceByType = trip.reduce((out, curr) => {
    const { type, dist } = curr;
    if (out[type]) {
        out[type] += dist;
    } else {
        out[type] = dist;
    }
    return out;
}, {});

// distanceByType = {car: 132, foot: 10, flight: 212}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰€ä»¥åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯è¿”å›ä¸€ä¸ª sums å¯¹è±¡ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªã€‚

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¼€å§‹çœ‹åˆ°å‡é€Ÿå™¨çš„æœ¬è´¨:

## [](#a-reducer-is-a-transformer)å‡é€Ÿå™¨æ˜¯å˜å‹å™¨

å®ƒæ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åæŠŠå®ƒè½¬æ¢æˆåˆ«çš„ä¸œè¥¿ã€‚

ä»¥è¿™ç§æ–¹å¼æ€è€ƒä¸ä»…å¸®åŠ©æˆ‘ç†è§£`reduce`æ˜¯åšä»€ä¹ˆçš„ï¼Œè€Œä¸”*å¸®åŠ©æˆ‘æ„è¯†åˆ°ä»€ä¹ˆæ—¶å€™æˆ‘åº”è¯¥ä½¿ç”¨å®ƒ*ã€‚

*   æœ‰ä¸€ä¸ªç”¨æˆ·æ•°ç»„ï¼Œä½†æ˜¯æƒ³è¦è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼Œ`Mike, Becka and 3 others will be attending`ï¼Ÿä¸€ä¸ªå‡é€Ÿå™¨æ˜¯ä¼Ÿå¤§çš„ï¼

*   æœ‰ä¸€ç»„æ–‡ç« ï¼Œæƒ³è¦ä¸€ä¸ªæŒ‰ç±»åˆ«æ’åºçš„å¯¹è±¡ï¼Ÿä¸€ä¸ªå‡é€Ÿå™¨æ˜¯ä¼Ÿå¤§çš„ï¼

ç”¨ä¾‹è¿˜åœ¨ç»§ç»­ã€‚

# [](#go-forth-and-raw-arrayreduce-endraw-)å¾€å‰èµ°`Array.reduce()`ï¼

æˆ‘çœŸçš„å¸Œæœ›è¿™èƒ½æœ‰æ‰€å¸®åŠ©ï¼Œå¦‚æœå¯ä»¥çš„è¯ï¼Œæˆ‘å¾ˆä¹æ„åœ¨è¯„è®ºä¸­è¿›ä¸€æ­¥æ¾„æ¸…ã€‚

æœ‰æ‚¨å–œæ¬¢çš„`reduce`ç”¨ä¾‹å—ï¼Ÿè¯·åœ¨ä¸‹é¢è¯„è®ºï¼Œæˆ‘ä¼šæŠŠå®ƒæ·»åŠ åˆ°æ–‡ç« ä¸­ğŸš€