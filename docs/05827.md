# 网络，网络掩码和为什么我的手机无法连接

> 原文:[https://dev . to/Jacoby/networking-net mask-and-why-my-phone-can-not-connect-1jg 3](https://dev.to/jacoby/networking-netmask-and-why-my-phone-could-not-connect-1jg3)

这是很久以前的事了，但不是很久以前。我有一部早期的 Android 手机，会用它来连接校园 Wi-Fi。突然，它停止了工作。

我的意思是，它*工作了*——它告诉我我连接到了指定的网络——但是一旦打开，我就不能*做*任何事情了。

这就是我所知道的一切，这是一种新的行为，我*想要*Wi-Fi 接入。这是在校园的一个角落，数据覆盖很差甚至没有，所以没有 Wi-Fi，这是一个砖块。

所以我举报了这个问题。

几周过去了。

转述:“走开孩子，你打扰我了。”

在与同事的讨论中，我想到了安装通用的网络工具(Android 设备上没有安装，通常也不会默认安装)并弄清楚这个问题到底是什么。

# 不是问题

让我列出我知道不是问题的事情:

*   密码
*   网络结构
*   我的手机

它连接到其他无线网络和数据网络。电话没问题。是无线网络出了问题。

# IP 和网络掩码

IPv4 地址始终是四个八位字节。它们这样是因为人类的大脑更喜欢这样。给定一个 IP 地址 **10.10.10.100** ，二进制表示将是**00001010 00001010 00001010 01100100**，用整数表示将是 **168430180** 。八位字节更好，因为它给了我们四个更小的数字，由于[分块](https://en.wikipedia.org/wiki/Chunking_(psychology))，我们可以记住比九位数更好的数字。它变成了四样东西而不是九样。

但是计算机不认为它们是八位字节。它认为它们是二进制数。记住这一点。

网络掩码的八位字节始终如下: **255、254、252、248、240、224、192、128 和 0** 。这看起来很奇怪，但它们都有一个特性。在二进制中，它们都是一系列的 1 后面跟着一系列的 0。

```
 255 11111111
    254 11111110
    252 11111100
    248 11111000
    240 11110000
    224 11100000
    192 11000000
    128 10000000
    0 00000000 
```

Enter fullscreen mode Exit fullscreen mode

常见的网络掩码是 **255.255.255.0**

这对应的是二进制数**1111111111111111111110000000**。散布 0 和 1 的网络掩码没有意义，因为目的是区分同一网络内的机器和网络外的机器。

**DHCP**,**动态主机配置协议**，用于有线和无线网络，为设备提供它们需要加入网络的内容。其中包括网络掩码，主机自身的 IP 地址，以及默认网关**，互联网的其余部分就在这里。**

 **有些范围是私有的，任何人都可以使用，但不是唯一的。其中一个范围是**10 . 0 . 0 . 0–10 . 255 . 255 . 255**。不太可能有人会尝试连接到通过 Wi-Fi 连接的手机或笔记本电脑，或者更确切地说，*合法地*尝试连接，为此使用私有地址范围是有意义的，因此，我们将使用 **10.10.10.0** 作为我们的网络。

一个新的主机，比如说一个 Android 手机，连接到网络。DHCP 向该主机发送一个地址— **10.10.10.100** —一个网络掩码— **255.255.255.0** —和一个默认网关— **10.10.10.1** 。

从 0 到 255，我们有 256 个地址，去掉网络、网关和广播三个，剩下 253 个。同时，我们有更多的人和更多的设备。笔记本电脑、手机、平板电脑等等，占据了所有这 253 个地址。因此，我们说我们有增长的空间，并将 **10.10.11.0-255** 添加到我们已经拥有的 **10.10.10.0-255** 中，DHCP 租约，即 DHCP 服务器将此 IP 地址分配给此 MAC 地址(网络设备的实际唯一地址)的时间到了，因此此 Android 手机获得了一个新地址。 **10.10.11.100** 。

> 00001010 00001010 0000101**0**00000001-10 . 10 . 10 . 1-**网关**
> 
> 00001010 00001010 0000101**1**01100100-10 . 10 . 11 . 100-**主持人**
> 
> 11111111 11111111 1111111 **1** 00000000 - 255.255.255.0 - **Netmask**

当网络掩码数字为 1 时，两个地址之间的数字应该相同，否则它们不在同一个网络中。

而且，如果你的网关不在同一个网络中，你怎么能到达互联网的其他地方呢？

所以我举报了这个问题。

几周过去了。

转述:“走开孩子，你打扰我了。”

一个月后，电话可以接通了。也许是组织结构图中职位比我高的人抱怨了。也许他们的某个设备失去了租约，并获得了一个新的网络外 IP 地址。也许——**喘息！** —他们阅读了我的电子邮件并解决了问题。我永远不会知道。

但这只是关于 IP 如何工作以及网络掩码的用途。

如果你有任何问题或意见，我将很高兴听到它。在 [Twitter](https://twitter.com/jacobydave) 或[上问我，在我的博客回购](https://github.com/jacoby/jacoby.github.io)上做文章。**