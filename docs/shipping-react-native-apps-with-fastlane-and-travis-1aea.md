# ä¸æµªå­å’Œç‰¹æ‹‰ç»´æ–¯ä¸€èµ·å‘å¸ƒ React æœ¬åœ°åº”ç”¨

> åŸæ–‡ï¼š<https://dev.to/carloscuesta/shipping-react-native-apps-with-fastlane-and-travis-1aea>

#### *åŸè½½äº [carloscuesta çš„åšå®¢](https://carloscuesta.me/blog/react-native-meets-codepush)*

ä¸€å¹´å‰[æˆ‘å†™äº†ä¸€ç¯‡å…³äºæµªå­å¦‚ä½•å¸®åŠ©æˆ‘ä»¬æ”¹å–„ **React åŸç”Ÿ**åº”ç”¨å‘è´§æµç¨‹çš„å¸–å­](https://carloscuesta.me/blog/shipping-react-native-apps-with-fastlane/)ã€‚åœ¨é‚£ä¸€åˆ»ï¼Œå³ä½¿ä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨åŒ–çš„ï¼Œ**éƒ¨ç½²** **ä¾é **æˆ‘ä»¬ä¸­çš„**ä¸€ä¸ªäºº**å¸¦ç€**é…å¤‡çš„æœºå™¨**æ¥å‘å°„ç«ç®­ğŸš€ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ **ç»ç”± **CI æœºå™¨**æŒç»­äº¤ä»˜**æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œä»è€Œ**è½»æ¾åœ°**æ”¹è¿› **å¤„ç†**ã€‚è¿™æ—¶ï¼Œç‰¹æ‹‰ç»´æ–¯Â·CI å‰æ¥æ•‘æ´ï¼ğŸ‘·ğŸ»â€â™‚ï¸****

### æµç¨‹

åœ¨è§£é‡Šé—®é¢˜æ‰€åœ¨ä¹‹å‰ï¼Œé‡è¦çš„æ˜¯**ç†è§£**æˆ‘ä»¬éƒ¨ç½²è¿‡ç¨‹çš„**å¤æ‚æ€§**ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬æœ‰**ä¸¤ä¸ªå¹³å°** : *iOS* ğŸï¼Œ*å®‰å“*ğŸ¤–æ¯ä¸ªå¹³å°ç¼–è¯‘ä¸¤ä¸ªåº”ç”¨ç¨‹åº:Beta æµ‹è¯•åº”ç”¨ç¨‹åºï¼Œä¹Ÿç§°ä¸º**é‡‘ä¸é›€**ğŸ¤å’Œ**ç”Ÿäº§**ğŸš€ä¸€ä¸ªã€‚

åŸºæœ¬ä¸Šæ¯ä¸ªç«™å°éƒ½ä¼šä¾æ¬¡ç»è¿‡ä¸€æ¡è½¦é“ï¼Œå°±åƒè¿™æ ·ğŸ‘‡

*   [ä»£ç æ ‡å¿—è®¾ç½®](#codesignsetup) âœï¸
*   [ç‰ˆæœ¬ç®¡ç†](#versionmanagement)ğŸ”–
*   [åŸç”Ÿç‰ˆæœ¬](#nativebuilds)ğŸ“¦
*   [Beta æµ‹è¯•åˆ†å¸ƒå›¾](#betatestingdistribution)ğŸ¤
*   [é—¨åº—åˆ†å¸ƒ](#storesdistribution)ğŸš€
*   [æ¥æºåœ°å›¾](#sourcemaps)ğŸ—º
*   [äº¤æµ](#communication) ğŸ—£

ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥äº†è§£éƒ¨ç½²æµç¨‹çš„æ¯ä¸€æ­¥ï¼Œä»¥äº†è§£æˆ‘ä»¬çš„å·¥ä½œã€‚

#### ä»£ç æ ‡å¿—è®¾ç½®âœï¸

**ç­¾çº¦**åŸç”Ÿç”³è¯·**å“äºº**ğŸ˜±ï¼Œç‰¹åˆ«æ˜¯å½“ä½ æ¥è‡ª JavaScript ç”Ÿæ€ç³»ç»Ÿçš„æ—¶å€™ã€‚è¯ä¹¦ã€é¢„ç½®æè¿°æ–‡ä»¶ã€å¯†é’¥...åœ¨å¼€å‘å›¢é˜Ÿä¸­ä½¿ç”¨å®ƒä»¬æ—¶ï¼Œä½ å¿…é¡»éå¸¸æœ‰æ¡ç†ã€‚

æˆ‘ä»¬é€šè¿‡*é‡‡ç”¨äº† [codesigning.guide æ¦‚å¿µã€‚åŸºæœ¬ä¸Šï¼Œè¿™ä¸ªæƒ³æ³•æ˜¯é€šè¿‡ä¸€ä¸ªç‰¹å®šçš„ **git åº“**åˆ°**å­˜å‚¨**å’Œ**åœ¨æ•´ä¸ªå¼€å‘å›¢é˜Ÿä¸­åˆ†å‘**è¯ä¹¦æ¥å®ç°çš„ã€‚æˆ‘ä»¬å°† **iOS** å’Œ **Android** ä»£ç ç­¾åæ–‡ä»¶å­˜å‚¨åœ¨ GitHub ä¸Šçš„åŠ å¯†ç§æœ‰ git å­˜å‚¨åº“ä¸­ã€‚](https://codesigning.guide)*

 *ç„¶åï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªéƒ¨ç½²ä¸Šçš„ **CI** æœºå™¨**å…‹éš†**T4ã€‘ä»“åº“å’Œ**å®‰è£…**è§£å¯†åçš„è¯ä¹¦ã€‚åœ¨ **iOS** ä¸Šï¼ŒCI ä¼šåˆ›å»ºä¸€ä¸ª [*OS X é’¥åŒ™ä¸²*](https://en.wikipedia.org/wiki/Keychain_(software)) æ¥å®‰è£…è¯ä¹¦ã€‚

#### ç‰ˆæœ¬ç®¡ç†ğŸ”–

**åŸç”Ÿæ„å»º**å’Œå•†åº—**è¦æ±‚**ä»£ç **ç‰ˆæœ¬å‡¸èµ·**ã€‚

æ¯ä¸ªå¹³å°éƒ½æœ‰è‡ªå·±ç®¡ç†ç‰ˆæœ¬å’Œæ„å»ºå·çš„æ–¹å¼ã€‚è¿™ä¸¤ä¸ªç‰ˆæœ¬çš„åŒºåˆ«åœ¨äº,**ç‰ˆæœ¬**åº”è¯¥è¢«ç”¨ä½œæ ‡è¯†æ–°ç‰ˆæœ¬çš„**å…¬å…±å­˜å‚¨ç¼–å·**,è€Œ**ç‰ˆæœ¬ç¼–å·**æ˜¯ä¸€ä¸ªé€’å¢çš„æ ‡è¯†ç¬¦ï¼Œå®ƒä¼šåœ¨æ¯ä¸ªç‰ˆæœ¬ä¸­å‡ºç°ã€‚

**å®‰å“**ğŸ¤–

*   å…¬å¼€ç‰ˆæœ¬å·:`versionName`
*   æ„å»ºç¼–å·:`VERSION_CODE`

**iOS** ğŸ

*   å…¬å¼€ç‰ˆæœ¬å·:`CFBundleShortVersionString`
*   æ„å»ºç¼–å·:`CFBundleVersion`å’Œ`CURRENT_PROJECT_VERSION`

è¿™äº›å±æ€§å­˜å‚¨åœ¨`.plist`ã€`.pbxproj`ã€`.properties`å’Œ`.gradle`æ–‡ä»¶ä¸­ã€‚ä¸ºäº†è‡ªåŠ¨åŒ–å’Œè¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨[**package . JSON****version**number](https://docs.npmjs.com/files/package.json#version)ä½œä¸ºæˆ‘ä»¬**å…¬å…±ç‰ˆæœ¬å·**çš„**æ¥æºğŸ’¯ã€‚è¿™å…è®¸æˆ‘ä»¬ä½¿ç”¨ [`npm version` cli å‘½ä»¤](https://docs.npmjs.com/cli/version)æ¥ç®¡ç†å‡¸ç‚¹ã€‚**

#### åŸç”Ÿæ„å»ºğŸ“¦

æˆ‘ä»¬éœ€è¦**æä¾›**ä¸¤å°**æœºå™¨**æ¥æ„å»ºå’Œç¼–è¯‘æˆ‘ä»¬çš„æœ¬åœ°åº”ç”¨ç¨‹åºã€‚

å¯¹äº **iOS** ï¼Œæˆ‘ä»¬ç”¨ **Xcode** è®¾ç½®äº†ä¸€ä¸ª **macOS ç³»ç»Ÿ**ï¼Œå› ä¸ºè¿™æ˜¯ç¼–è¯‘å’Œç­¾ç½²åº”ç”¨ç¨‹åºçš„å”¯ä¸€æ–¹æ³•ã€‚åœ¨ **Android** ä¸Šï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª **Linux** ç³»ç»Ÿï¼Œä»¥åŠæˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰ **Android Studio** ã€åŒ…å’Œå·¥å…·ã€‚

é‚£äº›æœºå™¨æ˜¯ç”±æˆ‘ä»¬çš„ **CI** åˆ›é€ çš„ï¼Œè¿™æ„å‘³ç€æ¯ä¸€ä¸ªæ„å»ºéƒ½åœ¨ä¸€ä¸ªæ–°çš„**æ–°é²œçš„**å’Œ**å¹²å‡€çš„**ç¯å¢ƒä¸­è¿è¡ŒğŸ’»ã€‚

#### Beta æµ‹è¯•åˆ†å¸ƒğŸ¤

ä¸ºäº†**å°†**åº”ç”¨**åˆ†å‘ç»™**æµ‹è¯•äººå‘˜**ï¼Œæˆ‘ä»¬åœ¨ **iOS** ä¸Šä½¿ç”¨ [TestFlight](https://developer.apple.com/testflight/) ï¼Œåœ¨ **Android** ä¸Šä½¿ç”¨ [HockeyApp](https://hockeyapp.net) ã€‚æˆ‘ä»¬å°è¯•äº† *Google Play æµ‹è¯•ç‰ˆ*ï¼Œä½†æ˜¯ä¸ HockeyApp ç›¸æ¯”ï¼Œå®ƒåœ¨åº”ç”¨æ¨å‡ºä¸Šå¤ªæ…¢äº†ã€‚**

#### é—¨åº—é…é€ğŸš€

ä¸ºäº†**å°†**åº”ç”¨**åˆ†å‘**åˆ°**å•†åº—**ï¼Œæˆ‘ä»¬å°†ç”Ÿäº§ç‰ˆæœ¬ä¸Šä¼ åˆ° **iOS** ä¸Šçš„ [TestFlight](https://developer.apple.com/testflight/) å’Œ[Android ä¸Šçš„](https://hockeyapp.net)[è°·æ­Œ Play å•†åº—](https://hockeyapp.net)ã€‚é‡Šæ”¾ç”±äººæ‰‹åŠ¨å®Œæˆã€‚

#### æ¥æºåœ°å›¾ğŸ—º

ä¸ºäº†è·å¾—äººç±»å¯è¯»çš„å…³äºå´©æºƒå’Œé”™è¯¯çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå«åš [Bugsnag](http://bugsnag.com) çš„æœåŠ¡ã€‚æ¯æ¬¡æˆ‘ä»¬éƒ¨ç½²ä¸€ä¸ªæ–°çš„æ„å»ºï¼Œæˆ‘ä»¬éœ€è¦**ä¸Šä¼ ** **è°ƒè¯•ç¬¦å·** `.dSYM`å’Œ **sourcemaps** åˆ° Bugsnagã€‚

#### æ²Ÿé€šğŸ—£

æœ€åï¼Œå½“åº”ç”¨ç¨‹åºéƒ¨ç½²å®Œæ¯•ï¼Œæˆ‘ä»¬éœ€è¦**é€šçŸ¥**æˆ‘ä»¬çš„**æµ‹è¯•äººå‘˜**ã€**å‘å¸ƒç»ç†**å’Œ**å¼€å‘è€…**ï¼Œæˆ‘ä»¬æœ‰äº†æ–°ç‰ˆæœ¬ã€‚æˆ‘ä»¬å°† [Slack](https://slack.com/) ä¸ä¸€ä¸ªå‘æŸäº›é¢‘é“å‘é€è­¦æŠ¥çš„æœºå™¨äººä¸€èµ·ä½¿ç”¨ã€‚

### é—®é¢˜

æ¯æ¬¡æˆ‘ä»¬**æƒ³è¦** **åˆ°**åšä¸€ä¸ª**é‡Šæ”¾**ï¼Œæˆ‘ä»¬ä¸å¾—ä¸**æ‰‹åŠ¨å¼€ç«**ğŸ”¥**æµªå­**éƒ¨ç½²è½¦é“ã€‚è¿™æ„å‘³ç€**äººçš„å› ç´ **æ˜¯éœ€è¦çš„ã€‚è¿™æ˜¯ä¸€ä¸ª**è€—æ—¶çš„**è¿‡ç¨‹ï¼Œç»å¸¸ç”±äºä»£ç ç¬¦å·ã€æœ‰åè§çš„ç¯å¢ƒã€è½¯ä»¶æ›´æ–°ã€æœ¬æœºå¹³å°ä¾èµ–æ€§è€Œå¤±è´¥...

> #### **The machine** should **work** , and **people** should **think**

æ¯«æ— ç–‘é—®ï¼Œæˆ‘ä»¬å†³å®šé€šè¿‡**è‡ªåŠ¨åŒ–æ‰€æœ‰äº‹æƒ…**æ¥**ç»“æŸ**é‚£äº›**é—®é¢˜**ï¼

### è§£

è§£å†³æ–¹æ¡ˆæ˜¯å°†è¿™ä¸ª**è‡ªåŠ¨åŒ–æµç¨‹**å®æ–½åˆ°ä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œç”± **[è¿ç»­ä¸æ–­åœ°å°†](https://en.wikipedia.org/wiki/Continuous_delivery)** æˆ‘ä»¬çš„`master`åˆ†å…¬å¸ç¥å¥‡åœ°æ¨é€åˆ°å•†åº—ğŸ‰ï¼Œè®©ç»ç†è‡ªç”±å†³å®šä½•æ—¶å‘å¸ƒæ–°ç‰ˆæœ¬ã€‚æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¿˜è®°ä¸€åˆ‡ï¼Œå¿«ä¹åœ°ç”Ÿæ´»ï¼â¤ï¸

ç°åœ¨æˆ‘ä»¬å°†**çœ‹ä¸€çœ‹**æˆ‘ä»¬å¦‚ä½•**é›†æˆ**T4ã€‘ç‰¹æ‹‰ç»´æ–¯å’Œ*æµªå­*åˆ°**è‡ªåŠ¨åŒ–**æˆ‘ä»¬åº”ç”¨çš„**éƒ¨ç½²**ğŸ‘ã€‚

#### æµªå­

æˆ‘ä»¬æœ‰ä¸¤æ¡è·¯çº¿ï¼Œä¸€æ¡é’ˆå¯¹ Androidï¼Œä¸€æ¡é’ˆå¯¹ iOSã€‚æˆ‘ç¨å¾®ç®€åŒ–äº†ä¸€ä¸‹è½¦é“ï¼Œä»¥ä¾¿é›†ä¸­è§£é‡Šå®ƒçš„é‡è¦éƒ¨åˆ†ã€‚é¦–å…ˆæˆ‘ä»¬éƒ¨ç½² Android å¹³å°ï¼Œç„¶åæ˜¯ iOSã€‚

**é€šé“** **æ¥æ”¶**æ¥è‡ª`package.json`çš„**ç‰ˆæœ¬**å·ï¼Œæ­£å¦‚æˆ‘ä¹‹å‰æ‰€è¯´ï¼Œè¿™å…è®¸æˆ‘ä»¬é€šè¿‡ npm è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚

æˆ‘ä»¬åšçš„**ç¬¬ä¸€ä»¶**äº‹å°±æ˜¯**æ’****å…¬** **ç‰ˆ**å·å’Œ **build å·**ã€‚åœ¨ **iOS** é€šé“ä¸Šï¼Œæˆ‘ä»¬éœ€è¦`setup_certificates`ï¼Œå°†å®ƒä»¬ä¿å­˜åœ¨é’¥åŒ™é“¾ä¸Šï¼Œå¹¶èƒ½å¤Ÿå¯¹åº”ç”¨ç¨‹åºè¿›è¡Œç­¾åã€‚

ä¹‹åæˆ‘ä»¬å¼€å§‹`canary`ğŸ¤å’Œ`production`ğŸš€è½¦é“ã€‚è¿™ä¸¤ä¸ªäººå°±æ˜¯**æ‰“é€ ****åŸç”Ÿ app** çš„äººã€‚

*   `Canary` : Beta æµ‹è¯•å»ºé€ ï¼Œè¿é€åˆ°*è¯•é£*å’Œ*éœå…‹äºšæ™®*ã€‚
*   `Production`:ç”Ÿäº§å»ºé€ ï¼Œè¿é€åˆ°*è¯•é£*å’Œ*è°·æ­Œ Play å•†åº—*ã€‚

ç„¶åï¼Œæˆ‘ä»¬**ä¸Šä¼ **æ‰€æœ‰çš„**æºåœ°å›¾**å’Œ**è°ƒè¯•**ç¬¦å·**æ–‡ä»¶**åˆ° *Bugsnag* ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª **git åˆ†æ”¯**ï¼Œåœ¨é‚£é‡Œ**ç‰ˆæœ¬å°†é€šè¿‡`commit_and_push_version_bump`é€šé“**æäº¤**ã€‚åæ¥ï¼Œåœ¨ iOS é€šé“ä¸Šï¼Œæˆ‘ä»¬ä½¿ç”¨`git_flow_merge`é€šé“å°†åˆ›å»ºçš„ **git åˆ†æ”¯**åˆå¹¶åˆ°`master`ä¹‹ä¸Šã€‚æˆ‘ä»¬éœ€è¦æäº¤ä¿®æ”¹ï¼Œä»¥ä¾¿åœ¨éƒ¨ç½²çš„åŒæ—¶ç»´æŠ¤ç‰ˆæœ¬ã€‚å¦åˆ™ï¼Œå•†åº—åº”è¯¥æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå³ä¸Šä¼ çš„ç‰ˆæœ¬å·²ç»å­˜åœ¨ï¼**

æœ€åæˆ‘ä»¬**åˆ°è¾¾**ç¦»å¼€**æ‡ˆæ€ **ï¼Œåˆ°**ä¼ è¾¾**åŒæ–¹**éƒ¨ç½²**ã€‚

**å®‰å“**ğŸ¤–

```
lane :deployment do |version: version|
  bump_version_number(version: version)
  canary
  production
  sh 'npm run repositories:upload:android'
  commit_and_push_version_bump
  slack_notification(platform: 'Android', version: version)
end 
```

Enter fullscreen mode Exit fullscreen mode

**iOS** ğŸ

```
lane :deployment do |version: version|
  setup_certificates
  bump_version_number(version: version)
  canary
  production
  sh 'npm run repositories:upload:ios'
  commit_and_push_version_bump
  git_flow_merge(version: version)
  slack_notification(platform: 'iOS', version: version)
end 
```

Enter fullscreen mode Exit fullscreen mode

å› æ­¤ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„ git æ—¥å¿—åœ¨åˆå¹¶åˆ°`master`çš„åˆ†æ”¯å¹¶è¿›è¡Œéƒ¨ç½²åçš„æ ·å­ğŸ™Œï¼š

[![GitHub log](../Images/4e8d46fe2d7cd2111ebd2fd14070fd8d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--psuC_TUk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/carloscuesta/image/upload/ghlog.png)

#### ç‰¹æ‹‰ç»´æ–¯è¯

æˆ‘ä»¬ä½¿ç”¨ **[æ„å»ºé˜¶æ®µ](https://docs.travis-ci.com/user/build-stages)** ï¼Œåœ¨**ä¸‰ä¸ªæ­¥éª¤****ä¸­ä¾æ¬¡è¿è¡Œæˆ‘ä»¬çš„éƒ¨ç½²æµç¨‹**ã€‚å½“æˆ‘ä»¬çš„**æµ‹è¯•é€šè¿‡** âœ….æ—¶ï¼Œè¿™å…è®¸æˆ‘ä»¬**åªåœ¨`master`åˆ†æ”¯ä¸Šéƒ¨ç½²**æˆ‘ä»¬çš„**åº”ç”¨**

 **è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ„å»ºé˜¶æ®µğŸ‘‡

[![travis-build-stages](../Images/7d1b0c0f8da87c0bacb75845ed9cfdd6.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--qY-g1Uzf--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://res.cloudinary.com/carloscuesta/image/upload/travis-build-stages.png)

æ¯ä¸ª**å»ºé€ é˜¶æ®µ**éƒ½æœ‰ä»–**è‡ªå·±çš„** **é¢„å¤‡**å’Œ**ç¯å¢ƒ**ã€‚ä¾‹å¦‚ï¼Œ`Deploy iOS`è¿è¡Œåœ¨è£…æœ‰ Xcode å’Œ Node.js çš„ [macOS æœºå™¨](https://docs.travis-ci.com/user/reference/osx/)ä¸Šï¼Œè€Œ`Deploy Android`ä½¿ç”¨è£…æœ‰ JDKã€AndroidSDK å’Œ Node.js çš„ [Ubuntu æœºå™¨](https://docs.travis-ci.com/user/languages/java/)

**æµ‹è¯•é˜¶æ®µ**

åœ¨**ç¬¬ä¸€é˜¶æ®µ**æˆ‘ä»¬æ‰§è¡Œ**æ£‰ç»’**å’Œ**æµ‹è¯•å¥—ä»¶**ã€‚ä»¥ç¡®ä¿ä¸€åˆ‡æŒ‰é¢„æœŸè¿è¡Œã€‚å¦‚æœè¿™é‡Œå‡ºç°æ•…éšœï¼Œæˆ‘ä»¬ä¼šè‡ªåŠ¨åœæ­¢éƒ¨ç½²ã€‚

```
- stage: Test and lint âœ…
  language: node_js
  node_js: 8.5.0
  install: yarn
  script: npm run test:lint && npm run test:unit 
```

Enter fullscreen mode Exit fullscreen mode

**å®‰å“é˜¶æ®µ**ğŸ¤–

Android é˜¶æ®µ**åˆ›å»º**ä¸€ä¸ª**æä¾›çš„**å’Œ [Ubuntu æœºå™¨](https://docs.travis-ci.com/user/languages/java/)ä»¥åŠæ‰€æœ‰éœ€è¦çš„è½¯ä»¶å’Œä¾èµ–ã€‚ç„¶åæˆ‘ä»¬å»ºé€ é‡‘ä¸é›€ğŸ¤å’Œç”Ÿäº§ğŸš€åº”ç”¨ç¨‹åºã€‚ä¹‹åï¼Œæˆ‘ä»¬éƒ¨ç½²å®ƒä»¬ã€‚å¤§çº¦ 15 åˆ†é’Ÿåâ°æˆ‘ä»¬çš„å®‰å“åº”ç”¨ä¸Šå¸‚äº†ã€‚ğŸ‘

```
- stage: Deploy Android ğŸ¤–
  if: branch = master AND type = push
  language: android
  jdk: oraclejdk8
  android:
    components:
      - tools
      - platform-tools
      - android-26
      - extra-google-m2repository
      - extra-google-google_play_services
  before_install:
    - nvm install 8.5.0
    - gem install bundler
    - bundle install
  before_script:
    - ./internals/scripts/travis/gitconfig.sh
  install: yarn
  script: npm run deployment:android 
```

Enter fullscreen mode Exit fullscreen mode

**iOS é˜¶æ®µ**ğŸ

iOS é˜¶æ®µ**åˆ›å»º**ä¸€ä¸ª**ä¾›åº”çš„** [macOS æœºå™¨](https://docs.travis-ci.com/user/reference/osx/)å¸¦æœ‰ Xcode å’Œæ‰€æœ‰éœ€è¦çš„ä¾èµ–é¡¹ã€‚ç„¶åæˆ‘ä»¬å»ºé€ é‡‘ä¸é›€ğŸ¤å’Œç”Ÿäº§ğŸš€åº”ç”¨ç¨‹åºã€‚ä¹‹åï¼Œæˆ‘ä»¬éƒ¨ç½²å®ƒä»¬ã€‚å¤§çº¦ 20 åˆ†é’Ÿåâ°æˆ‘ä»¬çš„ iOS åº”ç”¨å·²ç»ä¸Šå¸‚ã€‚ğŸ‘

```
- stage: Deploy iOS ğŸ
  if: branch = master AND type = push
  language: node_js
  node_js: 8.5.0
  os: osx
  osx_image: xcode9.2
  before_install: bundle install
  before_script:
    - ./internals/scripts/travis/gitconfig.sh
  install: yarn
  script: npm run deployment:ios 
```

Enter fullscreen mode Exit fullscreen mode

### å¸å–æ•™è®­

*   é€šè¿‡**å°†æ‰€æœ‰äº‹æƒ…**è‡ªåŠ¨åŒ–ï¼Œå°½å¯èƒ½é¿å…äººä¸ºå› ç´ ï¼
*   åŸç”Ÿç”Ÿæ€ç³»ç»Ÿæ˜¯è‰°éš¾çš„ï¼Œæœ‰æ—¶æœ‰ç‚¹ä»¤äººæ²®ä¸§ï¼Œä½ åº”è¯¥æ¥å—è¿™ä¸€ç‚¹ã€‚è¿™ä¸æ˜¯æˆ‘ä»¬çš„ä¸“é•¿ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ JS å¼€å‘äººå‘˜ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šäººå’Œæ–‡æ¡£å¯ä»¥æä¾›å¸®åŠ©ã€‚
*   åˆ¶ä½œ**æµç¨‹**ã€‚

æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ[åœ¨ twitter @crloscuesta ä¸Šä¸ºæˆ‘å‘å–Š](https://twitter.com/crloscuesta)***