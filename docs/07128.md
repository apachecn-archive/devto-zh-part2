# å¦‚ä½•å°† Microsoft Power BI å›¾è¡¨åµŒå…¥æ‚¨çš„ React åº”ç”¨ç¨‹åº

> åŸæ–‡:[https://dev . to/akshay 5995/how-to-embed-Microsoft-power-bi-charts-into-your-react-application-897](https://dev.to/akshay5995/how-to-embed-microsoft-power-bi-charts-into-your-react-application-897)

ä½¿ç”¨åˆé€‚çš„å·¥å…·ï¼Œå°† Microsoft Power BI å›¾è¡¨åµŒå…¥åˆ° React åº”ç”¨ç¨‹åºä¸­å¯ä»¥è½»è€Œæ˜“ä¸¾ã€‚

æ³¨æ„:*æœ¬æ–‡å‡è®¾æ‚¨å¯¹ Microsoft Power BI å’Œä¸€äº›ç›¸å…³æœ¯è¯­æœ‰ç›¸å½“ä¸é”™çš„äº†è§£ã€‚*

## TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)

ä½¿ç”¨æ‚¨æœ€å–œæ¬¢çš„è½¯ä»¶åŒ…ç®¡ç†å™¨å®‰è£…`powerbi-report-component`ã€‚

`npm i powerbi-report-component --save-dev`

æˆ–è€…ï¼Œ

`yarn add powerbi-report-component --dev`

åŸºæœ¬ç”¨æ³•ï¼Œ

```
import Report from "powerbi-report-component";

<Report
  embedType="report"
  tokenType="Embed"
  accessToken=""
  embedUrl=""
  embedId=""
  permissions="All"
  style={myStyleObject}
/> 
```

* * *

## [](#now-for-the-those-who-stayed-)ç°åœ¨ï¼Œå¯¹äºé‚£äº›ç•™ä¸‹æ¥çš„äºº:)

å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå°† Power BI æŠ¥å‘ŠåµŒå…¥åˆ° React åº”ç”¨ç¨‹åºä¸­å¯èƒ½æ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹æƒ…ã€‚å°½ç®¡å¾®è½¯å…³äºè¿™ä¸ªä¸»é¢˜çš„æ–‡æ¡£éå¸¸ç®€æ´ã€‚

æˆ‘åªæ˜¯ä» React å¼€å‘äººå‘˜çš„è§’åº¦å‘Šè¯‰ä½ éœ€è¦ä»€ä¹ˆï¼Œè€Œä¸æ˜¯è¿›å…¥å®ç°æˆ–æ¶æ„çš„ç»†èŠ‚ã€‚

æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åµŒå…¥æ‚¨çš„ Power BI æŠ¥å‘Š:

1.  ç”¨æˆ·æ‹¥æœ‰æ•°æ®
2.  åº”ç”¨ç¨‹åºæ‹¥æœ‰æ•°æ®

ä¸»è¦åŒºåˆ«åœ¨äº:

ç”¨æˆ·æ‹¥æœ‰çš„æ•°æ®æ ·æœ¬ç”¨äºä¸ºæ‚¨çš„ç»„ç»‡åµŒå…¥ï¼ŒåµŒå…¥çš„æŠ¥å‘Šè¯»è€…å¯ä»¥æ˜¯æ‚¨ç»„ç»‡ä¸­çš„ Power BI Pro æˆ–å…è´¹ç”¨æˆ·ã€‚ç”¨æˆ·å¿…é¡»ä½¿ç”¨ä»–ä»¬çš„ PBI å¸æˆ·ç™»å½•ã€‚éœ€è¦ Power BI Premium è®¸å¯è¯ã€‚(ä¾‹å¦‚ï¼Œç”¨æˆ·æ˜¯ä½ å¹¿å‘Šçš„ä¸€éƒ¨åˆ†)

App Owns æ•°æ®æ ·æœ¬æ˜¯ä¸ºæ‚¨çš„å®¢æˆ·åµŒå…¥çš„ï¼ŒåµŒå…¥çš„æŠ¥å‘Šè¯»è€…å¯ä»¥æ˜¯æ‚¨è‡ªå·±çš„å®¢æˆ·(å‡è®¾æ‚¨æ˜¯ ISV åº”ç”¨æä¾›å•†)ã€‚æ‰€ä»¥ä¸èƒ½ç™»å½•ã€‚éœ€è¦ Power BI Embedded è®¸å¯è¯ã€‚(å³æ‚¨å¹¿å‘Šä¹‹å¤–çš„ç”¨æˆ·)

> æ¥æº:[https://community . power bi . com/t5/Developer/App-vs-User-Owns-Data/TD-p/300729](https://community.powerbi.com/t5/Developer/App-vs-User-Owns-Data/td-p/300729)

æ‚¨å¿…é¡»é€‰æ‹©è°å°†ä½¿ç”¨åŒ…å«æ‚¨çš„åµŒå…¥å¼æŠ¥å‘Šçš„åº”ç”¨ç¨‹åºï¼Œå³å†…éƒ¨ç”¨æˆ·(å¹¿å‘Šç”¨æˆ·)ä¸å¤–éƒ¨ç”¨æˆ·(éå¹¿å‘Šç”¨æˆ·)ã€‚

æ—¢ç„¶ä½ å·²ç»å†³å®šäº†è¦é€‰æ‹©å“ªç§æ–¹æ³•ã€‚

å¸Œæœ›ä½ å·²ç»å‡†å¤‡å¥½äº†ä½ çš„æŠ¥å‘Šï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨[https://powerbi.microsoft.com](https://powerbi.microsoft.com)æŸ¥çœ‹ã€‚

ç°åœ¨ï¼Œå¯¼èˆªåˆ°æ‚¨çš„å·¥ä½œåŒºä¸‹çš„æŠ¥å‘Šï¼Œæ‚¨çš„ URL åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

**[https://app . power bi . com/groups/{ workspace-id }/reports/{ report-id }](https://app.powerbi.com/groups/%7Bworkspace-id%7D/reports/%7Breport-id%7D)**

å¯¹äºä»ªè¡¨æ¿ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°è¿™æ ·çš„å†…å®¹:

**[https://app . power bi . com/groups/{ workspace-id }/dashboards/{ dashboard-id }](https://app.powerbi.com/groups/%7Bworkspace-id%7D/dashboards/%7Bdashboard-id%7D)T3ã€‘**

è¦åµŒå…¥æ‚¨çš„æŠ¥å‘Šï¼Œæ‚¨éœ€è¦ä»¥ä¸‹å†…å®¹:

1.  æŠ¥å‘Š ID:æ¥è‡ª URL
2.  å·¥ä½œåŒº ID:åŒæ ·ï¼Œæ¥è‡ª URL
3.  ä»¤ç‰Œ:AAD æˆ–åµŒå…¥ä»¤ç‰Œ(ç”¨äºèº«ä»½éªŒè¯))

**æ³¨æ„:åœ¨é‡‡ç”¨ç”¨æˆ·æ‹¥æœ‰æ•°æ®æ–¹æ³•æ—¶ä½¿ç”¨ AAD ä»¤ç‰Œï¼Œåœ¨é‡‡ç”¨åº”ç”¨æ‹¥æœ‰æ•°æ®æ–¹æ³•æ—¶ä½¿ç”¨ Embed ä»¤ç‰Œã€‚**

*åµŒå…¥ Url:* (å°†ç”±æŠ¥å‘Š ID å’Œå·¥ä½œåŒº ID ç»„æˆ)

> [https://app.powerbi.com/reportEmbed?reportId=*æŠ¥è¡¨-id*T6ã€‘ç¾¤ç»„ Id= *å·¥ä½œåŒº-id*T5ã€‘](https://app.powerbi.com/reportEmbed?reportId=_report-id_&groupId=_workspace-id_)

å°†æŠ¥å‘ŠåµŒå…¥ react åº”ç”¨ç¨‹åºä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ã€‚

1.  ä½¿ç”¨ iframe
2.  ä½¿ç”¨å¾®è½¯æä¾›çš„ Power BI JS API

ä½¿ç”¨ iframe éå¸¸ç®€å•ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰ React ç»„ä»¶æä¾›çš„çµæ´»æ€§ï¼Œæ¯”å¦‚å›è°ƒæˆ–äº‹ä»¶è§¦å‘å™¨ã€‚

æ‚¨å¯ä»¥åƒè¿™æ ·ä½¿ç”¨ iframe ä½¿ç”¨ç”Ÿæˆçš„ URL è¿›è¡ŒåµŒå…¥ï¼Œ

```
<iframe
  width="800"
  height="600"
  src="http://myserver/reports/powerbi/Sales?rs:embed=true"
  allowfullscreen="true"
>
</iframe> 
```

ä½†æ˜¯ï¼Œä½œä¸º JS å¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬è‡ªç„¶å€¾å‘äºä½¿ç”¨æ›´çµæ´»çš„ JS APIã€‚

å¯ä»¥çœ‹çœ‹å¾®è½¯çš„[æ¼”ç¤ºé¡µé¢](https://microsoft.github.io/PowerBI-JavaScript/demo/v2-demo/index.html#)

ä»–ä»¬æœ‰ä¸€ä¸ªéå¸¸æ¸…æ™°çš„è§£é‡Šå’Œä½¿ç”¨ Javascript API çš„æ™®é€š JS æ¼”ç¤ºã€‚

ä½ å¯èƒ½æƒ³çŸ¥é“ï¼Œæ¼”ç¤ºæ˜¯ç”¨æ™®é€šçš„ JS åšçš„ï¼Œæ‰€ä»¥å¦‚æœæˆ‘å¿…é¡»æŠŠå®ƒåšæˆä¸€ä¸ª React ç»„ä»¶å¹¶åœ¨æˆ‘çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒï¼Œå—¯ï¼Œé‚£å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´ğŸ¤”

***power bi-report-component æ¥æ•‘æ´äº†ï¼âœ¨***

æ£€æŸ¥[åŒ…](https://www.npmjs.com/package/powerbi-report-component)ã€‚

ç”¨æ³•ï¼Œ

```
import Report from "powerbi-report-component";

<Report
  embedType="report" // or "dashboard"
  tokenType="Embed" // or "Aad"
  accessToken="" // accessToken goes here
  embedUrl="" // embedUrl goes here
  embedId="" // Report or Dashboard ID goes here
  permissions="All" // or "View"
  style={myStyleObject}
/> 
```

**ç›®å‰æ”¯æŒçš„åŠŸèƒ½:**

1.  é€šè¿‡å°†æ ·å¼ä¼ é€’ç»™åµŒå…¥çš„æŠ¥è¡¨ç»„ä»¶æ¥å®šåˆ¶æ ·å¼ã€‚
2.  è¯¥ç»„ä»¶è¿˜å…è®¸æ‚¨ä¼ é€’å›è°ƒä»¥è§¦å‘ä»¥ä¸‹äº‹ä»¶:

*æ¢é¡µ*

```
onPageChange={(data) =>
  console.log(`Page name :{data.newPage.displayName}`)
} 
```

*è½½å…¥*

```
onLoad={(report) => {
      console.log('Report Loaded!');
      this.report = report;
// Read docs to know how to use the report object that is returned
    }
} 
```

*æ•°æ®å…ƒç´ è¢«ç‚¹å‡»*

```
onSelectData={(data) =>
  console.log(`You clicked on chart: {data.visual.title}`)
} 
```

1.  ä½¿ç”¨è¿”å›åˆ°çˆ¶ç»„ä»¶çš„â€œæŠ¥å‘Šâ€å¯¹è±¡:

å…¨å±

```
setFullscreen = () => this.report.fullscreen() 
```

æ‰“å°æŠ¥å‘Š

```
printReport = () => this.report.print() 
```

æ›´æ”¹æŠ¥å‘Šæ¨¡å¼ï¼Œæ˜¾ç¤º/éšè—å¯è§†æ ‡é¢˜ã€è¿‡æ»¤å™¨(è®¾ç½®ã€è·å–ã€åˆ é™¤)

æ”¹å˜æ¨¡å¼

```
// mode can be "view" or "edit"

changeMode = mode => this.report.switchMode(mode) 
```

æ˜¾ç¤ºæˆ–éšè—å¯è§†æ ‡é¢˜

```
toggleAllVisualHeaders = bool => {
  const newSettings = {
    visualSettings: {
      visualHeaders: [
        {
          settings: {
            visible: bool,
          },
        },
      ],
    },
  }
  this.report
    .updateSettings(newSettings)
    .then(function() {
      console.log(`Visual header was toggled to {bool}`)
    })
    .catch(function(errors) {
      console.log(errors)
    })
} 
```

è®¾ç½®è¿‡æ»¤å™¨

```
//example filter object from Microsoft's demo page

    const filter = {
      $schema: "http://powerbi.com/product/schema#basic",
      target: {
        table: "Store",
        column: "Chain"
      },
      operator: "In",
      values: ["Lindseys"]
    };

    // using event handlers

    setFilter = (filter) =>
    this.report.setFilters([filter]).catch(function (errors) {
        console.log(errors);
    });

    // during load of report

    onLoad = (report) => {
      report.setFilters([filter]).catch(function (errors) {
        console.log(errors);
      });
      this.report = report;
    }
  } 
```

è·å–è¿‡æ»¤å™¨

```
getFilter = () =>
  this.report
    .getFilters()
    .then(function(filters) {
      console.log(filters)
    })
    .catch(function(errors) {
      console.log(errors)
    }) 
```

ç§»é™¤è¿‡æ»¤å™¨

```
removeFilters = () =>
  this.report.removeFilters().catch(function(errors) {
    console.log(errors)
  }) 
```

æ›´å¤šåŠŸèƒ½å³å°†æ¨å‡ºï¼âš¡ï¸

é“¾æ¥:[æ¼”ç¤ºç°åœº](http://akshay5995.github.io/powerbi-report-component)ï¼Œ [GitHub](https://github.com/akshay5995/powerbi-report-component)

> æˆ‘å¾ˆä¹æ„å¬åˆ°æ‚¨çš„æƒ³æ³•å’Œåé¦ˆ(ä»¥åŠå¯¹æ–°åŠŸèƒ½çš„ä»»ä½•è¦æ±‚ï¼Œè¯·è®¿é—®[https://github . com/akshay 5995/power bi-report-component/issues](https://github.com/akshay5995/powerbi-report-component/issues))ã€‚