# Gitflow 和 NPM 版本

> 原文:[https://dev.to/tirthaguha/gitflow-and-npm-versions-5cc7](https://dev.to/tirthaguha/gitflow-and-npm-versions-5cc7)

我遵循标准的 gitflow，我有不同的环境来测试开发版本和发布版本。主人去生产。

我还将我的 JS 应用程序分成多个私有 npm 模块，这些模块放在私有 npm 存储库中。

### [](#q1)Q1

有没有什么方法可以让我的 npm 包版本化，而不是以标准的方式构建它们的分支？

我尝试的是，我在版本中添加了`prerelease` `pre-ids`。像
`1.0.0-rc.0 //for master`
`1.0.0-beta.0 //for release`
`1.0.0-alpha.0 //for dev`

但是如果我从主版本创建一个特征分支，它包含主版本。当我试图从 it 向 dev 提交 PR 时，它显示冲突，因为 dev 的版本中有`-alpha.x`。为了解决冲突，我必须使用目标分支的版本。发布分支上的合并也有同样的问题。

而说到合并到 master，发布版本(带`-beta.0`的那个)完全取代了 master。
于是就变成了这样:在 master 上，

| 它是 | 合并后 | 版本碰撞后 |
| --- | --- | --- |
| **1.0.0-rc.0** | ~~1 . 0 . 0-RC . 0~~1 . 0 . 0-β0 | **1.0.0-rc.0** |

理想情况下，在版本升级之后，我希望它是 1.0.0-rc.1

是否有可能将包 JSONs 排除在版本控制之外。

### [](#q2)Q2

我如何在使用这些 NPM 模块的应用程序的包 JSON 中控制版本控制？它也在 *gitflow* 上，并具有分支模型，我希望该应用程序，当它在*开发*分支上构建时，它与从各自的*开发*分支发布的工件一起构建。

老实说，我可能也在滥用 gitflow，但是到目前为止，我还是很困惑，不知道自己哪里出错了。

预先感谢