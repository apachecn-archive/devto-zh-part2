# å¦‚ä½•æ„å»º Vue CLI æ’ä»¶

> åŸæ–‡:[https://dev . to/n _ tepluhina/how-to-build-a-vue-CLI-plugin-3b6b](https://dev.to/n_tepluhina/how-to-build-a-vue-cli-plugin-3b6b)

> è¿™ç¯‡æ–‡ç« æ˜¯ä»[åˆ°ä¸‹ä¸€ç¯‡](https://itnext.io/how-to-build-a-simple-vue-cli-plugin-a2e1323de1a0)äº¤å‰å‘å¸ƒçš„

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Vue æ¡†æ¶ï¼Œä½ å¯èƒ½å·²ç»çŸ¥é“ä»€ä¹ˆæ˜¯ Vue CLIã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºå¿«é€Ÿ Vue.js å¼€å‘çš„å®Œæ•´ç³»ç»Ÿï¼Œæä¾›é¡¹ç›®è„šæ‰‹æ¶å’ŒåŸå‹ã€‚

cli çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†æ˜¯ CLI æ’ä»¶ã€‚ä»–ä»¬å¯ä»¥ä¿®æ”¹å†…éƒ¨ webpack é…ç½®ï¼Œå¹¶å‘`vue-cli-service`æ³¨å…¥å‘½ä»¤ã€‚ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯ä¸€ä¸ª`@vue/cli-plugin-typescript`:å½“ä½ è°ƒç”¨å®ƒæ—¶ï¼Œå®ƒä¼šç»™ä½ çš„é¡¹ç›®æ·»åŠ ä¸€ä¸ª`tsconfig.json`å¹¶å°†`App.vue`æ”¹ä¸ºæœ‰ç±»å‹ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦æ‰‹åŠ¨æ“ä½œã€‚

æ’ä»¶éå¸¸æœ‰ç”¨ï¼Œç°åœ¨æœ‰å¾ˆå¤šæ’ä»¶ç”¨äºä¸åŒçš„æƒ…å†µ- [GraphQL + Apollo](https://github.com/Akryum/vue-apollo) æ”¯æŒï¼Œ[ç”µå­æ„å»ºå™¨](https://github.com/nklayman/vue-cli-plugin-electron-builder)ï¼Œæ·»åŠ  UI åº“ï¼Œå¦‚ [Vuetify](https://github.com/vuetifyjs/vue-cli-plugin-vuetify) æˆ– [ElementUI](https://github.com/ElementUI/vue-cli-plugin-element) ...ä½†æ˜¯å¦‚æœä½ æƒ³ä¸ºæŸä¸ªç‰¹å®šçš„åº“å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼Œè€Œå®ƒå¹¶ä¸å­˜åœ¨ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ˜¯æˆ‘çš„æ¡ˆå­ğŸ˜…...æˆ‘å†³å®šè‡ªå·±å»ºé€ å®ƒã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ª [vue-cli-plugin-rx](https://github.com/NataliaTepluhina/vue-cli-plugin-rx) ã€‚å®ƒå…è®¸æˆ‘ä»¬å‘æˆ‘ä»¬çš„é¡¹ç›®æ·»åŠ ä¸€ä¸ª`vue-rx`åº“ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„ Vue åº”ç”¨ç¨‹åºä¸­è·å¾— RxJS æ”¯æŒã€‚

## è§†å›¾-cli æ’ä»¶ç»“æ„

é¦–å…ˆï¼Œä»€ä¹ˆæ˜¯ CLI æ’ä»¶ï¼Ÿåªæ˜¯ä¸€ä¸ªæœ‰ä¸€å®šç»“æ„çš„ npm åŒ…ã€‚å…³äº[æ–‡æ¡£](https://cli.vuejs.org/dev-guide/plugin-dev.html#core-concepts)ï¼Œit **å¿…é¡»**æœ‰ä¸€ä¸ªæœåŠ¡æ’ä»¶ä½œä¸ºå…¶ä¸»è¦è¾“å‡ºï¼Œ**å¯ä»¥**æœ‰é¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚ç”Ÿæˆå™¨å’Œæç¤ºæ–‡ä»¶ã€‚

> ç°åœ¨è¿˜ä¸æ¸…æ¥šä»€ä¹ˆæ˜¯æœåŠ¡æ’ä»¶æˆ–è€…ç”Ÿæˆå™¨ï¼Œä½†æ˜¯ä¸ç”¨æ‹…å¿ƒâ€”â€”ç¨åä¼šè§£é‡Šçš„ï¼

å½“ç„¶ï¼Œåƒä»»ä½• npm åŒ…ä¸€æ ·ï¼ŒCLI æ’ä»¶çš„æ ¹æ–‡ä»¶å¤¹ä¸­å¿…é¡»æœ‰ä¸€ä¸ª`package.json`ï¼Œæœ€å¥½æœ‰ä¸€ä¸ªå¸¦æœ‰ä¸€äº›æè¿°çš„`README.md`ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬ä»ä¸‹é¢çš„ç»“æ„å¼€å§‹:

```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ index.js      # service plugin
â””â”€â”€ package.json 
```

ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¯é€‰éƒ¨åˆ†ã€‚ä¸€ä¸ª**ç”Ÿæˆå™¨**å¯ä»¥å°†é¢å¤–çš„ä¾èµ–é¡¹æˆ–å­—æ®µæ³¨å…¥åˆ°`package.json`ä¸­ï¼Œå¹¶å°†æ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚æˆ‘ä»¬éœ€è¦å®ƒå—ï¼Ÿå½“ç„¶ï¼Œæˆ‘ä»¬å¸Œæœ›å°†`rxjs`å’Œ`vue-rx`æ·»åŠ ä¸ºæˆ‘ä»¬çš„ä¾èµ–é¡¹ï¼æ›´ç¡®åˆ‡åœ°è¯´ï¼Œå¦‚æœç”¨æˆ·æƒ³åœ¨æ’ä»¶å®‰è£…æœŸé—´æ·»åŠ ç»„ä»¶ï¼Œæˆ‘ä»¬æƒ³åˆ›å»ºä¸€äº›ç¤ºä¾‹ç»„ä»¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ `generator.js`æˆ–`generator/index.js`ã€‚æˆ‘æ›´å–œæ¬¢ç¬¬äºŒç§æ–¹å¼ã€‚ç°åœ¨ç»“æ„çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:

```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ index.js      # service plugin
â”œâ”€â”€ generator
â”‚   â””â”€â”€ index.js  # generator
â””â”€â”€ package.json 
```

è¿˜æœ‰ä¸€ç‚¹è¦æ·»åŠ çš„æ˜¯ä¸€ä¸ªæç¤ºæ–‡ä»¶:æˆ‘å¸Œæœ›æˆ‘çš„æ’ä»¶è¯¢é—®ç”¨æˆ·æ˜¯å¦æƒ³è¦ä¸€ä¸ªç¤ºä¾‹ç»„ä»¶ã€‚æˆ‘ä»¬éœ€è¦åœ¨æ ¹æ–‡ä»¶å¤¹ä¸­æœ‰ä¸€ä¸ª`prompts.js`æ–‡ä»¶æ¥å®ç°è¿™ä¸ªè¡Œä¸ºã€‚å› æ­¤ï¼Œç°åœ¨çš„ç»“æ„çœ‹èµ·æ¥å¦‚ä¸‹:

```
â”œâ”€â”€ README.md
â”œâ”€â”€ index.js      # service plugin
â”œâ”€â”€ generator
â”‚   â””â”€â”€ index.js  # generator
â”œâ”€â”€ prompts.js    # prompts file
â””â”€â”€ package.json 
```

## æœåŠ¡æ’ä»¶

æœåŠ¡æ’ä»¶åº”è¯¥å¯¼å‡ºä¸€ä¸ªæ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°:ä¸€ä¸ª PluginAPI å®ä¾‹å’Œä¸€ä¸ªåŒ…å«é¡¹ç›®æœ¬åœ°é€‰é¡¹çš„å¯¹è±¡ã€‚å®ƒå¯ä»¥æ‰©å±•/ä¿®æ”¹ä¸åŒç¯å¢ƒçš„å†…éƒ¨ webpack é…ç½®ï¼Œå¹¶å‘`vue-cli-service`æ³¨å…¥é¢å¤–çš„å‘½ä»¤ã€‚è®©æˆ‘ä»¬æ€è€ƒä¸€ä¸‹:æˆ‘ä»¬æ˜¯æƒ³ä»¥æŸç§æ–¹å¼æ”¹å˜ webpack é…ç½®è¿˜æ˜¯åˆ›å»ºä¸€ä¸ªé¢å¤–çš„ npm ä»»åŠ¡ï¼Ÿç­”æ¡ˆæ˜¯**æ²¡æœ‰**ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³æ·»åŠ ä¸€äº›ä¾èµ–å…³ç³»å’Œç¤ºä¾‹ç»„ä»¶ï¼Œå¦‚æœæœ‰å¿…è¦çš„è¯ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨`index.js`ä¸­éœ€è¦æ”¹å˜çš„å°±æ˜¯:

```
module.exports = (api, opts) => {} 
```

å¦‚æœæ‚¨çš„æ’ä»¶éœ€è¦æ›´æ”¹ webpack é…ç½®ï¼Œè¯·é˜…è¯»å®˜æ–¹ Vue CLI æ–‡æ¡£ä¸­çš„æœ¬èŠ‚ã€‚

## ğŸ› ï¸é€šè¿‡ç”Ÿæˆå™¨æ·»åŠ ä¾èµ–é¡¹

å¦‚ä¸Šæ‰€è¿°ï¼ŒCLI æ’ä»¶ç”Ÿæˆå™¨å¸®åŠ©æˆ‘ä»¬æ·»åŠ ä¾èµ–é¡¹å’Œæ›´æ”¹é¡¹ç›®æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€æ­¥æ˜¯è®©æˆ‘ä»¬çš„æ’ä»¶å¢åŠ ä¸¤ä¸ªä¾èµ–:`rxjs`å’Œ`vue-rx` :

```
module.exports = (api, options, rootOptions) => {
  api.extendPackage({
    dependencies: {
      'rxjs': '^6.3.3',
      'vue-rx': '^6.0.1',
    },
  });
} 
```

ç”Ÿæˆå™¨åº”è¯¥å¯¼å‡ºä¸€ä¸ªæ¥æ”¶ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°:ä¸€ä¸ª GeneratorAPI å®ä¾‹ï¼Œç”Ÿæˆå™¨é€‰é¡¹ï¼Œå¦‚æœç”¨æˆ·ä½¿ç”¨æŸä¸ªé¢„ç½®åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ•´ä¸ªé¢„ç½®å°†ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ã€‚

`api.extendPackage`æ–¹æ³•æ‰©å±•äº†é¡¹ç›®çš„`package.json`ã€‚åµŒå¥—å­—æ®µæ˜¯æ·±åº¦åˆå¹¶çš„ï¼Œé™¤éæ‚¨å°†`{ merge: false }`ä½œä¸ºå‚æ•°ä¼ é€’ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‘`dependencies`éƒ¨åˆ†æ·»åŠ äº†ä¸¤ä¸ªä¾èµ–é¡¹ã€‚

ç°åœ¨æˆ‘ä»¬éœ€è¦æ”¹å˜ä¸€ä¸ª`main.js`æ–‡ä»¶ã€‚ä¸ºäº†è®© RxJS åœ¨ Vue ç»„ä»¶å†…éƒ¨å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥ä¸€ä¸ª`VueRx`å¹¶è°ƒç”¨`Vue.use(VueRx)`

é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæƒ³è¦æ·»åŠ åˆ°ä¸»æ–‡ä»¶ä¸­çš„å­—ç¬¦ä¸²:

```
let rxLines = `\nimport VueRx from 'vue-rx';\n\nVue.use(VueRx);`; 
```

ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨`api.onCreateComplete` hookã€‚å½“æ–‡ä»¶è¢«å†™å…¥ç£ç›˜æ—¶ï¼Œå®ƒè¢«è°ƒç”¨ã€‚

```
 api.onCreateComplete(() => {
    // inject to main.js
    const fs = require('fs');
    const ext = api.hasPlugin('typescript') ? 'ts' : 'js';
    const mainPath = api.resolve(`./src/main.${ext}`);
}; 
```

è¿™é‡Œæˆ‘ä»¬å¯»æ‰¾ä¸»æ–‡ä»¶:å¦‚æœå®ƒæ˜¯ä¸€ä¸ª TypeScript é¡¹ç›®ï¼Œå®ƒå°†æ˜¯ä¸€ä¸ª`main.ts`ï¼Œå¦åˆ™å®ƒå°†æ˜¯ä¸€ä¸ª`main.js`æ–‡ä»¶ã€‚`fs`è¿™é‡Œæ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿã€‚

ç°åœ¨è®©æˆ‘ä»¬æ”¹å˜æ–‡ä»¶å†…å®¹

```
 api.onCreateComplete(() => {
    // inject to main.js
    const fs = require('fs');
    const ext = api.hasPlugin('typescript') ? 'ts' : 'js';
    const mainPath = api.resolve(`./src/main.${ext}`);

    // get content
    let contentMain = fs.readFileSync(mainPath, { encoding: 'utf-8' });
    const lines = contentMain.split(/\r?\n/g).reverse();

    // inject import
    const lastImportIndex = lines.findIndex(line => line.match(/^import/));
    lines[lastImportIndex] += rxLines;

    // modify app
    contentMain = lines.reverse().join('\n');
    fs.writeFileSync(mainPath, contentMain, { encoding: 'utf-8' });
  });
}; 
```

è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿæˆ‘ä»¬æ­£åœ¨è¯»å–ä¸»æ–‡ä»¶çš„å†…å®¹ï¼Œå°†å®ƒåˆ†æˆå‡ è¡Œå¹¶æ¢å¤å®ƒä»¬çš„é¡ºåºã€‚ç„¶åï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª`import`è¯­å¥æœç´¢ç¬¬ä¸€è¡Œ(è¿™å°†æ˜¯ç¬¬äºŒæ¬¡è¿˜åŸåçš„æœ€åä¸€è¡Œ)å¹¶åœ¨é‚£é‡Œæ·»åŠ æˆ‘ä»¬çš„`rxLines`ã€‚åœ¨è¿™ä¹‹åï¼Œæˆ‘ä»¬åè½¬è¡Œçš„æ•°ç»„å¹¶ä¿å­˜æ–‡ä»¶ã€‚

## ğŸ’»åœ¨æœ¬åœ°æµ‹è¯• cli æ’ä»¶

è®©æˆ‘ä»¬åœ¨`package.json`ä¸­æ·»åŠ ä¸€äº›å…³äºæˆ‘ä»¬æ’ä»¶çš„ä¿¡æ¯ï¼Œå¹¶è¯•ç€å®‰è£…åˆ°æœ¬åœ°è¿›è¡Œæµ‹è¯•ã€‚æœ€é‡è¦çš„ä¿¡æ¯é€šå¸¸æ˜¯æ’ä»¶åç§°å’Œç‰ˆæœ¬(å°†æ’ä»¶å‘å¸ƒåˆ° npm æ—¶éœ€è¦è¿™äº›å­—æ®µ)ï¼Œä½†æ˜¯å¯ä»¥éšæ„æ·»åŠ æ›´å¤šä¿¡æ¯ï¼`package.json`å­—æ®µçš„å®Œæ•´åˆ—è¡¨å¯ä»¥åœ¨[è¿™é‡Œ](https://docs.npmjs.com/files/package.json)æ‰¾åˆ°ã€‚ä¸‹é¢æ˜¯æˆ‘çš„æ¡£æ¡ˆ:

```
{  "name":  "vue-cli-plugin-rx",  "version":  "0.1.5",  "description":  "Vue-cli 3 plugin for adding RxJS support to project using vue-rx",  "main":  "index.js",  "repository":  {  "type":  "git",  "url":  "git+https://github.com/NataliaTepluhina/vue-cli-plugin-rx.git"  },  "keywords":  [  "vue",  "vue-cli",  "rxjs",  "vue-rx"  ],  "author":  "Natalia Tepluhina <my@mail.com>",  "license":  "MIT",  "homepage":  "https://github.com/NataliaTepluhina/vue-cli-plugin-rx#readme"  } 
```

ç°åœ¨æ˜¯æ—¶å€™æ£€æŸ¥æˆ‘ä»¬çš„æ’ä»¶æ˜¯å¦‚ä½•å·¥ä½œçš„äº†ï¼ä¸ºæ­¤ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„åŸºäº vue-cli çš„é¡¹ç›®:

```
vue create test-app 
```

è½¬åˆ°é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå®‰è£…æˆ‘ä»¬æ–°åˆ›å»ºçš„æ’ä»¶:

```
cd test-app
npm install --save-dev file:/full/path/to/your/plugin 
```

æ’ä»¶å®‰è£…åï¼Œéœ€è¦è°ƒç”¨:

```
vue invoke vue-cli-plugin-rx 
```

ç°åœ¨ï¼Œå¦‚æœæ‚¨å°è¯•æ£€æŸ¥`main.js`æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®ƒå‘ç”Ÿäº†å˜åŒ–:

```
import Vue from 'vue'
import App from './App.vue'
import VueRx from 'vue-rx';

Vue.use(VueRx); 
```

å¦å¤–ï¼Œä½ å¯ä»¥åœ¨ä½ çš„æµ‹è¯•åº”ç”¨`package.json`çš„`devDependencies`éƒ¨åˆ†æ‰¾åˆ°ä½ çš„æ’ä»¶ã€‚

## ğŸ“‚ä½¿ç”¨ç”Ÿæˆå™¨åˆ›å»ºæ–°ç»„ä»¶

å¤ªå¥½äº†ï¼Œä¸€ä¸ªæ’ä»¶å·¥ä½œäº†ï¼æ˜¯æ—¶å€™æ‰©å±•ä¸€ä¸‹å®ƒçš„åŠŸèƒ½ï¼Œè®©å®ƒèƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªç¤ºä¾‹ç»„ä»¶äº†ã€‚ç”Ÿæˆå™¨ API ä¸ºæ­¤ä½¿ç”¨äº†ä¸€ä¸ª`render`æ–¹æ³•ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºè¿™ä¸ªç¤ºä¾‹ç»„ä»¶ã€‚å®ƒåº”è¯¥æ˜¯ä½äºé¡¹ç›®`src/components`æ–‡ä»¶å¤¹ä¸­çš„`.vue`æ–‡ä»¶ã€‚åœ¨`generator`æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª`template`æ–‡ä»¶å¤¹ï¼Œç„¶åæ¨¡ä»¿å…¶ä¸­çš„æ•´ä¸ªç»“æ„:

[![tree screenshot](../Images/c2c2a7f3669e212c11e28d5f34fd6044.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--ZuAP1AKs--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/gIsbaeA.png)

æ‚¨çš„ç¤ºä¾‹ç»„ä»¶åº”è¯¥æ˜¯...å—¯ï¼Œåªæ˜¯ä¸€ä¸ª Vue å•æ–‡ä»¶ç»„ä»¶ï¼åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä¸ä¼šæ·±å…¥ RxJS çš„è§£é‡Šï¼Œä½†æ˜¯æˆ‘åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„åŸºäº RxJS çš„ç‚¹å‡»è®¡æ•°å™¨ï¼Œå®ƒæœ‰ä¸¤ä¸ªæŒ‰é’®:

[![Rx Example](../Images/2be5371d87ed8f521036f9bdf8320a29.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--M5ctWdBQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/JA2OWvs.png)

å®ƒçš„æºä»£ç å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚

ç°åœ¨æˆ‘ä»¬éœ€è¦æŒ‡ç¤ºæ’ä»¶åœ¨è°ƒç”¨æ—¶å‘ˆç°è¿™ä¸ªç»„ä»¶ã€‚ä¸ºæ­¤ï¼Œè®©æˆ‘ä»¬å°†è¿™æ®µä»£ç æ·»åŠ åˆ°`generator/index.js` :

```
api.render('./template', {
  ...options,
}); 
```

è¿™å°†æ¸²æŸ“æ•´ä¸ª`template`æ–‡ä»¶å¤¹ã€‚ç°åœ¨ï¼Œå½“æ’ä»¶è¢«è°ƒç”¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„`RxExample.vue`å°†è¢«æ·»åŠ åˆ°`src/components`æ–‡ä»¶å¤¹ä¸­ã€‚

> æˆ‘å†³å®šä¸é‡å†™ä¸€ä¸ª`App.vue`ï¼Œè®©ç”¨æˆ·è‡ªå·±æ·»åŠ ä¸€ä¸ªç¤ºä¾‹ç»„ä»¶ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥æ›¿æ¢ç°æœ‰æ–‡ä»¶çš„éƒ¨åˆ†å†…å®¹ï¼Œå‚è§æ–‡æ¡£ä¸­çš„ç¤ºä¾‹

## âŒ¨ï¸ç”¨æç¤ºå¤„ç†ç”¨æˆ·é€‰æ‹©

å¦‚æœç”¨æˆ·ä¸æƒ³è¦ä¸€ä¸ªç¤ºä¾‹ç»„ä»¶å‘¢ï¼Ÿè®©ç”¨æˆ·åœ¨æ’ä»¶å®‰è£…è¿‡ç¨‹ä¸­å†³å®šè¿™ä¸€ç‚¹ä¸æ˜¯å¾ˆæ˜æ™ºå—ï¼Ÿè¿™å°±æ˜¯æç¤ºå­˜åœ¨çš„åŸå› ï¼

ä¹‹å‰æˆ‘ä»¬å·²ç»åœ¨æ’ä»¶æ ¹æ–‡ä»¶å¤¹ä¸­åˆ›å»ºäº†`prompts.js`æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶åº”è¯¥åŒ…å«ä¸€ä¸ªé—®é¢˜æ•°ç»„:æ¯ä¸ªé—®é¢˜éƒ½æ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹å®šå­—æ®µé›†çš„å¯¹è±¡ï¼Œå¦‚`name`ã€`message`ã€`choices`ã€`type`ç­‰ã€‚

> åç§°å¾ˆé‡è¦:æˆ‘ä»¬ç¨åå°†åœ¨ generator ä¸­ä½¿ç”¨å®ƒæ¥åˆ›å»ºå‘ˆç°ç¤ºä¾‹ç»„ä»¶çš„æ¡ä»¶ï¼

æç¤ºå¯ä»¥æœ‰[ä¸åŒçš„ç±»å‹](https://github.com/SBoudrias/Inquirer.js#prompt-types)ï¼Œä½†æ˜¯åœ¨ CLI ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„æ˜¯`checkbox`å’Œ`confirm`ã€‚æˆ‘ä»¬å°†ä½¿ç”¨åè€…æ¥åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ˜¯/å¦ç­”æ¡ˆçš„é—®é¢˜ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬æŠŠæˆ‘ä»¬çš„æç¤ºç åŠ åˆ°`prompts.js`ï¼

```
module.exports = [
  {
    name: `addExample`,
    type: 'confirm',
    message: 'Add example component to components folder?',
    default: false,
  },
]; 
```

æˆ‘ä»¬æœ‰ä¸€ä¸ª`addExample`æç¤ºï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦æƒ³æ·»åŠ ä¸€ä¸ªç»„ä»¶åˆ°ç»„ä»¶æ–‡ä»¶å¤¹ã€‚é»˜è®¤ç­”æ¡ˆæ˜¯`No`ã€‚

è®©æˆ‘ä»¬å›åˆ°ç”Ÿæˆå™¨æ–‡ä»¶å¹¶åšä¸€äº›ä¿®æ­£ã€‚ç”¨
æ›¿æ¢æ‰`api.render`å‘¼å«

```
if (options.addExample) {
    api.render('./template', {
      ...options,
    });
} 
```

æˆ‘ä»¬æ­£åœ¨æ£€æŸ¥`addExample`æ˜¯å¦æœ‰è‚¯å®šçš„ç­”æ¡ˆï¼Œå¦‚æœæœ‰ï¼Œç»„ä»¶å°†è¢«æ¸²æŸ“ã€‚

> ä¸è¦å¿˜è®°åœ¨æ¯æ¬¡ä¿®æ”¹åé‡æ–°å®‰è£…å¹¶æµ‹è¯•ä½ çš„æ’ä»¶ï¼

## ğŸ“¦å…¬ä¹‹äºä¼—ï¼

é‡è¦æç¤º:åœ¨å‘å¸ƒä½ çš„æ’ä»¶ä¹‹å‰ï¼Œè¯·æ£€æŸ¥å®ƒçš„åå­—æ˜¯å¦ä¸æ¨¡å¼`vue-cli-plugin-<YOUR-PLUGIN-NAME>`åŒ¹é…ã€‚è¿™å…è®¸ä½ çš„æ’ä»¶è¢«`@vue/cli-service`å‘ç°å¹¶é€šè¿‡`vue add`å®‰è£…ã€‚

æˆ‘è¿˜å¸Œæœ›æˆ‘çš„æ’ä»¶åœ¨ Vue CLI UI ä¸­æœ‰ä¸€ä¸ªæ¼‚äº®çš„å¤–è§‚ï¼Œæ‰€ä»¥æˆ‘ç»™`package.json`æ·»åŠ äº†æè¿°ã€æ ‡ç­¾å’Œåº“åï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ªå¾½æ ‡ã€‚Logo å›¾ç‰‡åº”è¯¥å‘½åä¸º`logo.png`ï¼Œæ”¾åœ¨æ’ä»¶æ ¹æ–‡ä»¶å¤¹ä¸­ã€‚å› æ­¤ï¼Œæˆ‘çš„æ’ä»¶åœ¨ UI æ’ä»¶åˆ—è¡¨ä¸­çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:

[![vue-rx in UI](../Images/f68ec5c2081bc0b743fdf04117f79c5e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--XmA53gw9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/eNuDHmb.png)

ç°åœ¨æˆ‘ä»¬å‡†å¤‡å‡ºç‰ˆäº†ã€‚ä½ éœ€è¦æ³¨å†Œä¸€ä¸ª[npmjs.com](https://www.npmjs.com/)ï¼Œæ˜¾ç„¶ä½ åº”è¯¥å·²ç»å®‰è£…äº† npmã€‚

è¦å‘å¸ƒæ’ä»¶ï¼Œè¯·è½¬åˆ°æ’ä»¶æ ¹æ–‡ä»¶å¤¹ï¼Œåœ¨ç»ˆç«¯ä¸­é”®å…¥`npm publish`ã€‚ç§ï¼Œä½ åˆšåˆšå‘å¸ƒäº†ä¸€ä¸ª npm åŒ…ï¼

è¿™æ—¶ä½ åº”è¯¥å¯ä»¥ç”¨`vue add`å‘½ä»¤å®‰è£…æ’ä»¶äº†ã€‚è¯•è¯•çœ‹ï¼

å½“ç„¶ï¼Œæœ¬æ–‡ä¸­æè¿°çš„æ’ä»¶æ˜¯éå¸¸åŸºç¡€çš„ï¼Œä½†æˆ‘å¸Œæœ›æˆ‘çš„è¯´æ˜èƒ½å¸®åŠ©æŸäººå¼€å§‹ cli æ’ä»¶å¼€å‘ã€‚

ä½ ç¼ºå°‘å“ªç§å‘½ä»¤è¡Œç•Œé¢æ’ä»¶ï¼Ÿè¯·åœ¨è¯„è®ºä¸­åˆ†äº«ä½ çš„æƒ³æ³•ğŸ¤—