# ç”¨ç”»å¸ƒåƒç´ åŒ–äººç‰©ï¼Œç»˜åˆ¶ç”Ÿæˆè‰ºæœ¯ï¼

> åŸæ–‡:[https://dev . to/oh barye/pixelate-characters-with-canvas-and-draw-generative-art-4eb 6](https://dev.to/ohbarye/pixelate-charactors-with-canvas-and-draw-generative-art-4eb6)

[æ­£å¦‚æˆ‘åœ¨](https://dev.to/ohbarye/what-i-felt-through-7-days-of-learning-generative-art-1fka)ä¹‹å‰å‘å¸ƒçš„ï¼Œæˆ‘æ­£åœ¨å’Œ [p5.js](https://p5js.org/) å­¦ä¹ ç”Ÿæˆè‰ºæœ¯ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»‹ç»äº†ä¸€ä¸ªå·¥å…·ï¼Œâ€œå­—ç¬¦ä¸²åƒç´ åŒ–â€ï¼Œè¿™æ˜¯æˆ‘é€šè¿‡å­¦ä¹ è¿‡ç¨‹ä¸­ã€‚

*   GitHub:[https://github.com/ohbarye/string-pixelater](https://github.com/ohbarye/string-pixelater)
*   NPM:[https://www.npmjs.com/package/string-pixelater](https://www.npmjs.com/package/string-pixelater)

## [](#whats-string-pixelater)ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²åƒç´ åŒ–å™¨

[![image](../Images/a23cbe571902557fdb700c4bacff09a0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--q_K0fcLO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/1811616/39958038-d70fbda2-5637-11e8-8b03-4b2d7bb21bf4.png)

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å·¥å…·æ¥åƒç´ åŒ–ä»»ä½•å­—ç¬¦ã€‚`pixelate`çš„æ„æ€æ˜¯â€œå°†ä¸€ä¸ªå­—ç¬¦è½¬æ¢æˆä¸€ä¸ªäºŒç»´æ•°ç»„â€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å‡ºäºå¤šç§ç›®çš„æ¥å¤„ç†è¡¨æ ¼æ•°æ®ã€‚æˆ‘å®é™…ä¸Šæ˜¯ä¸ºç»˜ç”»ç”Ÿæˆè‰ºæœ¯åˆ›ä½œè¿™ä¸ªå’Œ [p5.js](https://p5js.org/)

è®©æˆ‘ä»¬æ·±å…¥äº†è§£å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„...ä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢å®ƒåªæœ‰ä¸€ä¸ª APIï¼

```
> StringPixelater.pixelate('hello', {fontSize: 24})

[
  [0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
  [0,0,1,1,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
  [0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0],
  [0,0,1,1,1,1,1,0,0,1,1,1,1,0,0,0,0,1,1,1,0,0,0,1,1,1,1,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0],
  [0,0,1,1,1,1,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,0,0],
  [0,0,1,1,1,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,1,1,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0]
] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ èƒ½åœ¨ä¸Šé¢éšçº¦çœ‹åˆ°â€œä½ å¥½â€å—ï¼Ÿ

## [](#how-does-it-work)å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

ç®€è€Œè¨€ä¹‹ï¼Œå®ƒä½¿ç”¨`<canvas>`å…ƒç´ ä½œä¸ºä¸´æ—¶çš„*ç”»å¸ƒ*æ¥æ¸²æŸ“è§’è‰²ã€‚ç„¶åï¼Œå®ƒæå–å¹¶è§£æå…‰æ …åŒ–çš„å›¾åƒæ•°æ®ã€‚å®ƒçš„åŸºæœ¬ä»£ç å¦‚ä¸‹ã€‚

```
const canvas = <HTMLCanvasElement> document.createElement('canvas');
const context = <CanvasRenderingContext2D> this.canvas.getContext('2d');
context.fillText("hello", 0, 0);

let table = new Array(canvas.height);

const imageData = context.getImageData(0, 0, canvas.width, canvas.height);

for (let row = 0; row < canvas.height; row++){
  table[row] = new Array(canvas.width);

  for (let col = 0; col < canvas.width; col++){
    const alpha = imageData.data[(canvas.width * row + col) * 4 + 3];
    if (alpha >= 64) {
      table[row][col] = 1;
    } else {
      table[row][col] = 0;
    }
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#usage)ç”¨æ³•

åªéœ€ç”¨ä¸€ä¸ªä½ æƒ³è¦åƒç´ åŒ–çš„å­—ç¬¦ä¸²å®‰è£…å¹¶è°ƒç”¨`StringPixelater.pixelate`æ–¹æ³•ã€‚

```
$ npm install --save string-pixelater
or
$ yarn add string-pixelater 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å¯ä»¥ä½œä¸º ES æ¨¡å—ä½¿ç”¨æˆ–é€šè¿‡`<script>`æ ‡ç­¾
åŠ è½½

```
import StringPixelater from 'string-pixelater';

const table = StringPixelater.pixelate('Hello, world'); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
<script type="text/javascript" src="path/to/dist/js/string-pixelater.js"></script>
<script type="text/javascript">
  var table = StringPixelater.pixelate('Hello, world');
</script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#-raw-transpose-endraw-)`transpose`

å¦‚æœä½ åƒæˆ‘ä¸€æ ·ç”¨`p5.js`ï¼Œ`transpose`é€‰é¡¹ç›¸å½“æ–¹ä¾¿ï¼Œå› ä¸ºå®ƒæœ‰å€’è½´ï¼Œ

```
> StringPixelater.pixelate('B', {fontSize: 24, transpose: false})
[
  [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0],
  [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,1,1,1,1,0,0,0],
  [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
  [0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,1,1,1,0,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
  [0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
  [0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,0,0,0],
  [0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
  [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0]
]

> StringPixelater.pixelate('B', {fontSize: 24, transpose: true})
[
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
  [1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1],
  [1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1],
  [1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1],
  [1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1],
  [1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1],
  [1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1],
  [1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1],
  [1,1,1,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1],
  [1,1,1,1,0,0,1,1,1,1,1,0,0,0,0,0,1,1,1],
  [0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
  [0,0,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0],
  [0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0],
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“ç”¨ç®€å•ç›´è§‚çš„å¾ªç¯æ¸²æŸ“æ—¶ï¼Œåè€…çœ‹èµ·æ¥æ˜¯æ­£ç¡®çš„ã€‚

```
// Note: This is just pseudo code!
function draw() {
  const imageData = StringPixelater.pixelate('B', {fontSize: 24, transpose: true})
  const pixelSize = 10;

  imageData.forEach(function(row, i) {
    row.forEach(function(cell, j) {
      if (cell === 1) {
        ellipse(i * pixelSize, j * pixelSize, pixelSize, pixelSize);
      }
    })
  })
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç»“æœå¦‚ä¸‹æ‰€ç¤º:

[![2018-05-12 22 49 04](../Images/5a92a2d993fb240ada765c3c15e7b05b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fMe-q97R--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/1811616/39957847-bd96294a-5634-11e8-93be-9efaac493833.png)

## [](#artworks-with-string-pixelater)ç”¨çº¿åƒç´ åŒ–å™¨çš„è‰ºæœ¯å“

å°±å‡­`StringPixelater.pixelate('hello')`:

[![2018-05-12 22 49 04](../Images/7b2e979ec90e3d1d04240dcb7c6f3b91.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--d-Kmkxdu--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/1811616/39958008-34941f78-5637-11e8-8ec9-271d87e58f76.png)

æˆ‘ä»¬å¯ä»¥å¾—åˆ°åƒç´ åŒ–çš„è¡¨æƒ…ç¬¦å·ï¼Œå¦‚`StringPixelater.pixelate('ğŸˆ')`ã€‚

[![2018-05-12 22 52 36](../Images/4a02bbde3b9ed74d66fc7e9438d3a35e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--54BMxG8_--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/1811616/39958009-34b9721e-5637-11e8-80c2-42b5e6661e23.png)

* * *

å¦‚æœæœ‰äººé€šè¿‡è¿™ç¯‡æ–‡ç« å¯¹ç”Ÿæˆè‰ºæœ¯æˆ– [string-pixelater](https://github.com/ohbarye/string-pixelater) æ„Ÿå…´è¶£ï¼Œæˆ‘ä¼šå¾ˆé«˜å…´ã€‚:)