# äº†è§£å¦‚ä½•ä½¿ç”¨ Lepto è‡ªåŠ¨åŒ–æ‚¨çš„å›¾åƒä¼˜åŒ–è¿‡ç¨‹

> åŸæ–‡:[https://dev . to/dimitrinicolas/learn-how-to-automate-your-image-optimization-process with-lepto-890](https://dev.to/dimitrinicolas/learn-how-to-automate-your-image-optimization-process-with-lepto-890)

ä¼˜åŒ–å›¾åƒæ˜¯ä¸€é¡¹é•¿æœŸçš„ä»»åŠ¡ï¼Œä¹Ÿè®¸ä½ å·²ç»åœ¨ä½¿ç”¨ imagemin æˆ– ImageOptimï¼Œå®ƒä»¬æ˜¯å¾ˆå¥½çš„å·¥å…·ï¼Œä½†ä¼¼ä¹å¾ˆéš¾è‡ªåŠ¨ä½¿ç”¨å®ƒä»¬ã€‚

å½“ä½ æƒ³ä¼˜åŒ–ä½ çš„ç½‘é¡µå›¾ç‰‡æ—¶ï¼Œä½ æœ‰å¾ˆå¤šä»»åŠ¡è¦åšï¼Œæ¯”å¦‚:

*   è°ƒæ•´å¤§å°

*   åˆ›å»ºä¸åŒåˆ†è¾¨ç‡çš„æ–‡ä»¶(ç”¨äº Retina å±å¹•)

*   ä¼˜åŒ–(åˆ é™¤å…ƒæ•°æ®)

*   å‹ç¼©

*   åˆ›é€ æ›´å¥½çš„æ ¼å¼é€‰æ‹©(å¦‚ WebP)

æˆ‘ä»¬å·²ç»é€šè¿‡æ¨¡å—æ†ç»‘å™¨å’Œå‰/åå¤„ç†å™¨ç¼–è¯‘äº† JavaScript å’Œ CSSï¼Œä¸‹é¢æ˜¯æ–°çš„æ„å»ºæ­¥éª¤:å›¾åƒå¤„ç†ã€‚

## è½»è€…å…¥é—¨

[github.com/leptojs/lepto](https://github.com/leptojs/lepto)

Lepto æ˜¯ä¸€ä¸ª Node.js æ¨¡å—å’Œå‘½ä»¤è¡Œæ¥å£ï¼Œè´Ÿè´£**å›¾ç‰‡èµ„æºçš„ç¼–è¾‘ã€ä¼˜åŒ–å’Œåˆ†æã€‚æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹å§ï¼**

é¦–å…ˆï¼Œä½ å°†**éœ€è¦æœ‰ä¸€ä¸ªâ€œnpm åˆå§‹åŒ–é¡¹ç›®â€**ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿è¡Œå‘½ä»¤`npm init`ã€‚

æ‚¨è¿˜éœ€è¦å®‰è£… CLI å·¥å…·ä½œä¸ºå¼€å‘ä¾èµ–:

```
$ npm install -D lepto-cli 
```

Enter fullscreen mode Exit fullscreen mode

å¦‚æœä½ **æ‡’å¾—æ”¶é›†ä¸€äº›æ™®é€šçš„å›¾ç‰‡**ï¼Œæˆ‘ç»™ä½ ä¸€äº›[ä½ å¯ä»¥æ ¹æ®è¿™ä¸ªè¦ç‚¹](https://gist.github.com/dimitrinicolas/766eecec10adf4deb6a20c8002df4f2b)ä¸‹è½½ï¼Œåªéœ€ç‚¹å‡»â€œä¸‹è½½ ZIPâ€æŒ‰é’®ï¼Œå°†è¿™äº›èµ„æºæ”¾å…¥â€œèµ„äº§â€ç›®å½•ã€‚

ç„¶åï¼Œæ‚¨å¿…é¡»åˆ›å»ºåä¸º`lepto.config.json` :
çš„é…ç½®æ–‡ä»¶

```
{  "input":  "assets",  "output":  "assets/output",  "watch":  true,  "filters":  [  {  "glob":  "**/*.*",  "use":  [  {  "name":  "lepto.jpeg",  "quality":  75  },  {  "name":  "lepto.png",  "quality":  75  }  ]  }  ]  } 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨ä½ çš„`package.json` :
ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„åä¸º`build`çš„ npm è„šæœ¬

```
{  ...  "scripts":  {  "build":  "lepto",  ...  }  ...  } 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨ï¼Œé€šè¿‡è¿è¡Œå‘½ä»¤`npm run build`ï¼ŒLepto å°†ä»æ‚¨çš„â€œassetsâ€ç›®å½•ä¸­å‹ç¼©æ‰€æœ‰ jpg å’Œ pngï¼Œå¹¶å°†å®ƒä»¬å¯¼å‡ºåˆ°è¾“å‡ºç›®å½•ä¸­ã€‚é€šè¿‡å°†`watch`é€‰é¡¹è®¾ç½®ä¸º`true`ï¼ŒLepto å°†ç›‘è§†â€œèµ„äº§â€ç›®å½•ä¸­çš„æ¯ä¸€ä¸ªå˜åŒ–ï¼Œä»¥é‡æ–°å¯åŠ¨è¯¥è¿›ç¨‹ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼ŒLepto æ˜¯é›¶é…ç½®çš„ï¼Œæ‰€ä»¥ä½ éœ€è¦**å†™ä¸€ä¸ª`filters`** åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªéƒ½ä¸ä¸€ä¸ª`glob`å’Œä¸€ä¸ª`use`æ’ä»¶åˆ—è¡¨ç›¸å…³è”ã€‚åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚ Lepto ä»¥ 75 çš„è´¨é‡å‹ç¼©æ‰€æœ‰ jpg å’Œ png æ–‡ä»¶ã€‚

[![lepto command running](../Images/4da95d958c9427729131491302b4278c.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--6waeHUlk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/xbnrqit1ip2feyxdfsxv.png)

## è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›æ’ä»¶

ç°åœ¨ï¼Œä½ æƒ³è°ƒæ•´ä½ çš„å›¾åƒã€‚æœ‰ä¸€ä¸ªæ’ä»¶: [`lepto-resize`](https://github.com/leptojs/lepto-resize) ï¼Œä½ å¿…é¡»è¿™æ ·å®‰è£…:

```
$ npm install -D lepto-resize 
```

Enter fullscreen mode Exit fullscreen mode

### ç„¶åæˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„ Lepto é…ç½®ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„è¿‡æ»¤å™¨:

```
{  "glob":  "**/*.{jpg,jpeg}",  "use":  [  {  "name":  "lepto-resize",  "maxWidth":  1200  }  ]  } 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨ä½ æ‰€æœ‰çš„å›¾ç‰‡å®½åº¦éƒ½å°äºæˆ–ç­‰äº 1200 åƒç´ ã€‚ä½ å¯ä»¥å‘ç°æ›´å¤šçš„é€‰é¡¹æ¥ä½¿ç”¨å‚¨å­˜åº“ä¸Šçš„[`lepto-resize`](https://github.com/leptojs/lepto-resize):ã€‚

### è®©æˆ‘ä»¬æ·»åŠ å¦ä¸€ä¸ªæ»¤é•œæ¥åˆ›å»ºæˆ‘ä»¬çš„ png çš„ Retina ç‰ˆæœ¬:

```
{  "glob":  "**/*.png",  "use":  [  {  "name":  "lepto-resize",  "retina":  [2,  3]  }  ]  } 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`srcset` :
è½»æ¾åœ°å°†å®ƒä»¬æ’å…¥åˆ°æˆ‘ä»¬çš„ html ä¸­

```
<img srcset="assets/output/icon.png,
             assets/output/icon@2x.png 2x,
             assets/output/icon@3x.png 3x"
     src="assets/output/icon.png" alt="Icon alt"> 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘å¾ˆç¡®å®šä½ ç°åœ¨èƒ½å¤Ÿæ·»åŠ æ’ä»¶ [`lepto-webp`](https://github.com/leptojs/lepto-webp) æ¥åˆ›å»ºä½ çš„ jpg çš„ WebP æ›¿ä»£å“äº†ï¼æŸ¥çœ‹è¿™é‡Œçš„æ–‡æ¡£:[github.com/leptojs/lepto-webp](https://github.com/leptojs/lepto-webp)ã€‚

## ä½¿ç”¨ GUI

ä¸ºäº†è·å¾—æœ€ä½³ä¼˜åŒ–çš„å›¾åƒï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä»”ç»†é€‰æ‹©æ¯ä¸ªå›¾åƒçš„æœ€ä½³è´¨é‡ç™¾åˆ†æ¯”ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼ŒGUI å¯ä»¥åœ¨ç«¯å£ 4490 ä¸Šè®¿é—®ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬è¿è¡Œ`npm run build`å¹¶ç»§ç»­è¿è¡Œ [localhost:4490](http://localhost:4490/) ã€‚æˆ‘ä»¬å°†å¾—åˆ°è¿™ä¸ªç”±ä¸‰éƒ¨åˆ†ç»„æˆçš„æ¼‚äº®ç•Œé¢:è¾“å…¥æ–‡ä»¶åˆ—è¡¨ã€è¿‡æ»¤å™¨åˆ—è¡¨å’Œç­‰å¾…æ–‡ä»¶é€‰æ‹©çš„ä¼˜åŒ–å™¨ã€‚

[![Lepto Graphical User Interface](../Images/6d696b2ab288a31fe97df8932182d99d.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--nGC7ENX1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/hgu9mntesny4r2foncst.png)

è®©æˆ‘ä»¬åœ¨åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶:å®ƒç°åœ¨æ˜¾ç¤ºåœ¨ä¼˜åŒ–å™¨ä¸­ï¼Œè®©æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è´¨é‡æ»‘å—å¹¶å®æ—¶æŸ¥çœ‹è¾“å‡ºã€‚å½“æ‚¨å¯¹è´¨é‡ç™¾åˆ†æ¯”æ„Ÿåˆ°æ»¡æ„æ—¶ï¼Œ**å•å‡»æŒ‰é’®â€œæ·»åŠ ä¼˜åŒ–æ’ä»¶â€**å’Œ**é€šè¿‡å•å‡»â€œä¿å­˜é…ç½®â€**(æˆ–æŒ‰âŒ˜S / Ctrl+S)ä¿å­˜è¿™ä¸ªæ–°é…ç½®ã€‚

[![Lepto GUI optimizer usage](../Images/2f25aed03248d8d8844f3c83dea3c563.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--eA1ZUaLV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/3re5scayjzucsic181e5.png)

é€šè¿‡æ·»åŠ ä¸€ä¸ªâ€œä¼˜åŒ–æ’ä»¶â€, GUI ç®€å•åœ°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è¿‡æ»¤å™¨ï¼Œå…¶ glob ç­‰äºæ–‡ä»¶åï¼Œæ’ä»¶å¯¹åº”äºæ–‡ä»¶æ‰©å±•å:

```
{  "glob":  "001.jpg",  "use":  [  {  "name":  "lepto.jpeg",  "quality":  48  }  ]  } 
```

Enter fullscreen mode Exit fullscreen mode

ç¡®ä¿å°†è¿™äº›ç‰¹å®šçš„è¿‡æ»¤å™¨æ”¾åœ¨åˆ—è¡¨çš„æœ«å°¾ã€‚

## æ›´è¿›ä¸€æ­¥

è¿™ä¸ªå·¥å…·çš„ç”¨ä¾‹æ˜¯æ— ç©·æ— å°½çš„ã€‚ä½ ç”šè‡³å¯ä»¥ç”¨ [`lepto-vibrant-color`](https://github.com/leptojs/lepto-vibrant-color) æ’ä»¶**è‡ªåŠ¨æ”¶é›†ä½ çš„å›¾åƒ**çš„é²œè‰³é¢œè‰²ï¼Œå¹¶æŠŠå®ƒä»¬æ”¾å…¥ä¸€ä¸ª JSON æ–‡ä»¶ä¸­ã€‚

[![lepto-vibrant-color extraction example](../Images/378553498724bac8dd9f5f248ae6dcdc.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--yB_LKBNI--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/6fys66bblrizrfgo1pyj.png)

è¦äº†è§£å…³äº Lepto çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹`lepto`å’Œ`lepto-cli`æ–‡æ¡£:

*   [github.com/leptojs/lepto](https://github.com/leptojs/lepto)

*   [github.com/leptojs/lepto-cli](https://github.com/leptojs/lepto-cli)

ä¸ºäº†äº†è§£æ›´å¤šå…³äºæœ€ä½³å›¾åƒä¼˜åŒ–çš„å®è·µï¼Œæˆ‘å‘ä½ æ¨èç”±[è‰¾è¿ªÂ·å¥¥æ–¯é©¬å°¼](https://twitter.com/addyosmani) : [images.guide](https://images.guide/) æ’°å†™çš„â€œ[åŸºæœ¬å›¾åƒä¼˜åŒ–](https://images.guide/)â€æŒ‡å—ã€‚

## å…³äºæˆ‘

æˆ‘æ˜¯ä¸€åæ³•å›½ç•™å­¦ç”Ÿï¼Œçƒ­è¡·å‰ç«¯å¼€å‘å¥½å‡ å¹´äº†ã€‚é€šè¿‡åˆ›å»º Leptoï¼Œæˆ‘å°½åŠ›åšä¸€ä¸ªä¸ä»¤äººæ²®ä¸§ä¸”é«˜æ•ˆçš„å·¥å…·æ¥è½»æ¾ç®¡ç†å›¾åƒä¼˜åŒ–ã€‚å‡ºäºæ€§èƒ½å’Œæ˜“ç”¨æ€§çš„åŸå› ï¼Œæ„å»ºå‘½ä»¤è¡Œç•Œé¢æ˜¯æ˜¾è€Œæ˜“è§çš„(å‚è§[å¸ƒå…°å¾·å°”](https://twitter.com/brandur)çš„[è¿™ç¯‡å…³äºç»ˆç«¯å’Œè®¾è®¡](https://brandur.org/interfaces)çš„ä¼Ÿå¤§æ–‡ç« )ã€‚ç„¶è€Œï¼ŒGUI å¯¹äºé€‰æ‹©æœ€ä½³å‹ç¼©è´¨é‡æ˜¯å¿…è¦çš„ã€‚äºæ˜¯æˆ‘æ¥åˆ°äº†è¿™ä¸ªå¤§åŒã€‚

æˆ‘é€šè¿‡æ¨ç‰¹(Twitter)æˆ–ç”µå­é‚®ä»¶(T2)å¬å–æ‰€æœ‰çš„å»ºè®®ã€è®¨è®ºå’Œæ¿€çƒˆçš„æ‰¹è¯„ã€‚

æ„Ÿè°¢é˜…è¯»ï¼ğŸ˜„

## ![GitHub logo](../Images/292a238c61c5611a7f4d07a21d9e8e0a.png) [å­£ç±³ç‰¹é‡Œå°¼ç§‘æ‹‰æ–¯](https://github.com/dimitrinicolas) / [è½»å­](https://github.com/dimitrinicolas/lepto)

### é€šè¿‡ CLI å’Œ web ç•Œé¢è‡ªåŠ¨è¿›è¡Œå›¾åƒç¼–è¾‘ã€ä¼˜åŒ–å’Œåˆ†æã€‚ä½ ç»™ lepto ä½ çš„è¾“å…¥å’Œè¾“å‡ºç›®å½•ï¼Œä½ æƒ³è¦ä½¿ç”¨çš„æ’ä»¶å’Œå®ƒä»¬çš„é€‰é¡¹ã€‚ç„¶å lepto åšä»–çš„å·¥ä½œï¼Œä½ ä¿ç•™ä½ çš„åŸå§‹æ–‡ä»¶å’Œè¾“å…¥ç›®å½•çš„ç»“æ„ã€‚ä¸€äº›æ’ä»¶ç”šè‡³å¯ä»¥ä»ä½ çš„å›¾åƒä¸­æ”¶é›†æ•°æ®(æ¯”å¦‚åŸè‰²),å¹¶å°†å®ƒä»¬ä¿å­˜åœ¨ä¸€ä¸ª JSON æ–‡ä»¶ä¸­ã€‚

<article class="markdown-body entry-content container-lg" itemprop="text">

[![Lepto: The best image optimizations practices made simple](../Images/a3fd07f64871c4421b8f00adf69e164b.png)T2ã€‘](https://raw.githubusercontent.com/dimitrinicolas/lepto/master/#get-started-with-cli--npm-scripts)

[![Build Status](../Images/ff7f847008c050a159f3a7e0cb557b45.png)T2ã€‘](https://travis-ci.org/leptojs/lepto)

è¿™ä¸ªå·¥å…·çš„ä¸»è¦ç›®çš„æ˜¯è‡ªåŠ¨åŒ–å›¾åƒä¼˜åŒ–å’Œåˆ†æè¿™ä¸ªé¡¹ç›®æ˜¯æœ€è¿‘çš„ï¼Œæ‰€ä»¥è¦å°å¿ƒä½¿ç”¨å®ƒï¼Œæˆ‘æ­£åœ¨å¬å–æ‰€æœ‰çš„åé¦ˆ(æˆ‘ä»¬å¯ä»¥é€šè¿‡ [twitter](https://twitter.com/dimitrincls) äº¤è°ˆï¼Œä¸è¦è·Ÿç€æˆ‘ï¼Œæˆ‘ä»ä¸å‘å¾®åš)ã€‚

**ä¸ [ImageMin](https://github.com/imagemin/imagemin) æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**æˆ‘è®¤ä¸ºï¼Œå¦‚æœä½ å¤„ç†å¤§å‹åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ ImageMinï¼Œä½†å¦‚æœä½ æ­£åœ¨åˆ›å»ºå°å‹é™æ€ç½‘ç«™ï¼Œå¹¶ä¸”ä½ æƒ³è½»æ¾ä¼˜åŒ–ä½ çš„èµ„æºï¼Œé‚£ä¹ˆä½ å¯ä»¥å°è¯• leptoã€‚

ä½ ç»™ lepto ä½ çš„è¾“å…¥å’Œè¾“å‡ºç›®å½•ï¼Œä½ æƒ³è¦ä½¿ç”¨çš„æ’ä»¶å’Œå®ƒä»¬çš„é€‰é¡¹ã€‚ç„¶å lepto åšä»–çš„å·¥ä½œï¼Œä½ ä¿ç•™ä½ çš„åŸå§‹æ–‡ä»¶å’Œè¾“å…¥ç›®å½•çš„ç»“æ„ã€‚ä¸€äº›æ’ä»¶ç”šè‡³å¯ä»¥ä»ä½ çš„å›¾åƒä¸­æ”¶é›†æ•°æ®(æ¯”å¦‚åŸè‰²),å¹¶å°†å®ƒä»¬ä¿å­˜åœ¨ä¸€ä¸ª JSON æ–‡ä»¶ä¸­ã€‚

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºå›¾åƒä¼˜åŒ–çš„çŸ¥è¯†ï¼Œæˆ‘å‘ä½ æ¨èä»¤äººæƒŠå¹çš„[å›¾åƒ](https://images.guide/)

</article>

[View on GitHub](https://github.com/dimitrinicolas/lepto)