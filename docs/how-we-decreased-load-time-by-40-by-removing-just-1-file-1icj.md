# 我们如何通过仅删除一个文件就将加载时间缩短了 40%

> 原文：<https://dev.to/mladenstojanovic/how-we-decreased-load-time-by-40-by-removing-just-1-file-1icj>

### 因此，这篇文章的标题确实有点像 clickbait-ish，但实际上这正是所发生的事情。

去年九月左右，我开始着手一个项目。由于所有 NDA 的事情都发生在客户身上，我不能写太多名字，但它是他们各自领域的大公司。他们使用 React SSR 应用程序来服务他们的网站，这些网站不是他们的收入来源，而是信息、一些博客帖子、文章等。当然他们在上面有广告，而且它被体面地访问，但是他们没有给太多的关注。

我知道你现在要说什么:为什么他们不太关注它，但他们却为他们的*【不那么重要】*网站使用了真正现代的堆栈？

他们希望前一个团队用尖端技术来建造它，因为他们正在重新设计和重建一切，正如你所猜测的，在采用它的早期使用一些尖端技术会给你带来(一些)负面结果，但在其他帖子中会有更多(希望如此)。

回到现在，我和我的团队作为一个团队的一部分，将为这个客户的这个(和其他几个)项目维护和添加功能。从第一天开始，它真的让我很恼火，这个应用程序太慢了，尽管它是作为服务器端渲染的 react 应用程序创建的，但它应该快如闪电！每周都有新的遗迹统计数据，显示平均加载时间为 10 或 11 秒，这真是太疯狂了！

几个月后，我参加了一个技术会议，参加了哈里·罗伯特([https://twitter.com/csswizardry](https://twitter.com/csswizardry))的演讲和研讨会，他是一名绩效顾问，他在整个演讲中最重要的一点让我深受启发:

**只要你开始关注它，你的网站的性能就会提高**

或者类似的，那是很久以前的事了:)

但从那时起，我实际上开始关注这个应用程序的性能。在标准问题和 sprints 之间，我开始分析我们应用程序的最大问题，很快我意识到我们应用程序的 CSS 文件是 **2.9MB** 解压的和**1.9 MB**gzip 的。
我震惊了，一个 CSS 文件怎么会达到这种大小？这是一个很大的应用程序，但没有那么大。gzip 喜欢重复，这怎么能压缩得更多呢？

随着新任务和严格期限的流逝，我们都经历过，但那个 CSS 文件就是无法从我脑海中消失。有一天我和队友坐下来开始找问题。我们对项目中的每个 css 文件进行了排序，发现有一个文件有 1.5MB 大。！！)

有人放了 8 张大小合适的图片(大约 1500x600px)，将其转换为 base64 格式，并放入一个 css 文件中，该文件每次都以捆绑方式加载，即使它没有被使用过！删除那个文件会把我们的 css 文件压缩到 1.3MB，或者 700KB！巨大的胜利！

后来，我用一些性能工具测试了这个网站，每个工具都显示加载时间减少了 40%到 60%!(第一次绘画，全页加载等。)

这个故事的寓意:

关注你的应用程序的性能，有时候很小的变化就能给你带来很好的结果！

干杯！