# 使用功能 UI 单元测试提高自动化测试的有效性

> 原文:[https://dev . to/execute autotest/using-functional-ui-unit-tests-to-improve-automated-tests-effectiveness-18i 2](https://dev.to/executeautotest/using-functional-ui-unit-tests-to-improve-automated-tests-effectiveness-18i2)

## 为什么功能 UI 测试自动化不可靠

人们普遍认为，功能 UI 测试自动化有助于节省 QA 的大量时间，这样他们可以将更多的精力放在用户接受度测试和探索性测试上。然而，有一些缺点阻碍了许多组织和团队成功地采用它。编写和维护脚本的成本以及缺陷水平通常比其他类型的测试要高。这也是为什么有些人经常批评 UI 自动化测试的原因。

如今，web 应用程序以敏捷风格的短开发周期发展得非常快。此外，为了支持敏捷开发和部署，后端和前端的 web 应用程序的体系结构变得越来越复杂，多个组件在逻辑上和物理上是分离的，只能通过 web 服务链接在一起。即使有大量的自动化单元测试和集成测试，进行功能 UI 测试自动化仍然是必要的，以确保软件将按预期运行。

因此，我们没有放弃功能 UI 测试自动化，而是积极地在我们的团队中寻找一种方法来减少它的缺陷，结果，最大化它的好处和 ROI。当我们仔细分析时，我们意识到有三个主要原因降低了 UI 自动化测试的有效性:

1.  花在编写好的、稳定的 XPath/CSS 定位器上的时间，以及每当底层 HTML 标记改变时更新它们的时间。

2.  网络本身有时不稳定，导致测试失败。

3.  代码不处理一些罕见的情况，如竞争条件。

第三个原因实际上是软件内部的错误，应该由工程团队来解决(不要称之为脆弱的测试！).第二个问题可以通过将应用程序置于测试下(AUT)并在具有健壮网络(例如 Amazon Web Services)的同一数据中心进行测试来缓解。因此，我们着重解决第一个原因。

## 可测试 UI

为了解决这个问题，我们需要理解为什么单元测试是高度健壮和可靠的。如果你在网上搜索过单元测试，你会看到成千上万篇关于编写可测试代码的文章。的确，如果代码没有被仔细地结构化，单元测试的有效性将会受到很大的影响，编写具有良好覆盖率的单元测试将会花费更长的时间。

类似地，如果元素由惟一且稳定的属性组成，那么即使使用 QAs，为元素准备一个好的 XPath 定位器也总是很容易的。它们可能是由开发人员自己编写的，或者是由软件内部使用的 JavaScript 库编写的。这些属性的列表，以及它们的变化，应该在开发人员和 QAs 之间及时沟通。我们把这种 UI 称为“可测试 UI”，编写可测试 UI 的责任在开发人员手中。

然而，我们不允许我们的开发人员编写自动化的 UI 测试。一个原因是预算——这取决于团队和公司，我们需要将我们的开发资源集中在构建新功能上。另一个原因是 QA 通常在编写测试方面做得更好，因为他们关注用户的视角(这就是“功能性”一词的含义)，而开发人员的首要任务通常是证明他们的代码有效(无意冒犯！).因此，我们想出了一个非常简单的工作流程:

1.  开发人员编写代码。

2.  然后他们编写非常简单的自动化测试来证明他们已经覆盖了所有预期的场景。

3.  这些测试与相应的吉拉问题相关联。

4.  QA 根据开发人员提交的测试中的“提示”编写完整的自动化测试。

我们把开发人员编写的简单 UI 测试称为“功能性 UI 单元测试”。它们是非常短的、死气沉沉的简单脚本，以后可以扔掉。他们应该不用花太多时间考虑结构、设计、编码惯例等。

这一工作流程为开发人员和质量保证人员带来了许多好处:

1.  如果开发人员已经理解并涵盖了预期的场景，QAs 可以非常快速地进行验证。

2.  它鼓励开发人员使 UI 可测试，所有元素都易于定位。QAs 还可以通过查看功能单元测试来验证可测试性。

3.  #1 和#2 的直接结果是通信开销将减少。QA 很少需要开发人员的帮助来解决测试脚本中的问题，或者澄清他们对场景的理解。

4.  QA 花在编写 XPath/CSS 定位器上的时间更少，相反可以将更多的注意力放在故事和测试项目的结构上，这应该被视为一个完整而严肃的软件项目。

下一步，我们需要一个好的工具来简化这个工作流程。

点击阅读全文