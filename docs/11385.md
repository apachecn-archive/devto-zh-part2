# 关于干燥原则，童谣教给了我们什么

> 原文:[https://dev . to/jvar ness/what-nursery-lysons-teach-us-about-the-dry-principle-4j5g](https://dev.to/jvarness/what-nursery-rhymes-teach-us-about-the-dry-principle-4j5g)

对于那些不知道的人，我是一个父亲！我有一个去年刚出生的儿子！

因此，我不得不听很多(我是说很多)不同的童谣。有些我从未听说过。我有一些，但我从来没有真正关注过它们。

直到我听到歌曲《5 只小猴子在床上跳》。

我帮你谷歌了一下

# 剧情

这首童谣的前提很简单:一共有五只行为不端的猴子在一张床上蹦蹦跳跳。

在这群猴子集体努力跳得尽可能高并引起尽可能多的骚动时，每只猴子都轮流从床上掉下来，造成身体伤害，需要猴子的母亲打电话给医生，医生随后告诉母亲“不要再有猴子在床上跳了”。

这位母亲在努力照料这只受伤的猴子时，忽略了许多其他猴子也在同一张床上跳跃的事实。当每只猴子掉下来的时候，妈妈会一个接一个地照顾每个孩子，直到没有猴子在床上跳。

# 击穿

这里有多种因素在起作用:

首先，每只猴子都在执行类似的动作，随后每只猴子也以类似的方式失败。

第二，母亲决定只关注表现出问题的猴子，直到所有猴子都被驯服，而不是指导所有猴子的行为。

最后，一旦每只猴子都被驯服，它们就会停止在床上跳跃。然而，因为每只猴子仍然有感知能力，而且每只猴子都有不良行为的倾向，所以每只猴子都有可能做出对自己和周围人造成进一步伤害的行为。

# 可能的解决方案

我们无法解决这位母亲的问题，她有 5 只喜欢惹麻烦的猴子，尽管我们尽力纠正它们的行为，但它们仍然容易行为不端。

我们也不能通过合并猴子并减少到 1 只来缓解这个问题，所以不幸的是，母亲可能只能和她的 5 只小猴子一起生活，直到它们搬出房子。

然而，对于我们程序员来说，减少代码中猴子的数量是非常可能的！

# 干原理

与名字可能暗示的相反，干燥原则与你的代码有多湿没有关系。

DRY 是首字母缩写，代表**不要重复自己**。这源于你的代码库不应该有重复的代码。

但是为什么不呢？我的意思是，如果代码能满足您的需要，为什么不直接复制/粘贴到您需要的地方呢？

出于同样的原因，母亲应该阻止她的所有小猴子从床上跳下来:*你只会继续受到伤害*。

当您复制代码时，您复制了该代码以前的所有问题，并且没有获得将来的代码更改所能提供的任何好处。当你复制代码时，你得到的只是一只猴子在床上跳，那是你的源代码。

以这段代码为例:

```
const isPrimeNumber = (number) => {
    return number % 2 !== 0;
} 
```

Enter fullscreen mode Exit fullscreen mode

显然这段 JavaScript 代码有问题，原因有很多:首先，它假设如果一个数不能被 2 整除，那么它就是一个质数。其次，它假设传入的变量总是某种可以对其执行整数除法的数值。

看到这段代码的其他工程师可能会决定，为了在系统的其余部分保持相同的行为，需要将这段代码复制到其他地方。

既然这个函数存在于代码库中的多个地方，那么这个问题已经蔓延到了系统中的其他地方。过去与世隔绝的猴子现在繁殖了，它们在整个系统中肆虐。

如果这个功能被提取到它自己的可重用组件中，并在以后的版本中更新为具有正确的功能，那就更好了。那会从一开始就驯服猴子！

然而，复制这个函数的更高版本并不能解决这个问题。重复也造成日后维护和更新需要大量的人工干预和不必要的工作。每次更新原始函数时，它的克隆也需要更新。如果你的代码中有一只猴子，确保只有一只猴子:不要重复你的猴子。

# 结论

我希望这篇文章已经非常翔实和启发。尽管这个例子很傻，但它向你展示了你可以在很多不同的地方找到好的编程建议和课程！