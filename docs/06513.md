# 你需要知道的关于代码基础设施的好处

> 原文:[https://dev . to/Kyle Galbraith/the-benefits-you-need-to-know-on-code-8 C4](https://dev.to/kylegalbraith/the-benefits-you-need-to-know-about-infrastructure-as-code-8c4)

如果你开始学习像亚马逊网络服务或谷歌云平台这样的云提供商，你可能会遇到术语*基础设施代码(IaC)* 。对于开发人员和系统管理员来说，这都是一把瑞士军刀。在这篇文章中，我们将深入探讨 IaC 是什么，它提供的好处，以及它可以采取的不同形式。

### 把基础设施解释成代码，就像我五岁一样

简单地说，就是用某种形式的代码来表示我们的基础设施。在 IaC 中,“代码”的定义非常宽松，因为它可以是 YAML 或 JSON 配置文件，也可以是 HCL 等自主开发的语言，或者 NodeJs 或 Ruby 等传统语言。

虽然 IaC 经常在云环境中被谈论，但它不仅限于我们的云资源。

众所周知，有各种类型的基础设施。有公有云和私有云资源。云和内部资源。或者所有这些的组合，有时称为混合云。

因此，在最高层次上，我们可以将 IaC 概括为用一种公共语言表示我们的系统运行的基础设施的过程或实践。这种语言使基础结构对整个团队可见，并且相对容易地可复制。

### 好处

好了，我们明白了，基础设施就是代码...只是代码。

但是，我们究竟为什么要使用它，我们又能从中得到什么呢？

在我看来，除非您体验过手动配置基础架构，否则您看不到好处。您是否曾经跟随某个教程，点击这个按钮、那个按钮、这个按钮和其他几个按钮，直到您与您的云提供商建立了某种关系？

答案很可能是肯定的。

也许您这样做是为了您的测试环境。然后到了生产的时候，你不得不再次点击那些相同的按钮，并希望你得到正确的顺序。

如果您团队中的其他人为了创建他们自己的环境而不得不重复同样的按钮点击会怎么样？看看这有多痛苦。有些人可能会说，记录过程并解决问题。这是真的，但仍不理想。

文档最初共享知识，但可能会变得陈旧。开发人员有一个令人讨厌的习惯，如果文档不在他们面前，他们就不会去阅读。最后，文档不能像代码一样被测试。

这是代码提供的最大好处，自动化的，可复制的，可测试的，自我记录的基础设施。

通过将资源表示为代码，我们可以将代码参数化以支持多种环境，与我们的队友共享代码，甚至测试代码以确保准确性。

就像我们的应用程序代码的变化被团队中的每个人测试、同行评审和消费一样。使用 IaC，供应、维护和更新我们的基础设施的过程可以直接进入同一个流程。

### 潜在的弊端

虽然我相信将基础设施表示为代码的好处远远大于坏处，但了解我们可能陷入的陷阱仍然是值得的。

基础设施作为代码的最初缺点是学习曲线。正如我前面提到的，术语代码在这个过程中是灵活的，因此它经常需要根据您正在使用的工具学习一种新的代码风格。学习如何在 AWS CloudFormation 中表示您的 VPC 网络堆栈是一项需要学习的重要技能。

借助学习曲线，时间是 IaC 的另一个潜在不利因素。进入 AWS 控制台点击几个按钮通常比在 Terraform 中编写基础设施代码要快得多。许多团队为了更快地交付产品或服务，在早期就做出了这种权衡。

最后一个陷阱是基础设施差异。一旦我们承诺将基础设施作为代码，我们就必须坚持自己的立场。在由 IaC 工具提供的控制台中手动更改基础架构堆栈可能会导致分歧。这意味着我们的基础设施的状态已经改变，因为它是手动编辑的，而我们的 IaC 工具不知道这一点。

虽然这些都是显著的缺点，但它们不应该阻止我们进一步探索 IaC。然而，它们应该是我们在选择工具帮助我们踏上旅程时考虑的事情。

### 工具、工具、工具和更多工具

当谈到 IaC 工具时，将它们放在两个不同但经常重叠的类别中会有所帮助。

*   配置协调工具旨在自动部署我们的基础架构。
*   配置管理工具旨在帮助在已配置的基础架构上配置软件和系统。

需要注意的是，这些类别经常重叠。正如我们将看到的，一些 IaC 工具允许您编排/供应基础设施以及配置它。此外，随着基础架构变得越来越复杂，同时使用这两种工具的情况并不少见。

跟我到目前为止？非常好。下面是一些当前在基础设施中作为代码空间流行的工具。

**Terraform** 是一款与云无关的基础设施配置工具。它允许我们作为开发人员用一种定义良好的语言 HCL 来表示我们的基础设施，不管它是 AWS、Google Cloud 还是 Azure。

Terraform 可通过插件高度扩展，并有一个非常强大的社区，该社区为基础设施的供应提供了很好的开源模块。

**AWS CloudFormation** 不支持云，致力于在 AWS 客户中调配基础架构。它允许我们在 JSON 或 YAML 配置文件中表示我们的 AWS 基础设施，然后我们可以执行这些文件来创建、更新和销毁资源。

CloudFormation 非常好地集成到 AWS 生态系统中，并开发了许多用于预览、回滚和管理资源更改的功能。

**Chef** 属于配置管理工具。它允许我们创建食谱和食谱，定义达到我们的应用程序的必要配置所需的确切步骤。

Chef 和 Terraform 一样，是云不可知的。它使用众所周知的语言，Ruby。它通常用于配置弹性计算(EC2)实例，甚至是本地服务器。

**Puppet** 是另一个类似 Chef 的基于 Ruby 的配置管理工具。两者的区别在于 Puppet 是一种声明性工具。这意味着我们作为开发人员定义了我们的基础设施应该是什么样的，并且 Puppet 指出了如何实现它。

Ansible 是来自 Red Hat 的基础设施自动化工具。开发人员描述他们的组件和系统是如何相互关联的。它意味着端到端地管理和编码系统，而不是独立地管理和编码系统。这些定义写在 YAML，被称为剧本。

Juju 是 Ubuntu 的 IaC 工具，它允许开发者将他们的基础设施描述为 charms，这是一组部署和操作系统的脚本。这些 charms 可以打包成包，为应用程序部署整个基础设施。

这绝对不是一个全面的列表。在配置编排和管理领域，不断有新的工具被开发出来。但目前这些是整个行业正在使用的主流工具。

### 何去何从

我们现在知道了基础设施作为代码的定义、它提供的好处以及缺陷，并且我们现在知道了一些可以探索的工具，这些工具允许我们通过代码提供我们的资源。

理解 IaC 的下一步是从上面的列表中选择一个工具，并开始探索它。

*   从一个简单的用例开始，比如提供一个 S3 存储桶或 EC2 实例。
*   一旦提供了资源。探索另一种要供应的资源。
*   尝试将代码参数化以支持多种环境。
*   了解创建、更新和销毁工具资源之间的区别。

一旦我们开发了一个工具，使我们能够用代码表示我们的基础设施，我们就可以探索这个工具和上面列表中的其他工具之间的区别。

### 结论

基础设施作为代码是用代码表示支持我们系统的底层资源的过程和实践。这允许我们在编写应用程序代码时使用相同的过程。

这包括与我们的团队共享基础设施，以便团队可以协作维护资源。它还包括测试我们的基础设施是如何创建、更新和删除的。正如应用程序代码一样，我们的基础设施的定义也可以接受同行评审。

作为代码的基础设施是 DevOps 工具箱中的一把瑞士军刀。无论云是在 AWS、GCP、Azure 还是他们自己的数据中心提供资源，大小团队都可以利用它。

### 您是否渴望了解更多关于亚马逊网络服务的信息？

想了解更多关于 AWS 的知识？我最近发布了一个电子书和视频课程，穿越了信息的海洋。它着重于在 AWS 上托管、保护和部署静态网站。目标是在您使用服务时了解与此问题相关的服务。如果你一直想学习 AWS，但不知道从哪里开始，那么看看我的课程。