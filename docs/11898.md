# ÊàëÂú®ÂºÇÊ≠•ÂèëÁîµÊú∫‰∏äÁöÑÂ∞ùËØï()

> ÂéüÊñá:[https://dev.to/ycmjason/my-attempt-on-asynctogenerator-1hhd](https://dev.to/ycmjason/my-attempt-on-asynctogenerator-1hhd)

‰∏çÊâìÁÆóËß£ÈáäÂ§™Â§öÔºåÂè™ÊòØÂàÜ‰∫´‰∏Ä‰∏ãÊàëÊúÄËøëÂú®ÂÆûÁé∞`asyncToGenerator()`‰∏äÁöÑÂ∞ùËØï„ÄÇËØ∑Âä°ÂøÖÂëäËØâÊàë‰Ω†ÁöÑÊÉ≥Ê≥ï„ÄÇüòÄ

```
function asyncToGenerator(fn) {
  const ensurePromise = v => Promise.resolve(v);

  const stepContext = (context, nextOrThrow, prev) => {
    const { value, done } = context[nextOrThrow](prev);

    if (done) return ensurePromise(value);

    return ensurePromise(value)
      .then(v => stepContext(context, 'next', v))
      .catch(err => stepContext(context, 'throw', err));
  };

  return function(...args) {
    const context = fn.apply(this, args); 
    return stepContext(context, 'next');
  };
} 
```

Enter fullscreen mode Exit fullscreen mode

Ë¶Å‰ΩøÁî®:

```
asyncToGenerator(function* () {
  const res = yield axios.get('https://www.ycmjason.com');
  console.log(res);
})(); 
```

Enter fullscreen mode Exit fullscreen mode