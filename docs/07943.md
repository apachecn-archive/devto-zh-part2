# JavaScript 中的早期回报

> 原文:[https://dev . to/jenniferlynparsons/early-returns-in-JavaScript-5hfb](https://dev.to/jenniferlynparsons/early-returns-in-javascript-5hfb)

最近，我偶然看到了几篇关于早期回报如何发挥作用的文章，这足以激起我的好奇心。在 JS 中学习早期回报不仅是一项具有挑战性的技术探索，而且非常有趣。在研究这个概念时，我记得我是多么喜欢为了学习而学习，而不仅仅是为了达到目的的一种手段。当然，我收集的信息是有用的，我可能会长期使用这种技术，但它也同样有价值，因为我喜欢沿着面包屑的轨迹找到我的最终结论。

## [](#what-is-an-early-return)什么是提前回归？

简而言之，提前返回提供了一些功能，因此条件语句的结果可以在结果可用时立即返回，而不是等到函数的其余部分运行后再返回。

令人惊讶的是，我以前从未在 JS 中见过这种模式，尽管我习惯于在 Ruby 中看到这种模式，在 Ruby 中这很常见。我很好奇为什么会这样。一些研究告诉我，无论是否需要，只有在剩余代码运行之后才返回，这是早期命令式编程语言的延续，在早期的命令式编程语言中，要求在函数结束时返回，以确保代码以正确的顺序运行。

对于为什么我以前没有遇到这种模式，我能找到的唯一答案是，即使是现在，人们也没有足够地教授或谈论这种模式，以开始经常使用它，放弃命令式风格。一些较新的开发者已经开始了讨论，并强烈认为阅读起来更清晰。

## 我仍有疑问

我不确定这种风格的可读性。我非常习惯于阅读 if/else 语句，在函数的顶部设置一个变量，并在最后返回。有多个返回或者甚至多个 if 语句(而不是 if/else)看起来更难理解。

比可读性更重要的是，我想知道它与单点/结束函数返回相比性能如何。我的直觉告诉我，它可能会更快，因为理论上运行的代码更少。在研究这个问题时，我发现一篇 2012 年以前的文章暗示它可能实际上性能较差，但在那之后没有找到任何支持这种或那种风格的信息。

发现单程返程更快是很有趣的，如果是的话，为什么会这样。我决定运行一些基准测试，看看我们的赢家是谁。

## [](#benchmarking-early-returns)标杆早期回报

以下是我的基准测试: [JavaScript 基准操场](http://jsbench.github.io/#1fd9788db451f01d4b84e12bba8d706f)

正如您在运行测试时所看到的，各种选项之间的速度只有几十毫秒的差异，可以忽略不计。虽然我每次运行基准测试时得到的结果略有不同，但旧的专横风格每次都是最棒的。不是我所期待的！一般来说，看起来“if/else 中的早期返回”排在“使用单个语句的早期返回”之后，尽管它们之间几乎没有区别。

## [](#conclusion)结论

在比较这些例子时，我发现为了可读性，我更喜欢使用单个 if/else，不管它是早期返回还是单个返回。虽然早期返回比在单次返回中设置一个变量只是为了得到一个返回值要简单得多，但是知道性能也会受到影响意味着我可能会坚持旧的风格。此外，在一个函数中有一系列语句，就像在“早期返回单个语句”版本中一样，抽象出了它们必然相互关联的事实，对我来说，可读性更差。

总的来说，我觉得自己对 JavaScript 的一些内部工作方式有了更深的理解，还尝试了一些基准测试，学习了一些编程历史。

## [](#resources)资源

*   [提前返回——威尔逊页面](http://wilsonpage.co.uk/return-early/)

*   [大概错了——避免别的，早点回来](http://blog.timoxley.com/post/47041269194/avoid-else-return-early)

*   我应该提前从函数返回还是使用 if 语句？-软件工程栈交换

*   [代码格式和可读性-错误](http://lecterror.com/articles/view/code-formatting-and-readability)

*   “只退一次”的概念从何而来？-软件工程栈交换

*   [回归早期模式-指南-自由代码营论坛](https://forum.freecodecamp.org/t/the-return-early-pattern/19364)

*   设计——从函数中提前返回比 if 语句更优雅吗？-堆栈溢出

*   [时尚的周六:提前回报](https://dev.to/howtocodejs/stylish-saturday-early-returns-722)