# ğŸ¤”è§£é‡Šåˆ†å¸ƒå¼å­˜å‚¨â€”â€”ä»¥åŠå®ƒåœ¨ github / uilicious / cloud / etc ä¸­çš„è¡¨ç°

> åŸæ–‡:[https://dev.to/uilicious/explain-distributed-storage å’Œå®ƒå¦‚ä½•ä¸º github-uilicious-cloud-etc-1 mni è€Œå€’ä¸‹](https://dev.to/uilicious/explain-distributed-storage---and-how-it-goes-down-for-github--uilicious--cloud--etc-1mni)

# [](#background-context)èƒŒæ™¯è¯­å¢ƒ

å¯¹ç³»ç»Ÿç®¡ç†å‘˜æ¥è¯´ï¼Œè¿™æ˜¯ç³Ÿç³•çš„ä¸€ä¸ªæœˆ(2018 å¹´ 10 æœˆ)ï¼Œå…ˆæ˜¯ youtubeï¼Œç„¶åæ˜¯ github

> ![GitHub Status profile image](../Images/000d2e4ec92adcc5f9427afefe685544.png)GitHub çŠ¶æ€@ GitHub çŠ¶æ€![twitter logo](../Images/65e26e35707d96169ec8af6b3cbf2003.png)æˆ‘ä»¬æ­£åœ¨ç»§ç»­ä¸º[GitHub.com](https://t.co/IEoI8IWMw9)ä¿®å¤ä¸€ä¸ªæ•°æ®å­˜å‚¨ç³»ç»Ÿã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°ä¸ä¸€è‡´çš„ç»“æœã€‚2018 å¹´ 10 æœˆ 22 æ—¥ä¸Šåˆ 04:12[![Twitter reply action](../Images/5d5a32424597af8488f7190c7d7d496b.png)](https://twitter.com/intent/tweet?in_reply_to=1054224055673462786)[![Twitter retweet action](../Images/3d12d4a909b79beaf8d81b6491fd052d.png)](https://twitter.com/intent/retweet?tweet_id=1054224055673462786)[![Twitter like action](../Images/3f89df2f36e8e5624d2a25952b3ac8b8.png)](https://twitter.com/intent/like?tweet_id=1054224055673462786)

é¦–å…ˆ:#æ„Ÿè°¢ github çš„äººä»¬ä¿®å¤äº†ä»–ä»¬çš„ç³»ç»Ÿã€‚ä¿æŒå¤§è§„æ¨¡ç³»ç»Ÿæ­£å¸¸è¿è¡Œå¹¶ä¸å®¹æ˜“[(æˆ‘è‡ªå·±ä¹Ÿç»å†è¿‡)](https://blog.uilicious.com/uilicious-com-fileserver-downtime-incident-may-2018-part-1-9af14b72ec0c)

æ¶²ä½“é”™è¯¯:å†…éƒ¨

æ˜¾ç„¶ï¼Œå°½ç®¡åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨åœ¨äº‘ä¸­éšå¤„å¯è§ï¼Œä½†æ²¡æœ‰å¤šå°‘å¼€å‘äººå‘˜çœŸæ­£ç†è§£å®ƒ...

é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼å­˜å‚¨å‘¢ï¼Ÿä¸ºä»€ä¹ˆå„å¤§äº‘æä¾›å•†éƒ½åœ¨ç”¨ï¼Ÿä»–ä»¬ä¸ºä»€ä¹ˆä¼šå¤±è´¥ï¼Œåˆæ˜¯å¦‚ä½•å¤±è´¥çš„ï¼Ÿ

* * *

# [](#what-is-distributed-storage)ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼å­˜å‚¨ï¼Ÿ

åˆ†å¸ƒå¼å­˜å‚¨ï¼Œè¿™é‡Œç»Ÿç§°[â€œåˆ†å¸ƒå¼æ•°æ®å­˜å‚¨â€](https://en.wikipedia.org/wiki/Distributed_data_store)ä¹Ÿå«â€œåˆ†å¸ƒå¼æ•°æ®åº“â€[â€œåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿâ€](https://en.wikipedia.org/wiki/Clustered_file_system#Distributed_file_systems)ã€‚

ä» NoSQL æ½®æµåˆ°æœ€è‘—åçš„ AWS S3 å‚¨ç‰©ï¼Œå®ƒçš„åº”ç”¨å½¢å¼å¤šç§å¤šæ ·ã€‚

æ ¸å¿ƒæ¦‚å¿µæ˜¯é€šè¿‡å°†æ•°æ®åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼Œå¹¶ç¡®ä¿åœ¨å¤šä¸ªç‰©ç†æœåŠ¡å™¨ä¸Šæœ‰å‰¯æœ¬(é€šå¸¸å…·æœ‰ä¸åŒçš„å­˜å‚¨å®¹é‡)ï¼Œåœ¨æ•°æ®å­˜å‚¨ä¸­å½¢æˆå†—ä½™ã€‚

<figure>

[![glusterfs replicated volume](../Images/f320a5ec6a8512552f782add02971a37.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--3aCBsgDZ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/w897wff1d3z2gfn5vtzw.png)

<figcaption>GlusterFS replicated volume</figcaption>

</figure>

ä½¿ç”¨[æ“¦é™¤ä»£ç ](https://en.wikipedia.org/wiki/Erasure_code)å¯ä»¥å°†æ•°æ®å‰¯æœ¬å­˜å‚¨ä¸ºå®Œæ•´å‰¯æœ¬æˆ–å‹ç¼©æˆå¤šä¸ªéƒ¨åˆ†

> å› ä¸ºæ“¦é™¤ä»£ç ã€åŠ å¯†ã€å¥‡å¶æ ¡éªŒä½æ¶‰åŠå¤æ‚çš„æ•°å­¦æ¥è§£é‡Šå®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¹¶ä¸”é™¤äº†å‹ç¼©æ•°æ®ä¹‹å¤–ï¼Œå¯¹æœ¬æ–‡ä¸­çš„æ¦‚å¿µæ²¡æœ‰å¤ªå¤§çš„æ”¹å˜ã€‚æˆ‘ä¼šç®€å•åœ°ç”¨â€œå¤åˆ¶å“â€è¿™ä¸ªä¸å‡†ç¡®çš„è¯ï¼Œæ¥çœå»æˆ‘ä»¬ä¿©çš„æ•°å­¦è¯¾ğŸ˜‰

æ— è®ºä½¿ç”¨å“ªç§å­˜å‚¨æ–¹æ³•ï¼Œè¿™éƒ½æœ‰åŠ©äºç¡®ä¿åœ¨ Y å°æœåŠ¡å™¨ä¸Šå­˜å‚¨ X ä»½æ•°æ®å‰¯æœ¬ã€‚å…¶ä¸­ X <= Y(ä¾‹å¦‚ï¼Œ5 å°æœåŠ¡å™¨ä¸Šçš„ 3 ä¸ªå‰¯æœ¬)ã€‚

# [](#ugh-complex-math-why-do-we-do-this)å”‰å¤æ‚çš„æ•°å­¦ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ

åœ¨å¤§è§„æ¨¡ç³»ç»Ÿä¸­ï¼Œé—®é¢˜ä¸æ˜¯â€œå¦‚æœâ€ä¸€ä¸ªæœåŠ¡å™¨å°†ä¼šå¤±è´¥ï¼Œè€Œæ˜¯â€œä½•æ—¶â€T2ã€‚æ¯•ç«Ÿï¼Œå°±ç¡¬ä»¶æ•°é‡è€Œè¨€ï¼Œè¿™å‡ ä¹æ˜¯ä¸€ä¸ª[ç»Ÿè®¡äº‹å®](https://en.wikipedia.org/wiki/Mean_time_between_failures)ã€‚

æ‚¨çœŸçš„ä¸å¸Œæœ›è¿™æ ·ä¸€ä¸ªå¤§è§„æ¨¡çš„ç³»ç»Ÿåœ¨ä¸€å°æœåŠ¡å™¨æ‰“å–·åšæ—¶å°±å´©æºƒã€‚

è¿™ä¸è¿‡å»æ›´å¸¸è§çš„å•ä¸€æœåŠ¡å™¨ä¸Šçš„é©±åŠ¨å™¨å†—ä½™(å¦‚ [RAID 1](https://en.wikipedia.org/wiki/Standard_RAID_levels#RAID_1) )å½¢æˆé²œæ˜å¯¹æ¯”ï¼Œåè€…å¯ä»¥ä¿æŠ¤æ•°æ®å…å—ç¡¬ç›˜æ•…éšœçš„å½±å“ã€‚

å¦‚æœæ“ä½œæ­£ç¡®ï¼Œåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿæœ‰åŠ©äºä½¿ç³»ç»Ÿåœ¨åœæœºæ—¶å­˜æ´»ä¸‹æ¥ï¼Œä¾‹å¦‚æœåŠ¡å™¨å®Œå…¨æ•…éšœï¼Œæ•´ä¸ªæœåŠ¡å™¨æœºæ¶è¢«ä¸¢å¼ƒï¼Œç”šè‡³æ˜¯æ•°æ®ä¸­å¿ƒå‘ç”Ÿ[æ ¸](https://github.com/cockroachdb/cockroach) [çˆ†ç‚¸](http://www.discovery.com/tv-shows/mythbusters/mythbusters-database/cockroaches-survive-nuclear-explosion/)çš„æç«¯æƒ…å†µã€‚

æˆ–è€…å¦‚ xkcd æ‰€è¯´...

[![xkcd datacenter scale](../Images/3e867e89a0ab9784ba1dc626572ab985.png)T2ã€‘](https://www.explainxkcd.com/wiki/index.php/1737:_Datacenter_Scale)

# [](#nuclear-proof-database-wouldnt-such-a-system-be-extremely-slow)æ ¸è¯æ•°æ®åº“ï¼Ÿè¿™æ ·çš„ç³»ç»Ÿå²‚ä¸æ˜¯é€Ÿåº¦ææ…¢ï¼Ÿ

å—¯ï¼Œé‚£è¦çœ‹æƒ…å†µ...ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤šä¸åŒçš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œéƒ¨åˆ†åŸå› æ˜¯æ‰€æœ‰çš„ç³»ç»Ÿéƒ½å½¢æˆäº†æŸç§æŠ˜è¡·ï¼Œæœ‰åˆ©äºä¸€ä¸ªå±æ€§èƒœè¿‡å¦ä¸€ä¸ªå±æ€§ã€‚ä¾‹å­åŒ…æ‹¬å»¶è¿Ÿæˆ–[é…¸ä¿è¯](https://en.wikipedia.org/wiki/ACID_(computer_science))ã€‚

åˆ†å¸ƒå¼ç³»ç»Ÿæœ€å¸¸è§çš„å¦¥åä¹‹ä¸€æ˜¯æ¥å—è·¨å¤šä¸ªæœåŠ¡å™¨åè°ƒæ•°æ®æ‰€æ¶‰åŠçš„å·¨å¤§å¼€é”€ã€‚å› æ­¤ï¼Œå½“æ¶‰åŠåˆ°é’ˆå¯¹éåˆ†å¸ƒå¼ç³»ç»Ÿè¿›è¡ŒåŸºå‡†æµ‹è¯•çš„å•ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹æ—¶ï¼Œå®ƒä»¬å¾€å¾€ä¼šå¤±è´¥ã€‚

ç„¶è€Œï¼Œä»–ä»¬å¾—åˆ°çš„å›æŠ¥æ˜¯æ°´å¹³å¯ä¼¸ç¼©æ€§ï¼Œæ¯”å¦‚è·¨è¶Šä¸€åƒä¸ªèŠ‚ç‚¹çš„èƒ½åŠ›ã€‚

è®¸å¤šå¼€å‘äººå‘˜å¯èƒ½éƒ½ç»å†è¿‡ä¸€ä¸ªå¸¸è§çš„ä¾‹å­:å°†å•ä¸ªå¤§æ–‡ä»¶ä¸Šä¼ åˆ°äº‘å­˜å‚¨ä¼šæœ‰äº›æ…¢ã€‚ç„¶è€Œï¼Œå¦ä¸€æ–¹é¢ï¼Œä»–ä»¬å¯ä»¥åœ¨é’±åŒ…å…è®¸çš„æƒ…å†µä¸‹åŒæ—¶ä¸Šä¼ å°½å¯èƒ½å¤šçš„æ–‡ä»¶ï¼Œå› ä¸ºè´Ÿè½½å°†åˆ†å¸ƒåœ¨å¤šä¸ªæœåŠ¡å™¨ä¸Šã€‚

<figure>

[![Cern giant laser beam](../Images/2581888e3bcdd1fc1596ec024bdc4866.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--2Jdmj6B4--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/ulkx1b4hwkwxnvnj9nz1.jpeg)

<figcaption>One giant death laser?</figcaption>

</figure>

æˆ–è€…å¯¹äº CERN(ä½ çŸ¥é“ï¼Œå·¨å‹å¤§å‹å¼ºå­å¯¹æ’æœº)ï¼Œè¿™æ„å‘³ç€ [11ï¼Œ000 å°æœåŠ¡å™¨](https://home.cern/about/computing)ï¼Œ [200 PB æ•°æ®](https://home.cern/about/updates/2017/07/cern-data-centre-passes-200-petabyte-milestone)ï¼Œä¼ è¾“è¶…è¿‡ [200 åƒå…†æ¯”ç‰¹/ç§’](https://home.cern/about/computing/processing-what-record)ã€‚è¿„ä»Šä¸ºæ­¢æ²¡æœ‰å‘ç°ä»»ä½•é»‘æ´

æ‰€ä»¥æ²¡é”™ï¼Œå•ä¸ªæœåŠ¡å™¨â€œæ…¢â€ã€‚å¯¹äºâ€œå¿«é€Ÿâ€å¤šæœåŠ¡å™¨ï¼Œæ‚¨æ‹¥æœ‰å¹¶è¡Œæ€§ï¼Œå‰¯æœ¬åˆ†å¸ƒåœ¨å®ƒä»¬ä¹‹é—´ã€‚

# [](#oh-wow-cool-so-how-do-these-replicas-get-created-in-the-first-place)å“¦å“‡ï¼Œçˆ½ã€‚é‚£ä¹ˆï¼Œè¿™äº›å¤åˆ¶å“æœ€åˆæ˜¯å¦‚ä½•äº§ç”Ÿçš„å‘¢ï¼Ÿ

è€Œä¸æ¶‰åŠä»»ä½•ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿé€šå¸¸æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

*   å½“å®¢æˆ·ç«¯ç¨‹åºå°†ä¸€ä¸ªæ•°æ®å†™å…¥ç³»ç»Ÿæ—¶ï¼Œå®ƒçš„å‰¯æœ¬ä¼šè¢«åŒæ­¥åˆ›å»ºåˆ°è¯¥è¿‡ç¨‹ä¸­çš„å„ä¸ªå…¶ä»–èŠ‚ç‚¹ä¸­ã€‚

*   å½“è¯»å–ä¸€æ®µæ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯è¦ä¹ˆä»ä¸€ä¸ªå‰¯æœ¬ä¸­è·å–æ•°æ®ï¼Œè¦ä¹ˆä»å¤šä¸ªå‰¯æœ¬ä¸­è·å–æ•°æ®ï¼Œæœ€ç»ˆç»“æœç”±å¤šæ•°æŠ•ç¥¨å†³å®šã€‚

*   å¦‚æœå‘ç°ä»»ä½•å‰¯æœ¬ç”±äºå´©æºƒè€ŒæŸåæˆ–ä¸¢å¤±ï¼Œåˆ™ä»ç³»ç»Ÿä¸­åˆ é™¤å…¶å‰¯æœ¬ã€‚å¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–°çš„å‰¯æœ¬å¹¶æ”¾ç½®åœ¨å¦ä¸€ä¸ªæœåŠ¡å™¨ä¸Š(å¦‚æœå¯ç”¨çš„è¯)ã€‚è¿™è¦ä¹ˆåœ¨è¯»å–æ—¶å‘ç”Ÿï¼Œè¦ä¹ˆé€šè¿‡èƒŒæ™¯æ£€æŸ¥è¿‡ç¨‹å‘ç”Ÿã€‚

*   å†³å®šä»€ä¹ˆæ•°æ®æ˜¯æœ‰æ•ˆçš„æˆ–æŸåçš„ï¼Œä»¥åŠæ¯ä¸ªå‰¯æœ¬æ•°æ®åº”è¯¥åœ¨å“ªé‡Œï¼Œé€šå¸¸ç”±â€œä¸»èŠ‚ç‚¹â€æˆ–é€šè¿‡â€œå¤šæ•°è¡¨å†³â€æ¥å†³å®šã€‚æœ‰æ—¶æ˜¯ä¸ºäº†â€œéšæœºâ€é€‰æ‹©å¤åˆ¶å“çš„å»å‘ã€‚

*   ç„¶è€Œï¼Œéœ€è¦æ³¨æ„çš„ä¸€ä¸ªæœ€é‡è¦çš„åå¤å‡ºç°çš„äº‹æƒ…æ˜¯ï¼Œåœ¨ç³»ç»Ÿå·¥ä½œçš„æ‰€æœ‰å†—ä½™ä¸­ï¼Œè®¸å¤šæ“ä½œéƒ½éœ€è¦å¤šæ•°è¡¨å†³ã€‚

# æœ‰è¿™ä¹ˆå¤šå†—ä½™ï¼Œå®ƒæ€ä¹ˆè¿˜ä¼šå¤±è´¥ï¼Ÿ

å¼€å§‹æ—¶...è¿™å–å†³äºä½ å¯¹å¤±è´¥çš„å®šä¹‰...

| ç³»ç»ŸçŠ¶æ€ | æè¿° |
| --- | --- |
| å…¨éƒ¨ğŸ’š | æ¯ä¸ªèŠ‚ç‚¹å’Œå‰¯æœ¬éƒ½åœ¨å·¥ä½œã€‚è€¶ï¼ |
| å¤§å¤šæ•°å‰¯æœ¬éƒ½æ˜¯ğŸ’š | ä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚å‰¯æœ¬å¯èƒ½ä¼šåœæœºï¼Œä½†åªè¦æˆ‘ä»¬å å¤šæ•°ï¼Œåªè¦æˆ‘ä»¬åŠæ—¶æ›¿æ¢é‚£äº›åœæœºçš„å‰¯æœ¬ï¼Œç”¨æˆ·å°±ä¸ä¼šæ³¨æ„åˆ°ä»»ä½•äº‹æƒ…... |
| å¤§å¤šæ•°å‰¯æœ¬éƒ½æ˜¯ğŸ”´ | ä¼‘æ–¯é¡¿ï¼Œæˆ‘ä»¬æœ‰éº»çƒ¦äº†ã€‚æ ¹æ®ç³»ç»Ÿè®¾è®¡ï¼Œå®ƒè¦ä¹ˆè¿›å…¥åªè¯»æ¨¡å¼ï¼Œå³ç¡¬æ•…éšœçŠ¶æ€ï¼Œè¦ä¹ˆç»§ç»­æ­£å¸¸è¿è¡Œ(ç½•è§)å…¶ä½™èŠ‚ç‚¹ï¼Œå¹¶é­å—**è£‚è„‘**ã€‚ |
| å…¨éƒ¨ğŸ”´ | ä¸€åˆ‡éƒ½å®Œäº†ã€‚å“å‘€ã€‚å¸Œæœ›æˆ‘ä»¬å¯ä»¥æ¢å¤é›†ç¾¤æˆ–è¿˜åŸé‚£äº›å¤‡ä»½ã€‚ä»–ä»¬ç¡®å®å­˜åœ¨ï¼Œå¯¹å—ï¼ŸğŸ˜­ |

åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€å¤§å¥½å¤„æ˜¯ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå½“å•ä¸ªèŠ‚ç‚¹æˆ–å‰¯æœ¬å‡ºç°æ•…éšœæ—¶ï¼Œåœ¨å¹•åä¼šæœ‰ä¸€ä¸ªç³»ç»Ÿå¯é æ€§å·¥ç¨‹å¸ˆ(æˆ–ç³»ç»Ÿç®¡ç†å‘˜)æ¥æ›¿æ¢å—å½±å“çš„æœåŠ¡å™¨ï¼Œè€Œä¸ä¼šå¼•èµ·ä»»ä½•ç”¨æˆ·çš„æ³¨æ„ã€‚

> è¿™å¯èƒ½æ˜¯æ‰€æ¶‰åŠçš„å·¥ä½œä¸­æœ€è¢«å¿½è§†å’Œè´¹åŠ›ä¸è®¨å¥½çš„æ–¹é¢ä¹‹ä¸€ã€‚æ²¡æœ‰äººçŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ ¹æ®è®°å½•ï¼Œè¿™ç§æƒ…å†µä»Šå¹´å·²ç»åœ¨ Uilicious å†…éƒ¨å‘ç”Ÿè¿‡ä¸¤æ¬¡ï¼Œå¯¹äºè°·æ­Œå’Œäºšé©¬é€Šè¿™æ ·è§„æ¨¡çš„åŸºç¡€è®¾æ–½ï¼Œæˆ‘è‚¯å®šè¿™ç§æƒ…å†µæ¯å¤©éƒ½ä¼šå‘ç”Ÿã€‚æ‰€ä»¥#hugops

å¦ä¸€ä»¶éœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ä»å•†ä¸šè§’åº¦å¯¹å¤±è´¥çš„å®šä¹‰ã€‚æ°¸ä¹…ä¸¢å¤±æ‰€æœ‰å®¢æˆ·æ•°æ®æ¯”è¿›å…¥åªè¯»æ¨¡å¼ç”šè‡³ç³»ç»Ÿå´©æºƒè¦ç³Ÿç³•å¾—å¤šã€‚

> ç‰¹åˆ«æ˜¯å¯¹äº githubï¼Œå¦‚æœç”¨æˆ·è¿˜æ²¡æœ‰æäº¤æ•°æ®ï¼Œä»–ä»¬å¾ˆæ¸…æ¥šä»–ä»¬éœ€è¦ä¿å­˜æ•°æ®çš„æœ¬åœ°å‰¯æœ¬ï¼Œä»¥ä¾¿ä»¥åä¸Šä¼ ã€‚ä½†æ˜¯ï¼Œå¦‚æœä»–ä»¬å·²ç»ä¸Šä¼ ï¼Œä»–ä»¬å¯èƒ½ä¼šåˆ é™¤å…¶æœ¬åœ°å‰¯æœ¬ï¼Œä»¥ä¾¿ä¸ºå…¶å°äº 1TB çš„ SSD å­˜å‚¨ç¬”è®°æœ¬ç”µè„‘è…¾å‡ºç©ºé—´ã€‚

å› æ­¤ï¼Œè®¸å¤šè¿™æ ·çš„ç³»ç»Ÿè¢«è®¾è®¡æˆé¦–å…ˆå…³é—­æˆ–è¿›å…¥åªè¯»çŠ¶æ€ï¼Œè€Œè¿™éœ€è¦é•¿æ—¶é—´çš„æ‰‹åŠ¨æ¢å¤ï¼Œä»¥ç¡®ä¿æ•°æ®å®‰å…¨ã€‚è¿™è¢«è®¾è®¡æˆâ€œéƒ¨åˆ†å¤±æ•ˆâ€ã€‚

æœ€å...å¢¨è²å®šå¾‹...æ„å‘³ç€æœ‰æ—¶æ‚¨çš„ç½‘ç»œåŸºç¡€è®¾æ–½çš„å¤šä¸ªèŠ‚ç‚¹æˆ–ç½‘æ®µä¼šå‡ºç°æ•…éšœã€‚ä½ å°†é¢ä¸´å¤±å»å¤šæ•°é€‰ç¥¨çš„æƒ…å†µã€‚

# é‚£ä¹ˆå†—ä½™æ˜¯å¦‚ä½•ç¡®å®šçš„å‘¢ï¼Ÿ

å¯¹äºäº‘ç³»ç»Ÿï¼Œè¿™é€šå¸¸æ„å‘³ç€ç”¨æ–°å®ä¾‹æ›¿æ¢å‰¯æœ¬ã€‚

ç„¶è€Œï¼Œå–å†³äºä¸€ä¸ªäººçš„ç½‘ç»œåŸºç¡€è®¾æ–½å’Œæ•°æ®é›†å¤§å°ï¼Œæ—¶é—´æ˜¯ä¸€ä¸ªä¸»è¦éšœç¢ã€‚

ä¾‹å¦‚ï¼Œå°†å•ä¸ª 8TB èŠ‚ç‚¹æ›¿æ¢ä¸ºåƒå…†ä½è¿æ¥(æˆ–æœ‰æ•ˆçš„ 800 å…†ä½/ç§’)ï¼Œå¤§çº¦éœ€è¦ 22.2 å°æ—¶ï¼Œæˆ–ä¸€æ•´å¤©ã€‚è¿™æ˜¯å‡è®¾æœ€ä½³ä¼ è¾“é€Ÿç‡ä¼šä½¿ç³»ç»Ÿé¥±å’Œã€‚ä¸ºäº†ä¿æŒç³»ç»Ÿæ­£å¸¸è¿è¡Œè€Œä¸å‡ºç°æ˜æ˜¾çš„åœæœºæ—¶é—´ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†ä¼ è¾“é€Ÿç‡å‡åŠï¼Œå°†æ‰€éœ€æ—¶é—´å¢åŠ ä¸€å€ï¼Œè¾¾åˆ°æ•´æ•´ä¸¤å¤©ã€‚

è‡ªç„¶ï¼Œæ›´å¤æ‚çš„å› ç´ å°†å‘æŒ¥ä½œç”¨ï¼Œå¦‚ 10 åƒå…†ä½è¿æ¥ï¼Œæˆ–ç¡¬ç›˜é€Ÿåº¦ã€‚

ç„¶è€Œï¼Œè¦ç‚¹ä¿æŒä¸å˜ï¼Œæ›¿æ¢â€œå¤§å‹â€å­˜å‚¨èŠ‚ç‚¹ä¸­æŸåçš„å‰¯æœ¬å‡ ä¹ä¸æ˜¯ç¬é—´çš„ã€‚

> è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ ä¼šçœ‹åˆ°å…³äºæ•°æ®åœ¨é›†ç¾¤ä¸­åŒæ­¥éœ€è¦å¤šé•¿æ—¶é—´çš„æ¨æ–‡
> 
> > ![GitHub Status profile image](../Images/000d2e4ec92adcc5f9427afefe685544.png)GitHub çŠ¶æ€@ GitHub çŠ¶æ€![twitter logo](../Images/65e26e35707d96169ec8af6b3cbf2003.png)æˆ‘ä»¬ç›®å‰å¤„äºæ¢å¤æ“ä½œçš„åæœŸé˜¶æ®µï¼Œç›®æ ‡æ˜¯åœ¨æ¥ä¸‹æ¥çš„ 2 å°æ—¶å†…æä¾›å®Œå…¨ä¸€è‡´çš„æ•°æ®ã€‚2018 å¹´ 10 æœˆ 22 æ—¥ä¸Šåˆ 06:51[![Twitter reply action](../Images/5d5a32424597af8488f7190c7d7d496b.png)](https://twitter.com/intent/tweet?in_reply_to=1054264047250608130)[![Twitter retweet action](../Images/3d12d4a909b79beaf8d81b6491fd052d.png)](https://twitter.com/intent/retweet?tweet_id=1054264047250608130)[![Twitter like action](../Images/3f89df2f36e8e5624d2a25952b3ac8b8.png)](https://twitter.com/intent/like?tweet_id=1054264047250608130)
> 
> æ ¹æ®è®°å½•ï¼Œè€ƒè™‘åˆ°ä»–ä»¬å¯èƒ½æ­£åœ¨è¿è¡Œä¸€ä¸ªå¤š Peta å­—èŠ‚çš„é›†ç¾¤ï¼Œåœ¨ä¸€å¤©å†…åŒæ­¥æ•°æ®æ˜¯â€œå¾ˆå¿«çš„â€

æœ‰æ—¶åœ¨è¿™æ¼«é•¿çš„ 48 å°æ—¶é‡Œï¼Œç³»ç»Ÿç®¡ç†å‘˜ä¼šæ„Ÿåˆ°ç´§å¼ ã€‚å¯¹äº 3 ä¸ªå‰¯æœ¬çš„é…ç½®ï¼Œå¦‚æœè¦ç»´æŠ¤ 2 ä¸ªå¥åº·èŠ‚ç‚¹ä¸­çš„å¤§å¤šæ•°ï¼Œå°±æ²¡æœ‰å‡ºé”™çš„ä½™åœ°ã€‚å¯¹äº 5 ä¸ªå‰¯æœ¬çš„é…ç½®ï¼Œå°†æœ‰ 1 ä¸ªå¤‡ç”¨ç©ºé—´ã€‚

å½“å¤±å»å¤šæ•°ç¥¨æ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹ä¸‰ç§æƒ…å†µä¹‹ä¸€:

*   åˆ†è£‚çš„å¤§è„‘:ä½ æœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ªæ··ä¹±çš„é›†ç¾¤
*   åªè¯»æ¨¡å¼:é˜²æ­¢ç³»ç»Ÿæœ‰ä¸¤ä¸ªä¸åŒçš„æ•°æ®é›†(å¹¶å› æ­¤åˆ†è£‚å¤§è„‘)
*   ç¡¬ç³»ç»Ÿæ•…éšœ:ä¸€äº›ç³»ç»Ÿæ›´å–œæ¬¢å¼•å‘ç¡¬æ•…éšœï¼Œè€Œä¸æ˜¯å¯¼è‡´å¤§è„‘åˆ†è£‚ã€‚

# [](#ugh-my-head-hurts-what-is-the-split-brain-problem)å”‰ï¼Œå¤´å¥½ç—›ï¼Ÿä»€ä¹ˆæ˜¯è£‚è„‘é—®é¢˜ï¼Ÿ

å½“ä½ çš„é›†ç¾¤å¼€å§‹åˆ†è£‚æˆä¸¤ä¸ªéƒ¨åˆ†æ—¶ï¼Œåˆ†è£‚å¤§è„‘å°±å¼€å§‹å‘ç”Ÿäº†ã€‚éšç€é›†ç¾¤å¤±å»åŒæ­¥ï¼Œæ‚¨çš„ç³»ç»Ÿå°†å¼€å§‹çœ‹åˆ°åŒä¸€æ•°æ®çš„ä¸¤ä¸ªä¸åŒç‰ˆæœ¬ã€‚

å½“ç½‘ç»œæ•…éšœå¯¼è‡´é›†ç¾¤çš„ä¸€åŠä¸å¦ä¸€åŠéš”ç¦»æ—¶ï¼Œè¿™ç§æƒ…å†µæœ€å¸¸è§ã€‚

å¦‚æœå‘ç”Ÿæ•°æ®æ›´æ”¹ï¼Œéšåä¼šå‘ç”Ÿçš„æƒ…å†µæ˜¯ï¼Œç³»ç»Ÿçš„ä¸€åŠä¼šæ›´æ–°ï¼Œè€Œå¦ä¸€åŠä¼šè¿‡æ—¶ã€‚

è¿™æ˜¯â€œæ­£å¸¸çš„â€ï¼Œç›´åˆ°å¦ä¸€åŠé‡æ–°ä¸Šçº¿ã€‚å¹¶ä¸”æ•°æ®å¯èƒ½ä¸åŒæ­¥ï¼Œç”šè‡³ç”±äºä¸é›†ç¾¤çš„å¦ä¸€åŠä¸€èµ·ä½¿ç”¨è€Œè¢«æ”¹å˜ã€‚

åŒæ–¹éƒ½ä¼šå£°ç§°è‡ªå·±æ˜¯â€œçœŸå®çš„â€æ•°æ®ï¼Œå¹¶æŠ•ç¥¨åå¯¹â€œå¦ä¸€åŠâ€ã€‚å°±åƒä»»ä½•é™·å…¥åƒµå±€çš„æŠ•ç¥¨ç³»ç»Ÿä¸€æ ·ï¼Œä»»ä½•å·¥ä½œéƒ½æ— æ³•å®Œæˆã€‚

<figure>

[![Seeing double](../Images/bec73d89b80c2d84c1b36a43804bcd07.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--fRFwlmRb--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/u18ygco5oy42j4ah2ed9.gif)

<figcaption>Both: I'm the real one!</figcaption>

</figure>

å³ä½¿å‰¯æœ¬æ•°é‡ä¸ºå¥‡æ•°ï¼Œè¿™ç§æƒ…å†µä¹Ÿä¼šå‘ç”Ÿã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå‰¯æœ¬å‡ºç°ä¸¥é‡æ•…éšœï¼Œå¹¶å†³å®šâ€œä¸æŠ•ç¥¨â€

# å¥½çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆè¯¥å¦‚ä½•é¢„é˜²å‘¢ï¼Ÿ

å¹¸è¿çš„æ˜¯ï¼Œå¤§å¤šæ•°åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œåªè¦é…ç½®å¾—å½“ï¼Œéƒ½æ˜¯ä¸ºäº†ä»ä¸€å¼€å§‹å°±é˜²æ­¢è£‚è„‘çš„å‘ç”Ÿã€‚å®ƒä»¬é€šå¸¸æœ‰ä¸‰ç§å½¢å¼ã€‚

*   åšå‡ºæ‰€æœ‰æœ€ç»ˆå†³å®šçš„ä¸»èŠ‚ç‚¹(ç„¶è€Œï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä¸»èŠ‚ç‚¹çš„å•ç‚¹æ•…éšœã€‚ä¸€äº›ç³»ç»Ÿé€€å›åˆ°æŠ•ç¥¨é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹(å¦‚æœå‘ç”Ÿçš„è¯)ã€‚

*   ç¡¬ç³»ç»Ÿæ•…éšœï¼Œä»¥é˜²æ­¢è¿™ç§åˆ†è£‚çš„å¤§è„‘ã€‚ç›´åˆ°ç¾¤é›†å…¨éƒ¨æ­£ç¡®åŒæ­¥å¤‡ä»½ï¼›è¿™ç¡®ä¿ä¸ä¼šæ˜¾ç¤ºâ€œè¿‡æ—¶â€çš„æ•°æ®ã€‚

*   ä»¥åªè¯»æ–¹å¼é”å®šç³»ç»Ÿï¼›è¿™ç§æƒ…å†µæœ€å¸¸è§çš„è¿¹è±¡æ˜¯æŸäº›èŠ‚ç‚¹ä»¥åªè¯»æ¨¡å¼æ˜¾ç¤ºè¿‡æ—¶çš„æ•°æ®ã€‚

åè€…æ˜¯å¤§å¤šæ•°åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ€å¸¸è§çš„ï¼Œåœ¨æœ€è¿‘çš„ github å®•æœºä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°

> ![GitHub Status profile image](../Images/000d2e4ec92adcc5f9427afefe685544.png)GitHub çŠ¶æ€@ GitHub çŠ¶æ€![twitter logo](../Images/65e26e35707d96169ec8af6b3cbf2003.png)æˆ‘ä»¬ç»§ç»­ä¸º[GitHub.com](https://t.co/IEoI8IWMw9)ä¿®å¤æ•°æ®å­˜å‚¨ç³»ç»Ÿçš„å·¥ä½œã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæ‚¨å¯èƒ½ä¼šçœ‹åˆ°ä¸ä¸€è‡´çš„ç»“æœã€‚2018 å¹´ 10 æœˆ 22 æ—¥ä¸Šåˆ 02:01[![Twitter reply action](../Images/5d5a32424597af8488f7190c7d7d496b.png)](https://twitter.com/intent/tweet?in_reply_to=1054191038267564032)[![Twitter retweet action](../Images/3d12d4a909b79beaf8d81b6491fd052d.png)](https://twitter.com/intent/retweet?tweet_id=1054191038267564032)[![Twitter like action](../Images/3f89df2f36e8e5624d2a25952b3ac8b8.png)](https://twitter.com/intent/like?tweet_id=1054191038267564032)

> ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ä¾‹å¤–æ˜¯åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿï¼Œå¦‚ [hazelcast](https://hazelcast.com/) :å®ƒå°†é‡‡ç”¨å…·æœ‰â€œæœ€æ–°â€æ—¶é—´æˆ³çš„æ•°æ®æ–¹æ³•æ¥è§£å†³è£‚è„‘é—®é¢˜ã€‚
> 
> åœ¨ç¼“å­˜ç”¨ä¾‹ä¸­ï¼Œè¿™å¯èƒ½æ˜¯â€œå¥½çš„â€,å¹¶ä¸”æ˜¯æœ‰æ„è¿™æ ·åšçš„ï¼Œä½†æ˜¯å¯¹äºæ›´æŒä¹…çš„å­˜å‚¨ç³»ç»Ÿæ¥è¯´ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå› ä¸ºå®ƒå°†å¯¼è‡´æ•°æ®è¢«ä¸¢å¼ƒã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™ç§æƒ…å†µéœ€è¦ç”±ç¨‹åºå‘˜æˆ–ç³»ç»Ÿç®¡ç†å‘˜åšå‡ºç‰¹å®šäºä¸Šä¸‹æ–‡çš„å†³å®šæ¥è§£å†³ã€‚

# é‚£å¤ªå¤šäº†â€”â€”é‚£ä¹ˆæˆ‘è¯¥å¦‚ä½•ä½¿ç”¨å…¶ä¸­çš„ä¸€ä¸ªå‘¢ï¼Ÿ

**ä½ å¯èƒ½å·²ç»æ˜¯äº†**

å¦‚ä»Šï¼Œå¤§å¤šæ•°å…¥é—¨çº§çš„ AWS(T1)æˆ– T2 GCP(T3)ä½¿ç”¨æŸç§å½¢å¼çš„ç¡¬ç›˜â€œå—å­˜å‚¨â€åç«¯ï¼Œè¿™æ˜¯ä¸€ç§åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿã€‚

æ›´è‘—åçš„æ˜¯å¯¹è±¡å­˜å‚¨ï¼Œæ¯”å¦‚ S3 æœ¬èº«å’Œå‡ ä¹æ‰€æœ‰çš„äº‘å­˜å‚¨ã€‚å³ä½¿å¯¹äºä¸“ç”¨æœåŠ¡å™¨ï¼Œå¤§å¤šæ•°å¤‡ä»½ç³»ç»Ÿï¼Œå¦‚ç”± [linode](https://www.linode.com/backups) å’Œ [digital ocean](https://www.digitalocean.com/products/spaces/) æä¾›çš„å¤‡ä»½ç³»ç»Ÿï¼Œä¹Ÿä½¿ç”¨æŸç§å½¢å¼çš„åˆ†å¸ƒå¼å­˜å‚¨ã€‚

é™¤äº†äº‘æœåŠ¡ï¼Œè¿˜æœ‰è®¸å¤šä½¿ç”¨åˆ†å¸ƒå¼å­˜å‚¨çš„å¼€æºéƒ¨ç½²ã€‚å‡ ä¹æ‰€æœ‰çš„ NoSQL æ•°æ®åº“ï¼Œç”šè‡³ kubernetes æœ¬èº«ï¼Œå› ä¸ºå®ƒéƒ¨ç½²äº† [ETCD åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨](https://github.com/etcd-io/etcd)ã€‚

éšåé’ˆå¯¹å€¼å¾—æ³¨æ„çš„å…·ä½“åº”ç”¨ï¼Œæœ‰[èŸ‘è‚ DB (SQL)](https://github.com/cockroachdb/cockroach) ï¼Œ [GlusterFS(æ–‡ä»¶å­˜å‚¨)](https://docs.gluster.org/en/latest/)ï¼Œ [Elasticsearch (NoSQL)](https://www.elastic.co/) ï¼Œ [Hadoop(å¤§æ•°æ®)](https://hadoop.apache.org/)ã€‚ç”šè‡³ mysql ä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨è¿™æ ·çš„è®¾ç½®ä¸­ï¼Œç§°ä¸º[ç»„å¤åˆ¶](https://dev.mysql.com/doc/refman/8.0/en/group-replication.html)ã€‚æˆ–è€…å¯é€‰åœ°é€šè¿‡ [galera](http://galeracluster.com/products/) ã€‚

ä½¿ç”¨è¿™ç§åˆ†å¸ƒå¼ç³»ç»Ÿè€Œä¸å»æƒ³å®ƒçš„èƒ½åŠ›ï¼Œæœ€ç»ˆæ˜¯ä½ ä¸ºâ€œäº‘ç¨â€æ‰€æ”¯ä»˜çš„â€”â€”ä¸ºåœ¨å¹•åä¸ºä½ è§£å†³è¿™äº›é—®é¢˜çš„äººã€‚

<figure>

[![Cloud is not magic](../Images/c318c3f27801ed82af0e4a9f7afd4a10.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--KNSnQ0RP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/jx1k9a8nd5ax8euizvbc.jpg)

<figcaption>Cloud is not magic, someone actually needs to keep it working</figcaption>

</figure>

# [](#so-should-i-be-angry-when-github-or-a-cloud-provider-is-down)é‚£ä¹ˆå½“ github æˆ–è€…æŸä¸ªäº‘æä¾›å•†å®•æœºäº†ï¼Œæˆ‘åº”è¯¥ç”Ÿæ°”å—ï¼Ÿ

ä¿æŒå†·é™å’Œ#hugops -ç»™ä»–ä»¬æ—¶é—´ï¼Œä»–ä»¬å¯èƒ½å·²ç»å°½åŠ›äº†ã€‚å³ä½¿æ˜¯æœ€ä¼˜ç§€çš„äººä¹Ÿä¼šçŠ¯åŒæ ·çš„é”™è¯¯ã€‚

**ç‰¹åˆ«æ„Ÿè°¢:**æ„Ÿè°¢ [@feliciahsieh](https://github.com/feliciahsieh) å¸®æˆ‘æ ¡å¯¹å¹¶ä¿®æ­£æˆ‘æ‰€æœ‰ç³Ÿç³•çš„é€—å·å’Œè¯­æ³•ã€‚

* * *

# [](#about-uilicious)å…³äº Uilicious

Uilicious æ˜¯ä¸€ä¸ªç®€å•è€Œå¥å£®çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨äºè‡ªåŠ¨åŒ– web åº”ç”¨ç¨‹åºçš„ UI æµ‹è¯•ã€‚[æ³¨å†Œæˆ‘ä»¬çš„å…è´¹è¯•ç”¨](https://uilicious.com/pricing.html)å¹¶ç¼–å†™æµ‹è¯•è„šæœ¬æ¥éªŒè¯æ‚¨çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå°±åƒä¸‹é¢çš„è„šæœ¬ä¸€æ ·ç®€å•ã€‚