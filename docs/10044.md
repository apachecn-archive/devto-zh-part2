# IAsyncEnumerable <t>-ç®€ä»‹</t>

> åŸæ–‡:[https://dev.to/stuartblang/iasyncenumerablet-å®‰-ç®€ä»‹-g99](https://dev.to/stuartblang/iasyncenumerablet---an-introduction-g99)

### é—®é¢˜

```
public async Task<IEnumerable<User>> GetUsers()
{
    var allResults = new List<User>();
    var nextUrl = "https://account.zendesk.com/api/v2/users.json";
    while (nextUrl != null)
    {
        var page = await _client.GetAsync(nextUrl)
                            .Content.ReadAsAsync<UsersListResponse>();
        allResults.AddRange(page.Users);
        nextUrl = page.NextPage;
        // eg "https://account.zendesk.com/api/v2/users.json?page=2"
    }
    return allResults;
} 
```

çœ‹ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼Œæ‚¨è‡ªå·±å¯èƒ½ä¹Ÿé‡åˆ°è¿‡è¿™ä¸ªç†Ÿæ‚‰çš„é—®é¢˜ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨æˆ‘ä»¬çš„ç±»å‹ä¸­è¡¨ç¤ºè¿™ä¸ª HTTP API çš„å¯åˆ†é¡µç»“æœï¼ŒåŒæ—¶ä»ç„¶æ˜¯å¼‚æ­¥çš„ã€‚

ä¼ ç»Ÿä¸Šï¼Œæœ‰ 4 ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼›

1.  ç”¨`.Result` / `.GetAwaiter().GetResult()`æˆ–`.Wait()`é˜»å¡å¼‚æ­¥ä»£ç ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚
2.  ä¸Šé¢çš„æ–¹æ³•ç­‰å¾…æ¯ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œä½†æ€¥åˆ‡åœ°å®Œæˆæ‰€æœ‰ä»»åŠ¡ï¼Œå¹¶åœ¨ä¸€ä¸ªç‰©åŒ–çš„é›†åˆä¸­è¿”å›å®Œæ•´çš„ç»“æœã€‚è¿™è¿èƒŒäº†è¿™ä¸ªåˆ†é¡µ API çš„ç›®çš„ï¼Œæ›´æ™®éçš„æ˜¯ï¼Œæˆ‘ä»¬å¤±å»äº†æˆ‘ä»¬è¯•å›¾å»ºæ¨¡çš„é—®é¢˜çš„æƒ°æ€§ã€‚
3.  æˆ‘ä»¬å°†è¿”å›ç±»å‹ç¿»è½¬ä¸º`IEnumerable<Task<User>>`ã€‚è¿™å°†è¦æ±‚æˆ‘ä»¬ç›¸ä¿¡è¯¥ä»£ç çš„ä»»ä½•æ¶ˆè´¹è€…åœ¨æ¯æ¬¡æšä¸¾åéƒ½ä¼šç­‰å¾…æ¯ä¸ªä»»åŠ¡çš„ç»“æœã€‚æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶å¼ºåˆ¶å®ç°è¿™ä¸€ç‚¹ï¼Œå¦‚æœæ²¡æœ‰æ­£ç¡®ä½¿ç”¨å®ƒï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯ï¼Œè¿™æœ€ç»ˆæ˜¯ä¸€ä¸ªè¯¯å¯¼æ€§çš„ç±»å‹ï¼Œå¹¶ä¸”è¯¥ç±»å‹çš„å½¢çŠ¶æ²¡æœ‰ä¼ è¾¾å…¶éšè—çš„çº¦æŸã€‚
4.  æˆ‘ä»¬ä¸å°è¯•è¿”å›ä¸€ä¸ªå•ä¸€çš„ç±»å‹ï¼Œæ¯”å¦‚`Task<IEnumerable<T>>`ï¼Œè€Œæ˜¯è‡ªå·±å»ºæ¨¡ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä½†æ˜¯æˆ‘ä»¬å¤±å»äº†ä¸ç†Ÿæ‚‰çš„ç±»å‹ä¸€èµ·å·¥ä½œçš„å¥½å¤„ã€‚

å¥½å§ï¼Œæ˜¯æ—¶å€™æˆ‘ä»¬é‡‡ç”¨ä¸€ç§æ–°çš„ç±»å‹æ¥ç»“æŸè¿™ç§ç–¯ç‹‚äº†ã€‚è¿™å°±æ˜¯`IAsyncEnumerable<T>`çš„ä½œç”¨ã€‚

### å…³äº Ixã€‚å¼‚æ­¥ËŒéåŒæ­¥(asynchronous)

ç›®å‰`IAsyncEnumerable<T>`æ˜¯ä¸€ä¸ªå­˜åœ¨äºå°‘æ•°åœ°æ–¹çš„æ¦‚å¿µï¼Œæ²¡æœ‰å•ä¸€çš„å®šä¹‰ã€‚æˆ‘ä»Šå¤©å°†ä½¿ç”¨çš„ç‰ˆæœ¬å­˜åœ¨äº[ååº”å¼æ‰©å±•å›è´­](https://github.com/dotnet/reactive)ä¸­ï¼Œåœ¨[ä¸€ä¸ªåŸºäº](https://github.com/dotnet/reactive/tree/IxAsyncCSharp8/Ix.NET/Source)[æœ€æ–° C# 8.0 ææ¡ˆ](https://github.com/dotnet/csharplang/blob/9d86668fcd915e1d3ef7634551d52e4d22c0631a/proposals/async-streams.md)çš„åˆ†å‰ä¸­ã€‚

Reactive Extensions (Rx)æ˜¯ Observable å®ç°å’Œæ‰©å±•çš„å®¶å›­ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªåä¸º Interactive Extensions(ç®€ç§° Ix)çš„å…„å¼Ÿé¡¹ç›®çš„å®¶å›­ã€‚Rx æœ‰å¾ˆå¤šæ‰©å±•å’Œå·¥å…·æ¥ç»„æˆåŸºäºæ¨çš„åºåˆ—ï¼ŒIx éå¸¸ç±»ä¼¼ï¼Œä½†ç”¨äºåŸºäºæ‹‰çš„åºåˆ—(`IEnumerable<T>`)ã€‚è¿™ç¯‡æ–‡ç« ä¸­æˆ‘æ„Ÿå…´è¶£çš„éƒ¨åˆ†æ˜¯å¼‚æ­¥éƒ¨åˆ†ï¼Œæˆ‘ç§°ä¹‹ä¸º Ixã€‚Asyncï¼Œè¿™æ˜¯åœ¨å®ƒè‡ªå·±çš„ nuget åŒ…ä¸­æä¾›çš„ï¼Œæˆ‘é€šå¸¸ä¼šå¼•ç”¨è¿™é‡Œçš„`IAsyncEnumerable<T>`å®šä¹‰(å°½ç®¡è¿™å°†æ˜ å°„åˆ°å…¶ä»–å®ç°)ã€‚

åœ¨ä¸ä¹…çš„å°†æ¥ï¼ŒC# 8.0 å°†å¼•å…¥å¼‚æ­¥æµ(æˆ‘æ›´å–œæ¬¢æœ¯è¯­åºåˆ—ï¼Œå› ä¸º`Stream`å·²ç»æ˜¯ä¸€ä¸ªä¸åŒçš„ã€‚NET concept)ä½œä¸ºä¸€ä¸ªè¯­è¨€ç‰¹æ€§ï¼Œå¹¶ä¸”å°†ä¼šæœ‰ä¸€ä¸ªæ–°çš„`IAsyncEnumerable<T>`å®šä¹‰ï¼Œä½†æ˜¯è¿™å¹¶ä¸èƒ½é˜»æ­¢æˆ‘ä»¬ä½¿ç”¨ Ixã€‚Async ä»Šå¤©ï¼Œè¦ä¹ˆä½¿ç”¨ä¸ C# 8.0 ææ¡ˆç•¥æœ‰ä¸åŒçš„å½“å‰å®šä¹‰ï¼Œè¦ä¹ˆä½¿ç”¨ã€‚

### å®šä¹‰

```
public interface IAsyncEnumerable<out T>
{
    IAsyncEnumerator<T> GetAsyncEnumerator();
}

public interface IAsyncEnumerator<out T> : IAsyncDisposable
{
    T Current { get; }
    ValueTask<bool> MoveNextAsync();
}

public interface IAsyncDisposable
{
    ValueTask DisposeAsync();
} 
```

è¿™æ˜¯ C# 8.0 ææ¡ˆä¸­å¯¹`IAsyncEnumerable<T>`çš„å®šä¹‰ï¼Œçœ‹èµ·æ¥åº”è¯¥å¾ˆç†Ÿæ‚‰ï¼Œæ­£å¦‚ä½ æ‰€æ–™ï¼Œå®ƒåªæ˜¯å¸¦æœ‰å¼‚æ­¥`MoveNext`æ–¹æ³•çš„`IEnumerable<T>`ã€‚

[![async-enum12](../Images/eb6032176ac95f848f1227e5a9464f52.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--gm1ko14N--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://stu.dev/content/images/2018/06/async-enum12.png) 

æˆ‘ä»¬ç°åœ¨å¯ä»¥çœ‹åˆ°ä¸`IObservable<T>`å’Œ`IEnumerable<T>`çš„å…³ç³»ã€‚

åœ¨è¿™ä¸ªç†Ÿæ‚‰çš„å®¶æ—ä¸­ï¼Œæ„å‘³ç€æˆ‘ä»¬ä¸å¿…å­¦ä¹ æ–°çš„æ¦‚å¿µæ¥å¼€å§‹æ¶ˆè´¹å’Œç»„åˆè¿™ç§ç±»å‹çš„æ“ä½œã€‚

```
IAsyncEnumerable<Bar> ConvertGoodFoosToBars(IAsyncEnumerable<Foo> items)
{
    return items
        .Where(foo => foo.IsGood)
        .Select(foo => Bar.FromFoo(foo));
} 
```

è¿™äº›æ‰©å±•æ–¹æ³•å¯¹æˆ‘ä»¬æ¥è¯´å¾ˆå®¹æ˜“ç†è§£ï¼Œå¹¶ä¸”åœ¨ C#ä¸­å·²ç»æ— å¤„ä¸åœ¨ã€‚

### ç”Ÿäº§åºåˆ—

å¦‚æœæˆ‘ä»¬ä¸èƒ½ç”Ÿæˆå¯ä¾›æ¶ˆè´¹çš„åºåˆ—ï¼Œæ‰€æœ‰è¿™äº›éƒ½å°†æ˜¯éå¸¸å­¦æœ¯çš„ã€‚ä»Šå¤©æœ‰å‡ ä¸ªé€‰æ‹©ã€‚

#### 1ã€‚ç›´æ¥å®ç°`IAsyncEnumerable<T>`å’Œ`IAsyncEnumerator<T>`æ¥å£

æ‚¨å¯ä»¥è¿™æ ·åšï¼Œå¯¹äºæ€§èƒ½å…³é”®çš„ä»£ç ï¼Œè¿™å¯èƒ½æ˜¯æœ€åˆé€‚çš„æ–¹æ³•ã€‚

ç„¶è€Œï¼Œå®ƒç¡®å®éœ€è¦ç›¸å½“å¤šçš„æ ·æ¿ä»£ç ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¸€ä¸ªèµ·ç‚¹:

```
// A starting point for your own IAsyncEnumerable extensions
public static class AsyncEnumerableExtensions
{
    public static IAsyncEnumerable<T> MyExtensionMethod<T>(this IAsyncEnumerable<T> source)
    {
        return new MyAsyncEnumerable<T>(source);
    }

    public struct MyAsyncEnumerable<T> : IAsyncEnumerable<T>
    {
        readonly IAsyncEnumerable<T> enumerable;

        internal MyAsyncEnumerable(IAsyncEnumerable<T> enumerable)
        {
            this.enumerable = enumerable;
        }

        public IAsyncEnumerator<T> GetAsyncEnumerator()
        {
            return new MyAsyncEnumerator(enumerable.GetAsyncEnumerator());
        }

        public struct MyAsyncEnumerator : IAsyncEnumerator<T>
        {
            readonly IAsyncEnumerator<T> enumerator;

            internal MyAsyncEnumerator(IAsyncEnumerator<T> enumerator)
            {
                this.enumerator = enumerator;
            }

            public ValueTask DisposeAsync()
            {
                return enumerator.DisposeAsync();
            }

            public T Current => enumerator.Current;

            public ValueTask<bool> MoveNextAsync()
            {
                return enumerator.MoveNextAsync();
            }
        }
    }
} 
```

#### 2ã€‚åœ¨ Ix.NET ä¸­ä½¿ç”¨é™æ€å¸®åŠ©å™¨æ–¹æ³•

```
IAsyncEnumerable<int> GenerateWithIx()
{
    return AsyncEnumerable.CreateEnumerable( 
        () =>
        {
            var current = 0;

            async Task<bool> f(CancellationToken ct)
            {
                await Task. Delay(TimeSpan.FromSeconds(0.5));
                current++; 
                return true; 
            } 

            return AsyncEnumerable.CreateEnumerator( 
                moveNext: f,
                current: () => current,
                dispose: () => { } 
            );
        });
} 
```

#### 3ã€‚ç”¨ c é›ªæ¾ã€‚AsyncEnumerableExtensions

æˆ‘æœ¬æ¥æƒ³è‡ªå·±å»ºä¸€ä¸ªè¿™æ ·çš„ä¸œè¥¿ï¼Œç„¶å[æˆ‘å‘ç°äº†è¿™ä¸ªåº“](https://github.com/CXuesong/AsyncEnumerableExtensions)ï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦ï¼[é™ˆ](https://github.com/CXuesong)çš„åŠŸåŠ³ï¼Œè¿™æ˜¯ä¸€åº§äº†ä¸èµ·çš„å›¾ä¹¦é¦†ã€‚

```
// using CXuesong.AsyncEnumerableExtensions 
async Task Generator(IAsyncEnumerableSink<int> sink)
{
    var i = 1;
    while (true)
    {
        await Task.Delay(TimeSpan.FromSeconds(0.5));
        await sink.YieldAndWait(i++);
    }
}

AsyncEnumerableFactory.FromAsyncGenerator<int>(Generator) 
```

è¿™ä¸ªåº“æä¾›äº†ä¸€ä¸ªéå¸¸å¥½å’Œç®€å•çš„æ–¹æ³•æ¥è¡¨è¾¾åºåˆ—ã€‚æ‚¨æ„å»ºäº†ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª`IAsyncEnumberableSink<T>`(ç”±åº“å®šä¹‰)å¹¶è¿”å›ä¸€ä¸ª`Task`ã€‚ç°åœ¨ä½ å¯ä»¥åšä½ çš„ç­‰å¾…ï¼Œä½†æ˜¯å½“ä½ æƒ³è®©ä¸€ä¸ªé¡¹ç›®è¿›å…¥åºåˆ—æ—¶ï¼Œä½ è°ƒç”¨`sink.YieldAndWait(value)`ï¼Œå…¶ä¸­`sink`æ˜¯é‚£ä¸ªå‚æ•°ã€‚

#### 4ã€‚å³å°†åœ¨æ‚¨èº«è¾¹æ¨å‡º C# 8.0

ä»Šå¤©ï¼Œä½ ä¸èƒ½åŒæ—¶ä½¿ç”¨`async`å…³é”®å­—å’Œè¿­ä»£å™¨æ–¹æ³•ï¼Œæ‰€ä»¥æ‹¥æœ‰ä¸€ä¸ªå¼‚æ­¥è¿­ä»£å™¨æ–¹æ³•éœ€è¦ä¸€ä¸ªæ–°çš„è¯­è¨€ç‰¹æ€§ã€‚å—¯ï¼Œå¥½æ¶ˆæ¯ï¼Œå®ƒæ­£åœ¨å·¥ä½œä¸­ï¼Œ[å…ˆç¹ä¸ºå¿«](https://github.com/dotnet/csharplang/blob/master/proposals/async-streams.md)ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªç‰‡æ®µå±•ç¤ºäº†å®ƒå¯èƒ½çš„æ ·å­ã€‚

```
static async IAsyncEnumerable<int> Mylterator()
{
    try
    {
        for (int i = 0; i < 100; i++)
        {
            await Task.Delay(1000);
            yield return i;
        }
    }
    finally
    {
        await Task.Delay(200); 
        Console.WriteLine("finally");
    }
} 
```

### æ¶ˆè€—æ’åº

æˆ‘ä»¬å¯ä»¥äº§ç”Ÿåºåˆ—ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸èƒ½æ¶ˆè´¹å®ƒä»¬ï¼Œé‚£å¯¹æˆ‘ä»¬æ¥è¯´å°±æ²¡ä»€ä¹ˆç”¨äº†ã€‚

#### 1ã€‚ForEachAsync

å°±åƒ`List<T>`ä¸Šçš„`.ForEach(...)`æ‰©å±•æ–¹æ³•ä¸€æ ·ï¼Œæˆ‘ä»¬æœ‰æ¥è‡ª Ix çš„`.ForEachAsync(...)`ã€‚å¼‚æ­¥ï¼Œè¿™è®©æˆ‘ä»¬åœ¨æ¯ä¸ªé¡¹ç›®ä¸Šå·¥ä½œï¼Œå¹¶ç»™æˆ‘ä»¬ä¸€ä¸ª`Task`æ¥ç­‰å¾…é©±åŠ¨æ•´ä¸ªåŸºäºæ‹‰åŠ¨çš„å·¥ä½œé“¾ã€‚

```
await seq.ForEachAsync(x => Console.WriteLine(x)); 
```

ä¸å¹¸çš„æ˜¯ï¼Œæ•™æ¡ä¸»ä¹‰åœ¨è¿™é‡Œå¤±è´¥äº†ï¼Œ`ForEachAsync`ä»¥`Async`ä¸ºåç¼€ï¼Œå› ä¸ºå®ƒè¿”å›ä¸€ä¸ª`Task`å¹¶å¼‚æ­¥æ“ä½œï¼Œç„¶è€Œï¼Œå®ƒæ¥å—çš„å§”æ‰˜æ˜¯åŒæ­¥çš„ï¼Œè¿™ä½¿æˆ‘æ„å»ºäº†ä¸€ä¸ªå¯ä»¥æ¥å—å¼‚æ­¥å§”æ‰˜å¹¶å°†å…¶å‘½åä¸º`ForEachAsyncButActuallyAsync`çš„æ–¹æ³•ã€‚ğŸ¤¦

```
await seq.ForEachAsyncButActuallyAsync(x => Console.WriteLine(x)); 
```

#### 2ã€‚C# 8.0 foreach

åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå³å°†æ¨å‡ºè¯­è¨€æ”¯æŒã€‚ä¸‹é¢æ˜¯å®ƒçš„æ ·å­:

```
var asyncSequence = GetMyAsyncSequence(cancellationToken: ct);
await foreach (var item in asyncSequence)
{
    ...
} 
```

### è®¾è®¡å†³ç­–

ä¸€ä¸ªé—®é¢˜æ„å‘³ç€æˆ‘ä»¬ä¸å¾—ä¸ç­‰å¾…è¿™ä¹ˆé•¿æ—¶é—´çš„ç¬¬ä¸€ç±»`IAsyncEnumberable<T>`å’Œè¯­è¨€ç‰¹æ€§æ˜¯å› ä¸ºæœ‰è®¸å¤šè®¾è®¡å†³ç­–éœ€è¦å›ç­”ï¼Œä¾‹å¦‚ï¼›

*   `IAsyncEnumerator<T>`å®ç°äº†`IDisposable`è¿˜æ˜¯ä¸€ä¸ªæ–°çš„å¼‚æ­¥ç‰ˆæœ¬(`IAsyncDisposable`)ï¼Ÿ**æ›´æ–°** `IAsyncDisposable`æ­£æ˜¯ï¼
*   å¦‚æœæœ‰ä¸€ä¸ª`IAsyncDisposable`ï¼Œè¯­è¨€åº”è¯¥æ”¯æŒå®ƒçš„`using`è¯­æ³•å—ï¼Ÿ
*   `CancellationToken`æ˜¯æ¯æ¬¡ç§»åŠ¨éƒ½ä¼ åˆ°`MoveNext`è¿˜æ˜¯ä¸€æ¬¡ä¼ åˆ°`GetEnumerator`ï¼Ÿ **Update** `CancellationToken`ä¸ä¼šè¢«è¯­æ³•å¤„ç†ï¼Œæ‰€ä»¥ä½ åº”è¯¥è‡ªå·±æŠŠå®ƒè½¬æ¢æˆ`IAsyncEnumerable<T>`ç±»å‹ã€‚
*   åº”è¯¥æ˜¯`MoveNext`ï¼Œè¿˜æ˜¯`MoveNextAsync`ï¼Ÿ**æ›´æ–°** `MoveNextAsync`èƒœäº†ï¼
*   `MoveNextAsync`åº”è¯¥å›ä¸€ä¸ª`Task<bool>`è¿˜æ˜¯ä¸€ä¸ª`ValueTask<bool>`ï¼Ÿ**æ›´æ–°** `ValueTask<bool>`æœ‰äº†ï¼
*   åœ¨ foreach è¯­æ³•ä¸­ï¼Œ`await`ä¿®é¥°ç¬¦åœ¨å“ªé‡Œï¼Ÿåœ¨æ‹¬å·å¤–ï¼Ÿ(æ˜¯çš„ï¼Œå½“ç„¶ï¼Œä½ æŠŠæˆ‘å½“æˆä»€ä¹ˆæ€ªç‰©äº†ï¼Ÿ)
*   åœ¨ foreach è¯­æ³•ä¸­ï¼Œå¦‚ä½•åš`.ConfigureAwait(false)`çš„ç­‰ä»·æ“ä½œï¼Ÿ**æ›´æ–°** [åƒè¿™æ ·](https://github.com/dotnet/corefx/issues/32684#issue-367616580)ã€‚
*   foreach è¯­æ³•ä¼šå¯»æ‰¾ç±»å‹è¿˜æ˜¯æ¨¡å¼ï¼Ÿ`await`ä¸ä»…ä»…é€‚ç”¨äº`Task`æ¯”å¦‚ã€‚

è¿™åªæ˜¯ä½ è„‘æµ·ä¸­ç«‹å³æµ®ç°çš„ä¸œè¥¿ï¼Œä½ æƒ³å¾—è¶Šå¤šï¼Œä½ å‘ç°çš„å°±è¶Šå¤šã€‚

### ä»Šå¤©è°åœ¨ç”¨ï¼Ÿ

ç›®å‰æœ‰å‡ ä¸ªå¤§å‹é¡¹ç›®åœ¨ä½¿ç”¨è¿™ç§æ–¹æ³•:

*   å®ä½“æ¡†æ¶æ ¸å¿ƒâ€”â€”ç›®å‰ä½¿ç”¨å†…éƒ¨å®šä¹‰ï¼Œä½†æ˜¯[æœ‰ä¼ è¨€è¯´](https://github.com/aspnet/EntityFrameworkCore/issues/11866#issuecomment-385753917)è®¡åˆ’ä½¿ç”¨ C# 8 ä¸­çš„ä»»ä½•ä¸œè¥¿ã€‚
*   è°·æ­Œäº‘å¹³å°åº“â€”â€”è¿™ä¸ªå¯¹æˆ‘æ¥è¯´æœ‰ç‚¹æ„å¤–ã€‚å¦‚æœä½ å®‰è£…ä»»ä½•è°·æ­Œäº‘åŒ…ï¼Œå®ƒå°†å¼•ç”¨ä»–ä»¬çš„æ ¸å¿ƒåŒ…ï¼Œä½¿ç”¨å¹¶å¼•ç”¨ Ix.Asyncã€‚æ„å»ºè¿™ä¸ªåŒ…çš„å›¢é˜Ÿæˆå‘˜ä¹‹ä¸€æ˜¯ Jon Skeetï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªç›¸å½“å¤§çš„è®¤å¯ï¼

è¯·ç»§ç»­å…³æ³¨ï¼Œå…³äºè¿™ä¸ªè¯é¢˜è¿˜æœ‰æ›´å¤šå†…å®¹ã€‚