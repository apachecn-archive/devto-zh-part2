# JavaScript ä¸­çš„å®æ—¶å›¾è¡¨ä¸ ChartJS å’Œ Hamoni åŒæ­¥

> åŸæ–‡:[https://dev . to/pmbanugo/real-time-chart-in-JavaScript-with-chart js-and-hamoni-sync-1 nkb](https://dev.to/pmbanugo/real-time-chart-in-javascript-with-chartjs-and-hamoni-sync-1nkb)

å®æ—¶æ•°æ®æ˜¯åœ¨è·å–æ—¶æ˜¾ç¤ºçš„æ•°æ®ã€‚å®ƒé€šå¸¸ç”¨äºè·Ÿè¸ªæˆ–ç›‘æ§ç³»ç»Ÿï¼Œå¦‚äº¤é€š GPS ç³»ç»Ÿã€æ‹å–/æŠ•æ ‡åº”ç”¨å’Œè‚¡ç¥¨äº¤æ˜“åº”ç”¨ã€‚å›¾è¡¨æœ‰åŠ©äºæ•°æ®çš„å›¾å½¢åŒ–è¡¨ç¤ºï¼Œå¹¶å¸®åŠ©æŸ¥çœ‹è€…è½»æ¾åšå‡ºå†³å®šã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å‘ä½ å±•ç¤ºå¦‚ä½•ç”¨ JavaScript åˆ¶ä½œå®æ—¶å›¾è¡¨ã€‚æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªåŸºæœ¬çš„æŠ•ç¥¨ web åº”ç”¨ç¨‹åºï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæŠ•ç¥¨é¡µé¢ï¼Œå¦ä¸€ä¸ªé¡µé¢åŒ…å«ä¸€ä¸ªæ˜¾ç¤ºæŠ•ç¥¨ç»“æœçš„å®æ—¶å›¾è¡¨ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªçª¥è§†æˆ‘ä»¬å°†å»ºç«‹ä»€ä¹ˆ

[![](../Images/2076366e6aaef85c470ec25cb32b7a41.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--zHwHWzNh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://d2mxuefqeaa7sj.cloudfront.net/s_271D2C4415082D830A5E129B885A0502958EA9373BF02DC765D6BC3010DA0C13_1523603994116_hamoni-chartjs.gif)

æˆ‘å°†ä½¿ç”¨ [Chart.js](http://www.chartjs.org/) å’Œ [Hamoni Sync](https://www.hamoni.tech/) æ¥æ„å»ºå®ƒã€‚js æ˜¯ä¸€ä¸ªç®€å•çš„ JavaScript å›¾è¡¨åº“ã€‚Hamoni Sync æ˜¯ä¸€ä¸ªå®æ—¶çŠ¶æ€åŒæ­¥æœåŠ¡ï¼Œä½¿æ‚¨èƒ½å¤Ÿå®æ—¶åŒæ­¥æ‚¨çš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚æŠ•ç¥¨ç»“æœæ˜¯æˆ‘ä»¬å¸Œæœ›å®æ—¶æ˜¾ç¤ºç»™ç”¨æˆ·çš„çŠ¶æ€ã€‚Hamoni Sync å…è®¸æ‚¨å®šä¹‰åº”ç”¨ç¨‹åºçš„çŠ¶æ€ï¼ŒåŒæ—¶é¿å…å›´ç»•å‘å¸ƒ/è®¢é˜…ç³»ç»Ÿè®¾è®¡å¤æ‚çš„çŠ¶æ€é€»è¾‘ï¼Œä»è€Œä½¿è¿™ä¸€ç‚¹å˜å¾—æ›´åŠ å®¹æ˜“ã€‚

# [](#setup-the-code)è®¾ç½®ä»£ç 

æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªé¡¹ç›®æ¨¡æ¿ï¼Œå…¶ä¸­å·²ç»æœ‰ HTML é¡µé¢å’ŒèŠ‚ç‚¹åº”ç”¨ç¨‹åºæ¥æä¾›é™æ€æ–‡ä»¶ã€‚æŒ‰ç…§ä¸‹é¢çš„è¯´æ˜è¿›è¡Œè®¾ç½®

1.  é€šè¿‡åœ¨å‘½ä»¤è¡Œè¿è¡Œ`git clone https://github.com/pmbanugo/realtime-chartjs-hamoni-starter.git`ä» GitHub å…‹éš† repoã€‚å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ gitï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½å®ƒã€‚
2.  åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•`cd realtime-chartjs-hamoni-starter`
3.  é€šè¿‡è¿è¡Œ`npm install`å®‰è£…ä¾èµ–é¡¹ã€‚è¿™å°†å®‰è£…[å¿«é€Ÿ](https://expressjs.com/)å’Œå“ˆè«å°¼åŒæ­¥èŠ‚ç‚¹æ¨¡å—ã€‚#åç«¯

**server.js** æ–‡ä»¶åŒ…å«åœ¨ **public** æ–‡ä»¶å¤¹ä¸­æœåŠ¡ HTML é¡µé¢çš„ä»£ç ã€‚ç¬¬ 9 - 14 è¡Œå®šä¹‰äº†æŠ•ç¥¨åº”ç”¨ç¨‹åºçš„é»˜è®¤çŠ¶æ€ã€‚å®ƒåŒ…å« 4 åå€™é€‰äººï¼Œä»–ä»¬çš„ç¥¨æ•°ä¸º 0ã€‚

```
 let voteData = [
      { candidate: "Peter Mbanugo", vote: 0 },
      { candidate: "Angela Daniels", vote: 0 },
      { candidate: "Rose Philly", vote: 0 },
      { candidate: "James Crump", vote: 0 }
    ]; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®ƒè¿˜ä¸ºæŠ•ç¥¨å®šä¹‰äº†ä¸€ä¸ª REST ç«¯ç‚¹ï¼Œä»ç¬¬ 18 è¡Œåˆ°ç¬¬ 30 è¡Œå®šä¹‰ã€‚å½“æ”¶åˆ°æŠ•ç¥¨æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œç„¶åç”¨æœ€æ–°çš„æŠ•ç¥¨ç»“æœæ›´æ–°å›¾è¡¨ã€‚å›¾è¡¨çŠ¶æ€å°†ä½¿ç”¨ Hamoni Sync å®æ—¶ä¼ è¾¾ã€‚åœ¨ç¬¬ 40 è¡Œï¼Œæˆ‘å£°æ˜äº†ä¸€ä¸ªåˆå§‹åŒ– Hamoni çš„è¯­å¥ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¸æˆ· ID å’Œåº”ç”¨ç¨‹åº IDã€‚

## [](#create-hamoni-account-and-app)åˆ›å»ºå“ˆè«å°¼è´¦å·å’Œ App

ç™»å½•å“ˆè«å°¼[ä»ªè¡¨ç›˜](https://dashboard.hamoni.tech/)(å¦‚æœä½ è¿˜æ²¡æœ‰è´¦æˆ·ï¼Œä¹Ÿå¯ä»¥æ³¨å†Œ)ã€‚ç™»å½•åï¼Œæ‚¨å¯ä»¥ç‚¹å‡»`Show Account ID`æŒ‰é’®æŸ¥çœ‹æ‚¨çš„å¸æˆ· IDã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ª Hamoni åº”ç”¨ç¨‹åº IDï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä»ä»ªè¡¨æ¿åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªå¯ä»¥ä¿å­˜åº”ç”¨ç¨‹åºçŠ¶æ€çš„å®¹å™¨ã€‚æ‚¨é€šå¸¸å¸Œæœ›ä¸ºæ‚¨çš„æ¯ä¸ªåº”ç”¨ç¨‹åºå®‰è£…ä¸€ä¸ªå•ç‹¬çš„ Hamoni åº”ç”¨ç¨‹åºã€‚

åœ¨â€œåˆ›å»ºåº”ç”¨ç¨‹åºâ€æ ‡é¢˜ä¸‹ï¼Œè¾“å…¥åº”ç”¨ç¨‹åºåç§°ï¼Œç„¶åå•å‡»â€œåˆ›å»ºâ€æŒ‰é’®ã€‚å‡ ç§’é’Ÿä¹‹å†…ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°å®ƒè¢«åˆ›å»ºå¹¶æ˜¾ç¤ºåœ¨åº”ç”¨ç¨‹åºåˆ—è¡¨éƒ¨åˆ†ã€‚

[![Hamoni dashboard](../Images/99d4073736d6ccf1d94cd246f060b4b1.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--wxOo7MyY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://d2mxuefqeaa7sj.cloudfront.net/s_271D2C4415082D830A5E129B885A0502958EA9373BF02DC765D6BC3010DA0C13_1523552120862_Screen%2BShot%2B2018-04-12%2Bat%2B17.54.22.png)

å¤åˆ¶åº”ç”¨ç¨‹åºå’Œå¸æˆ· IDï¼Œå¹¶ç”¨ **server.js** ä¸­ç¬¬ 40 è¡Œçš„å­—ç¬¦ä¸²å€¼æ›¿æ¢å®ƒä»¬

## [](#create-application-state-in-hamoni)åœ¨ Hamoni ä¸­åˆ›å»ºåº”ç”¨çŠ¶æ€

ç°åœ¨æˆ‘ä»¬éœ€è¦åœ¨ Hamoni Sync ä¸­åˆ›å»ºçŠ¶æ€ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åŒæ­¥åŸè¯­ã€‚åŒæ­¥åŸè¯­æ˜¯ç”¨æ¥å®šä¹‰å’Œæ“ä½œçŠ¶æ€çš„ã€‚å®ƒä»¬åŸºæœ¬ä¸Šæ˜¯ä¸€ç§å¯¹è¦å­˜å‚¨çš„æ•°æ®è¿›è¡Œåˆ†ç±»æˆ–åŒºåˆ†çš„æ–¹å¼ã€‚æœ‰ 3 ç§åŒæ­¥åŸè¯­:

1.  **Value Primitive:** è¿™ç§çŠ¶æ€ä¿å­˜ç”¨å­—ç¬¦ä¸²ã€å¸ƒå°”æˆ–æ•°å­—ç­‰æ•°æ®ç±»å‹è¡¨ç¤ºçš„ç®€å•ä¿¡æ¯ã€‚å®ƒæœ€é€‚åˆäºæœªè¯»æ¶ˆæ¯è®¡æ•°ã€åˆ‡æ¢ç­‰æƒ…å†µã€‚
2.  **å¯¹è±¡åŸè¯­** **:** å¯¹è±¡çŠ¶æ€è¡¨ç¤ºå¯ä»¥è¢«å»ºæ¨¡ä¸º JavaScript å¯¹è±¡çš„çŠ¶æ€ã€‚ä¸€ä¸ªç¤ºä¾‹ç”¨é€”å¯ä»¥æ˜¯å­˜å‚¨æ¸¸æˆçš„åˆ†æ•°ã€‚
3.  List åŸè¯­:å®ƒä¿å­˜äº†ä¸€ä¸ªçŠ¶æ€å¯¹è±¡åˆ—è¡¨ã€‚çŠ¶æ€å¯¹è±¡æ˜¯ JavaScript å¯¹è±¡ã€‚æ‚¨å¯ä»¥æ ¹æ®é¡¹ç›®åœ¨åˆ—è¡¨ä¸­çš„ç´¢å¼•æ¥æ›´æ–°é¡¹ç›®ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡åŸè¯­ã€‚

åœ¨ **server.js**
ä¸­æ·»åŠ ä»¥ä¸‹å‡½æ•°

```
 function createState() {
      hamoni
        .createObject("election", voteData)
        .then(statePrimitive => {
          console.log("election state created");
          state = statePrimitive;
        })
        .catch(console.log);
    } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†ä½¿ç”¨å˜é‡`voteData`åˆ›å»ºä¸€ä¸ªåä¸º`election`çš„çŠ¶æ€å’ŒçŠ¶æ€å€¼ã€‚ç„¶åæˆ‘ä»¬éœ€è¦è¿æ¥åˆ° Hamoni åŒæ­¥æœåŠ¡å™¨ã€‚æˆ‘ä»¬é€šè¿‡è°ƒç”¨`hamoni.connect()`æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚åœ¨å‡½æ•°`createState()`
ä¸‹é¢æ·»åŠ ä»¥ä¸‹ä»£ç 

```
 hamoni.connect().then(() => createState()).catch(console.log); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœå®ƒæˆåŠŸåœ°è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œæˆ‘ä»¬è°ƒç”¨`createState()`å‡½æ•°æ¥ä¸ºæˆ‘ä»¬çš„å›¾è¡¨åˆ›å»ºçŠ¶æ€ã€‚

## [](#update-application-state)æ›´æ–°åº”ç”¨çŠ¶æ€

æˆ‘ä»¬å¸Œæœ›åœ¨æ–°çš„æŠ•ç¥¨åˆ°æ¥æ—¶æ›´æ–°çŠ¶æ€ã€‚ä¿å­˜æˆ‘ä»¬çŠ¶æ€çš„å¯¹è±¡åŸè¯­æœ‰ä¸€ä¸ª`update()`æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥æ›´æ–°çŠ¶æ€ã€‚å½“ç”¨æˆ·è°ƒç”¨æˆ‘ä»¬ API çš„`/vote`ç«¯ç‚¹æ—¶ï¼Œæˆ‘ä»¬å°†æ›´æ–°*é€‰ä¸¾*çŠ¶æ€ã€‚åœ¨ç¬¬ 27 è¡Œä¸‹é¢ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç æ¥æ›´æ–°çŠ¶æ€

```
 app.post("/vote", function(req, res) {
      ....
      state.update(voteData);
      ....
    }); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†æ›´æ–°çŠ¶æ€å¹¶å°†æ›´æ–°å¹¿æ’­åˆ°è¿æ¥çš„å®¢æˆ·ç«¯ã€‚

# [](#frontend)å‰ç«¯

æˆ‘ä»¬çš„åç«¯å·²ç»å‡†å¤‡å¥½æ¥å—æŠ•ç¥¨å¹¶æ›´æ–°çŠ¶æ€ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å»ºç«‹å‰ç«¯å‘é€æŠ•ç¥¨å’Œæ˜¾ç¤ºå®æ—¶å›¾è¡¨ã€‚

æˆ‘ä»¬åœ¨å¼€å§‹æ—¶å…‹éš†çš„ starter æ¨¡æ¿æœ‰æ–‡ä»¶ **public/vote.html** å’Œ **public/js/vote.js.** è¿™äº›æ–‡ä»¶å·²ç»åŒ…å«äº†åœ¨ç½‘é¡µä¸­æ˜¾ç¤ºè¡¨å•çš„ä»£ç å’Œå‘é€åˆ°æœåŠ¡å™¨çš„ javascriptã€‚æˆ‘åœ¨è¿™é‡Œè·³è¿‡äº†ç¼–å†™è¿™æ®µä»£ç ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„ HTML è¡¨å•å’Œå°†è¡¨å•æ•°æ®å‘é€åˆ°æœåŠ¡å™¨çš„ JavaScriptã€‚å¦‚æœæœ‰ä»»ä½•ä»¤äººå›°æƒ‘çš„åœ°æ–¹ï¼Œè¯·ç•™ä¸‹è¯„è®ºã€‚

è¯¥å›¾è¡¨å°†æ˜¾ç¤ºåœ¨**index.html**çš„å…¬å…±æ–‡ä»¶å¤¹å†…ã€‚ã€index.html å·²ç»åŒ…å« Chart.js å’Œ Hamoni Sync çš„è„šæœ¬æ ‡ç­¾(è§ç¬¬ 17 å’Œ 18 è¡Œ)

```
 <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
    <script src="https://unpkg.com/hamoni-sync@0.2.0/hamoni.dev.js"></script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#render-the-chart)æ¸²æŸ“å›¾è¡¨

æ‰“å¼€æ–‡ä»¶ **public/index.js.** æ·»åŠ ä¸‹é¢çš„å‡½æ•°åœ¨ç½‘é¡µä¸­æ¸²æŸ“å›¾è¡¨ã€‚

```
 function renderChart(state) {
      var ctx = document.getElementById("myChart").getContext("2d");
      var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: "bar",
        // The data for our dataset
        data: {
          labels: state.map(s => s.candidate),
          datasets: [
            {
              label: "Elections 2018",
              backgroundColor: "rgb(255, 99, 132)",
              borderColor: "rgb(255, 99, 132)",
              data: state.map(s => s.vote)
            }
          ]
        },
        // Configuration options go here
        options: {
          scales: {
            xAxes: [
              {
                time: {
                  unit: "Vote"
                },
                gridLines: {
                  display: false
                },
                ticks: {
                  maxTicksLimit: 6
                }
              }
            ],
            yAxes: [
              {
                ticks: {
                  min: 0,
                  max: 30,
                  maxTicksLimit: 10
                },
                gridLines: {
                  display: true
                }
              }
            ]
          },
          legend: {
            display: true
          }
        }
      });
    } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªä»£è¡¨å›¾è¡¨çŠ¶æ€çš„å‚æ•°ã€‚type é€‰é¡¹æŒ‡å®šäº†æˆ‘ä»¬æƒ³è¦å‘ˆç°çš„å›¾è¡¨ç±»å‹ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ªæ¡å½¢å›¾ã€‚æ•°æ®é€‰é¡¹å®šä¹‰ç”¨äºæ˜¾ç¤ºå›¾è¡¨æ•°æ®çš„å±æ€§ã€‚æˆ‘æƒ³è®©ä½ ä»¬æ³¨æ„ä¸¤ä¸ªé‡è¦çš„ç‰¹æ€§ã€‚é¦–å…ˆæ˜¯ç¬¬ 8 è¡Œçš„æ ‡ç­¾å±æ€§ï¼Œ`labels: state.map(s => s.candidate)`
å®ƒä» state ä¸­è·å–å…¶å€¼ã€‚å›¾è¡¨çŠ¶æ€æ˜¯æ¯ä¸ªé€‰ä¸¾å€™é€‰äººåŠå…¶æŠ•ç¥¨çš„æ•°ç»„ã€‚ä½¿ç”¨è¿™äº›ä»£ç ï¼Œæˆ‘ä»¬å°†å€™é€‰äººçš„åå­—è®¾ç½®ä¸ºå›¾è¡¨çš„æ ‡ç­¾ã€‚ç¬¬äºŒä¸ªæ˜¯ 14 å·çº¿çš„`data: state.map( s => s.vote)`ã€‚å®ƒä¸ºå›¾è¡¨è®¾ç½®æ•°æ®ã€‚

ç°åœ¨æˆ‘ä»¬éœ€è¦æ£€ç´¢å›¾è¡¨çŠ¶æ€å¹¶å‘ˆç°å›¾è¡¨ã€‚

## [](#get-state-and-state-updates)è·å–çŠ¶æ€å’ŒçŠ¶æ€æ›´æ–°

ä¸ºäº†æ£€ç´¢å›¾è¡¨çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦è¿æ¥åˆ° Hamoni Syncã€‚æ·»åŠ ä»¥ä¸‹ä»£ç ä»¥è·å–çŠ¶æ€å’ŒçŠ¶æ€æ›´æ–°ï¼Œç„¶ååŸºäºæ­¤å‘ˆç°å›¾è¡¨:

```
let hamoni = new Hamoni("Account_ID", "APP_ID");
hamoni
  .connect()
  .then(response => {
    hamoni
      .get("election")
      .then(statePrimitive => {
        renderChart(statePrimitive.get());

        statePrimitive.onUpdated(state => renderChart(state));
      })
      .catch(console.log);
  })
  .catch(error => console.log(error)); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœå®¢æˆ·ç«¯æˆåŠŸè¿æ¥åˆ° Hamoni Syncï¼Œæˆ‘ä»¬è°ƒç”¨`hamoni.get("election")`æ¥è·å–æˆ‘ä»¬çš„é€‰ä¸¾çŠ¶æ€ã€‚å¦‚æœæˆåŠŸï¼Œæˆ‘ä»¬ç”¨çŠ¶æ€å€¼è°ƒç”¨`renderCharts()`ã€‚

ä¸ºäº†å¾—åˆ°çŠ¶æ€æ›´æ–°çš„é€šçŸ¥ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°è°ƒç”¨ state åŸè¯­ä¸Šçš„`onUpdated()`,æ¯æ¬¡æœ‰æ›´æ–°æ—¶éƒ½åº”è¯¥æ‰§è¡Œè¿™ä¸ªå›è°ƒå‡½æ•°ã€‚

ç°åœ¨æˆ‘ä»¬å¯ä»¥æµ‹è¯•æˆ‘ä»¬çš„ä»£ç ï¼Œçœ‹çœ‹å®ƒçš„å·¥ä½œæƒ…å†µã€‚æ‰“å¼€å‘½ä»¤è¡Œå¹¶è¿è¡Œ`npm start`ï¼Œç„¶åæ‰“å¼€æµè§ˆå™¨å¹¶å¯¼èˆªåˆ° [localhost:5000](http://localhost:5000) ã€‚

[![](../Images/8576eab5da4013f4e88495fd1037c09f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--DfZG2V31--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://d2mxuefqeaa7sj.cloudfront.net/s_271D2C4415082D830A5E129B885A0502958EA9373BF02DC765D6BC3010DA0C13_1523604009149_hamoni-chartjs.gif)

ç§å•Šã€‚ï¼ğŸš€

æ›´è½»æ¾åœ°åˆ¶ä½œå®æ—¶å›¾è¡¨çŠ¶æ€ã€‚Chart.js å¾ˆå¥½ç”¨ã€‚Hamoni Sync å‡å°‘äº†å›´ç»•å‘å¸ƒ/è®¢é˜…ç³»ç»Ÿè®¾è®¡å¤æ‚çŠ¶æ€é€»è¾‘çš„å¼€å‘æ—¶é—´å’Œå·¥ä½œé‡ï¼Œå› ä¸ºå®ƒåŒ…å«äº†çŠ¶æ€çš„æ¦‚å¿µã€‚

ä½ å¯ä»¥åœ¨ [GitHub](https://github.com/pmbanugo/realtime-chartjs-hamoni) ä¸Šè·å¾—å®Œæˆçš„æºä»£ç ã€‚

# [](#links)é“¾æ¥

*   [Hamoni Sync](https://www.hamoni.tech/)
*   [Chart.js](http://www.chartjs.org/docs/latest/)
*   [å¿«é€’](http://expressjs.com/)