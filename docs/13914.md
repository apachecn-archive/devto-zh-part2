# 假人的概念代码:第 1 部分:概述

> 原文:[https://dev . to/Kaiser Shahid/code cept-for-dummies-part-1-overview-4bme](https://dev.to/kaisershahid/codecept-for-dummies-part-1-overview-4bme)

我花了将近 20 年的时间做 web 开发，在这段时间里，我没有真正考虑过测试。我的意思是，我已经写了我自己的单元测试和模拟，但我只是按照其他人在项目中设置的模式进行，我的测试通过了，所以我继续前进。

最近，我开始在 Pocket 工作，成为我们后端团队的一名工程师。我的第一个大项目是将我们的管理工具迁移到一个专用的服务器上，并(更多的是我的主动性)采用 Symfony，开始移植/重写我们的工具，使前端和后端更加统一。

这项工作的一部分包括建立共同概念。我最初试图利用我们在主要产品代码中所做的事情，但在这个过程中，我做了大量的黑客工作，将我的测试纳入更大的测试集，而疯狂的谷歌搜索只让我得到了我需要知道的一半。

于是我吸了一口气，从头开始。这是我学到的。

## [](#basic-concepts)基本概念

在进入 Codecept 细节之前，如果您不熟悉的话，我想谈谈一些基本的测试概念。(往前跳，还是看了纠正我。)

自动化测试通常可以分为以下几类:

1.  **单元测试**:这通常测试特定的功能，或者通过比较一些预期的输出，或者通过生成和验证代码执行(见下文)，或者两者的结合。测试应该是独立的，不依赖于外部依赖(例如，没有活动的数据库或文件系统)，因此*单元*
    *   要点:您想测试`square(x)`是否返回`x * x`，但不想测试`save_to_table('some_table', square(x))`是否成功更新了数据库。
2.  **集成测试**(和**功能测试**):这从单元测试后退了一步。您可能仍然在比较返回结果并使用测试 doubles，但是您也在使用活动系统(例如，真实的数据库或 REST 端点)，并且代码执行将跨越广泛的功能和服务(例如，使用测试 Symfony 框架实例来触发请求并确保预期的控制器被执行)。这里的目标是确保所有这些独立的部分能够很好地协同工作。
    *   功能测试是集成测试的一个子集，更侧重于根据提供的输入来验证给定系统的输出——您不需要知道过程中发生了什么，只需要得到您期望的结果。
3.  **验收测试**:测试接近尾声的阶段。这些建立在您在单元和集成/功能测试中所做的一切之上，并确保输出符合消费者的期望:
    *   是否显示了标题？
    *   链接是否正确？
    *   签到表能用吗？

**测试替身**是与真实事物交换的对象和函数。假设您有一个单元测试，其中您测试的函数涉及到一个 REST 调用，并且您想要验证成功和失败的行为。不需要进行实际的 REST 调用(这应该在集成测试阶段)，您可以传入一个模拟的 HTTP 客户端，它只响应您告诉它去做的行为(例如`when get('/url') is called, return this specific response`)。 [TestDouble](https://martinfowler.com/bliki/TestDouble.html) 描述了测试替身的具体类型。

测试可以被组织成**套**。您将拥有通用的单元、功能和验收套件，但是您也可能拥有仅在部署发生后在生产环境中运行的测试。套件是控制何时执行什么测试的好方法。

## [](#installing-codecept)安装协同概念

在您的 PHP 项目中，确保您使用的是 Composer(此处有链接)，因为我没有以任何其他方式设置 Codecept。然后做:

`composer require "codeception/codeception":"^2.2" --dev`

这将使 Codecept 可用于开发环境。接下来，您可能想要将项目的`./vendor/bin`目录添加到`$PATH`中。这将使`codecept`成为一个可用的脚本。

## [](#making-a-test-skeleton)制作测试骨架

在您的根项目目录中，键入`codecept bootstrap`。这将生成以下内容:

```
codecept.yml
tests/
tests/_data/
tests/_output/
tests/_support/
tests/acceptance/
tests/acceptance.suite.yml
tests/functional/
tests/functional.suite.yml
tests/unit/
tests/unit.suite.yml 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

键入`codecept run`以确保这些空的测试套件成功加载和运行。

注意，每个套件都有一个`$suite.suite.yml`文件和`$suite/`目录。

## [](#conclusion)结论

就是这样！我不希望这个介绍是一个巨大的信息转储。在第 2 部分中，我将开始进入细节。