# 终端多路复用器

> 原文：<https://dev.to/pmihaylov/tmux---a-terminal-multiplexer-2pm6>

上一次，我写了为什么我认为每个人都应该尝试使用像 vim [这样的基本文本编辑器至少一段时间](http://pmihaylov.com/vim-better-developer/)。

在这样的经历之后，有些人可能会放弃它，而其他人可能会想全职转向 vim。

对于后者——恭喜！

但是这种方法不可避免地会出现一个问题，特别是如果你正在进行一个大项目的话——与 ide 相比，使用基本的 vim 进行大项目是非常低效的。

我曾经在业余爱好项目中使用 vim，它做得很好，但是当我尝试在一个有大量代码库和几个不同构建变体的项目中使用它时，事情开始变得混乱，我更喜欢使用 ide。

你们中的一些人可能不同意我的观点，我看到人们更喜欢坚持使用简单的 vim。

但是以我的经验来看，除了它令人敬畏的用户界面给你带来的文本编辑提升之外，你维护一个大项目所需要的所有辅助工具都是无价的，并且不容易从一个简单的 vim 中获得。

因此，我决心改变这一点，开始探索许多不同的工具和插件，使我的 vim 能够挑战我的 IDE 提供的生产力。

在这个新的系列文章中，我将分享我最喜欢的工具，这些工具通过使用 vim 帮助我每天保持高效。

在第一篇文章中，主题是我一直最喜欢的 vim 插件- tmux。

*本文是[提升你的 VIM](http://pmihaylov.com/category/boost-your-vim/) 系列的一部分，在这里我分享我最喜欢的 VIM 插件和工具，它们可以极大地优化你的生产力，让你成为更好的按键忍者。*

# 那么这 tmux 大惊小怪的是什么呢？

tmux 是一个终端应用程序，它允许您在一个终端窗口中模拟几个终端。

这就是它的全部内容。这已经足够了。

为什么这是必要的？

那么，你有没有在 vim 中做过一些编辑，执行过一些外部终端命令？

比如做一些修改，用 git 添加到你的 repo 里，提交？

或者在这样做的同时，您想检查不同目录中的某些内容，但您仍然想保留当前会话？

嗯，在正常情况下，你会打开另一个终端窗口，做你的工作，并返回到前一个。

但是如果你不得不打开太多的会话，事情就会变得很糟糕。

问题是，打开一个新的终端窗口意味着打开一个新的 GUI 应用程序，你可以很容易地使用鼠标，但使用键盘 stokes 导航到它是比较困难的。

除此之外，如果你想同时观察几个终端窗口的进度，你必须用鼠标调整它们在屏幕上的位置。

我不知道你怎么想，但是每当我不得不把我的手从键盘上移开来拿鼠标的时候，感觉很糟糕。

更重要的是，你失去了宝贵的键盘狂热惯性。所以总的来说，你的生产力下降了。

[![](../Images/9bc5504b365b5e8ccd2f37fc4c1d21ef.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--rSDncqrO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://pmihaylov.com/wp-content/uploads/2018/05/Selection_017-1024x547.png)

为了生成所有这些终端并以这种方式排序，我花了大量的鼠标点击和移动。

如果你不得不经常这样做，它会很快变得相当令人沮丧，尤其是当你全神贯注于手头的问题时。

但是另一方面，通过使用 tmux，你可以在一个终端窗口中完成所有的工作，只需敲击几下键盘**，而不是使用鼠标**。

[![](../Images/d1a49bd6509fac14782b49816a9b619a.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--VDoRrGkk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://pmihaylov.com/wp-content/uploads/2018/05/Selection_018-1024x576.png)

为了调整上面的布局，没有使用单一的鼠标点击。

# 安装和配置

tmux 是一个独立于 vim 的软件。所以你可以像安装其他普通软件一样安装它。

在 Debian 发行版上:

`sudo apt-get install tmux`

在 Red Hat 系统上:

`yum install tmux`

就是这样！您的系统上有 tmux。只需输入`tmux`就可以运行它。

然而，tmux 的默认配置非常粗糙，一旦您第一次开始使用它，它会让您有点恼火。

例如，我记得从 tmux 终端复制文本时有一些问题，有些颜色有问题，在 vim 和 tmux 中使用某些快捷方式时有不兼容性。

为了解决这个问题，你将不得不浏览很多东西，以使 tmux 实际上是可用的和用户友好的。如果你喜欢做这些事情，请便。

但是如果你只是想获得 tmux 的正常工作配置并开始使用它，你可以从我的 [github repo](https://github.com/PreslavMihaylov/dotfiles/blob/master/tmux.conf) 中复制我的`.tmux.conf`文件。

只需复制我共享的文件内容，并将其粘贴到位于您个人文件夹根目录下的`.tmux.conf`文件中。也就是`~`目录。

就是这样！现在，您已经有了一个与 vim 完全兼容的 tmux，并且使用起来(几乎)没有一点痛苦。

## tmux 太棒了！我不能让它在我打开终端窗口时自动启动吗？

(闪光、嗡嗡声、咿咿声。超级英雄站在你面前)

是的，你可以！

您所要做的就是将这些行附加到用户主目录中的`.bashrc`文件(或者您使用的任何 bash 概要文件)的末尾。

但是要小心！

如果您添加了这些行并且破坏了 tmux 的配置，**您将根本无法启动终端**。

因此，如果你正在调整你的`.tmux.conf`文件，确保你事先注释掉这些行。

# 但是我怎么用呢？

我们期待已久的时刻终于到来了。你有了新玩具，你组装好了。现在是玩它的时候了！

因此，您可以像使用普通终端一样使用 tmux。应该没有观察到其他奇怪的行为。

除了一个例外(到目前为止我还没有发现)。

每当你想用鼠标从终端复制东西时，你需要按住 shift 键的同时拖动鼠标。

那是针对使用 tmux 的副作用。当然，如果你跳过配置部分，你会有很多副作用。但是假设你做得很好，没什么好害怕的。

好了，现在是有趣的部分，你如何利用这个工具在你的终端中产生无数的终端并控制它们。

## 特殊 tmux 控制器状态

当你使用 tmux 时，一切正常，直到你点击`Ctrl-B`。这是激活 **tmux 控制器状态的特殊键绑定。**我不知道它实际上是怎么叫的，我更喜欢这么叫它。我最好快点申请专利，呵呵。

不管你喜欢叫它什么，在这种状态下你可以使用不同的键，它们不会像在正常情况下那样工作，而是做一些特定的事情来控制多路复用终端。

如果你在这种状态下一段时间不做任何事情，或者如果你点击回车键，你将回到正常的终端状态。

在这种状态下，您可以使用许多键来做各种事情。我只告诉你最重要的，也是我平时唯一用的。对于其他一些有趣的用例，请参考 tmux 手册页。

## 产生一个新的终端

垂直生成一个新的终端。

[![](../Images/5aca9b4836909c343198296b6247c075.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--QE7ckrSz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://pmihaylov.com/wp-content/uploads/2018/05/Selection_019-1024x580.png)

水平生成一个新的终端

[![](../Images/ef166f2e42621e68962b8889bc86d4e5.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--C2zlzogP--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://pmihaylov.com/wp-content/uploads/2018/05/Selection_020-1024x577.png)

这些操作也可以在内部 tmux 窗口上递归使用，以创建一个漂亮的终端网格。

[![](../Images/ebc92ff548c27b0cf656c86472fa81a1.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--9wZaVTtR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/http://pmihaylov.com/wp-content/uploads/2018/05/Selection_021-1024x577.png)

关于这两个操作只需注意一点。在您使用它们之后，您将返回到正常的终端操作。

这意味着您不能像下面这样链接终端:

`<Ctrl-B>""""`

相反，你必须分别调用几次`<Ctrl-B>"`。

## 导航终端网格

`<Ctrl-B>Left` -转到左侧终端屏幕。

`<Ctrl-B>Right` -转到右侧终端屏幕。

`<Ctrl-B>Up` -转到上层终端屏幕。

`<Ctrl-B>Down` -转到下方的终端屏幕。

与前面的命令不同，当您调用其中任何一个命令时，您将处于控制器状态。

这意味着你可以组合这些按键来快速浏览屏幕。

`<Ctrl-B>Left Down Right`

最后，当你到达你想要的屏幕时，点击回车键回到正常模式。

## 调整单元格大小

如果您觉得终端单元比您想要的要小，您可以使用以下键绑定来调整其宽度和高度:

`<Ctrl-B><Ctrl>Left` -向左增加宽度

`<Ctrl-B><Ctrl>Right` -向右增加宽度

`<Ctrl-B><Ctrl>Up` -向上方单元格增加高度

`<Ctrl-B><Ctrl>Down` -向下方单元格增加高度

如果你自己试着掌握它的窍门，会容易些。

同样，与前面的操作类似，这些操作使您处于控制器状态。

# 结论

这就是开始使用 tmux 所需要知道的全部内容。这些知识足以让你平整土地，有效地使用它。

剩下的就是练习和适应新玩具。

希望你喜欢它！

但是就工具和增强功能而言，这还远远不足以提升您的 vim，并使它与现代 IDE 保持一致。

如何导航您的项目结构？寻找函数的用法？自动完成？

我们才刚刚开始！

因此，请继续关注更多令人敬畏的工具，它们可以将您变成高效的 vim 击键忍者。