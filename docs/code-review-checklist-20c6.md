# 代码审查清单

> 原文：<https://dev.to/uday_rayala/code-review-checklist-20c6>

[![](img/3140562f21e01bc0599c8adfbf10d2bc.png)](https://res.cloudinary.com/practicaldev/image/fetch/s--RCRbAW67--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/854/1%2AJyDMwcM4jfOAkg6UO6ChEw.jpeg)

<figcaption>[http://blog . smartbear . com/WP-content/uploads/2015/09/Creating-Your-Code-Review-check list . jpg](http://blog.smartbear.com/wp-content/uploads/2015/09/Creating-Your-Code-Review-Checklist.jpg)</figcaption>

我已经在我的上一篇博客中发布了关于我们如何进行代码审查的内容，并将其与结对编程进行了比较。

我注意到的一件事是，每个团队和团队成员在进行代码评审时都有不同的事情清单。在这篇文章中，我将列出我寻找的东西。这绝不是一份完整的清单。如果您认为有任何检查缺失，请在评论中添加，让我们知道。

#### 设计

根据您使用的编程语言或平台，检查新代码是否遵循了正确的设计。

什么是正确的设计要由团队来决定？当引入新的抽象概念并遵循新的设计时，最好在开发人员之间进行预先讨论。代码审查可以是一种确保它如所讨论的那样实现的方法。这将确保不会有大量的返工。但是当你想实现一些新的东西，然后得到反馈时，这是可以免除的。确保你写得足够多，这样思想就被传达了。

以下是你应该检查的一些事情(感谢 [Bhavin Javia](https://twitter.com/bhavinjavia) 对这个列表的大部分贡献):

*   验证是否遵循了指定风格指南的编码约定，以保持一致性和最佳实践。
*   检查开发人员无意中引入的重复，例如，由于缺乏对现有可重用组件的了解，逻辑/职责错位，通用/可重用代码没有提取，只是复制/粘贴到其他地方，等等
*   识别在早期技术债务和代码评审中被错过或推迟的重构机会。通常，如果开发人员在该领域工作，会有很多上下文，这使得将一些重构任务作为故事的一部分更容易/PR，而不是找到一个专门的重构时间块。
*   发现并警告开发人员与其他开发人员代码的潜在依赖性或冲突，例如，当涉及代码库相同区域的多个功能正在开发或审查时
*   如果引入了任何非标准功能或黑客技术，请确保使用#TODO 或#FIXME 标记进行注释，并附上适当的注释，例如引用合理使用的代码片段/补丁以及理想的解决方案。例如#FIXME 补丁解决 <framework><link>中的 bug #。升级到固定版本后删除。</framework>
*   留意引入的新库，看看它们是否是必需的，是否是最新版本。有更好的替代方案吗？

#### 测试

*   上面所有关于代码的清单也适用于测试代码。
*   确保所有的代码都有在所有层次上写的测试——单元、集成和功能。
*   检查所有测试是否通过。
*   检查测试是否作为描述被测试代码意图的文档。
*   检查测试失败时是否给出正确的错误信息。例如:

```
expect(subject).to include(:customer) #is better than:
expect(subject.key? :customer).to be\_true 
```

#### **戴上 QA 的帽子**

> 这是大多数人忽略的，或者可能认为不重要的事情。代码的工作与其质量一样重要。即使你有一个测试团队，在代码审查时捕捉 bug 也会降低修复它的成本。

*   阅读故事描述，向 BA 或产品负责人提问，看看是否所有的验收标准都按要求实施了。我觉得大部分的错误都可以通过这个检查发现。
*   想想故事中没有提到的场景。检查与新变化相关的常规用户流是否仍按预期工作。

#### **【跨功能需求(非功能需求)**

还要关注跨职能需求，如性能、安全性、分析、日志记录、警报等。

*   检查代码是否会引入任何性能问题，比如 N+1 查询问题，或者将整个数据库加载到内存中等等。考虑在生产环境中运行这段代码，并预测可能会出现什么样的问题。当然，你不能仅仅通过查看代码就找到所有的错误，但是你可以从过去的经验中找出一些常见的错误。比如做 Customer.all
*   安全性是可以提前确定的。检查数据是否仅由授权用户访问。阅读可采取的常见安全预防措施，并与团队分享相同的理解。
*   如果您已经集成了一些分析系统，请检查新功能是否应该与之集成。
*   检查是否进行了足够的日志记录来调试应用程序。
*   检查当事情发生时是否添加了警报。

#### 连续交货

当您遵循连续交付时，您应该确保新的变更不会破坏生产数据和功能。

*   确保添加了数据迁移脚本，并检查它们是否按预期执行。如果需要，在您的机器上运行一次。不要进行会导致数据丢失的更改。此外，请确保即将投入生产的功能被自动部署到试运行或预生产环境中，该环境具有生产数据的副本(经过模糊处理),以检测和修复潜在问题。
*   检查是否为您不打算发布的任何功能添加了功能切换。

#### 其他

*   检查正在审查的代码是否与最新的主分支代码合并。
*   确保在整合这些变更后，为任何其他团队添加了要遵循的说明。例如，如果有任何重大变更，通知 QA 团队在哪些方面运行回归。或者将 API 合同中的任何变化通知任何下游消费者系统。或者更新 README 以帮助其他开发人员。

总的来说，保持要评审的变更较小，并尽快提出拉取请求以尽早获得反馈。

请在评论中加入你的想法。如果你喜欢这篇文章，推荐它，这样其他人就可以找到它并参与讨论。

* * *