# ä½¿ç”¨ HTML5 çš„æ‰«é›·å·¥å…·

> åŸæ–‡:[https://dev.to/aymanbagabas/minesweeper-using-html5-4goj](https://dev.to/aymanbagabas/minesweeper-using-html5-4goj)

æ˜¾ç„¶ï¼Œ2000 å¹´ä¹‹å‰å‡ºç”Ÿçš„äººéƒ½çŸ¥é“è‘—åçš„ç»å…¸æ¸¸æˆâ€˜æ‰«é›·â€™ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œæˆ‘å¾ˆå°çš„æ—¶å€™å°±çŸ¥é“è¿™ä¸ªæ¸¸æˆï¼Œé‚£æ—¶ Windows XP æ— å¤„ä¸åœ¨ã€‚è¿™å¾ˆæœ‰è¶£ï¼Œå› ä¸ºé‚£æ—¶æˆ‘å¹¶ä¸çŸ¥é“è¿™ä¸ªæ¸¸æˆåˆ°åº•æ˜¯æ€ä¹ˆç©çš„ã€‚é‚£æ¬¡æ¸¸æˆå¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ç§è¿æ°”æ¸¸æˆï¼Œä½ è¦åŠªåŠ›æ¶ˆé™¤é™¤äº†æœ‰åœ°é›·çš„æ–¹å—ä¹‹å¤–çš„æ‰€æœ‰æ–¹å—ï¼Œç›´åˆ°ä½ èµ¢æˆ–è¾“ğŸ˜†ã€‚

ç›´åˆ°æœ€è¿‘ï¼Œä¸€ä¸ªæœ‹å‹æŒ‡å‡ºï¼Œä»–ä»¬çœ‹åˆ°äº†ä¸€ä¸ªå®¶ä¼™åˆ¶ä½œäº†ä¸€ä¸ªå®Œå…¨å®Œç¾çš„ AI æ¥è§£å†³æ¸¸æˆçš„è§†é¢‘ã€‚æˆ‘å–œæ¬¢è¿™ä¸ªä¸»æ„ï¼Œæ‰€ä»¥æˆ‘å†³å®šåšä¸€ä¸ªã€‚æˆ‘å¼€å§‹å­¦ä¹ è¿™ä¸ªæ¸¸æˆæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œç»“æœéå¸¸ç®€å•ã€‚æ¸¸æˆä¸­æœ‰ä¸€å®šæ•°é‡çš„åœ°é›·ï¼Œç©å®¶å¿…é¡»æ‰¾åˆ°è¿™äº›åœ°é›·çš„ä½ç½®æ‰èƒ½èµ¢å¾—æ¸¸æˆã€‚æ¯ä¸ªæ–¹å—éƒ½æœ‰ä¸€ä¸ªæƒé‡ï¼Œæ˜¾ç¤ºåœ¨è¯¥ç‰¹å®šæ–¹å—å‘¨å›´çš„ 8 ä¸ªæ–¹å—ä¸­æœ‰å¤šå°‘åœ°é›·ã€‚å¦‚æœæƒé‡ä¸ºé›¶ï¼Œæ¸¸æˆå°†æ˜¾ç¤ºæ‰€æœ‰å‘¨å›´çš„æ–¹å—ï¼Œé™¤äº†æœ‰åœ°é›·çš„æ–¹å—ï¼Œå¦åˆ™ï¼Œå®ƒå°†æ˜¾ç¤ºæ–¹å—æœ¬èº«ã€‚è™½ç„¶äº‹æƒ…å¹¶ä¸é¡ºåˆ©ï¼Œä½†æˆ‘æœ€ç»ˆåªåšäº†è¿™ä¸ªæ¸¸æˆã€‚

### å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

å€ŸåŠ© HTML5 canvas å…ƒç´ ï¼Œå¯ä»¥ç»˜åˆ¶å‡ ä½•å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JavaScript åŠ¨æ€åœ°å®ç°è¿™ä¸€ç‚¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨é¡µé¢ä¸­åˆ›å»ºä¸€ä¸ªç”»å¸ƒå…ƒç´ :

```
<canvas id="example" width="500" height="500">Any text here will get displayed if the browser does not support HTML5 canvas</canvas> 
```

Enter fullscreen mode Exit fullscreen mode

ç„¶åæˆ‘ä»¬ç”¨ JavaScript åˆ›å»ºå¯¹è±¡å¹¶æ§åˆ¶å®ƒä»¬çš„å±æ€§:

```
var canvas = document.getElementById("example");
var context = canvas.getContext("2d");
context.beginPath();
context.fillStyle = 'red';
context.fillRect(0, 0, 10, 10);
context.closePath(); 
```

Enter fullscreen mode Exit fullscreen mode

è¿™å°†åˆ›å»ºä¸€ä¸ªè¾¹é•¿ç­‰äº 10ã€ä½ç½®ä¸º(0ï¼Œ0)çš„æ­£æ–¹å½¢ã€‚ç®€å•æ˜“è¡Œã€‚

### è›´è¬

æˆ‘ä½¿ç”¨ [Grub](https://wiki.archlinux.org/index.php/GRUB) ä½œä¸ºå¼•å¯¼è£…è½½ç¨‹åºã€‚æ˜¾ç„¶ï¼Œæ‚¨å¸Œæœ›å°† Grub ç”¨äº UEFI ç³»ç»Ÿã€‚å¯¹äº ESP ä½ç½®ï¼Œæˆ‘å°†æˆ‘çš„è®¾ç½®ä¸º`/boot/efi`,åªæ˜¯ä¸ºäº†éµå¾ªå…¶ä»– Linux distors æ–¹æ³•ã€‚ç”±äºè¿™æ¬¾ç¬”è®°æœ¬ç”µè„‘è‡ªå¸¦çš„ HiDPI å±å¹•ï¼ŒGrub å¾ˆéš¾çœ‹åˆ°ï¼Œä¸€ä¸ªå¿«é€Ÿçš„è§£å†³æ–¹æ³•æ˜¯å°†`GRUB_GFXMODE`å˜é‡è®¾ç½®ä¸ºç±»ä¼¼äº`1600x1200x32`çš„å€¼ã€‚å¯ä»¥é€šè¿‡æ‰§è¡Œ`videoinfo`ä» Grub å‘½ä»¤è¡Œè·å–å¯ç”¨çš„å€¼ã€‚ç¼–è¾‘æ‚¨çš„`/etc/default/grub`æ–‡ä»¶ï¼Œä»¥åŒ…å«è¿™äº›è¡Œ:

### æ‰«é›·èˆ°

å‡ºäºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„å¿ƒæ€ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿåˆ›å»ºç±»ï¼Œå› ä¸ºæˆ‘å·²ç»ä¹ æƒ¯äº†è¿™ç§æ–¹å¼ğŸ˜ƒã€‚å½“æˆ‘çŸ¥é“ä½ å¯ä»¥ç”¨ JavaScript æ¨¡ä»¿åˆ›å»º[ç±»æ—¶ï¼Œæˆ‘å¾ˆæƒŠè®¶ã€‚](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes)

æˆ‘å¼€å§‹é—®æ¯ä¸ªæ–¹å—æœ‰ä»€ä¹ˆå±æ€§ï¼Ÿæˆ‘æƒ³åˆ°äº†è¿™äº›:isMineï¼ŒisFlaggedï¼ŒisDownï¼Œxï¼Œy å’Œ weightã€‚isMine åˆ¤æ–­ä¸€ä¸ªæ–¹å—æ˜¯ä¸æ˜¯åœ°é›·ã€‚å½“ä¸€ä¸ªæ–¹å—è¢«æ ‡è®°æˆ–æ ‡ç¤ºæ—¶ã€‚å¦‚æœæ˜¾ç¤ºæ­£æ–¹å½¢ï¼Œåˆ™ä¸º Downã€‚x å’Œ y ä»£è¡¨æ¸¸æˆä¸­çš„ä½ç½®ã€‚é‡é‡æ˜¯ä¸€ä¸ªå¤§äºé›¶çš„æ•°å­—ï¼Œè¡¨ç¤ºå®ƒå‘¨å›´çš„æ–¹æ ¼ä¸­æœ‰å¤šå°‘åœ°é›·ã€‚æœ‰äº†è¿™äº›å±æ€§ï¼Œæˆ‘å°±æœ‰äº†è¿™ä¸ª JS ç±»:

```
 1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34

class square {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.isDown = false;
        this.isMine = false;
        this.isDown = false;
        this.weight = 0;
    }
    get x() { return this._x; }
    set x(value) { this._x = value; }
    get y() { return this._y; }
    set y(value) { this._y = value; }
    get weight() { return this._weight; }
    set weight(value) { this._weight = value; }
    get isDown() { return this._isDown; }
    set isDown(value) {
        this._isDown = value;
        if (this.isMine) {
            end = true;
        }
    }
    get isMine() { return this._isMine; }
    set isMine(value) { this._isMine = value; }
    get isFlagged() { return this._isFlagged; }
    set isFlagged(value) {
        this._isFlagged = value;
        if (value)
            numberofmines = (numberofmines <= 0) ? 0: numberofmines - 1;
        else
            numberofmines++;
        updateHeader();
    }
} 
```

Enter fullscreen mode Exit fullscreen mode

è¿™ä¸ªæ¸¸æˆæ²¡æœ‰å¾ªç¯ï¼Œå®ƒåŒ…å«ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ã€‚ç¬¬ä¸€ä¸ªè¢«è°ƒç”¨æ¥åˆå§‹åŒ–æ¸¸æˆç¯å¢ƒï¼Œå°±åƒè®¾ç½®é¼ æ ‡äº‹ä»¶å¤„ç†ç¨‹åºä¸€æ ·ã€‚è¿™é‡Œæ˜¯æ‰€æœ‰ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿçš„åœ°æ–¹ï¼Œæ¯å½“ç”¨æˆ·ç‚¹å‡»ç¬¬ä¸€æ¬¡ç‚¹å‡»æ—¶ï¼Œè®¡æ—¶å™¨å¼€å§‹è®¡æ—¶ï¼Œå¹¶å°†ç‚¹å‡»ä¼ é€’ç»™æ¸¸æˆã€‚å¦‚æœå®ƒåœ¨æ–¹å—æ‰€åœ¨çš„æ¸¸æˆæ¡†æ¶å†…ï¼Œå®ƒå°†è®°å½•è¯¥æ–¹å—çš„ç‚¹å‡»ã€‚å¦åˆ™ï¼Œå®ƒå°†å¼€å§‹æ–°çš„æ¸¸æˆã€‚ä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªå‡½æ•°ï¼Œå‰ä¸€ä¸ªå‡½æ•°åªè¢«è°ƒç”¨ä¸€æ¬¡ã€‚è¿™ä¸ªè¢«è°ƒç”¨æ¥æ¸…é™¤æ¸¸æˆä¸­æ‰€æœ‰ä»¥å‰çš„æ•°æ®å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„æ¸¸æˆã€‚æ˜¾ç„¶ï¼Œè¿™æ˜¯åœ¨å…¶ä»–å‡½æ•°çš„å¸®åŠ©ä¸‹å®Œæˆçš„ï¼Œä»¥ä½¿å®ƒæ›´æœ‰ç»„ç»‡æ€§ã€‚

### æºä»£ç 

æºä»£ç å¯ä»¥åœ¨[js minesweaver](https://github.com/aymanbagabas/jsminesweeper)è·å¾—ï¼Œæˆ–è€…ä½ å¯ä»¥åœ¨è¿™é‡Œ[è¯•ç”¨ã€‚](https://aymanbagabas.com/jsminesweeper)