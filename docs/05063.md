# åœ¨ electronic ä¸­åˆ›å»ºæ–‡æœ¬ç¼–è¾‘å™¨:ç¬¬ 3 éƒ¨åˆ†-è®¾ç½®é¦–é€‰é¡¹

> åŸæ–‡:[https://dev . to/aurelkurtula/creating-a-text-editor-in-electronic-part-3-setting-preferences-584h](https://dev.to/aurelkurtula/creating-a-text-editor-in-electron-part-3---setting-preferences-584h)

æ¬¢è¿æ¥åˆ°æœ¬ç³»åˆ—çš„æœ€åä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†é€šè¿‡æ„å»ºä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨æ¥æ¢ç´¢ç”µå­å­¦çš„åŸºç¡€çŸ¥è¯†ã€‚å¦‚æœä½ æƒ³å…¨é¢äº†è§£æˆ‘ä»¬æ­£åœ¨åšçš„äº‹æƒ…ï¼Œè¯·åŠ¡å¿…é˜…è¯»ç¬¬ä¸€éƒ¨åˆ†å’Œç¬¬äºŒéƒ¨åˆ†çš„

æˆ‘ä»¬åœ¨å‡ ä¹æ‰€æœ‰åº”ç”¨ä¸­çœ‹åˆ°çš„ä¸€ä¸ªæƒ¯ä¾‹æ˜¯å…è®¸ç”¨æˆ·åˆ¶ä½œä»–ä»¬è‡ªå·±çš„ç¼–è¾‘å™¨ã€‚è¿™å°±æ˜¯æˆ‘ä»¬åœ¨è¿™ä¸€éƒ¨åˆ†è¦åšçš„äº‹æƒ…ã€‚æˆ‘ä»¬å°†è®©ç”¨æˆ·è®¾ç½®åº”ç”¨ç¨‹åºçš„ä¸»é¢˜ã€‚æœ€åï¼Œæˆ‘ä»¬å°†æ¨å‡ºä¸€ä¸ªæ–°çª—å£ï¼Œå¦‚ä¸‹æ‰€ç¤º:

[![](../Images/9370d1267b895a520ef708e31187cccd.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--6gb3EdRQ--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/mg6mi0d0wig6mbuf5s25.png)

## è‡ªå®šä¹‰è¡¨å¤´

åœ¨æˆ‘ä»¬è¿›å…¥æ•™ç¨‹çš„å®è´¨å†…å®¹ä¹‹å‰ï¼Œå…ˆæ”¹å˜ä¸€ä¸‹æ¯ç‡¥çš„é»˜è®¤æ ‡é¢˜ã€‚

(è¿™éƒ½æ˜¯ä¸ºäº†[è®©è¯»è€…å¼€å¿ƒ](https://dev.to/davidamunga/comment/5cko)ğŸ¤ª).

è¿™å¾ˆç®€å•ã€‚å½“æˆ‘ä»¬å®šä¹‰çª—å£(`new BrowserWindow`)æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®ƒæ¡†æ¶çš„é€‰é¡¹ã€‚å¦‚æœæˆ‘ä»¬å°†`frame`è®¾ç½®ä¸º falseï¼Œå®ƒå°†åˆ é™¤å®ƒâ€”â€”åŒ…æ‹¬å·¦ä¾§çš„ä¸‰ä¸ªæŒ‰é’®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ é™¤é»˜è®¤æ ·å¼ï¼Œè€Œä¸æ˜¯æŒ‰é’®ã€‚åœ¨`./main.js`æ›´æ”¹`BrowserWindow`å®šä¹‰ä»¥åŒ…å«ç›¸å…³é€‰é¡¹:

```
window = new BrowserWindow({ 
    width:800, 
    height:600, 
    titleBarStyle: 'hidden' 
}) 
```

Enter fullscreen mode Exit fullscreen mode

å¦‚æœæˆ‘ä»¬è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ä¸‰ä¸ªæŒ‰é’®ï¼Œä½†æ²¡æœ‰æ ‡é¢˜ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»åˆ›å»ºè‡ªå·±çš„ã€‚æ‰€ä»¥åœ¨`./static/index.html`ä¸­ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·åš:

```
<header id="customtitle_wrap">
    <h1 id="customtitle">Texty</h1>
</header> 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨ç¬¬äºŒéƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å¢åŠ äº†æ˜Ÿå·å‡ºç°åœ¨æ ‡é¢˜æ ‡ç­¾ä¸­çš„åŠŸèƒ½ï¼Œä»¥æŒ‡ç¤ºæ–‡ä»¶ä½•æ—¶éœ€è¦ä¿å­˜ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å°†è¯¥åŠŸèƒ½æ·»åŠ åˆ°`#customtitle`ä¸­ï¼Œè€Œä¸æ˜¯ title æ ‡ç­¾ä¸­ã€‚

CSS ç°åœ¨å¯ä»¥æ˜¯ä½ å–œæ¬¢çš„ä»»ä½•ä¸œè¥¿ï¼Œä½†æ˜¯`-webkit-app-region: drag`åº”è¯¥è¢«åº”ç”¨åˆ°`#customtitle`ä¸Šï¼Œè¿™æ ·å®ƒå°±æˆä¸ºä¸€ä¸ªå¯ä»¥åœ¨å±å¹•ä¸Šæ‹–åŠ¨çª—å£çš„å¥æŸ„ã€‚é˜…è¯»[æ— æ¡†çª—å£](https://github.com/electron/electron/blob/master/docs/api/frameless-window.md)çš„æ–‡æ¡£ï¼ŒæŸ¥çœ‹æ‰€æœ‰é€‰é¡¹ã€‚

[![](../Images/d5a930cb7537c01eafb0221da3fff156.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--LMpZJmaY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/qwxgkm99sm6zmwffc59f.png)

æˆ‘ä»è°·æ­Œå­—ä½“ä¸­æŠ“å–äº†ä¸€ä¸ªå­—ä½“ï¼›ç„¶è€Œï¼Œåœ¨çœŸæ­£çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬è‡³å°‘ä¼šä¸‹è½½å­—ä½“ï¼Œè¿™æ ·ç”¨æˆ·å°±ä¸éœ€è¦è¿æ¥åˆ°äº’è”ç½‘ã€‚

## åˆå§‹åŒ–é¦–é€‰é¡¹çª—å£

æ­£å¦‚æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªæ•™ç¨‹ä¸­æ‰€åšçš„ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ª HTML é¡µé¢åŠ è½½åˆ°ä¸€ä¸ªæ–°çª—å£ä¸­ã€‚è®©æˆ‘ä»¬åœ¨`./static/preferences.html` :
åˆ›å»ºé¡µé¢

```
<body>
    <p class="notification">Here you're able to personalise the interface by picking the colors you'd like to see. The changes will be saved automatically upon window being closed</p>
    <div class="container">
    <div id="content" >
        <form action="">
            <button id="defaultValues">Reset</button>
            <p><span>Background</span> <label for="background"></label> <span>
                <input type="text" name="background" value="#FFFFFF"></span> 
            </p>
            <p><span>Border Color</span> <label for="border-color"></label> <span>
                <input type="text" name="border-color" value="#50C68A"></span> 
            </p>
            <p><span>Text Color</span> <label for="text-color"></label> <span>
                <input type="text" name="text-color" value="#232323"></span> 
            </p>
            <p><span>Sidebar Background</span> <label for="sidebar-color"></label> <span>
                <input type="text" name="sidebar-color" value="#2F3235"></span> 
            </p>
            <p><span>Sidebar Text</span> <label for="sidebar-text"></label> <span>
                <input type="text" name="sidebar-text" value="#939395"></span> 
            </p>
        </form>
    </div>
    </div>
    <script src="scripts/preferences.js"></script>
</body> 
```

Enter fullscreen mode Exit fullscreen mode

å½“èœå•æŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œè¿™ä¸ªé¡µé¢å¿…é¡»å¯åŠ¨ã€‚è®©æˆ‘ä»¬åœ¨`./components/Menu.js`
æ·»åŠ é‚£ä¸ªæŒ‰é’®

```
{
    label: app.getName(),
    submenu: [
        {
            label: 'Preferences',
            accelerator: 'cmd+,', // shortcut
            click: _ => {
                const htmlPath = path.join('file://', __dirname, '../static/preferences.html')
                let prefWindow = new BrowserWindow({ width: 500, height: 300, resizable: false })
                prefWindow.loadURL(htmlPath)
                prefWindow.show()
                // on window closed
            },
        },
    ]
} 
```

Enter fullscreen mode Exit fullscreen mode

å½“é€‰æ‹©`Preferences`æ—¶ï¼Œ`./static/preferences.html`é¡µé¢åŠ è½½åˆ°æ–°çš„æµè§ˆå™¨çª—å£ä¸­ã€‚è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬ç¡®ä¿ç”¨æˆ·ä¸èƒ½è°ƒæ•´å®ƒçš„å¤§å°ã€‚

åº”ç”¨ä¸€äº› CSSï¼Œæˆ‘ä»¬å¾—åˆ°è¿™ä¸ª:

[![](../Images/072ba098b5b9a66f07b30ed7a0f58b7e.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--uK1mvMeF--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/qowqq4vmxy5w9oiw25v4.png)

æ­£å¦‚ä¸Šé¢çš„ HTML ä¸­æ‰€æŒ‡å®šçš„ï¼Œé»˜è®¤é¢œè‰²åœ¨è¡¨å•ä¸­æ˜¯ç¡¬ç¼–ç çš„ã€‚å¯¹äº Javascriptï¼Œæˆ‘ä»¬å¸Œæœ›å°†è¿™äº›é¢œè‰²å€¼ä½œä¸ºæ ‡ç­¾çš„èƒŒæ™¯è‰²ï¼Œå½“ç”¨æˆ·è¾“å…¥æ–°çš„é¢œè‰²å€¼æ—¶ï¼Œå®ƒä»¬ä¼šåœ¨æ ‡ç­¾ä¸­å¾—åˆ°åæ˜ ã€‚æˆ‘ä»¬å¯ä»¥ç”¨é¢œè‰²é€‰æ‹©å™¨æ¥æ‰¾ä¹å­ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ä¿æŒå®ƒçš„åŸºæœ¬æ€§ï¼Œå‡è®¾ç”¨æˆ·æƒ³è¦è¾“å…¥ä»–ä»¬å–œæ¬¢çš„é¢œè‰²ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å€¾å¬è¾“å…¥çš„å˜åŒ–ã€‚

è¿™ä¸ªåŠŸèƒ½éœ€è¦æ”¾å…¥`./static/scripts/preferences.js`ã€‚

è®©æˆ‘ä»¬è®°ä½ HTML:

```
<p>
    <span>Sidebar Text</span> 
    <label for="sidebar-text"></label> <span>
    <input type="text" name="sidebar-text" value="#939395"></span> 
</p> 
```

Enter fullscreen mode Exit fullscreen mode

å› æ­¤ï¼Œjavascript å¯ä»¥ç®€å•åˆ°éå†è¾“å…¥å¹¶æ”¹å˜æ ‡ç­¾:

```
var inputs = document.getElementsByTagName('input')
for(var i = 0 ; i < inputs.length; i++){
    document.querySelector(`label[for="${inputs[i].name}"]`).style.backgroundColor = inputs[i].value
    inputs[i].onkeyup = e => {
        document.querySelector(`label[for="${e.target.name}"]`).style.backgroundColor = e.target.value
    }
} 
```

Enter fullscreen mode Exit fullscreen mode

ä»£ç éå†æ¯ä¸ªè¾“å…¥å…ƒç´ ï¼Œå°†å®ƒä»¬çš„å€¼ä½œä¸ºæ ‡ç­¾èƒŒæ™¯é¢œè‰²ï¼Œç„¶ååœ¨è¾“å…¥æ”¹å˜æ—¶é‡æ–°åº”ç”¨é¢œè‰²ã€‚

[![](../Images/2900c49e08b3624bae0b7c2b8ca360e4.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--igB-0O-3--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/5nf5rn33neezads3ace2.gif)

### ä¿å­˜é¢œè‰²é¦–é€‰é¡¹

è¿™ä¸ªçª—å£çš„æ„ä¹‰åœ¨äºï¼Œå½“åº”ç”¨ç¨‹åºå…³é—­æ—¶ï¼Œè¿™äº›é¢œè‰²ä»ç„¶å­˜åœ¨ï¼Œæ‰€ä»¥å®ƒä»¬å¿…é¡»è¢«å­˜å‚¨åœ¨æŸä¸ªåœ°æ–¹ã€‚ç”µå­ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå­˜å‚¨ç”¨æˆ·æ•°æ®çš„é€”å¾„ã€‚[æ–‡æ¡£](https://electronjs.org/docs/api/app)å£°æ˜æˆ‘ä»¬é€šè¿‡`electron.app.getPath('userData')`è®¿é—®å®ƒ

> ç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶çš„ç›®å½•ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥ç›®å½•æ˜¯é™„åŠ äº†åº”ç”¨ç¨‹åºåç§°çš„ appData ç›®å½•ã€‚

åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æˆ‘ä»¬çš„é¢œè‰²å­˜å‚¨ä¸º JSONã€‚æˆ‘ä»¬ä½¿ç”¨ä¸æˆ‘ä»¬åœ¨ç¬¬äºŒéƒ¨åˆ†ä¸­æ‰€åšçš„ä¸€æ ·çš„ä»æ¸²æŸ“è¿›ç¨‹åˆ°ä¸»è¿›ç¨‹æ¨¡å¼çš„æ¶ˆæ¯ä¼ é€’æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ”¶é›†æ‰€æœ‰çš„é¢œè‰²ï¼Œç„¶åå°†å®ƒä»¬å‘é€åˆ°ä¸»æµç¨‹ã€‚

```
let preferences = {};
for(var i = 0 ; i < inputs.length; i++){
    ...
    preferences[inputs[i].name] = inputs[i].value
    inputs[i].onkeyup = e => {
        preferences[e.target.name] = e.target.value
        ...
        ipcRenderer.send(PREFERENCE_SAVE_DATA_NEEDED, preferences)
    }
} 
```

Enter fullscreen mode Exit fullscreen mode

ç”¨æ‰€æœ‰é»˜è®¤é¢œè‰²å¡«å……`preferences`å¯¹è±¡ã€‚ç„¶åï¼Œæ¯å½“å…¶ä¸­ä¸€ä¸ªè¾“å…¥æ”¹å˜æ—¶ï¼Œç›¸åº”çš„å¯¹è±¡é”®ä¹Ÿä¼šæ”¹å˜ã€‚æœ€åï¼Œæˆ‘ä»¬ç”¨`preferences`å¯¹è±¡ä½œä¸ºæ¶ˆæ¯ä½“å‘ä¸»æµç¨‹å‘é€ä¸€æ¡`PREFERENCE_SAVE_DATA_NEEDED`æ¶ˆæ¯ã€‚

åœ¨`./components/Menu.js`çš„é¡¶éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬æ¶ˆæ¯å¹¶æ”¶é›†å…¶æ•°æ®

```
let inputs;
ipcMain.on(PREFERENCE_SAVE_DATA_NEEDED, (event, preferences) => {
    inputs = preferences
}) 
```

Enter fullscreen mode Exit fullscreen mode

æœ€åï¼Œå¯¹äºèœå•ï¼Œæˆ‘åœ¨å‡ ä¹æ‰€æœ‰çš„ mac åº”ç”¨ä¸­çœ‹åˆ°çš„ä¸€ä¸ªæ¨¡å¼æ˜¯ï¼Œä¸éœ€è¦â€œä¿å­˜â€æŒ‰é’®å°±å¯ä»¥ä¿å­˜åå¥½è®¾ç½®ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨çª—å£å…³é—­æ—¶é‡‡å–è¡ŒåŠ¨æ¥åšåŒæ ·çš„äº‹æƒ…ã€‚

åœ¨èœå•é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨çª—å£`close`ä¸Šç¼–å†™é€»è¾‘ã€‚

```
{
    label: 'Preferences',
    accelerator: 'cmd+,', // shortcut
    click: _ => {
        ....
        prefWindow.on('close', function () {
            prefWindow = null 
            userDataPath = app.getPath('userData');
            filePath = path.join(userDataPath, 'preferences.json')
            inputs && fs.writeFileSync(filePath, JSON.stringify(inputs));
            window.webContents.send(PREFERENCE_SAVED, inputs); 
        })

    },
} 
```

Enter fullscreen mode Exit fullscreen mode

`userDataPath`ä½äº`/Users/YourUserName/Library/Application Support/Electron/`å¤„ï¼Œåœ¨é‚£é‡Œä½ ä¼šå‘ç°æˆ‘ä»¬çš„`preferences.json`ï¼Œå®ƒä¿å­˜ç€é¢œè‰²ã€‚

å®Œæˆåï¼Œ`PREFERENCE_SAVED`æ¶ˆæ¯è¢«å‘é€åˆ°æˆ‘ä»¬æœ€åˆçš„`window`çš„æ¸²æŸ“è¿›ç¨‹ã€‚

ç°åœ¨æˆ‘ä»¬éœ€è¦ä»`preferences.json`æ–‡ä»¶ä¸­è¯»å–é¢œè‰²ï¼Œå¹¶å°†å®ƒä»¬åº”ç”¨åˆ° UI ä¸­ã€‚

é¦–å…ˆï¼Œè®©æˆ‘ä»¬åœ¨`./static/scripts/preferences.js`ä¸­åš

```
const fs = require('fs')
let userDataPath = remote.app.getPath('userData');
let filePath = path.join(userDataPath, 'preferences.json')
let usersStyles =  JSON.parse( fs.readFileSync(filePath) )

for(let style in usersStyles) {
    document.querySelector(`input[name="${style}"]`).value = usersStyles[style]
    document.querySelector(`label[for="${style}"]`).style.backgroundColor = usersStyles[style]
} 
```

Enter fullscreen mode Exit fullscreen mode

è¿™ä¸ªè¿‡ç¨‹æ˜¯ç›¸åçš„ã€‚æˆ‘ä»¬ä»`preferences.json`ä¸­è¯»å–ä¿å­˜çš„æ•°æ®ï¼Œéå†é¢œè‰²ï¼Œå°†å®ƒä»¬ä½œä¸ºè¾“å…¥å€¼å¹¶æ ‡è®°èƒŒæ™¯é¢œè‰²ã€‚

#### é‡è®¾é¢œè‰²ã€‚

æˆ‘ä»¬æƒ³åœ¨ HTML è¡¨å•ä¸­ç¡¬ç¼–ç é¢œè‰²çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•æ—¶å€™ç”¨ javascript ä¸­çš„`defaultValue`è®¿é—®å®ƒä»¬ã€‚æˆ‘ä»¬å°†ç‚¹å‡»é‡ç½®æŒ‰é’®:

```
<button id="defaultValues">Reset</button> 
```

Enter fullscreen mode Exit fullscreen mode

å•å‡»æ—¶ï¼Œå¾ªç¯è¾“å…¥å­—æ®µï¼Œå¹¶ç›¸åº”åœ°åº”ç”¨é»˜è®¤å€¼ã€‚

```
document.getElementById('defaultValues').addEventListener('click', function(e) { // reset
    e.preventDefault();
    preferences = {};
    for(var i = 0 ; i < inputs.length; i++){
        preferences[inputs[i].name] = inputs[i].defaultValue
        document.querySelector(`label[for="${inputs[i].name}"]`).style.backgroundColor = inputs[i].defaultValue
        inputs[i].value = inputs[i].defaultValue
    }
    ipcRenderer.send(PREFERENCE_SAVE_DATA_NEEDED, preferences)
} ) 
```

Enter fullscreen mode Exit fullscreen mode

ä¸Šè¿°ä»£ç æ‰§è¡Œä»¥ä¸‹æ“ä½œ

1.  é‡ç½®`preferences`å¯¹è±¡ã€‚
2.  ç”¨è¾“å…¥`defaultValue`é‡æ–°å¡«å……`preferences`å¯¹è±¡ã€‚
3.  é€šè¿‡è¾“å…¥`defaultValue`æ”¹å˜æ ‡ç­¾çš„èƒŒæ™¯é¢œè‰²ã€‚
4.  ç”¨è¾“å…¥`defaultValue`æ”¹å˜è¾“å…¥å€¼ã€‚
5.  å‘ä¸»è¿›ç¨‹å‘é€æ¶ˆæ¯ã€‚

## å°†ä¿å­˜çš„é¢œè‰²åº”ç”¨åˆ°ä¸»çª—å£

å…³é—­åå¥½è®¾ç½®çª—å£æ—¶ï¼Œä¼šå‘é€ä¸€æ¡æ¶ˆæ¯ã€‚

```
window.webContents.send(PREFERENCE_SAVED, inputs); 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬å¯ä»¥åœ¨ä¸»çª—å£ä¸­æ”¶å¬å®ƒï¼Œå¹¶ä½¿ç”¨ä¸æ¶ˆæ¯ä¸€èµ·å‘é€çš„å†…å®¹ã€‚

åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è°ˆè°ˆ CSSã€‚

CSS ä¸­æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯å˜é‡:

```
:root {
    --background: #FFFFFF;
    --border-color: #50C68A;
    --text-color: #232323;
    --sidebar-color: #2F3235;
    --sidebar-text: #939395;
} 
```

Enter fullscreen mode Exit fullscreen mode

æ¯å½“æˆ‘ä»¬ç”¨ javascript æ”¹å˜è¿™äº›å˜é‡æ—¶ï¼Œåº”ç”¨è¿™äº›å˜é‡çš„æ¯ä¸ªå…ƒç´ çš„å¤–è§‚éƒ½ä¼šæ”¹å˜ã€‚

æˆ‘ä»¬å¯ä»¥åœ¨`./static/scripts/index.js`
åšè¿™ä»¶äº‹

```
 let userDataPath = remote.app.getPath('userData');
    let filePath = path.join(userDataPath, 'preferences.json')

    let usersStyles  = JSON.parse( fs.readFileSync(filePath) )

    for(let style in usersStyles) {
        document.documentElement.style.setProperty(`--${style}`, usersStyles[style]);
    }
    ipcRenderer.on(PREFERENCE_SAVED, function (event, inputs) {
        for(let style in inputs) {
            document.documentElement.style.setProperty(`--${style}`, inputs[style]);
        }
    }); 
```

Enter fullscreen mode Exit fullscreen mode

è¿™å°±æ˜¯äº†ã€‚ç°åœ¨ï¼Œä½¿ç”¨è¿™äº›å˜é‡çš„æ¯ä¸ªå…ƒç´ éƒ½å°†è¢«è‡ªåŠ¨æ›´æ”¹ã€‚

æœ€ç»ˆçš„ç»“æœæ˜¯è¿™æ ·çš„

[![](../Images/02560c61613964047cc85227138daca7.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--w4zo7DaR--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/rrd1k2589ruszh5t7vxf.gif)

**ä½ å¯ä»¥åœ¨ GitHub çš„**å…‹éš†[åº“](https://github.com/aurelkurtula/Texty/tree/part3)

## ç»“è®º

è¿™ä¸ªç³»åˆ—å°±åˆ°è¿™é‡Œã€‚å½“æˆ‘è¯•å›¾å¼„æ¸…æ¥šæœ‰å¾ˆå¤šä¸œè¥¿ä¸è§äº†ã€‚ä»£ç è‚¯å®šå¯ä»¥é‡æ„ï¼Œå¯ä»¥æ”¹è¿›å­˜å‚¨ï¼Œå¹¶ä¸”ä¸å­˜åœ¨é”™è¯¯å¤„ç†ã€‚

å½“æˆ‘åœ¨åšè¿™ä¸ªæ¼”ç¤ºæ—¶ï¼Œæˆ‘æƒ³åˆ°äº†æˆ‘å½“å‰çš„å†™ä½œå·¥ä½œæµç¨‹ï¼Œå®ƒç”±ä½œä¸º GitLab wiki æ‰˜ç®¡çš„[èŠ‚ç‚¹ç”Ÿæˆçš„ markdown é¡µé¢ç»„æˆï¼Œæˆ‘è§‰å¾—æ·»åŠ ä¸€ä¸ªç”µå­ç•Œé¢å¯èƒ½ä¼šä½¿è®°ç¬”è®°çš„è¿‡ç¨‹ç¨å¾®é¡ºç•…ä¸€äº›ã€‚è¿™å¯èƒ½æ˜¯æˆ‘çš„ä¸‹ä¸€ä¸ªä¸ªäººé¡¹ç›®ã€‚](https://dev.to/aurelkurtula/using-git-wiki-instead-of-evernote-to-organize-personal-content-e9d)

å¸Œæœ›ä½ ä¹Ÿå—åˆ°åŒæ ·çš„å¯å‘ğŸ’¡

[![aurelkurtula image](../Images/e1a1b48b6a401b86d5a91c8729e26a35.png)](/aurelkurtula) [## åœ¨ electronic ä¸­åˆ›å»ºæ–‡æœ¬ç¼–è¾‘å™¨:ç¬¬ 1 éƒ¨åˆ†-è¯»å–æ–‡ä»¶

### aurel Kurt ula 9 æœˆ 5 æ—¥ 182 åˆ†é’Ÿé˜…è¯»

#electron #javascript #node](/aurelkurtula/creating-a-text-editor-in-electron-reading-files-13b8)[![aurelkurtula image](../Images/e1a1b48b6a401b86d5a91c8729e26a35.png)](/aurelkurtula) [## åœ¨ electronic ä¸­åˆ›å»ºæ–‡æœ¬ç¼–è¾‘å™¨:ç¬¬ 2 éƒ¨åˆ†-ç¼–å†™æ–‡ä»¶

### aurel Kurt ula 9 æœˆ 9 æ—¥ 187 åˆ†é’Ÿé˜…è¯»

#electron #javascript #node](/aurelkurtula/creating-a-text-editor-in-electron-part-2---writing-files-l80)