# åˆé‡‘å¼€å‘æ—¥è®°â€”ç¬¬äºŒéƒ¨åˆ†

> åŸæ–‡:[https://dev.to/suprnova32/alloyci-dev-diarypart2-1jfl](https://dev.to/suprnova32/alloyci-dev-diarypart2-1jfl)

# [](#structuring-a-new-phoenix%C2%A0project)æ„å»ºæ–°çš„å‡¤å‡°è®¡åˆ’

[![Photo by valor kopeny on Unsplash](../Images/df7a92558060b396198b2e13611739cc.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--lkQ11QmD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://images.unsplash.com/photo-1440613740265-a37aa8a61131%3Fixlib%3Drb-0.3.5%26ixid%3DeyJhcHBfaWQiOjEyMDd9%26s%3D78b205db80905893f41d2f694258e376%26auto%3Dformat%26fit%3Dcrop%26w%3D2674%26q%3D80)

è¿™ç¯‡åšå®¢æ–‡ç« æ˜¯è¯¦ç»†ä»‹ç» AlloyCI å¼€å‘è¿‡ç¨‹çš„ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚ä¹‹å‰çš„æ¡ç›®æœ‰:

*   [ç¬¬ä¸€éƒ¨åˆ†:å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®](https://dev.to/supernova32/alloyci-dev-diary---part-1--1ai9)

* * *

å¦‚æœæ‚¨æ¥è‡ª Rails èƒŒæ™¯ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç° Phoenix é¡¹ç›®çš„æ–‡ä»¶å¤¹ç»“æ„æœ‰ç‚¹å¥‡æ€ªï¼Œå°¤å…¶æ˜¯åœ¨ 1.3 ä¸­çš„æ›´æ”¹ä¹‹åã€‚ä½†æ˜¯ä¸è¦å› æ­¤è€Œé€€ç¼©ï¼Œè¿™ä¸ªç»“æ„å®é™…ä¸Šå¾ˆæœ‰æ„ä¹‰ï¼Œç‰¹åˆ«æ˜¯æ–°çš„ 1.3 ç»“æ„ã€‚

ä¸åƒ Railsï¼Œæ²¡æœ‰`app/`æ–‡ä»¶å¤¹æ¥å­˜æ”¾ä½ çš„å¤§éƒ¨åˆ†ä»£ç ã€‚Phoenix 1.3 é¡¹ç›®éµå¾ªå‡ ä¹æ‰€æœ‰å¸¸è§„ Elixir é¡¹ç›®çš„ç»“æ„ï¼Œè¿™æ„å‘³ç€æ‚¨çš„å¤§éƒ¨åˆ†ä»£ç å°†ä½äº`lib/my_app`æ–‡ä»¶å¤¹ä¸­ã€‚

æ­£å¦‚ä½ ç°åœ¨å¯èƒ½çŸ¥é“çš„ï¼ŒPhoenix 1.3 æ”¹å˜äº†é¡¹ç›®çš„ç»“æ„ã€‚åœ¨è¿™ä¸ªæ”¹å˜ä¹‹å‰ï¼Œä½ çš„å¤§éƒ¨åˆ†ä»£ç éƒ½åœ¨`web/`ä¹‹ä¸‹ï¼Œå¾ˆå°‘æˆ–è€…æ²¡æœ‰è¿›ä¸€æ­¥çš„ç»„ç»‡ã€‚ä½ ä¼šæœ‰ä¸€ä¸ªæ¨¡å‹ç›®å½•ï¼Œåœ¨é‚£é‡Œä½ ä¼šæ”¾ç½®ä½ æ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸ç”¨è€ƒè™‘å®ƒä»¬æ˜¯å¦‚ä½•ç›¸äº’ä½œç”¨çš„ã€‚è¿™ä¸ªæ–‡ä»¶å¤¹ä¼šå˜å¾—å¾ˆå¤§ï¼Œå¾ˆå¿«ã€‚æ­¤å¤–ï¼Œåç§° model ä¼¼ä¹æ„å‘³ç€ä¸€ä¸ªå¯¹è±¡ï¼Œä½†åœ¨ Elixir ä¸­ï¼Œæ²¡æœ‰å¯¹è±¡ï¼Œå› æ­¤å°†æ•°æ®è®¿é—®å±‚å­˜å‚¨åœ¨åä¸ºâ€œmodelsâ€çš„æ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰ä»€ä¹ˆä¸Šä¸‹æ–‡æ„ä¹‰ã€‚

## [](#data-amp%C2%A0contexts)æ•°æ®&è¯­å¢ƒ

é»˜è®¤æƒ…å†µä¸‹ï¼ŒPhoenix 1.3 ä¼šå¼•å¯¼æ‚¨ä»¥æ›´å¥½çš„æ–¹å¼ç»„ç»‡ä»£ç ã€‚æ§åˆ¶å™¨ã€è§†å›¾ã€æ¨¡æ¿æ”¾åœ¨`lib/my_app_web`ä¸‹ï¼Œæ•°æ®åº“è¿ç§»å’Œç›¸å…³æ–‡ä»¶æ”¾åœ¨`priv/repo`ä¸‹ï¼Œè€Œä½ çš„é•¿ç”Ÿä¸è€è¯ä»£ç çš„å…¶ä½™éƒ¨åˆ†å°†æ”¾åœ¨`lib/my_app`ä¸‹ã€‚è¿™æ˜¯åŸºæœ¬çš„è®¾ç½®ï¼Œæ‚¨å¯ä»¥å¯¹å…¶è¿›è¡Œè°ƒæ•´ï¼Œå¹¶æ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œæ›´æ”¹ã€‚ä½ æœ‰å®Œå…¨çš„è‡ªç”±å»ç»„ç»‡ä½ çš„ä»£ç ã€‚

ç”±äºæˆ‘åœ¨ Phoenix 1.3 å®Œå…¨å‘å¸ƒä¹‹å‰å°±å¼€å§‹ç¼–å†™ AlloyCIï¼Œæ‰€ä»¥æœ‰äº›æ–‡ä»¶å¤¹ç»“æ„ä¸æœ€æ–°çš„ 1.3 ç”Ÿæˆå™¨åˆ›å»ºçš„ä¸åŒã€‚æˆ‘æ›´å–œæ¬¢ AlloyCI ç°åœ¨çš„ç»“æ„ï¼Œå› ä¸ºæˆ‘çœŸçš„ä¸å–œæ¬¢ä»–ä»¬æŠŠ`web/`æ–‡ä»¶å¤¹é‡å‘½åä¸º`alloy_ci_web/`çš„æ–¹å¼ï¼Œä»¥åŠé‡Œé¢çš„æ‰€æœ‰ä¸œè¥¿ä»`AlloyCi.Web.XXX`é‡å‘½åä¸º`AlloyCiWeb.XXX`ã€‚æˆ‘çœŸçš„æ›´å–œæ¬¢åœ¨æ¨¡å—åç§°ä¸­çš„åˆ†éš”ï¼Œä»¥åŠåœ¨ web æ–‡ä»¶å¤¹åç§°ä¸­ä¸é‡å¤åº”ç”¨ç¨‹åºåç§°çš„äº‹å®ã€‚ä¸è¿‡ï¼Œç”±äº Phoenix æä¾›çš„çµæ´»æ€§ï¼Œæˆ‘ä¸éœ€è¦éµå¾ªæƒ¯ä¾‹ã€‚

æ— è®ºå¦‚ä½•ï¼Œå…³äºç»“æ„å˜åŒ–çš„æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯ï¼ŒPhoenix ç°åœ¨æŒ‡å¯¼æ‚¨ä½¿ç”¨ä¸Šä¸‹æ–‡æ¥æ„é€ æ‚¨çš„æ•°æ®è®¿é—®å±‚ã€‚

ä»¥ AlloyCI ä¸ºä¾‹ï¼Œæˆ‘ä»¬æœ‰`Accounts`ä¸Šä¸‹æ–‡(åœ¨`lib/alloy_ci/accounts`æ–‡ä»¶å¤¹ä¸‹)ï¼Œå…¶ä¸­æœ‰`User`ã€`Authentication`å’Œ`Installation`æ¨¡å¼ã€‚è¿™ 3 ç§æ¨¡å¼å¯†åˆ‡ç›¸å…³ï¼Œå±äºåŒä¸€ä¸ªä¸šåŠ¡é€»è¾‘ï¼Œå³è´¦æˆ·çš„å¤„ç†ã€‚

å¦‚æœæ‚¨ä»”ç»†æŸ¥çœ‹ accounts æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼Œæ‚¨ä¼šå‘ç°é™¤äº†`changeset`å‡½æ•°ä¹‹å¤–ï¼Œæ¨¡å¼æ–‡ä»¶ä¸­æ²¡æœ‰å…¶ä»–å‡½æ•°ã€‚è¿™æ„å‘³ç€æˆ‘éœ€è¦ç›´æ¥é€šè¿‡`Ecto`æ¥æ“ä½œæ•°æ®åº“æ•°æ®(ä¸æ¨è),æˆ–è€…æˆ‘éœ€è¦ä¸€ä¸ª API è¾¹ç•Œæ¥å…è®¸æˆ‘åœ¨è´¦æˆ·ç›¸å…³çš„æ¨¡å¼ä¸Šæ‰§è¡Œæ“ä½œã€‚

è¿™å°±æ˜¯`AlloyCi.Accounts`æ¨¡å—å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚å¦‚æœ AlloyCI éœ€è¦å¯¹ä¸å¸æˆ·ç›¸å…³çš„ä»»ä½•æ¨¡å¼æ‰§è¡Œæ“ä½œï¼Œè¿™ä¸ªæ¨¡å—å°±æ˜¯ alloy ci ä¸ä¹‹äº¤äº’çš„è¾¹ç•Œã€‚è¯¥æ¨¡å—çš„æ‰€æœ‰å…¬å…±å‡½æ•°æä¾›äº†ä¸€ç§æ“ä½œæ•°æ®çš„ç®€å•æ–¹æ³•ï¼ŒåŒæ—¶é€šè¿‡é—´æ¥å±‚æä¾›äº†å®‰å…¨æ€§ã€‚

è¿™å°±æ˜¯ä¸Šä¸‹æ–‡çš„ç›®çš„ã€‚å®ƒä»¬åœ¨æ‚¨çš„æ•°æ®å±‚å’Œæ‚¨çš„ä¸šåŠ¡é€»è¾‘ä¹‹é—´æä¾›äº†ä¸€ä¸ªè¾¹ç•Œï¼Œå¹¶å…è®¸æ‚¨æ‹¥æœ‰ä¸€ä¸ªæ˜ç¡®çš„å¥‘çº¦æ¥å‘Šè¯‰æ‚¨å¦‚ä½•æ“ä½œæ‚¨çš„æ•°æ®ã€‚å®ƒè¿˜èƒ½è®©ä½ ç‹¬ç«‹äºåŸƒå…‹æ‰˜ã€‚æ¯”æ–¹è¯´ï¼Œåœ¨æœªæ¥ï¼Œä½ æƒ³ä» Ecto æ¢æˆâ€œæœ€æ–°ã€æœ€é…·çš„ DB é©±åŠ¨ç¨‹åºâ€ã€‚å¦‚æœä½ ä¸ä½¿ç”¨æŠ½è±¡å±‚ï¼Œæ¯”å¦‚ä¸Šä¸‹æ–‡ï¼Œä½ å°†ä¸å¾—ä¸é‡æ„ä»£ç åº“ä¸­ä½¿ç”¨ Ecto ä¸æ•°æ®å±‚é€šä¿¡çš„æ¯ä¸ªåŠŸèƒ½ã€‚ä½†æ˜¯ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ä¸Šä¸‹æ–‡ä¸­é‡æ„ä»£ç ã€‚

## [](#data-presentation)æ•°æ®å±•ç¤º

å®é™…å°†ä½ çš„æ•°æ®å‘ˆç°ç»™ç”¨æˆ·çš„ä»£ç å¯ä»¥å­˜åœ¨äº`lib/my_app/web`æˆ–`lib/my_app_web`æ–‡ä»¶å¤¹ä¸‹ï¼Œè¿™å–å†³äºä½ æƒ³å¦‚ä½•æ„å»ºå®ƒ(è‡ªåŠ¨ç”Ÿæˆå™¨å°†é»˜è®¤ä¸º`lib/my_app_web`ï¼Œä½†æˆ‘æ›´å–œæ¬¢å‰è€…)ã€‚

åœ¨è¿™é‡Œä½ å¯ä»¥æ‰¾åˆ°ä½ çš„æ§åˆ¶å™¨ã€è§†å›¾ã€æ¨¡æ¿å’Œé€šé“æ‰€åœ¨çš„æ–‡ä»¶å¤¹ã€‚è®©æˆ‘ä»¬ä»è¡¨ç¤ºå±‚å¼€å§‹ã€‚

### [](#views-amp-templates)è§†å›¾&æ¨¡æ¿

å¦‚æœæ‚¨æ¥è‡ª Rails èƒŒæ™¯ï¼Œæ‚¨å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ªç»„ä»¶æ¥å‘ˆç°æ•°æ®ï¼Œè€Œåœ¨ Rails ä¸­æ‚¨åªéœ€è¦ views æ–‡ä»¶å¤¹ã€‚åœ¨ Phoenix ä¸­,â€œè§†å›¾â€ä¸æ˜¯ç”±æ¨¡æ¿åŒ–çš„ HTML æ–‡ä»¶ç»„æˆçš„ï¼Œè€Œæ˜¯å¸¸è§„çš„ Elixir æ¨¡å—ã€‚è¿™äº›æ¨¡å—å¯ä»¥å¸®åŠ©æ‚¨ä¸æ¨¡æ¿å…±äº«ä»£ç ï¼Œå¹¶å®ç°ä¸ Railsâ€œè§†å›¾åŠ©æ‰‹â€ç›¸ä¼¼çš„ç›®çš„ï¼Œä½†é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›æ¨¡å—ç‰¹å®šäºå•ä¸ªæ§åˆ¶å™¨(ä¸åŠ è½½å…¶ä»–è§†å›¾ï¼Œä¸åƒ Rails åŠ è½½æ‰€æœ‰è§†å›¾åŠ©æ‰‹ï¼Œä¸ç®¡è°ƒç”¨å“ªä¸ªæ§åˆ¶å™¨)ã€‚

è¿™ç§åˆ†ç¦»ä½¿å¾—åœ¨å‘ˆç°æ•°æ®æ‰€éœ€çš„ç›¸ä¼¼åŠ©æ‰‹å‡½æ•°ä¸Šä½¿ç”¨ç›¸åŒçš„ç­¾åå˜å¾—æ›´åŠ å®¹æ˜“(è€Œä¸ä¼šçœŸæ­£ä½¿å®ƒä»¬è¿‡è½½)ï¼Œè¿™å–å†³äºè°ƒç”¨çš„æ˜¯å“ªä¸ªæ§åˆ¶å™¨ï¼Œä»è€Œç®€åŒ–äº†æ‚¨çš„ä»£ç ã€‚

æ¨¡æ¿å°±æ˜¯ä½ çš„ HTML ä»£ç æ‰€åœ¨çš„åœ°æ–¹ã€‚æ¨¡æ¿æ–‡ä»¶ä¿å­˜ä¸º`*.html.eex`æ–‡ä»¶(æ„æ€æ˜¯åµŒå…¥çš„è¯å‰‚)ï¼Œä¸`erb`æ–‡ä»¶éå¸¸ç›¸ä¼¼ã€‚è¯­æ³•æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œä½†æ˜¯æ‚¨ç¼–å†™çš„ä¸æ˜¯ Ruby ä»£ç ï¼Œè€Œæ˜¯ Elixir ä»£ç ğŸ˜„

Phoenix å’Œ Rails ä¹‹é—´ä¸€ä¸ªéå¸¸é‡è¦çš„åŒºåˆ«æ˜¯å¦‚ä½•åœ¨æ§åˆ¶å™¨å’Œæ¨¡æ¿ä¹‹é—´å…±äº«ä¿¡æ¯ã€‚åœ¨ Rails ä¸­ï¼Œç”¨`@something`å£°æ˜ä¸€ä¸ªå®ä¾‹å˜é‡å°±è¶³å¤Ÿäº†ï¼Œå®ƒå°†å¯¹æ¨¡æ¿/è§†å›¾å¯ç”¨ã€‚
è€ƒè™‘åˆ° Elixir çš„åŠŸèƒ½ç‰¹æ€§ï¼Œåœ¨ Phoenix ä¸­ï¼Œæ‚¨éœ€è¦æ˜¾å¼åœ°å°†æ‚¨å¸Œæœ›æä¾›çš„ä¿¡æ¯ä¼ é€’ç»™ render å‡½æ•°ä¸­çš„è§†å›¾ã€‚è¿™äº›è¢«ç§°ä¸ºåˆ†é…ã€‚ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼Œè¿™é‡Œæ˜¯`PipelineController` :
çš„`show`åŠ¨ä½œ

```
def show(conn, %{"id" => id, "project_id" => project_id}, current_user, _claims) do
  with %Pipeline{} = pipeline <- Pipelines.show_pipeline(id, project_id, current_user) do
    builds = Builds.by_stage(pipeline)
    render(conn, "show.html", builds: builds, pipeline: pipeline, current_user: current_user)
  else
    _ ->
      conn
      |> put_flash(:info, "Project not found")
      |> redirect(to: project_path(conn, :index))
  end
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

â€œshow.htmlâ€ä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯èµ‹å€¼ç¬¦ï¼Œå› æ­¤ä¸ show åŠ¨ä½œç›¸å…³çš„æ¨¡æ¿å¯ç”¨çš„å˜é‡æ˜¯`builds`ã€`pipeline`å’Œ`current_user`ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ pipeline info å¤´çš„ä»£ç ç‰‡æ®µä¸­çœ‹åˆ°å¦‚ä½•ä½¿ç”¨å®ƒä»¬çš„ç¤ºä¾‹:

```
<div class="page-head">
  <h2 class="page-head-title">
    <%= @pipeline.project.owner %>/<%= @pipeline.project.name %>
  </h2>
  <nav aria-label="breadcrumb" role="navigation">
    <!-- Breadcrumb -->
    <ol class="breadcrumb page-head-nav">
      <li class="breadcrumb-item">
        <%= ref_icon(@pipeline.ref) %>
        <%= clean_ref(@pipeline.ref) %>
      </li>
      <li class="breadcrumb-item">
        <%= icon("github") %>
        <%= sha_link(@pipeline) %>
      </li>
      <li class="breadcrumb-item">
        <%= icon("book") %>
        <%= pretty_commit(@pipeline.commit["message"]) %>
      </li>
      <%= if @pipeline.commit["pr_commit_message"] do %>
        <li class="breadcrumb-item">
          <%= icon("code-fork") %>
          <%= @pipeline.commit["pr_commit_message"] %>
        </li>
      <% end %>
      <li class="breadcrumb-item">
        <%= icon("tasks") %>
        <%= String.capitalize(@pipeline.status) %>
        <%= status_icon(@pipeline.status) %>
      </li>
    </ol>
  </nav>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸€æ—¦å˜é‡è¢«èµ‹å€¼ï¼Œå®ƒå°±å¯ä»¥é€šè¿‡`@var_name`è¿›å…¥æ¨¡æ¿ï¼Œå°±åƒ Rails ä¸€æ ·ã€‚åœ¨ä¸æ§åˆ¶å™¨åŒåçš„è§†å›¾æ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°(åœ¨æœ¬ä¾‹ä¸­ä¸º`pipeline_view.ex`)ç«‹å³å¯ç”¨äºæ¨¡æ¿ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`sha_link/1`åœ¨ GitHub ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘ç‰¹å®šæäº¤çš„ HTML é“¾æ¥ã€‚

### [](#controllers)æ§åˆ¶å™¨

åœ¨ç»“æ„ä¸Šï¼ŒPhoenix æ§åˆ¶å™¨ä¸ Rails æ§åˆ¶å™¨éå¸¸ç›¸ä¼¼ï¼Œä¸»è¦åŒºåˆ«å¦‚ä¸Šæ‰€è¿°ã€‚å½“ç”±åŠ©æ‰‹å·¥å…·ç”Ÿæˆæ—¶ï¼Œå®ƒä»¬å°†å…·æœ‰ä¸ Rails å¯¹åº”éƒ¨åˆ†ç›¸åŒçš„`index`ã€`show`ã€`edit`ã€`update`å’Œ`delete`åŠ¨ä½œã€‚å°±åƒ Rails æ§åˆ¶å™¨ä¸€æ ·ï¼Œæ‚¨å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªå‡½æ•°å¹¶è¿æ¥ä¸€ä¸ªè·¯ç”±æ¥å®šä¹‰æ‚¨æƒ³è¦çš„ä»»ä½•åŠ¨ä½œã€‚

### [](#channels)é€šé“

Phoenix é€šé“ç”¨äºé€šè¿‡ web å¥—æ¥å­—ä¸ Web å®¢æˆ·ç«¯é€šä¿¡ã€‚å®ƒä»¬ç±»ä¼¼äº Rails ä¸­çš„ ActionCableï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼Œæ€§èƒ½æ›´å¥½ã€‚åœ¨ AlloyCI ä¸­ï¼Œå®ƒä»¬ç”¨äºå®æ—¶æ¨é€æ„å»ºæ—¥å¿—çš„è¾“å‡ºï¼Œå¹¶å‘ˆç°ä¸€æ®µé¢„æ ¼å¼åŒ–çš„ HTML ä»£ç ä»¥æ˜¾ç¤ºç”¨æˆ·çš„å­˜å‚¨åº“(å…³äº AlloyCI å¦‚ä½•ä½¿ç”¨é€šé“çš„æ›´å¤šä¿¡æ¯å°†åœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­è®¨è®º)ã€‚

### [](#routes)è·¯çº¿

è²å°¼å…‹æ–¯çš„è·¯çº¿å®šä¹‰æœ‰ç‚¹ç±»ä¼¼äºé“è·¯è·¯çº¿ã€‚æœ‰äº›è¯­æ³•æ˜¯ä¸åŒçš„ï¼Œä½†å®ƒæ˜¯ç«‹å³å¯è¯†åˆ«çš„ï¼Œæ„Ÿè§‰å¾ˆç†Ÿæ‚‰ã€‚çœ‹çœ‹ AlloyCI:
ä¸Šæ˜¯å¦‚ä½•å®šä¹‰é¡¹ç›®è·¯çº¿çš„

```
scope "/", AlloyCi.Web do
...
  resources "/projects", ProjectController do
    resources("/pipelines", PipelineController, only: [:create, :delete, :show])

    resources("/builds", BuildController, only: [:show, :create]) do
      get("/artifact", BuildController, :artifact, as: :artifact)
      post("/artifact/keep", BuildController, :keep_artifact, as: :keep_artifact)
    end

    resources("/badge/:ref", BadgeController, only: [:index])
  end
...
end 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“è°ˆåˆ°è·¯çº¿æ—¶ï¼ŒPhoenix å’Œ Rails ä¹‹é—´çš„çœŸæ­£åŒºåˆ«æ˜¯ä½¿ç”¨æ’å¤´æ—¶è·å¾—çš„åŠŸç‡ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„æ–‡ç« ä¸­è¯¦ç»†è®¨è®ºå®ƒä»¬ã€‚

* * *

ç°åœ¨ä½ çŸ¥é“äº†ã€‚è¿™æ˜¯å‡¤å‡°è®¡åˆ’çš„åŸºæœ¬æ¶æ„ã€‚è¿˜æœ‰ä¸€äº›æˆ‘ä»¬åœ¨è¿™é‡Œæ²¡æœ‰æ¶‰åŠçš„ç»„ä»¶ï¼Œæ¯”å¦‚æ’å¤´æˆ–åå°å·¥ä½œã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„åšå®¢æ–‡ç« ä¸­è®¨è®ºè¿™äº›é«˜çº§ä¸»é¢˜ã€‚