# Java 10 çš„æ–°ç‰¹æ€§

> åŸæ–‡:[https://dev.to/jeetmp3/whats-new-in-java-10-43hf](https://dev.to/jeetmp3/whats-new-in-java-10-43hf)

æ‰€ä»¥ç»ˆäºç­‰å®Œäº†ï¼ŒJava 10 ç°åœ¨ GA äº†ã€‚è¿™ä¸ªå»ºç­‘çš„é…·åŠŸèƒ½å·²ç»åœ¨è®¨è®ºä¸­äº†ã€‚æ²¡é”™ï¼Œæˆ‘è¯´çš„å°±æ˜¯`var`ã€‚åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å°†å’Œå…¨èƒ½çš„`var`ä¸€èµ·è®¨è®ºä¸€äº›æ–°ç‰¹æ€§ã€‚

### [](#1-optionalorelsethrow)1ã€‚å¯é€‰çš„# orElseThrow()

`Optional.get()`çš„åŒä¹‰è¯ä½†æ›´ç›´è§‚ã€‚å®ƒå°†æŠ›å‡º`java.util.NoSuchElementException`ä¸`get()`ç›¸åŒï¼Œä½†æ˜¯æ¸…æ¥šåœ°çŸ¥é“å¦‚æœå€¼ä¸åœ¨é‚£é‡Œï¼Œæ–¹æ³•å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥å¼€å‘è€…ä¹Ÿå°†è€ƒè™‘å¤„ç†å¼‚å¸¸æƒ…å†µã€‚

```
class OptionalDemo {
    public void perform() {
        Optional<String> result = calculate();
        // It'll throw the exception 
        String result1 = result.get();

        // It'll also throw the exception but by it's name
        // developer might think of handling the exception
        String result1 = result.orElseThrow();
    }

    public Optional<String> calculate() {
        return Optional.empty();
    }
} 
```

### [](#2-copyof-in-list-set-and-map)2ã€‚åœ¨åˆ—è¡¨ã€é›†åˆå’Œæ˜ å°„ä¸­å¤åˆ¶ Of()

åœ¨åˆ—è¡¨ã€é›†åˆå’Œæ˜ å°„ä¸­æ·»åŠ äº† copyOf()ï¼Œä»¥ä¾¿ä»ç»™å®šé›†åˆåˆ›å»º unmodifiableCollections()ã€‚è¯¥æ–¹æ³•æ£€æŸ¥é›†åˆæ˜¯å¦å·²ç»æ˜¯ç±»å‹ä¸º`java.util.ImmutableCollections.AbstractImmutableMap`çš„é›†åˆï¼Œç„¶åç®€å•åœ°è¿”å›ï¼Œå¦åˆ™ä»ç»™å®šçš„é›†åˆåˆ›å»ºä¸€ä¸ªæ–°çš„ ImmutableCollectionã€‚

```
class UnmodifiableCollectionDemo {

    public void usingList() {
        List<Integer> list = List.of(1, 2, 3, 4, 5);

        // already ImmutableCollection so simply returns
        List<Integer> unmodifiable1 = List.copyOf(list); 

        List<Integer> list1 = new ArrayList();
        list1.add(1);
        list1.add(2);

        // Creates new ImmutableCollection and returns
        List<Integer> unmodifiable = List.copyOf(list1); 
    } 
} 
```

### [](#3-new-methods-added-in-collectors)3ã€‚æ”¶é›†å™¨ä¸­æ·»åŠ çš„æ–°æ–¹æ³•

ä¸ºäº†å°†æµç»“æœæ”¶é›†ä¸ºä¸å¯ä¿®æ”¹çš„é›†åˆï¼Œåœ¨`java.util.stream.Collectors`ç±»ä¸­æ·»åŠ äº† 3 ä¸ªæ–°æ–¹æ³•ã€‚

1.  toUnmodifiableList
2.  é€šç©†è¿ªæ³•å¸ƒå‹’å¡ç‰¹
3.  toUnmodifiableMap

```
class StreamsDemo {
    public void convertToUnmodifiableCollections(List<String> input) {

        // List demo
        List<String> list = input.stream()
                                .map(String::toUpperCase)
                                .collect(Collectors.toUnmodifiableList());

        // Set demo
        Set<String> set = input.stream()
                                .map(String::toUpperCase)
                                .collect(Collectors.toUnmodifiableSet());

        // Map demo
        Map<String, Integer> map = input.stream()
                                .map(String::toUpperCase)
                                .collect(Collectors.totoUnmodifiableMap(String::toString, String::length));
    }
} 
```

### [](#4-var-local-variable-type-inference)4ã€‚var -å±€éƒ¨å˜é‡ç±»å‹æ¨ç†

lambdas å¼•å…¥äº†ç±»å‹æ¨ç†ã€‚ç°åœ¨åœ¨ Java 10 ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å…³é”®å­—`var`ç”¨äºå±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ã€‚è¿™å°†åˆ é™¤åˆå§‹åŒ–å±€éƒ¨å˜é‡çš„ä»ªå¼ä»£ç ï¼Œå¹¶ä¿æŒ java çš„é™æ€ç±»å‹ã€‚ç¼–è¯‘å™¨å°†åœ¨ç¼–è¯‘æ—¶æ¨æ–­å‡ºè¯¥ç±»å‹ã€‚

```
public void varDemo() {
    int i = 10;
    List<String> list = new ArrayList<>();
    Map<String, Integer> map = new HashMap<>();

    // With var above code can be written as

    var i = 10; 
    var list = new ArrayList<String>();
    var map = new HashMap<String, Integer>();
} 
```

ç±»å‹æ¨æ–­åªèƒ½ç”¨äºå±€éƒ¨å˜é‡ï¼Œä¸€æ—¦ç±»å‹è¢«æ¨æ–­å‡ºæ¥ï¼Œå°±ä¸èƒ½æ›´æ”¹ã€‚

```
public void demo() {
    var name = "Jitendra";
    name = 3; // Not allowed
} 
```

ç›®æ ‡ç±»å‹çš„æ‰€æœ‰æ–¹æ³•éƒ½å°†é€šè¿‡å£°æ˜çš„å˜é‡æ¥è®¿é—®ã€‚

```
public void demo() {
    var list = new ArrayList<String>();
    list.add("Jitendra");
    list.add("Singh");
} 
```

å¿«ä¹ç¼–ç ğŸ˜€ğŸ˜€ğŸ˜€ï¼ï¼ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•åé¦ˆï¼Œè¯·åœ¨ä¸‹é¢è¯„è®ºã€‚