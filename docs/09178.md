# é€šè¿‡ç¤ºä¾‹æ£€æµ‹ JavaScript ä¸­çš„å¯¹è±¡ä¸æ•°ç»„

> åŸæ–‡:[https://dev . to/Hugo _ _ df/detecting-object-vs-array-in-JavaScript-by-example-297d](https://dev.to/hugo__df/detecting-object-vs-array-in-javascript-by-example-297d)

å‡è®¾æˆ‘ä»¬è¦æµ‹é‡å…·æœ‰æ··åˆåµŒå¥—æ•°ç»„/å¯¹è±¡çš„å¯¹è±¡çš„æ·±åº¦ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
const obj = {
  myKey: {
    nest: {
      doubleNested: 'value',
      nestedArray: [ { key: 'value' } ]
    }
  }
}; 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

éš¾ç‚¹åœ¨äºæ£€æµ‹æˆ‘ä»¬åº”è¯¥æŠŠå€¼å½“ä½œå¯¹è±¡(å­—å…¸)è¿˜æ˜¯å½“ä½œåˆ—è¡¨ã€‚

æˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿç”¨ä¸‹é¢çš„ä»£ç åšåˆ°è¿™ä¸€ç‚¹:

```
function maxDepth(obj, depth = 0) {
  if (typeof obj !== 'object') {
    return depth;
  }
  const [values, depthIncrease] = Array.isArray(obj)
    ? [obj, 0]
    : [Object.values(obj), 1];
  return values.length > 0
    ? Math.max(...values.map(
      value => maxDepth(value, depth + depthIncrease))
    )
    : depth;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
// Some of these fail even although
// the assertions hold ğŸ™„
console.assert(maxDepth({}), 0);
console.assert(maxDepth(''), 0);
console.assert(maxDepth([ { one: 'deep' } ]), 1);
console.assert(maxDepth({ one: 'deep' }), 1);
console.assert(maxDepth({ one: [ { two: 'deep' } ] }), 2)
console.assert(maxDepth({ one: { two: 'deep' } }), 2) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†åˆ†è§£å¯¹è±¡å’ŒåŸºæœ¬ç±»å‹æ£€æµ‹ï¼Œè¿™æ˜¯ä¸€ä¸ª`typeof obj === 'object'`çš„ä¾‹å­ï¼Œè¯·çœ‹è¿™ä¸ªå…³äºäº‹ç‰©ç±»å‹çš„å¿«é€Ÿæç¤º:

```
console.assert(typeof '', 'string');
console.assert(typeof new String(), 'string');
console.assert(typeof 1, 'number');
console.assert(typeof Infinity, 'number');
console.assert(typeof NaN, 'number');
console.assert(typeof undefined, 'undefined');

console.assert(typeof [], 'object');
console.assert(typeof null, 'object');
console.assert(typeof {}, 'object');
console.assert(typeof new Map(), 'object');
console.assert(typeof new Set(), 'object'); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œä¸ºäº†åŒºåˆ†å¯¹è±¡å’Œæ•°ç»„ï¼Œæ¯å¤©éƒ½æ˜¯`Array.isArray`ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¯¹`.length`çš„æ£€æŸ¥ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`Set`æˆ–`Map`åœ¨å‡½æ•°
ä¸­ä¼ é€’

```
// Console.assert flips out again
// even though the assertions hold
console.assert(Array.isArray({}), false);
console.assert(Array.isArray(new Map()), false);
console.assert(Array.isArray(new Set()), false);

console.assert(Array.isArray([]), true);
console.assert(Array.isArray(new Array()), true); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨`.length > 0`ï¼Œå°½ç®¡å®ƒå°†æ£€æŸ¥ä¸€ä¸ª**éç©ºçš„**æ•°ç»„ï¼Œæˆ–`.length != null`ï¼Œè¿™æ˜¯`!=` / `==`çš„ä¸€ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¿œç¦»å®ƒï¼Œä»¥å…æœ‰äººæŠŠå®ƒæ”¹æˆ`!==` / `===`ã€‚

> è¿™æ˜¯ä¸Šå‘¨ä¸€ç”¨ Hugo ç®€è®¯ä»¥[ä»£ç å‘å‡ºçš„ã€‚](https://buttondown.email/hugo) [è®¢é˜…](https://buttondown.email/hugo)å¯ä»¥åœ¨ä½ çš„æ”¶ä»¶ç®±é‡Œè·å¾—æœ€æ–°çš„å¸–å­(æ¯”ä»»ä½•äººéƒ½è¦æ—©)ã€‚