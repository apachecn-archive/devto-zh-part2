# NextJS æç¤ºâ€”â€”åœ¨ CSS ä¸­ä½¿ç”¨åª’ä½“(å›¾åƒå’Œå­—ä½“)

> åŸæ–‡:[https://dev.to/whoisryosuke/nextjs-tip-ä½¿ç”¨-åª’ä½“-å›¾åƒ-å­—ä½“-css-1ip5](https://dev.to/whoisryosuke/nextjs-tip---using-media-images--fonts-in-css-1ip5)

æœ€è¿‘æˆ‘ç”¨ [LESS](http://lesscss.org) å’Œ CSS å»ºç«‹äº†ä¸€ä¸ª [NextJS](http://nextjs.org) é¡¹ç›®ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘çš„ç›¸å…³åª’ä½“æ–‡ä»¶æ— æ³•åŠ è½½ã€‚æˆ‘ä» webpack å¾—åˆ°è¿™ä¸ªå¥‡æ€ªçš„é”™è¯¯ï¼Œè¯´æœ‰ä¸€ä¸ªæ„å¤–çš„å­—ç¬¦ï¼Ÿï¼š

æµè§ˆæœåŠ¡å™¨æ§åˆ¶å°æ—¥å¿—ä¸­çš„ç¬¬ä¸€æ®µé”™è¯¯ä»£ç ï¼Œæ˜¾ç¤ºæˆ‘çš„ PNG å’Œ SVG æ–‡ä»¶æ— æ³•è¯†åˆ«:

```
These relative modules were not found:

* ../../assets/images/Brand/kushy-logo-short-white.svg in ./components/Header/Header.less
* ../../assets/images/Brand/Kushy API Logo.png in ./components/Header/Header.less 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#the-first-solution)ç¬¬ä¸€ä¸ªæ–¹æ¡ˆ

æˆ‘åœ¨[next js Github issues](https://github.com/zeit/next.js/issues/3852)ä¸Šå‘ç°äº†è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­æœ‰äººæ·»åŠ äº†ä¸€ä¸ªå®šåˆ¶çš„ Webpack é…ç½®æ¥ä½¿ç”¨`url-loader`è§£æåª’ä½“æ–‡ä»¶:

next.config.js:

```
module.exports = withCSS(withSass({
  webpack (config, options) {
    config.module.rules.push({
      test: /\.(png|jpg|gif|svg|eot|ttf|woff|woff2)$/,
      use: {
        loader: 'url-loader',
        options: {
          limit: 100000
        }
      }
    })

    return config
  }
})) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å¯¹æˆ‘ä¸èµ·ä½œç”¨ï¼Œæˆ‘å¼€å§‹å¾—åˆ°ä¸€ä¸ªå…³äº`url-loader`æ²¡æœ‰è¢«åŠ è½½çš„é”™è¯¯(è®½åˆºçš„æ˜¯)ã€‚æˆ‘å®‰è£…äº†ï¼Œå¾—åˆ°çš„é”™è¯¯æ˜¯`file-loader`æ²¡æœ‰å®‰è£…ï¼Ÿæˆ‘å®‰è£…äº†é‚£ä¸ª....æˆåŠŸäº†ï¼

`npm install url-loader file-loader --save-dev`

## [](#another-solution)åˆ«è§£

å°†æ‚¨çš„å›¾åƒå¤åˆ¶åˆ°åº”ç”¨ç¨‹åºæ ¹ç›®å½•ä¸‹çš„`static`æ–‡ä»¶å¤¹ä¸­ã€‚è¿™å…è®¸æ‚¨åœ¨ CSS ( `background:url('/static/image.png')`)ä¸­è®¿é—®å®ƒä»¬ã€‚è¿™ä¹ˆç®€å•ğŸ‘Œ

ä½ ä¸èƒ½ç”¨ NextJS è¿™æ ·åšçš„åŸå› æ˜¯ä»–ä»¬çš„ webpack è®¾ç½®ã€‚[ä»–ä»¬ä¸åœ¨æœåŠ¡å™¨çº§åˆ«è¿è¡Œ webpack](https://github.com/zeit/next.js/issues/1935)ï¼Œè¿™ä¸å…è®¸åƒå…¶ä»– web pack è®¾ç½®é‚£æ ·åŒæ­¥æ–‡ä»¶ã€‚æ‚¨å¿…é¡»ç”¨è‡ªå·±çš„é…ç½®é€‰é¡¹æ‰©å±•ä»–ä»¬çš„ Webpack é…ç½®(å¦‚ä¸Š)ï¼Œæˆ–è€…ä½¿ç”¨ä»–ä»¬è®¾ç½®çš„ç®€å•ç³»ç»Ÿ(ä»å•ä¸ªæ–‡ä»¶å¤¹æä¾›é™æ€æ–‡ä»¶)ã€‚

## [](#isnt-there-a-plugin)ä¸æ˜¯æœ‰æ’ä»¶å—ï¼Ÿ

æœ‰ä¸€ä¸ªåä¸º [next-images](https://github.com/arefaslani/next-images) çš„åº“ï¼Œå®ƒè¯•å›¾é€šè¿‡åœ¨ä»»ä½•ä½ æƒ³è¦åŠ¨æ€å¯¼å…¥çš„åª’ä½“ä¸Šè°ƒç”¨`require()`å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™æ ·åšçš„é—®é¢˜æ˜¯å°†å›ºæ‰§å·±è§çš„ API ä»£ç æ·»åŠ åˆ° CSS ä¸­ã€‚å®ƒ*éœ€è¦*(çœ‹åˆ°æˆ‘åœ¨é‚£é‡Œåšäº†ä»€ä¹ˆå—ï¼Ÿ)åœ¨æ¯ä¸ªç›¸å¯¹å›¾åƒ URL ä¸Šæ·»åŠ `require()`å‡½æ•°ã€‚å¦‚æœæˆ‘è¦ä» NPM å¯¼å…¥æˆ‘çš„ CSS ä»¥ä¿æŒå®ƒä¸æˆ‘çš„å›¢é˜Ÿä¸€è‡´ï¼Œæˆ‘ä¼šé‡åˆ°ç”¨å¿…è¦çš„å¯¼å…¥å‡½æ•°è¦†ç›–ä»»ä½•å›¾åƒå®šä¹‰çš„é—®é¢˜ã€‚

## [](#real-world-example)çœŸå®ä¸–ç•Œçš„ä¾‹å­

æˆ‘åœ¨ä½¿ç”¨è¯­ä¹‰ UI è®¾è®¡ç³»ç»Ÿæ—¶é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒå¯¹å›¾æ ‡ä½¿ç”¨äº†ç›¸å¯¹å­—ä½“æ–‡ä»¶ï¼Œæˆ‘è¢«è¿«è¦ä¹ˆè®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„ webpack é…ç½®ï¼Œè¦ä¹ˆæ‰‹åŠ¨å°†å®ƒä»¬å¤åˆ¶åˆ°æˆ‘çš„é™æ€æ–‡ä»¶å¤¹ä¸­å¹¶è¦†ç›– CSS å®šä¹‰(`@fontPath : '/static/assets/fonts';`)ã€‚ä¸¤è€…éƒ½è¿è¡Œè‰¯å¥½ï¼Œæˆ‘åšæŒä½¿ç”¨å®šåˆ¶çš„ webpack è®¾ç½®ã€‚

> æˆ‘åœ¨å¯¼å…¥æ–‡ä»¶æ—¶ç¡®å®é‡åˆ°äº†é—®é¢˜ï¼Œå› ä¸º LESS å˜é‡ä¸­æœ‰é”™è¯¯çš„ URL(å®ƒæ˜¯ä»`../../themes/themes/`å¯¼å…¥çš„ï¼Œè€Œä¸ä»…ä»…æ˜¯ä»`../../themes/`)ã€‚è¿™ä¸ªé—®é¢˜é€šè¿‡ä¸€ä¸ªå¿«é€Ÿå˜é‡è¦†ç›–è§£å†³äº†:`@fontPath : '../../default/assets/fonts';`ã€‚ä¸æ˜¯ NextJS çš„é—®é¢˜ï¼Œä½†æˆ‘æƒ³æˆ‘åº”è¯¥è®°å½•ä¸‹æ¥ã€‚

å¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©

* * *

**å‚è€ƒæ–‡çŒ®:**

*   [nexts](https://github.com/zeit/next.js/)çš„ç¼©å†™å½¢å¼
*   [ä¸‹ä¸€å¼ å›¾ç‰‡](https://github.com/arefaslani/next-images)
*   [NextJS é—®é¢˜#1935 -åœ¨ CSS ä¸­å¯¼å…¥å›¾åƒ](https://github.com/zeit/next.js/issues/1935)
*   [NextJS é—®é¢˜#3852 -åœ¨ CSS ä¸­å¯¼å…¥å›¾åƒ](https://github.com/zeit/next.js/issues/3852)
*   [æ–‡ä»¶åŠ è½½å™¨](https://github.com/webpack-contrib/file-loader)
*   [url åŠ è½½å™¨](https://github.com/webpack-contrib/url-loader)