# ASTs å¦‚ä½•å¢å¼º GraphQL æ¨¡å¼å¤„ç†

> åŸæ–‡ï¼š<https://dev.to/contentful_blog/how-asts-power-the-graphql-schema-handling-3hi9>

[![How abstract syntax trees come into play with schemas and GraphQL](../Images/23b147ff159fc0a5006cc3ada620f9be.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--5HBAXE_f--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://images.ctfassets.net/fo9twyrwpveg/w7OPcsNYiWquQY8YuUAq8/5ce2c0125423aff8927f85654da34bee/5-Jul-GraphQL-AST.png)

åœ¨ Contentfulï¼Œæˆ‘ä»¬ç›®å‰æ­£åœ¨åŠªåŠ›å¼€å‘æ–°çš„ GraphQL APIï¼Œå®ƒå·²ç»åœ¨ alpha é˜¶æ®µå¯ç”¨ğŸ‰ã€‚å½“æ‚¨ä»Šå¤©é˜…è¯» GraphQL æ—¶ï¼Œæ‚¨ä¼šå¾ˆå¿«å‘ç°å®ƒæä¾›çš„ä¸»è¦ä¼˜ç‚¹ï¼Œæ™®é€š GraphQL API ç”¨æˆ·å¯ä»¥åˆ©ç”¨è¿™äº›ä¼˜ç‚¹:

*   ä½ å¯ä»¥æŸ¥è¯¢ä½ æƒ³è¦çš„å¹¶ä¿å­˜è¯·æ±‚ï¼
*   æ‚¨æ­£åœ¨å¤„ç†ä¸€ä¸ªå¼ºç±»å‹æ¨¡å¼ï¼
*   å®ƒä¸ºæ‚¨æä¾›äº†ä¸€ä¸ªä¸°å¯Œçš„ã€ä¸æ–­å‘å±•çš„ç”Ÿæ€ç³»ç»Ÿï¼

ä½†æ˜¯å®ç° GraphQL API æ˜¯å¦ä¸€å›äº‹ã€‚å¯¹äºå®æ–½è€…ï¼Œæ‚¨å¾ˆå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹å»ºè®®:

> "å°†æ‚¨çš„æ•°æ®åº“æ¨¡å¼ä¸€å¯¹ä¸€åœ°æ˜ å°„åˆ°æ‚¨çš„ç±»å‹."

ç„¶è€Œï¼Œåœ¨æˆ‘ä»¬è¿™è¾¹ï¼Œè¿™å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºæˆ‘ä»¬çš„å†…å®¹åŸºç¡€è®¾æ–½è®©ç”¨æˆ·è‡ªç”±å®šä¹‰ä»–ä»¬å†…å®¹çš„ç»“æ„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¸ºä¸€ä¸ªç‰¹å®šçš„ç”¨æˆ·æä¾›ä¸€ä¸ªéå¸¸æ‰å¹³çš„æ•°æ®è¾“å…¥ç»“æ„ï¼ŒåŒæ—¶å‘å¦ä¸€ä¸ªç”¨æˆ·æä¾›å‡ ä¸ªå±‚æ¬¡çš„å®Œæ•´å†…å®¹æ ‘ã€‚è¿™ç§çµæ´»æ€§æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¤„ç†æ‰€æœ‰ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œè¿™ä½¿å¾—å¯¹ GraphQL çš„æ”¯æŒæ›´åŠ æ£˜æ‰‹ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨å¿…é¡»åŠ¨æ€åœ°åˆ›å»º GraphQL æ¨¡å¼ï¼Œå¹¶åŸºäºæŠ½è±¡è¯­æ³•æ ‘å¤„ç†åŸŸå¯¹è±¡ï¼Œè€Œä¸æ˜¯ç®€å•åœ°å°†æ•°æ®åº“æ¨¡å¼æ˜ å°„åˆ° GraphQLã€‚å¦‚æœè¿™å¬èµ·æ¥å¾ˆå¤æ‚ï¼Œä¸è¦æ‹…å¿ƒâ€”â€”æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»æ‰€æœ‰å†…å®¹ã€‚

ä½œè€…æ³¨:æœ¬æ–‡åŸºäºæˆ‘çš„ä¸€æ¬¡ meetup æ¼”è®²ï¼›è¿™ç¯‡æ–‡ç« çš„æœ€åæœ‰ä¸€æ®µå½•éŸ³é“¾æ¥ã€‚

## graph QL æŠ½è±¡è¯­æ³•æ ‘-æ›™å…‰æ¨¡å¼

ä»»ä½• GraphQL API çš„åŸºç¡€éƒ½æ˜¯æ‰€è°“çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œå®ƒåœ¨æœåŠ¡å™¨ç«¯å¤§é‡ç”¨äºå¤„ç†æ¨¡å¼å®šä¹‰å’Œå®é™… GraphQL æŸ¥è¯¢çš„è§£æã€‚

### ä½†æ˜¯ä»€ä¹ˆæ˜¯æŠ½è±¡è¯­æ³•æ ‘å‘¢ï¼Ÿ

å¯¹æˆ‘æ¥è¯´ï¼ŒæŠ½è±¡è¯­æ³•æ ‘(AST)è¿™ä¸ªè¯åªæ˜¯æè¿°æ·±åº¦åµŒå¥—å¯¹è±¡çš„ä¸€ç§å¥‡ç‰¹æ–¹å¼ï¼Œè¿™äº›å¯¹è±¡ä¿å­˜äº†ä¸€äº›æºä»£ç çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæˆ–è€…åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒGraphQL æŸ¥è¯¢ã€‚

ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä»¥ Babel ä¸ºä¾‹ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ JavaScript ç¼–è¯‘å™¨ï¼Œå®ƒå…è®¸æ‚¨ç¼–å†™å°šæœªå¾—åˆ°å¹¿æ³›æ”¯æŒçš„ JavaScriptï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºè¾ƒæ—§çš„è¯­æ³•ã€‚Babel å°†ä½ æ‰”ç»™å®ƒçš„æ‰€æœ‰æºä»£ç è½¬æ¢æˆä¸€æ£µæŠ½è±¡è¯­æ³•æ ‘ï¼Œç„¶ååœ¨è¿™æ£µæ ‘ä¸Šæ‰§è¡Œè½¬æ¢ã€‚ç„¶åï¼Œæ›´æ–°å’Œè½¬æ¢åçš„æ ‘è¢«ç”¨æ¥ç”Ÿæˆæºä»£ç ï¼Œè¿™äº›æºä»£ç ä¸ä»…å¯ä»¥åœ¨æœ€æ–°å’Œæœ€æ£’çš„æµè§ˆå™¨ä¸­è¿è¡Œï¼Œè¿˜å¯ä»¥åœ¨ä¸€æ®µæ—¶é—´æ²¡æœ‰æ›´æ–°çš„æµè§ˆå™¨ä¸­è¿è¡Œã€‚

### æŠ½è±¡è¯­æ³•æ ‘åŒ…æ‹¬å“ªäº›å†…å®¹ï¼Ÿ

æ£€æŸ¥æŠ½è±¡è¯­æ³•æ ‘çš„ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·æ˜¯ [AST Explorer](http://astexplorer.net) ã€‚è¯¥ç½‘ç«™å…è®¸æ‚¨å¿«é€Ÿåœ°å°†ä»£ç ä» JavaScript ç²˜è´´åˆ° PHPï¼Œå†åˆ° TypeScriptï¼Œç”šè‡³ GraphQL æŸ¥è¯¢ï¼Œç„¶åæä¾›æœ€ç»ˆçš„æŠ½è±¡è¯­æ³•æ ‘ã€‚

å½“æˆ‘ä»¬çœ‹ä¸‹é¢çš„ GraphQL æŸ¥è¯¢æ—¶â€¦

```
{
  course(id: "1toEOumnkEksWakieoeC6M") {
    fields {
      title
    }
  }
} 
```

Enter fullscreen mode Exit fullscreen mode

...æœ€ç»ˆçš„æŠ½è±¡è¯­æ³•æ ‘(ä¸ç”¨å¤ªæ‹…å¿ƒ)çœ‹èµ·æ¥åƒè¿™æ ·:

```
{
  "kind": "Document",
  "definitions": [
    {
      "kind": "OperationDefinition",
      "operation": "query",
      "name": null,
      "variableDefinitions": null,
      "directives": [],
      "selectionSet": {
        "kind": "SelectionSet",
        "selections": [
          {
            "kind": "Field",
            "alias": null,
            "name": {
              "kind": "Name",
              "value": "course",
              "loc": {
                "start": 4,
                "end": 10
              }
            },
            "arguments": [
              {
                "kind": "Argument",
                "name": {
                  "kind": "Name",
                  "value": "id",
                  "loc": {
                    "start": 11,
                    "end": 13
                  }
                },
                "value": {
                  "kind": "StringValue",
                  "value": "1toEOumnkEksWakieoeC6M",
                  "loc": {
                    "start": 15,
                    "end": 39
                  }
                },
                "loc": {
                  "start": 11,
                  "end": 39
                }
              }
            ],
            "directives": []
            ...
            ...
            ...
          }
        ],
        "loc": {
          "start": 0,
          "end": 79
        }
      },
      "loc": {
        "start": 0,
        "end": 79
      }
    }
  ],
  "loc": {
    "start": 0,
    "end": 79
  }
} 
```

Enter fullscreen mode Exit fullscreen mode

AST åŒ…æ‹¬è®¸å¤šå…ƒæ•°æ®ï¼Œæ¯”å¦‚æºä¸­çš„ä½ç½®ï¼Œæˆ–è€…æ ‡è¯†ç¬¦ï¼Œæ¯”å¦‚å‚æ•°åï¼›å¤šäºäº†è¿™ä¸ªæ·±åº¦åµŒå¥—çš„ JSON å¯¹è±¡ï¼Œæˆ‘ä»¬ç°åœ¨æ‹¥æœ‰äº†å¤„ç† GraphQL æ¨¡å¼å’ŒæŸ¥è¯¢æ‰€éœ€çš„æ‰€æœ‰èƒ½åŠ›ã€‚åœ¨å¼€å‘è‡ªå·±çš„ GraphQL æœåŠ¡å™¨æ—¶ï¼Œæ‰€æœ‰è¿™äº›å…ƒä¿¡æ¯éƒ½ä¼šæ´¾ä¸Šç”¨åœºï¼›ä¾‹å¦‚ï¼Œä»é‚£é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å‘Šè¯‰ä½ ä½ çš„æŸ¥è¯¢ä¸­å®¹æ˜“å¼•èµ·é—®é¢˜çš„é‚£ä¸€è¡Œã€‚

å¯¹äºæ¨¡å¼ï¼Œè¿™äº› POJOs(æ™®é€šçš„æ—§ JSON å¯¹è±¡)é€šå¸¸è¢«ç¿»è¯‘æˆæ‰€è°“çš„åŸŸå¯¹è±¡ã€‚å®ƒä»¬å°è£…äº† AST ä¸­åŒ…å«çš„ä¿¡æ¯ï¼Œä½†æ˜¯ç”¨æ–¹æ³•è¿›è¡Œäº†ä¸°å¯Œï¼Œå¹¶ä¸”æ˜¯ GraphQL åŸºæœ¬ç±»å‹çš„é€‚å½“å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªæœ‰å­—æ®µå¯ä¾›é€‰æ‹©çš„ç±»å‹éƒ½å°†è¢«åˆ›å»ºä¸º GraphQLObjectType å®ä¾‹ã€‚ç°åœ¨ä½ å¯ä»¥åœ¨å®ƒä¸Šé¢å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥è·å–æ•°æ®ã€‚

å‡è®¾æ‚¨çš„ API å°†ç¬›å¡å°”åæ ‡å’Œåœ°ç†å€¼ä¸­çš„ä½ç½®æ•°æ®ä½œä¸ºâ€œä½ç½®â€æä¾›ç»™æ‚¨ã€‚å¯¹äº GraphQL `Location`ç±»å‹ï¼Œæ‚¨æ€»æ˜¯å¸Œæœ›è¿”å›åœ°ç†åæ ‡ï¼Œå› æ­¤æ‚¨å®šä¹‰äº†å¦‚ä¸‹çš„`makeLocationFieldResolver`:

```
const resolverRoot = {
  cartesian: {},
  geographic: {
    latitude: 52.501817,
    longitude: 13.411247
  }
}

function makeLocationFieldResolver (field) {
  return (root) => root.geographic[field]
} 
```

Enter fullscreen mode Exit fullscreen mode

å¦‚æœæˆ‘ä»¬çš„ç±»å‹å®šä¹‰åœ¨ç³»ç»Ÿå®šä¹‰è¯­è¨€(SDL)æ ¼å¼ä¸­å¯ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä»å®ƒæ„é€  ASTï¼Œå¹¶é€šè¿‡ä½¿ç”¨ä»¥å‡½æ•°ä½œä¸ºå…¶æœ€å¶å€¼çš„åµŒå¥—å¯¹è±¡å°†è§£æå™¨åˆ†é…ç»™å­—æ®µ:

```
// graphql-tools

const typeDefs = `
  type Location {
    lat: Float!
    lon: Float!
  }
`

const resolvers = {
  Location: {
    lat: makeLocationFieldResolver('latitude'),
    lon: makeLocationFieldResolver('longitude')
  }
}

const executableSchema = makeExecutableSchema({
  typeDefs,
  resolvers,
}); 
```

Enter fullscreen mode Exit fullscreen mode

å½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬æ‰‹å¤´æ²¡æœ‰ä¸€ä¸ªå¯ä»¥è§£æçš„ç³»ç»Ÿå®šä¹‰è¯­è¨€(SDL ),é‚£ä¹ˆåœ¨ Contentful ä¸Šè‚¯å®šä¼šæœ‰ä¸€ç‚¹ä¸åŒã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ‰€åšçš„åªæ˜¯æ ¹æ®ä»æ•°æ®åº“ä¸­è·å¾—çš„å†…å®¹æ¨¡å‹ï¼Œâ€œæ‰‹åŠ¨â€åˆ›å»ºé‚£äº›åŸŸå¯¹è±¡ã€‚

```
// graphql-js

const locationType = new GraphQLObjectType({
  name: 'Location',
  fields: {
    lat: { type: GraphQLFloat, resolve: makeLocationFieldResolver('latitude') },
    lon: { type: GraphQLFloat, resolve: makeLocationFieldResolver('longitude') }
  }
}) 
```

Enter fullscreen mode Exit fullscreen mode

â€œæˆ‘çš„é”™è¯¯çš„è¡Œå·æ˜¯ä»€ä¹ˆï¼ŸğŸ˜±â€œæˆ‘å¬åˆ°ä½ åœ¨é—®ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ¨¡å¼ç”Ÿæˆæ—¶è¿™æ ·åšâ€”â€”æˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨é€šå¸¸çš„ GraphQL æµæ¥å¤„ç†æ‚¨å‘é€ç»™æˆ‘ä»¬çš„æŸ¥è¯¢æ–‡æ¡£ï¼Œä»æ‚¨å‘é€ç»™æˆ‘ä»¬çš„å­—ç¬¦ä¸²ä¸€ç›´åˆ°å“åº” JSONã€‚

### graph QL-type ç³»ç»Ÿå®šä¹‰è¯­è¨€å’ŒæŸ¥è¯¢æ–‡æ¡£çš„ä¸¤é¢

è¦ä½¿ GraphQL å·¥ä½œï¼Œæ‚¨å¿…é¡»å…³æ³¨ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†:

*   GraphQL API ç«¯ç‚¹çš„æœåŠ¡å™¨å®ç°å¿…é¡»ä»¥æ‰€è°“çš„**ç±»å‹ç³»ç»Ÿå®šä¹‰è¯­è¨€**æä¾›ä¸€ä¸ªæ¨¡å¼ï¼Œè¯¥æ¨¡å¼å®šä¹‰äº†ä»€ä¹ˆæ•°æ®åœ¨è¯¥ç«¯ç‚¹å¯ç”¨ã€‚
*   åœ¨å®¢æˆ·ç«¯ï¼Œå¼€å‘äººå‘˜å¯ä»¥å‘å‡ºåŒ…å«ä¸€ä¸ª**æŸ¥è¯¢æ–‡æ¡£**çš„è¯·æ±‚ï¼Œè¯¥æ–‡æ¡£å®šä¹‰äº†å“åº”ä¸­åº”è¯¥åŒ…å«å“ªäº›æ•°æ®ã€‚

#### SDL -ç±»å‹ç³»ç»Ÿå®šä¹‰è¯­è¨€

GraphQL çš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å®ƒåŸºäºå¼ºç±»å‹æ¨¡å¼å®šä¹‰ã€‚è¿™äº›ç±»å‹å®šä¹‰å®šä¹‰äº†æ•°æ®åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ï¼Œä»¥åŠ GraphQL API å®é™…ä¸Šå…è®¸å“ªäº›æŸ¥è¯¢ã€‚ç±»å‹å®šä¹‰å¦‚ä¸‹æ‰€ç¤º:

```
type AssetFile {
  contentType: String
  fileName: String
} 
```

Enter fullscreen mode Exit fullscreen mode

ä¸Šé¢çš„å®šä¹‰å®šä¹‰äº†ç±»å‹`AssetFile`æ­£å¥½æœ‰ä¸¤ä¸ªå­—æ®µ(`contentType`å’Œ`fileName`)ï¼Œéƒ½æ˜¯ç±»å‹`String`ã€‚è¿™ä¸ªå®šä¹‰å¾ˆé…·çš„ä¸€ç‚¹æ˜¯ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨å…¶ä»–ç±»å‹å®šä¹‰ä¸­ä½¿ç”¨å®ƒã€‚

```
type Person {
  image: AssetFile
} 
```

Enter fullscreen mode Exit fullscreen mode

SDL ä½¿å¾—å®šä¹‰å®Œæ•´çš„æ•°æ®é›†æˆä¸ºå¯èƒ½:

*   æ¡ç›®åŒ…æ‹¬ä»€ä¹ˆï¼Ÿ
*   æ¡ç›®ä¹‹é—´æ˜¯å¦‚ä½•å…³è”çš„ï¼Ÿ
*   å¯ä»¥è®¿é—®ä»€ä¹ˆï¼Œåœ¨å“ªé‡Œè®¿é—®ï¼Ÿ

å½“æ‚¨ä½¿ç”¨åƒ [GraphiQL](https://github.com/graphql/graphiql) (ä¸€ä¸ªæµè§ˆå™¨å†… IDE)è¿™æ ·çš„å·¥å…·æ¥æ¢ç´¢ GraphiQL ç«¯ç‚¹æ—¶ï¼Œæ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œé€šè¿‡æ‰“å¼€ docs éƒ¨åˆ†ï¼Œæ‚¨å¯ä»¥å¾ˆå®¹æ˜“åœ°å‘ç° API ç«¯ç‚¹ä¸Šå¯ç”¨çš„æ•°æ®ã€‚docs éƒ¨åˆ†åŒ…æ‹¬åŸºäºåœ¨æ‚¨å®šä¹‰çš„ SDL ä¸­ç¼–å†™çš„æ¨¡å¼çš„æ‰€æœ‰ä¿¡æ¯ã€‚

[![Using a tool like GraphiQL, an in-browser IDE to explore GraphQL endpoints](../Images/adf913b26aa1f87f6ba3c6fd9089a365.png)T2ã€‘](//images.ctfassets.net/fo9twyrwpveg/6gPqNGJ2rCseU4ykIUSa4c/a0ae78f44cec9790b25871a87cc641ca/image_0__1_.png)

*æ—æ³¨:æ¥è‡ª Prisma çš„äººä»¬ä¹Ÿæ„å»ºäº†ä¸€ä¸ªåä¸º GraphQL Playground çš„å·¥å…·ï¼Œå®ƒä½äº GraphQL ä¹‹ä¸Šï¼Œå¢åŠ äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½å’Œä¸€ä¸ªâ€œæ›´æ–°â€çš„ UI*

è¿™äº› GraphQL å·¥å…·çš„å·¥ä½œæ–¹å¼æ˜¯å®ƒä»¬åœ¨å¯åŠ¨æ—¶å‘é€ä¸€ä¸ªåˆå§‹è¯·æ±‚â€”â€”æ‰€è°“çš„`IntrospectionQuery`,è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ GraphQL è¯·æ±‚ï¼Œä½¿ç”¨ POST å¹¶åœ¨è¯·æ±‚æœ‰æ•ˆè´Ÿè½½ä¸­åŒ…å«ä¸€ä¸ª GraphQL æŸ¥è¯¢ã€‚GraphQL ç”¨æˆ·æ‰§è¡Œçš„è¯·æ±‚å¯ä»¥æ ¹æ®ä¸åŒæŸ¥è¯¢ç±»å‹çš„ä½¿ç”¨è€Œæœ‰æ‰€ä¸åŒã€‚

```
query IntrospectionQuery {
  __schema {
    queryType { name }
    mutationType { name }
    subscriptionType { name }
    types {
      ...FullType
    }
    directives {
      name
      description
      locations
      args {
        ...InputValue
      }
    }
  }
} 
```

Enter fullscreen mode Exit fullscreen mode

å¯¹è¿™ä¸ªè‡ªçœæŸ¥è¯¢çš„å“åº”æä¾›äº†æä¾› API æ–‡æ¡£æ‰€éœ€çš„æ‰€æœ‰æ¨¡å¼ä¿¡æ¯ï¼Œä½¿è‡ªåŠ¨å®Œæˆæˆä¸ºå¯èƒ½ï¼Œå¹¶ä¸ºå®¢æˆ·ç«¯å¼€å‘äººå‘˜æä¾›äº†æ‰€æœ‰çš„æŒ‡å¯¼ï¼Œä»¥ä¾¿æ„‰å¿«åœ°æŸ¥è¯¢å¥¹æ„Ÿå…´è¶£çš„ä»»ä½•æ•°æ®ã€‚

#### å®¢æˆ·ç«¯äº‹ç‰©-æŸ¥è¯¢æ–‡æ¡£

ç°åœ¨æˆ‘ä»¬å·²ç»å®šä¹‰äº†å¯ç”¨çš„æ•°æ®æ¨¡å¼ï¼Œç¼ºå°‘çš„æ˜¯åŒ…å«æŸ¥è¯¢æ–‡æ¡£çš„ GraphQL è¯·æ±‚ã€‚æŸ¥è¯¢æ–‡æ¡£æ˜¯æ‚¨åœ¨æœ¬æ–‡å¼€å¤´å·²ç»çœ‹åˆ°çš„å®é™…çš„ GraphQL æŸ¥è¯¢ã€‚

```
{
  course(id: "1toEOumnkEksWakieoeC6M") {
    fields {
      title
    }
  }
} 
```

Enter fullscreen mode Exit fullscreen mode

æŸ¥è¯¢æ–‡æ¡£åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ï¼Œå®ƒåŒ…å«åœ¨åˆ°è¾¾ GraphQL ç«¯ç‚¹çš„æœ‰æ•ˆè´Ÿè½½ä¸­ã€‚GraphQL å’Œ GraphQL Playground å·¥å…·å°†å¸®åŠ©æ‚¨è½»æ¾ç¼–å†™ç¬¬ä¸€ä¸ªæŸ¥è¯¢ã€‚

### æŸ¥è¯¢æ–‡æ¡£å’Œ SDL çš„ç»„åˆ

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆ ast å¯¹ GraphQL å¦‚æ­¤é‡è¦å‘¢ï¼Ÿ

å½“ä¸€ä¸ªè¯·æ±‚åˆ°è¾¾æˆ‘ä»¬çš„ GraphQL ç«¯ç‚¹æ—¶ï¼Œç”¨ SDL ç¼–å†™çš„æ¨¡å¼å’ŒåŒ…å«åœ¨è¯·æ±‚è´Ÿè½½ä¸­çš„æŸ¥è¯¢æ–‡æ¡£å°†è¢«è¯»å–å¹¶è½¬æ¢æˆ ASTsã€‚å¦‚æœè§£ææˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šæŸ¥è¯¢å’Œæ¨¡å¼éƒ½æ˜¯æœ‰æ•ˆçš„ï¼›å¦åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾ç¤ºé”™è¯¯ï¼Œè¯¦ç»†è¯´æ˜è¯­æ³•ä¸æ­£ç¡®çš„åœ°æ–¹ã€‚

ç„¶åï¼Œæˆ‘ä»¬è®¿é—®æŸ¥è¯¢æ–‡æ¡£ä¸­çš„æ¯ä¸ªå­—æ®µåï¼Œæ£€æŸ¥æ¨¡å¼ä¸­æ˜¯å¦å­˜åœ¨ç›¸åº”çš„ç±»å‹å®šä¹‰ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦å…¼å®¹â€”â€”å®ƒä»¬çš„å‚æ•°æ•°é‡æ˜¯å¦ç›¸åŒï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯å¦ç›¸åŒï¼Ÿ

å¦‚æœè¿™äº›éªŒè¯é€šè¿‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è§£ææŸ¥è¯¢ä¸­è¯·æ±‚çš„èµ„æºæ¥å“åº”è¯·æ±‚ã€‚è§£æå™¨æ˜¯ä¸€ä¸ªæˆ‘ä»¬ä¸ä¼šåœ¨æœ¬æ–‡ä¸­æ¶‰åŠçš„ä¸»é¢˜ï¼Œä½†æ˜¯å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥é˜…è¯» Prisma çš„ä»‹ç»[â€œGraphQL æœåŠ¡å™¨åŸºç¡€:graph QL æ¨¡å¼ï¼ŒTypeDefs &è§£æå™¨è§£é‡Šâ€](https://www.prisma.io/blog/graphql-server-basics-the-schema-ac5e2950214e/)â€”è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é˜…è¯»ï¼

[![Interaction of query documents and the SDL](../Images/991b205b15aea73e0d247cd915cee34c.png)T2ã€‘](//images.ctfassets.net/fo9twyrwpveg/2rEkv7xsG0aGKm4oeY62i4/5923d0d1eccb423a7e77fd0f3ea4268a/graphql.jpg)

## å¾—ç›ŠäºæŠ½è±¡è¯­æ³•æ ‘ï¼Œè¯­è¨€å¤„ç†å˜å¾—ç®€å•

GraphQL çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒçš„æ¨¡å¼å’Œç±»å‹å®šä¹‰å°† API å¼€å‘æ¨å‘äº†ä¸€ä¸ªå…¨æ–°çš„æ°´å¹³ã€‚ç”±äºä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿã€å·¥å…·å’ŒæŠ½è±¡è¯­æ³•æ ‘çš„æ¦‚å¿µï¼Œåœ¨ Contentful å¼€å‘æˆ‘ä»¬æ–°çš„ GraphQL ç«¯ç‚¹å¾ˆæœ‰è¶£ã€‚

æ­¤å¤–ï¼Œè¿™ä¸ä»…ä»…æ˜¯å…³äºå¼€å‘è€…çš„ä½“éªŒï¼Œè€Œæ˜¯å…³äºä¸€æ•´å¥—æ–°çš„å¯èƒ½æ€§ã€‚ä½¿ç”¨ ASTsï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°è½¬æ¢å¾—åˆ°çš„æ¨¡å¼å®šä¹‰â€”â€”ä¾‹å¦‚ï¼Œè¿™ä½¿å¾—æ¨¡å¼æ‹¼æ¥å˜å¾—å®¹æ˜“ã€‚

> [æ¨¡å¼æ‹¼æ¥](https://dev-blog.apollodata.com/graphql-schema-stitching-8af23354ac37)çš„æ€æƒ³æ˜¯ï¼Œä½ å¯ä»¥è·å–ä¸¤ä¸ªæˆ–æ›´å¤šçš„ GraphQL æ¨¡å¼ï¼Œå¹¶å°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªå¯ä»¥ä»æ‰€æœ‰è¿™äº›æ¨¡å¼ä¸­æå–æ•°æ®çš„ç«¯ç‚¹ã€‚

æƒ³ä¸€æƒ³â€”â€”ä½¿ç”¨ GraphQLï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸å®¹æ˜“åœ°å°†å‡ ä¸ª API ç»„åˆæˆä¸€ä¸ªå¼ºå¤§çš„ APIã€‚[å°†è¿™ä¸€ç‚¹ä¸æ— æœåŠ¡å™¨æŠ€æœ¯](https://www.contentful.com/blog/2018/04/05/graphql-and-serverless-where-cloud-computing-is-heading/?utm_campaign=graphql-abstract-syntax-tree-new-schema&utm_medium=referral&utm_source=devto&utm_content=graphql-abstract-syntax-tree-new-schema&utm_term=)å’Œ API å¼€å‘çš„åŠ›é‡ç»“åˆèµ·æ¥ï¼Œå› ä¸ºä½ ç°åœ¨çŸ¥é“è¿™å°†æˆä¸ºè¿‡å»ã€‚**å‡†å¤‡å¥½ï¼**ï¼›)

äº†è§£æœ‰å…³ GraphQL å’Œ Contentful å…¥é—¨çš„æ›´å¤šä¿¡æ¯[ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰çš„è¯ï¼Œå…ˆåˆ›å»ºä¸€ä¸ª](https://www.contentful.com/developers/docs/tutorials/general/graphql/?utm_campaign=graphql-abstract-syntax-tree-new-schema&utm_medium=referral&utm_source=devto&utm_content=graphql-abstract-syntax-tree-new-schema&utm_term=)[å…è´¹å†…å®¹ä¸°å¯Œçš„è´¦æˆ·](https://www.contentful.com/sign-up/?utm_campaign=graphql-abstract-syntax-tree-new-schema&utm_medium=referral&utm_source=devto&utm_content=graphql-abstract-syntax-tree-new-schema&utm_term=)ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„å†…å®¹åŸºç¡€è®¾æ–½å¦‚ä½•è½»æ¾åœ°ä¸ä½ çš„ä»£ç å’Œé™æ€ç½‘ç«™é¡¹ç›®ä¸€èµ·å·¥ä½œã€‚

é™„æ³¨:Nikolas Burg ä¹Ÿç»™äº†[ä¸€ä¸ªå…³äºå¦‚ä½•ä½¿ç”¨ Contentful å’Œ Prisma åšæ¨¡å¼æ‹¼æ¥çš„ç²¾å½©æ¼”è®²](https://www.youtube.com/watch?v=w1loiyLD4eY&t=1814s),åœ¨æˆ‘ä»¬ä¹‹å‰åœ¨æŸæ—çš„ Contentful ä¼šè®®ä¸Šã€‚å€¼å¾—ä¸€çœ‹ï¼

### è°ˆè¯çš„å½•éŸ³

å¦‚æœä½ ä¸å–œæ¬¢é˜…è¯»ï¼Œæˆ‘ä¹Ÿåœ¨æˆ‘ä»¬çš„ä¸€æ¬¡å†…å®¹ä¸°å¯Œçš„ç”¨æˆ·ä¼šè®®ä¸Šè°ˆåˆ°è¿‡è¿™ä¸ªè¯é¢˜ã€‚[ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹](https://www.youtube.com/watch?v=sbOe6fU0SCI)ã€‚