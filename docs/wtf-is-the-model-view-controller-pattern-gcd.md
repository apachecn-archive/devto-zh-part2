# WTF 是模型-视图-控制器模式？

> 原文：<https://dev.to/planetargon/wtf-is-the-model-view-controller-pattern-gcd>

这一切都始于 1979 年，当时 Trygve Reenskaug 为施乐研究实验室的 Smalltalk 应用程序概述了模型-视图-控制器(MVC)模式。最初的实现旨在允许用户控制大型复杂数据集并与之交互。有什么大不了的，对吧？嗯，在 MVC 之前，当业务逻辑、表示和功能混合在一起时，许多应用程序都会出现一个重复出现的问题。随着项目需求的变化，比如一个新的图形界面或者一个新的数据源，应用程序的结构变得更加难以维护。这反过来又削弱了系统的稳定性，最终可能导致完全重写。模型-视图-控制器模式(MVC)将业务逻辑、表示和功能分解成独立、自包含的部分。这是一件大事。MVC 为应用程序开发设立了一个新的标准，并很快被开发社区所接受。

在接下来的二十年里，使用 MVC 架构模式开发了许多新兴技术。NextSTEP、Java Swing 和微软基础类(MFC)只是几个显著的例子。随着万维网的迅速发展和对基于 web 的应用程序需求的增长，MVC 模式出现在众所周知的 Web 框架中，如 Jakarta Struts 和 WebObjects。虽然这些框架是基于一个干净的模式，模糊的配置和缓慢的开发周期已经驱使一些开发人员以一种干净简单的方式构建一个包含 MVC 模式的框架。于是， [Ruby on Rails](http://rubyonrails.org/) 框架诞生了。让我们更深入地看看模式本身。

## 型号

模型的主要功能是访问和修改数据，同时保持应用程序的当前状态。

假设您已经构建了一个工资单应用程序。在数据库中，您存储每个雇员的每小时工资率和每周工作小时数。如果 Cliff 上周工作了 50 个小时，则需要计算 10 个小时的加班费，假设加班是单周工作超过 40 个小时的任何时间。为了让应用程序返回正确的金额来支付 Cliff，它需要运行一系列的计算。这是存储和执行业务逻辑的模型。

当考虑与数据相关的模型时，理解任何不相关的数据组都应该成为独立的模型是很重要的。每组数据都是独立的，这意味着在理论上，您可以添加和修改模型，而不会影响其他数据集。

模型呈现数据，但不负责显示数据。

## 视图

视图的主要功能是呈现应用程序中的数据是如何显示的。

让我们暂时回到克里夫的工资上来。为了生成格式正确的支票，我们需要显示所有相关信息——姓名、地址、金额和日期。该信息如何显示在屏幕上，然后打印到支票上，由视图处理。

该视图允许应用程序显示同一数据的多种表示形式，例如 Cliff 的个人工资支票、他的所有工资支票的列表或他在上周所有雇员工资支票列表中的支票金额。每个实例都依赖相同的模型来提供数据，但是使用不同的视图来呈现数据。

视图呈现数据，但不直接与模型通信。

## 控制器

如果应用程序是一个交响乐团，控制器就是指挥。控制器通过处理用户输入来协调应用程序的流程，然后以适当的视图响应客户端。

打印完克里夫的薪水支票后，你可能会反思他的工作质量，并决定给他加薪。您填写表单以修改员工工资，然后点击保存按钮。控制器接受您的输入，并通知模型对此做些什么，在这种情况下，给 Cliff 他应得的加薪。

正是在控制器中，人们可以对处理用户交互的逻辑进行编程。在我们的例子中，当您提交表单时，您的控制器将决定在您点击 submit 后应该发生什么样的事件序列。如果您将记录保存到数据库中，控制器可以调用相应模型中的 save 或 update 方法。保存数据后，控制器将决定下一步向客户机呈现哪个视图。

控制器与模型和视图进行通信，因为在遵循 MVC 模式时，它们不应该直接相互对话。

## 把所有的东西放在一起

模型、视图和控制器是相互独立的。未来对这三个组件中任何一个组件的更改都不会对其他两个组件产生影响。

假设我们的工资单应用程序被另一家公司采用，他们想重新设计外观以匹配他们的公司品牌。使用 MVC，他们应该需要做的就是修改视图。该公司还计划搬到另一个国家，这将意味着他们的工资要求发生变化。同样，使用 MVC，他们应该需要做的就是更新这个业务逻辑所在的相应模型。MVC 允许你在一个领域进行调整，而不牺牲或中断另一个领域的功能。

许多 web 应用程序通过使用不同的样式表和模板文件，使用主题在任意数量的设计和布局之间轻松切换。以您的普通博客应用程序或您最喜欢的媒体播放器为例，它有许多皮肤。这两者都充分利用了 MVC 模式将用户界面从应用程序的逻辑和功能中分离出来的方式。同样，Ruby on Rails 充分利用了 MVC 模式，它为您提供了一个预定义的结构，不仅使您能够轻松地遵循 MVC，还鼓励您在构建应用程序时考虑到未知的未来变化。

从经验上讲，当必须进行意想不到的修改时，遵循 MVC 可以让您省去很多麻烦。