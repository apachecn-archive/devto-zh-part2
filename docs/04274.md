# 所以你想建立一个平台

> 原文:[https://dev.to/vorahsa/so-you-want-to-build-a-platform-227f](https://dev.to/vorahsa/so-you-want-to-build-a-platform-227f)

您已经构建自己的服务有一段时间了。它就在那里，而且相当成功。现在你想做更多的服务。您会注意到这些新服务需要您现有服务的一些功能。也许它是你的移动应用的 SDK，或者是你的网站的框架，或者是你的后端系统的微服务。所以你决定把这个**平台**做成一个独立的组件，可以被未来的服务采用，减少他们的开发时间，统一你的服务。

在我的职业生涯中，我见过几次这样的过程，我觉得我很好地理解了是什么决定了这样一项事业的成败。因此，这里有一些简单规则形式的建议，告诉你如何做才能走上成功之路。

### 如果你只有一项服务，不要担心

将一个平台作为一个独立的实体来维护总是比将功能放在一个单一的服务中要多得多。如果您目前没有实现更多可以使用该平台的服务的实际计划，就让该功能存在于您当前的服务中。您的服务团队可能已经有了一个很好的架构，有了职责分离，他们最清楚功能应该放在那个服务的哪个位置。如果没有其他服务出现，强行将平台分离出来只是额外的工作，不会带来任何好处。

### 慎重选择平台团队

令人遗憾的是，平台设计被视为任何其他开发任务是很常见的。有事情要做，下次有时间的人可以去做。不要这样。对您的服务至关重要的平台接口中的错误将比单个服务中的类似错误付出更大的代价。他们将迫使服务开发者做额外的工作，编写更脆弱的代码，不确定他们能依赖平台提供什么。为了避免这种情况，你应该为平台团队选择最合适的人，并优先考虑平台工作，以便这些人可用。

那么，谁是最适合平台工作的人呢？他们应该理解抽象，以便能够创建一个清晰、易于理解的平台接口。一般来说，他们应该知道什么是好的 API。他们应该理解版本控制，因为在某个时候平台和服务将开始独立发展。最后，他们应该能够拒绝特性请求，以避免无关的功能使平台膨胀。这不仅是开发人员精神上的需要，也是组织内部社会上的需要，因为拒绝一些人的请求通常在政治上是不明智的。如果你想要具体的建议，你现在的开发团队很可能非常清楚他们当中谁是最合适的人。

### 从现有服务中提取平台

实现平台的常见方法是研究现有的服务，定义平台应该具有的功能，并从头开始实现平台。然后，当平台的功能足够完整时，就集中精力交换服务中的现有功能，以使用新的平台。总的来说，这是一个错误。现有服务中的所有复杂功能在平台中完美复制的情况很少见，因此这将导致在平台中实现缺失的功能以及在已经部署的服务中修复困难的错误需要很长时间。

更好的方法是在现有的服务开发中工作。当然，预先确定平台功能并设计其界面。做好改变这一点的准备，尽管通常基本的设计已经足够了。但是，不要从头开始实现，而是重构现有的服务，以便将平台中的功能一点一点地转移到服务的独立平台部分中。这确保了在开发过程中，任何引入到平台中的 bug 都能被您现有的服务测试快速捕获，并且当平台最终准备好被提取时，服务将处于使用平台的良好状态。

### 利用平台开发(至少)两种服务

您拥有现有的服务，这是您开发中的新平台的完美用例。但是你仍然应该在平台工作的同时或者至少在平台发布之前，通过使用它构建另一个服务来验证平台的可行性，无论这对你意味着什么。其他服务与您现有服务的差异越大，平台验证就越好，因为它将显示平台设计是否过于依赖您特定的现有服务，或者它是否真的足够通用以支持您的目标。

此外，这个其他服务应该是您打算部署的真实服务，而不是由平台团队编写的用于测试其平台的示例服务。你当然也应该拥有后者，但是这并不是对你的平台生存能力的真正测试。平台团队编写的示例服务不会测试该平台对于没有在该平台上工作的其他开发人员来说有多容易理解。此外，虽然编写了一个典型的示例服务来执行所有的平台功能，但它不会像真正的服务那样执行。根据我的经验，这确实有很大的不同，真正的服务会遇到示例服务永远不会遇到的问题。

### 平台与服务团队紧密协作

如果你遵循了上面的建议，你就让你的平台团队在你现有的服务团队中工作，将功能一点一点地提取到平台中。理想情况下，您的服务团队开发人员也应该很好地掌握平台实现。他们知道从服务中提取的功能，让他们也参与代码评审或类似的工作，在所有开发人员中传播平台知识，这是一个很好的实践。当这个过程足够深入时，您将让您的第二个服务团队尝试在开发中使用当前的平台，这将为他们的服务提供一个良好的基础，即使它还不太完整。

在此阶段，您的第二个服务团队与平台团队密切合作至关重要。最初的服务团队应该对该平台相当熟悉，因为它是从他们的工作中提取出来的，但是第二个服务团队正在开发中推动您的平台的功能。他们是想出平台最初用途的人，他们是发现平台尚未覆盖的服务需求的人，他们是发现最初服务从未触及的奇怪错误的人。因此，请记住在新服务团队和平台团队之间保持密切的联系，以确保在您将来为整个组织授权之前，在平台设计中考虑到新服务的要求。

*最初发表于*[*【futurice.com】*](https://www.futurice.com/blog/so-you-want-to-build-a-platform/)*。*