# 给外行人的 OAuth 提示

> 原文：<https://dev.to/antonfrattaroli/oauth-tips-for-the-uninitiated-476e>

开发人员被鼓吹将他们应用程序的身份管理部分卸载到 OAuth 提供者上。您知道 OAuth 是一个好东西，但是您没有很好地理解它将对您的组织产生什么影响。这里有一些能让你适应它的提示。

# 解耦认证和授权

客户/员工现在直接在你的网站上输入他们的用户名和密码。如果他们在 15 分钟内不活动，他们将自动注销，并需要再次提供他们的用户名和密码才能访问。当用户注册时，他们创建了一个被授权访问该网站的身份，并且只能访问该网站。

光靠 OAuth 服务做不了什么。它需要身份——所以它会与一个或多个身份提供者挂钩。用户将他们的用户名和密码输入到身份提供商的表单中进行身份验证。该身份提供者正在处理 OAuth 服务的身份验证部分。

OAuth 服务允许用户授权(注册的)应用程序使用他们的身份(可能还有其他信息)。一旦用户通过了身份提供者的身份验证，OAuth 服务就会为用户提供一个令牌，以便在这些授权的应用程序上使用。令牌证明用户就是他们所说的那个人。您的网站将身份验证卸载到 OAuth 服务(通过 OAuth 服务的身份提供者)，并且仅请求使用身份的授权。OAuth 服务处理授权，身份提供者处理认证，认证和授权就分离了。

应用程序的内部特性仍然在您的控制之下，独立于 OAuth 服务(除非您希望如此)。

# 短命令牌

令牌一旦发出，就不能收回(只要您使用标准的 JSON web 令牌)。这是好事也是坏事。很好，因为这意味着在你把它发出去之后，你不必担心它。必须跟踪所有这些令牌将是一笔不必要的巨大开销。糟糕的是，如果其他人得到了这个令牌，他们也可以使用它。

这就是为什么令牌需要有很短的生存期。比如说，最多 20 分钟就过期了。如果其他人得到它，他们最多有 20 分钟的时间造成伤害。

# 刷新令牌

但是你不希望你的用户每 20 分钟重新认证一次。因此，当他们第一次进行身份验证时，他们会获得两个令牌——访问令牌(20 分钟的令牌)和刷新令牌。你的网站使用刷新令牌来表示“嗨，OAuth 提供商，我的用户仍在使用我们的服务，所以他们需要刷新他们的访问令牌”。OAuth 提供者分发了一个新的访问令牌，每个人都很高兴。OAuth 提供者正在跟踪这些刷新令牌，正因为如此，它们可以持续很长时间——刷新令牌的生命周期为六个月或更长被认为是合理的。

这意味着你的网站需要更多的编码。如果服务开始给出“未授权”的错误，则访问令牌可能已经过期，需要刷新。

# 安全流程影响

很高兴今天，你只需要标记一个用户帐户，他们的认证就停止了，他们就不能再使用你的系统了。但是请记住，我们将身份验证与授权分离，因此您也需要有一个撤销其刷新令牌的计划。

# 向前移动

然后，现在您的身份认证端点已经整合，也许您可以研究多因素身份认证，并真正解决“忘记密码？”的用户体验功能性。

# 备注

本文是对这篇超高质量文章的回应和补充:

[![anabella image](img/a52a190c5d2d19e2b5c9251b316545fe.png)](/anabella) [## 与 OAuth 共舞:循序渐进指南

### 安娜贝拉 7 月 4 日 187 分钟阅读

#oauth #authentication #explainlikeimfive #beginners](/anabella/dancing-with-oauth-emp)

来自谷歌图片搜索的“标记重用”工具的 Ganked 图片，由 Bauke Schildt 插图