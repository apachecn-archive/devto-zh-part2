# 我在亚马逊网络服务上被开了 14k 美元的账单😱

> 原文：<https://dev.to/juanmanuelramallo/i-was-billed-for-14k-usd-on-amazon-web-services-17fn>

* * *

我们可能同意我们偶尔会对自己撒谎。我记得当时想到:

> 我永远不会把我的代码放在公共存储库，因为这是一个自由职业项目，只由我自己维护。

事实是，生活中什么都有可能发生。

* * *

每个月，我都会使用 AWS 的 S3 来存储我制作的几个应用程序的照片和文档，还会使用 Route 53 来路由应用程序本身的域名。我每月的账单大约是 1 美元。是的，这几乎没什么，但是这个月*(去年 4 月)*我不得不支付 14，267.86 美元(至少我的账单上是这么写的)

4 月 13 日(一个昏昏欲睡的星期一)，大概是早上 10 点，我收到了一封来自亚马逊网络服务的邮件，欢迎我使用 EC2 服务。当我收到那封邮件时，我既不知道这项服务的存在。这让我怀疑我是不是误收了那封邮件，或者我的账户……被黑了。

[![Billing dashboard](../Images/b42492cca9054bed0b79279ed5158e5e.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--nGN4cRK1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://i.imgur.com/OFYFhti.jpg)

几分钟后，我给 AWS 支持部门发了一条信息，询问那封电子邮件，他们很快回复了我，在不到 48 小时内给我打了 5 次电话。他们告诉我，我的帐户可能已经受到威胁，并给了我一些事情要做的清单，以加强我的帐户安全，并避免进一步使用 EC2 服务。我删除了我正在使用的所有访问密钥，添加了多因素身份验证，并更改了我的密码。(我不是在支持或宣传 AWS，但我不得不说 AWS 支持团队的人非常友好，在这种情况下非常有用)

这一切都始于一个无聊的周末(至少我是这么认为的)。我和一个朋友聊天，告诉他我正在做的一个兼职项目。突然，我决定把我的代码放到 github 上，向他展示所有的东西。在我把它转到 gitlab 上进行保密后，它在网上最多停留了 10 分钟。两天后，我收到了我之前告诉你的 AWS 的邮件。

* * *

发生了什么事？
包含我的 AWS 证书的文件在 git 中没有被忽略，所以当我推送我的本地存储库时，所有的文件，甚至我的证书，都在 github 中上线了(持续了几分钟，但它们都在那里)。

*建议*
请将你的证件永远秘密存放。您可以使用环境变量来存储可能危及您的帐户或账单的访问密钥和凭证。当每个人都知道现在互联网无处不在的时候，千万不要只考虑本地存储库。

*这是怎么发生的？*
既然你可以在 github 上列出所有的公共库，我想象一个工作/任务/过程/程序不停地运行，克隆每个项目并寻找。yml 文件和像“KEY”或“ACCESS_KEY”之类的关键字。这只是我想到的怎么会发生这种事。如果是这样的话，这让我很难过，人们是多么的恶毒，对他们行为的后果毫不关心。

* * *

*TL；*
博士永远不要把你的 api 密匙放在公共存储库(上传前一定要检查)
经常查看你的邮件，不要把一封邮件当成错误
做一名黑客，这样你就可以追踪并抓住偷了你的密匙的家伙(这只是一个梦想)

希望你有美好的一天！(如果你还在想，不，我不必为我没用的东西付钱)