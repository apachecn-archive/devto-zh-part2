# å¸¦æœ‰ vue ç»„ä»¶çš„ç®€å•æ³¨é‡Šéƒ¨åˆ†

> åŸæ–‡:[https://dev . to/tsanak/simple-comment-section-with-vue-components-1 CDM](https://dev.to/tsanak/simple-comment-section-with-vue-components-1cdm)

æœ€è¿‘æˆ‘å¼€å§‹å°†æˆ‘å·¥ä½œçš„å‰ç«¯éƒ¨åˆ†ä» jquery è¿ç§»åˆ° Vue.jsï¼Œæ„Ÿè§‰å¾ˆæ£’ï¼æˆ‘ä¸€ç›´å–œæ¬¢åœ¨å‰ç«¯å·¥ä½œï¼Œä½†æ˜¯å’Œ Vue ä¸€èµ·å·¥ä½œæ„Ÿè§‰å¾ˆå¥½ã€‚

å› ä¸ºæˆ‘ä»¬è¯•å›¾ç¼“æ…¢åœ°è¿ç§»ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›®å‰ä½¿ç”¨ vue çš„ UMD ç‰ˆæœ¬ï¼Œæˆ‘ä»¬åªæ˜¯ç”¨ä¸€ä¸ªè„šæœ¬æ ‡ç­¾å¯¼å…¥å®ƒã€‚è¿™å…è®¸æˆ‘ä»¬åˆ©ç”¨æ¡†æ¶æä¾›çš„å¤§éƒ¨åˆ†ç‰¹æ€§ã€‚

æˆ‘ä¸å¾—ä¸åšçš„æœ€åä¸€ä»¶äº‹æ˜¯å»ºç«‹ä¸€ä¸ªå°çš„è¯„è®ºåŒºï¼Œå®ƒå°†åœ¨ä¸€äº›å¸–å­ä¸‹ä½¿ç”¨ã€‚

### [å…ˆç¹ä¸ºå¿«](#sneak-peek)

[![alt text](../Images/b810009b084916e5a40fe703457dc59f.png "Small comment section with Vue")T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--T7xIyGd7--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/x87l1eqvltc6l40soqr9.gif)

å½“ä½¿ç”¨ç»„ä»¶æ—¶ï¼Œæˆ‘å–œæ¬¢ä¸º**åº”ç”¨**åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼Œå¹¶ä¸ºæ¯ä¸ªæ–°çš„**ç»„ä»¶**åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚è¿™æ˜¯ä¸ªäººåå¥½ï¼Œå…¶ä»–äººä½¿ç”¨ä¸åŒçš„æ–‡ä»¶ç»“æ„ã€‚

### [](#show-me-the-code)æ˜¾ç¤ºä»£ç ğŸ¤–

```
<div class="comments-outside">
    <div class="comments-header">
        <div class="comments-stats">
            <span><i class="fa fa-thumbs-up"></i> [[ likes ]]</span>
            <span><i class="fa fa-comment"></i> [[ comments.length ]]</span>
        </div>
        <div class="project-owner">
            <div class="avatar">
                <img :src="creator.avatar" alt="">
            </div>
            <div class="username">
                <a href="#">@[[ creator.user ]]</a>
            </div>
        </div>
    </div>
    <comments 
        :comments_wrapper_classes="['custom-scrollbar', 'comments-wrapper']"
        :comments="comments"
        :current_user="current_user"
        @submit-comment="submitComment"
    ></comments>
</div> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åº”ç”¨ç¨‹åºçš„ä»£ç ã€‚

```
new Vue({
    el: '#app',
    delimiters: ['[[', ']]'],
    data: function() {
        return {
            likes: 12,
            //Info about the owner of the post
            creator: {
                avatar: 'http://via.placeholder.com/100x100/36846e',
                user: 'owner'
            },
            //Some info about the current user
            current_user: {
                avatar: 'http://via.placeholder.com/100x100/a74848',
                user: 'exampler'
            },
            //Comments that are under the post
            comments: [
                {
                    id: uuidv4(),
                    user: 'example',
                    avatar: 'http://via.placeholder.com/100x100/a74848',
                    text: 'lorem ipsum dolor lorem ipsum dolor lorem ipsum dolor',
                },
            ]
        }
    },
    methods: {
        submitComment: function(reply) {
            this.comments.push({
                id: uuidv4(),
                user: this.current_user.user,
                avatar: this.current_user.avatar,
                text: reply
            });
        }
    }
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†è¢«ä¿å­˜ä¸ºä¸€ä¸ªåä¸º *comments-app.js* çš„å•ç‹¬æ–‡ä»¶ï¼Œå¹¶å°†åŒ…å«åœ¨ html ä¸­ã€‚

æ‰€ä»¥ç°åœ¨æˆ‘ä»¬æœ‰äº†åº”ç”¨ç¨‹åºçš„æ¡†æ¶å’Œä¸€äº›æ•°æ®æ¥å¼€å§‹ï¼Œä½†æˆ‘ä»¬ä»ç„¶éœ€è¦åˆ¶ä½œ*è¯„è®º*ç»„ä»¶ã€‚

é¢„è§ˆ:
[![alt text](../Images/e88ddb6886cffdcd80fad3fbdab1b506.png "comments component")](https://res.cloudinary.com/practicaldev/image/fetch/s--h3-fN6RO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/3vpu2n5yknorxgan70rj.png) 

```
Vue.component('comments', {
    delimiters: ['[[', ']]'],
    template: `
        <div class="comments">
            <div :class="comments_wrapper_classes">
                <single-comment 
                    v-for="comment in comments"
                    :comment="comment"
                    :key="comment.id"
                ></single-comment>
            </div>
            <hr>
            <div class="reply">
                <div class="avatar">
                    <img :src="current_user.avatar" alt="">
                </div>
                <input 
                    type="text" 
                    v-model.trim="reply" 
                    class="reply--text" 
                    placeholder="Leave a comment..."
                    maxlength="250"
                    required
                    @keyup.enter="submitComment"
                />
                <button 
                    class="reply--button" 
                    @click.prevent="submitComment">
                    <i class="fa fa-paper-plane"></i> Send
                </button>
            </div>
        </div>
    `,
    data: function() {
        return {
            reply: ''
        }
    },
    methods: {
        //Tell the parent component(main app) that we have a new comment
        submitComment: function() {
            if(this.reply != '') {
                this.$emit('submit-comment', this.reply);
                this.reply = '';
            }
        }
    },
    //What the component expects as parameters
    props: ['comments', 'current_user', 'comments_wrapper_classes']
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†è¢«æ”¾å…¥ä¸€ä¸ªåä¸º *comments.js* çš„æ–°æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨åº”ç”¨ç¨‹åºä¸­åŒ…å«ä¸€ä¸ªè„šæœ¬æ ‡ç­¾ã€‚
å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º*çš„æ–°ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºå•æ³¨é‡Š*(æˆ‘ä¿è¯è¿™æ˜¯æœ€åä¸€ä¸ªğŸ˜…).
é¢„è§ˆ:
[![alt text](../Images/076619a627692deb15262df990dae49c.png "Single comment component")](https://res.cloudinary.com/practicaldev/image/fetch/s--fhH27oLh--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/xjubaib7c3s7bpq78ulf.png) 

```
Vue.component('single-comment', {
    delimiters: ['[[', ']]'],
    template: `
        <div class="comment">
            <div class="avatar">
                <img :src="comment.avatar" alt="">
            </div>
            <div class="text">
                <a class="username" href="#">
                    @[[ comment.user ]]
                </a> 
                <span>[[ comment.text ]]</span>
            </div>
        </div>
    `,
    props: ['comment']
}); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™å°†è¢«æ”¾å…¥ä¸€ä¸ªåä¸º *single-comment.js* çš„æ–°æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨åº”ç”¨ç¨‹åºä¸­åŒ…å«ä¸€ä¸ªè„šæœ¬æ ‡ç­¾ã€‚

### [](#conclusion)ç»“è®º

å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæ¯å½“æˆ‘å¿…é¡»åˆ›ä½œä»»ä½•ä¸œè¥¿æ—¶ï¼Œæˆ‘éƒ½ä¼šæŠŠå®ƒåˆ†è§£æˆå‡ ä¸ªéƒ¨åˆ†ï¼Œå¹¶é—®è‡ªå·±ä¸€äº›é—®é¢˜ã€‚è¿™å¯ä»¥ç”¨åœ¨å…¶ä»–åœ°æ–¹å—ï¼Ÿ
2ã€‚ç…§åŸæ ·ç”¨åœ¨åˆ«çš„åœ°æ–¹æœ‰æ„ä¹‰å—ï¼Ÿ
å¦‚æœç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘å°±åˆ›å»ºç»„ä»¶ã€‚

ğŸ‰è°¢è°¢ä½ é€šè¯»è¿™äº›ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½æ‰¾åˆ°ä¸€äº›æœ‰ç”¨çš„ä¸œè¥¿ğŸ‰

è®©æˆ‘çŸ¥é“ï¼Œå¦‚æœä½ æƒ³çœ‹å®Œæ•´çš„ä»£ç ï¼Œä¸ css å’Œæˆ‘å°†åˆ›å»ºä¸€ä¸ª github å›è´­ã€‚