# EH Forwarder Bot 2(及其模块)有什么新功能

> 原文：<https://dev.to/blueset/what-s-so-new-in-eh-forwarder-bot-2-and-its-modules-498l>

> EH Forwarder Bot 是一个可扩展的聊天隧道框架，允许用户从多个 IM 平台一次性发送和接收消息，并最终远程管理他们的帐户。
> 
> 【https://github.com/blueset/ehForwarderBot】T2

经过将近一年的时间，EH Forwarder Bot 2 终于或多或少地完成了它的特性和结构。大多数模块也和框架一起进入测试阶段。这次更新将与之前的版本有很大的不同，正如语义版本化所暗示的那样，它将与之前的版本不兼容。

所以，我认为是时候介绍一下 EFB v2 的新特性了。

## 框架

EFB 框架已经以更加合理和开放的方式完全重新设计。现在，不是把所有的东西都放在一个存储库中，而是所有的模块都可以而且应该与框架分开安装，以保持每个模块“简单而愚蠢”(尽管情况可能不总是这样)。这也是为了鼓励更多的开发者开发他们自己的模块，看起来不会被排斥。

通道间传递的每一条信息都被抽象成对象，并在发送到另一个通道之前进行验证。验证过程检查每种消息类型所需的最少信息量，并确保它们由发送通道正确填充。像消息编辑和删除这样的特性也包含在消息协议中。

我们还引入了状态，作为在通道之间传递的另一种类型的信息。它通常用于通知主频道聊天列表和群组成员的变化

关于永久存储，2.0 使用一个标准来存储所有的配置和必要的数据。存储是特定于它所运行的概要文件的，这将在后面介绍，并且每个模块都有专门的地方存放它自己的数据。通过这种方式，数据存储与模块分离，这使得概要文件成为可能。

在 EFB v2 中，不同的概要文件可以用于运行不同的 EFB 实例。因为它们的数据是分开存储的，所以这些实例彼此独立运行。如果您想要管理来自同一服务的多个帐户，这也不是问题。EFB v2 允许用户使用实例 ID 来标识每个实例，实例 ID 可用于标识来自同一平台/渠道的不同帐户。

运行时，框架本身作为一个`coordinator`存在，它维护所有启用的通道实例和轮询线程，并管理通道之间的信息传递。

除此之外，协调器还管理所有启用的中间件，这是版本 2 中引入的另一个新组件。中间件被设计用来拦截通道之间发送的消息和状态。他们可以更改邮件，甚至阻止邮件传递。此外，由于中间件比通道更容易实现，限制更少，它还可以用于其他目的，如自动消息传递、聊天机器人、分析、猴子补丁等。

有了框架的所有新特性，项目也有了更详细的解释和 API 文档。新文档是用 Sphinx 编写的，Sphinx 是 Python 文档事实上的标准。此外，我维护的所有模块都被很好地注释，以作为示例。

此外，文档以及框架的提示被社区翻译成多种语言。

## 模块

除了为适应新框架而重构之外，我维护的所有模块都与框架库分离。此外，对代码量较大的两个模块进行了重构，以提高清晰性。这些模块也加入了社区本地化项目。

### EFB 电报大师

新功能:

*   消息编辑，并用特殊前缀指示删除。
*   手动聊天链接到群组和频道。
*   将聊天名称和个人资料图片更新到链接的群组/频道
*   截断长消息并将完整消息作为文件发送
*   更好地处理电报异常。

### EFB 微信奴隶

*   Web 微信 API 不支持某些消息或消息类型时更好的提示。
*   迁移到`wxpy`,使用(据称)更好的伪永久 ID 机制包装 OO API。
*   进一步改进的小变化

### EFB 脸谱信使奴隶

EFMS 是一个新编写的奴隶频道，为 EFB 旨在增强不熟悉微信的用户的力量提供了一个很好的预览。该频道基于 Facebook Messenger 网络客户端，为聊天和消息提供基本支持。

### EFB GPG 中间件

加密和解密所有短信，如果适用的话。它可能看起来没那么有用，因为它是作为中间件的一个例子来制作的。

## 最后…

EFB 框架及其大部分框架仍处于测试阶段。如果你是一个超级用户，并且找到了任何符合你需求的模块，我们欢迎你成为测试者。或者如果你擅长 Python，也欢迎你编写自己的模块。文档可在[这里](https://ehforwarderbot.readthedocs.io/en/latest/)获得。如果你有任何问题，请在这里随意评论。

帖子[EH Forwarder Bot 2(及其模块)](https://blog.1a23.com/2018/02/06/whats-so-new-in-eh-forwarder-bot-2-and-its-modules/)有什么新内容最先出现在 [1A23 博客](https://blog.1a23.com)上。