# ä¸€ä¸ªæ•°ç»„è½¬æ¢é”™è¯¯çš„æ•…äº‹

> åŸæ–‡:[https://dev . to/Marty himmel/a-tale-of-a-an-array-conversion-bug-8fm](https://dev.to/martyhimmel/a-tale-of-an-array-conversion-bug-8fm)

é‰´äºæœ¬çš„ä¸€æ¡æ¨æ–‡ï¼Œæˆ‘æƒ³åˆ†äº«ä¸€ä¸ªæœ€è¿‘çš„ bug æ•…äº‹ã€‚

> ![Ben Halpern profile image](../Images/3814cc9cbc453345725bf2b5e578e8a0.png)æœ¬å“ˆå°”å½­@æœ¬å“ˆå°”å½­![twitter logo](../Images/4c8a2313941dda016bf4d78d103264aa.png)æˆ‘ä»¥å‰å†™ bug ä»£ç ã€‚
> 
> æˆ‘ç°åœ¨è¿˜æ˜¯è¿™æ ·ï¼Œä½†æˆ‘ä»¥å‰ä¹Ÿæ˜¯ã€‚2018 å¹´ 8 æœˆ 19 æ—¥ä¸‹åˆ 17:29[![Twitter reply action](../Images/44d8b042100e231770330321e5b63d65.png)](https://twitter.com/intent/tweet?in_reply_to=1031231746677899264)[![Twitter retweet action](../Images/93d9c70ccc54851d2e8e881b53c21dae.png)](https://twitter.com/intent/retweet?tweet_id=1031231746677899264)[![Twitter like action](../Images/2e93f7775eadefab8bcd34a4542cc5a7.png)](https://twitter.com/intent/like?tweet_id=1031231746677899264)

å°†æ•°ç»„æ•°æ®ä» PHP è½¬ç§»åˆ° JavaScript æ˜¯æˆ‘ç»å¸¸åšçš„äº‹æƒ…ã€‚æœ‰æ—¶æ˜¯é”®/å€¼å¯¹ï¼Œæœ‰æ—¶æ˜¯ç®€å•çš„å€¼åˆ—è¡¨ã€‚

åœ¨è¿™ä¸ªç‰¹æ®Šçš„ä¾‹å­ä¸­ï¼Œæˆ‘éœ€è¦ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªäººä¸ºçš„ä¾‹å­:

```
$main_colors = ['yellow', 'blue', 'orange', 'brown'];
$other_colors = ['pink', 'purple', 'blue', 'brown'];
$intersection = array_intersect($main_colors, $other_colors); 
```

Enter fullscreen mode Exit fullscreen mode

ç„¶åä½œä¸º`json_encode($intersection);`ä¼ é€’å› JavaScriptã€‚

åœ¨ JavaScript ç«¯ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå€¼æ•°ç»„ï¼Œä½†æ˜¯å®ƒæ”¶åˆ°äº†ä¸€ä¸ªå¯¹è±¡ã€‚

ç­‰å¾…...ä»€ä¹ˆï¼Ÿ

æ²¡è¿‡å¤šä¹…ï¼Œæˆ‘å°±æ„è¯†åˆ°äº†é—®é¢˜æ‰€åœ¨ï¼Œä½†è¿™æ¯”æˆ‘æ„¿æ„æ‰¿è®¤çš„æ—¶é—´è¦é•¿ã€‚ğŸ˜†

`array_intersect`ä¿æŒç¬¬ä¸€ä¸ªæ•°ç»„çš„ç´¢å¼•é¡ºåºã€‚æ¢å¥è¯è¯´ï¼Œ`$intersection`æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç»“æ„å¦‚ä¸‹:

```
[1] => 'blue',
[3] => 'brown' 
```

Enter fullscreen mode Exit fullscreen mode

ç”¨ JavaScript ç¿»è¯‘æˆä¸€ä¸ªå¯¹è±¡:

```
{
  "1": "blue",
  "3": "brown"
} 
```

Enter fullscreen mode Exit fullscreen mode

å› ä¸ºç´¢å¼•å·ä¿å­˜åœ¨äº¤é›†ä¸­ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯ä¸€ä¸ªå€¼åˆ—è¡¨ï¼Œè€Œæ˜¯ä¸€ä¸ªé”®/å€¼å¯¹åˆ—è¡¨ã€‚

ä¿®å¤éå¸¸ç®€å•ï¼Œä½¿ç”¨`array_values`ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„çš„æ‰€æœ‰å€¼ã€‚

```
$intersection = array_values(array_intersect($main_colors, $other_colors)); 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨ PHP ä¸­ï¼Œ`$intersection`è¢«é‡æ„ä¸ºæœ‰åº/ç´¢å¼•æ•°ç»„:

```
[0] => 'blue',
[1] => 'brown' 
```

Enter fullscreen mode Exit fullscreen mode

å½“ JavaScript ä½¿ç”¨ç¼–ç (ä½¿ç”¨`json_encode`)æ—¶ï¼Œå®ƒçœ‹èµ·æ¥åƒ:

```
['blue', 'brown'] 
```

Enter fullscreen mode Exit fullscreen mode

è¿™ä¹Ÿæ˜¯æˆ‘ä¸€å¼€å§‹æ‰€æœŸå¾…çš„ã€‚ğŸ˜€

> ![Marty Himmel profile image](../Images/860cd933403bd2ab7f0f3468c2f4c0e0.png)é©¬è’‚Â·å¸Œæ¢…å°”[@é©¬è’‚å¸Œæ¢…å°”](https://dev.to/martyhimmel)![twitter logo](../Images/4c8a2313941dda016bf4d78d103264aa.png)[@ bendhalpern](https://twitter.com/bendhalpern)æˆ‘ä¹Ÿä¹ æƒ¯å†™ bug ä»£ç ã€‚
> 
> æˆ‘ç°åœ¨ä¹Ÿæ˜¯ã€‚
> 
> ç°åœ¨ï¼Œæˆ‘åªæ˜¯ä¹ æƒ¯äº†å†™ bug ä»£ç ã€‚ğŸ˜‚2018 å¹´ 8 æœˆ 19 æ—¥ä¸‹åˆ 18:02[![Twitter reply action](../Images/44d8b042100e231770330321e5b63d65.png)](https://twitter.com/intent/tweet?in_reply_to=1031240031074242560)[![Twitter retweet action](../Images/93d9c70ccc54851d2e8e881b53c21dae.png)](https://twitter.com/intent/retweet?tweet_id=1031240031074242560)[![Twitter like action](../Images/2e93f7775eadefab8bcd34a4542cc5a7.png)](https://twitter.com/intent/like?tweet_id=1031240031074242560)