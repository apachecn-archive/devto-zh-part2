# Postgres å®¹å™¨ä¸­æ•°æ®åº“çš„è‡ªåŠ¨å¤‡ä»½ã€‚

> åŸæ–‡:[https://dev . to/umeshdhakar/auto-backup-of-databases-in-postgres-container-4p 56](https://dev.to/umeshdhakar/auto-backup-of-databases-in-postgres-container-4p56)

**1ã€‚åœ¨å®¹å™¨ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚**
`touch /path/<file>`
(ä¾‹å¦‚ã€‚touch /data/bkp_cmd.sh)

**2ã€‚å°†å¤‡ä»½å‘½ä»¤å†™å…¥è¯¥æ–‡ä»¶ã€‚**
`echo "pg_dumpall -U postgres -f /path/file" >> <file>`
(ä¾‹å¦‚ã€‚ä¾‹å¦‚ echo " pg _ dumpall-U postgres-f
/data/files/backup _`date +%Y%m%d`ã€‚sql" > > bkp_cmd.sh)

**3ã€‚ä½¿æ–‡ä»¶å¯æ‰§è¡Œã€‚**
`chmod 777 <file>`
(ä¾‹å¦‚ã€‚chmod 777 /data/bkp_cmd.sh)

**4ã€‚è¿½åŠ  cron æ–‡ä»¶ã€‚**
`crontab -e`
`00 00 */15 * * /data/bkp_cmd.sh >> /data/logs/cron_logs.txt 2>&1`
æ‚¨å¯ä»¥åœ¨è¿™é‡Œç”Ÿæˆ cron å‘½ä»¤[ã€‚](https://crontab-generator.org/)
å¦‚æœæ²¡æœ‰å®‰è£…ç¼–è¾‘å™¨ï¼Œé‚£ä¹ˆ
é€šè¿‡
`(crontab -l && echo "00 00 */15 * * /data/bkp_cmd.sh >> /data/backup_cron_logs.txt 2>&1") | crontab -` å‘ cron æ–‡ä»¶è¿½åŠ å‘½ä»¤

**5ã€‚æ£€æŸ¥ cron æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚**
`service cron status`
å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œé€šè¿‡
`service cron start`å‘½ä»¤å¯åŠ¨

**5ã€‚ç­‰å¾…å¹¶åœ¨æŒ‡å®šæ—¶é—´æ£€æŸ¥å¤‡ä»½æ–‡ä»¶ã€‚**

æ„Ÿè°¢é˜…è¯»ï¼ğŸ˜Šå¦‚æœæ‚¨æœ‰ä»»ä½•å»ºè®®æˆ–æœ‰ä»»ä½•ç–‘é—®ï¼Œè¯·ç•™ä¸‹æ‚¨çš„è¯„è®ºã€‚