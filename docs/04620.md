# 在一个没有服务器的世界里，这些担忧会消失

> 原文:[https://dev . to/pauls wail/concerns-that-go-away-in-a-servers-world-30dh](https://dev.to/paulswail/concerns-that-go-away-in-a-serverless-world-30dh)

无服务器倡导者的一个共同主张是，它可以[提高团队的特性速度](https://medium.com/@PaulDJohnston/feature-velocity-and-serverless-588a2ff2d59a)并减少在云中运行应用程序的运营开销。但是，如果您是一名从未在生产中运行过无服务器工作负载的工程经理、开发人员或运营工程师，您可能会发现这种说法很难形象化和量化。

***无服务器将如何提高我们团队的生产力？***

 **它将在哪些方面影响我们工程团队所需的技能？

为了帮助回答这些问题，我编制了一个在构建和运行基于服务器的应用程序**时遇到的具体问题和任务的列表，这些问题和任务在使用无服务器架构**时不再适用。

到本文结束时，您应该对选择无服务器架构如何潜在地降低组织内新应用程序的总拥有成本有了更清晰的了解。

通读列表时，试着想一想您目前或以前使用过的基于服务器的应用程序，并就列表中的每个项目问自己以下问题:

*   我是否具备独立完成这项任务的**知识**或者这是我团队中的专家或更有经验的成员负责的事情？如果是后者，我需要多长时间才能理解这样做涉及到什么？
*   我(或我团队中的另一名成员)目前花了多少时间做这件事,需要多长时间重复一次？
*   即使我可以自己完成这项任务，我是否**确信我已经使用最佳实践正确地实现了它**并且没有引入任何安全漏洞或性能问题？
*   这是不是我们团队目前没有做的事情(由于时间或技能限制)，但我知道我们*应该*做的事情**，因此我们通过省略它承担了额外的风险？**

*关于范围的说明:我关注 AWS 生态系统，因此下面列出的项目主要与亚马逊提供的 EC2、VPC、RDS、ECS/EKS 和 ELB 服务相关。然而，大多数要点通常适用于其他主要的云提供商。我假设基于服务器的系统要么在容器中运行，要么直接在虚拟机实例上运行。*

好了，让我们深入探讨一下在一个无服务器的世界里，哪些问题会消失...

## [](#server-provisioning-and-scaling)服务器供应和扩展

*   使用特定的操作系统版本和任何必需的应用软件为您的虚拟机实例配置 ami
*   使用最佳安全设置设置 VPC 和子网
*   配置安全组并确定每个实例上需要打开的端口
*   为每个 EC2 实例类型创建启动配置和自动扩展组
*   配置负载平衡器和相关的运行状况检查
*   设置互联网网关
*   配置路由表
*   配置 VPC 对等
*   使用适当的存储和实例大小配置 RDS 集群
*   定期观察与负载相关的指标，并相应地修改扩展限制或实例资源分配
*   对每个环境(开发、测试、试运行、生产)重复上述大部分步骤

## [](#application-development-amp-maintenance)应用开发&维护

*   定义您的容器环境(Dockerfile)
*   配置您的容器编排集群(ECS、Kubernetes 等)
*   在集群中配置 pods 服务/任务定义
*   调试容器互连/服务发现问题
*   编写脚本以将构建工件(Docker 映像、zip 文件)部署到 EC2 实例
*   定期使用最新补丁更新基本 Docker 映像(例如，更新到 Node.js/Python/Java 或您的应用程序使用的任何语言)

## [](#server-maintenance)服务器维护

*   建立一个安全的 VPN/SSH bastion 实例(并对其进行修补)
*   为授权工程师管理对不同服务器的 VPN/SSH 访问
*   管理所有虚拟机实例的定期修补(通过 SSH 手动或通过脚本/系统管理器自动进行)
*   能够迅速部署紧急补丁(如心脏出血)
*   设置紧急补丁通知提醒
*   设置监视以监视磁盘空间是否不足
*   当卷空间不足时，手动扩展卷
*   处理 SSL 证书更新和部署(如果将密钥直接安装到实例中，而不仅仅是安装到由 AWS 管理的负载平衡器中)
*   对每个环境(开发、测试、试运行、生产)重复上述大部分步骤

## [](#cost-control)成本控制

*   当 EC2/RDS/elastic cache 实例不使用时，为其付费
*   过度配置实例以处理偶尔出现的突发流量高峰
*   编写 cron 作业，在晚上和周末关闭开发/测试环境实例

📖**相关: *[如何计算将一个 EC2 app 迁移到 Lambda](https://winterwindsoftware.com/ec2-to-serverless-migration-calculator/) 的计费节省。***

现在，你可能在喊*“太棒了，Paul，但是无服务器带来的所有新问题呢？”我健康怀疑的朋友，你这样做是正确的！*

我确实打算很快写这方面的文章，但是现在我会让你从 devops 的角度看这篇关于[容器与无服务器的文章](https://dev.to/adnanrahic/containers-vs-serverless-from-a-devops-standpoint-e4n)以及马丁·福勒关于[操作无服务器系统的缺点的章节](https://martinfowler.com/articles/serverless.html#drawbacks)。

也就是说，虽然这很难客观地衡量，但我个人认为，对于今天在云中构建绿地生产系统的大多数开发团队来说**，无服务器应用的总拥有成本将低于基于服务器的应用的总拥有成本**。

如果您的组织没有一个熟练的运营团队来帮助您的开发团队构建供应和维护您的应用程序所需的基础架构和自动化，这一点尤其正确。

还有什么我应该加到清单上的吗？我肯定有很多事情我已经忘记了，所以请在下面给我留言，我会把它加进去。

* * *

💌 ***如果你喜欢这篇文章，你可以注册[到我关于在 AWS](https://winterwindsoftware.com/newsletter/) 中构建无服务器应用的每周时事通讯。***

*原载于 winterwindsoftware.com*。**