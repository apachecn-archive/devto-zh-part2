# ä½¿ç”¨ GatsbyJS ä¸ºä»»ä½• React é¡¹ç›®ç”Ÿæˆæ–‡æ¡£

> åŸæ–‡:[https://dev . to/whoisryosuke/generate-documentation-for-any-react-project-using-gatsbyjs-18ec](https://dev.to/whoisryosuke/generate-documentation-for-any-react-project-using-gatsbyjs-18ec)

æˆ‘æœ€è¿‘åœ¨æ¢ç´¢è®¾è®¡ç³»ç»Ÿçš„ä¸åŒæ–‡æ¡£è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡æˆ‘çš„å®éªŒï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªæ¨¡æ¿æ¥ä¸ºä»»ä½• React é¡¹ç›®åˆ›å»º Gatsby æ–‡æ¡£ã€‚

ä»¥ [docblocks](http://usejsdoc.org/) çš„å½¢å¼ç¼–å†™ä¸ç»„ä»¶å†…è”çš„æ–‡æ¡£ï¼Œå¹¶ä½¿ç”¨ [MDX](https://github.com/mdx-js/mdx) æ·»åŠ æ›´æ·±å…¥çš„æè¿°+å®ä¾‹ã€‚æŸ¥çœ‹è¿™é‡Œçš„[æ¼”ç¤ºã€‚](https://gatsby-documentation-starter.netlify.com)

[![Screenshot of the demo website](../Images/aa24b667f4b84fc4d5dd3ad2c70880c0.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--slXmZmnV--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn.hashnode.com/res/hashnode/image/upload/v1537566954609/HJQeFkmtX.png)

å¦‚æœä½ çš„ä»£ç å·²ç»è¢«*è®°å½•åœ¨æ¡ˆï¼Œå¹¶ä¸”ä½ çš„ç»„ä»¶ä½äº`src/components`â€”â€”é‚£ä¹ˆ**ä½ å°±å¯ä»¥å¼€å§‹äº†ï¼**å°†è¿™ä¸ªé¡¹ç›®å…‹éš†åˆ°ä½ çš„ä»£ç åº“ä¸­ï¼Œç„¶å*è®©å®ƒè£‚å¼€å§ï¼*ğŸš€*

 *æ²¡æœ‰é‚£ä¸ªè®¾ç½®ï¼Ÿä¸è¦æ‹…å¿ƒï¼æˆ‘æ¶µç›–äº†ä»¥ä¸‹æ‰€æœ‰å†…å®¹ğŸ‘‡

## [](#getting-started)å…¥é—¨

**ç”¨ Netlify å®‰è£…**

1.  [![Deploy to Netlify](../Images/cf684e295a7d6d8caa5d339b5a4a6fa6.png)T2ã€‘](https://app.netlify.com/start/deploy?repository=https://github.com/whoisryosuke/gatsby-documentation-starter/tree/example)

**ç”¨ Gatsby CLI å®‰è£…**

1.  `gatsby new docs https://github.com/whoisryosuke/gatsby-documentation-starter/`

**ä» Github å®‰è£…**

1.  `git clone https://github.com/whoisryosuke/gatsby-documentation-starter.git`
2.  ç”¨ä½ çš„ç»„ä»¶+ MDX *çš„ä½ç½®æ›´æ–°`gatsby-config.js`(è§:â€œæ”¹å˜æºæ–‡ä»¶å¤¹â€)*
3.  `npm install`é¡¹ç›®å†…éƒ¨
4.  `npm run develop`
5.  æŸ¥çœ‹æ‚¨çš„æ–‡æ¡£: [http://localhost:8000](http://localhost:8000)

### [](#creating-documentation)åˆ›å»ºæ–‡æ¡£

æ–‡æ¡£æœ‰ä¸¤ä¸ªæ¥æº:ç»„ä»¶æºä»£ç å’Œ MDX æ–‡ä»¶ã€‚

```
src
â””â”€â”€ components
    â””â”€â”€ Button
        â”œâ”€â”€ Button.js
        â””â”€â”€ Button.mdx 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

[**React-docgen**](https://github.com/reactjs/react-docgen) æŠ“å–ä½ ä¸º React ç±»/å‡½æ•°(`Button.js`)ç¼–å†™çš„ä»»ä½• JS æ–‡æ¡£å—ï¼Œä»¥åŠé“å…·ç±»å‹ã€‚è¿™äº›éƒ½æ˜¾ç¤ºåœ¨æ‚¨çš„æ–‡æ¡£é¡µé¢ä¸Šï¼Œå¹¶ä»¥è¡¨æ ¼çš„å½¢å¼ç»„ç»‡èµ·æ¥ã€‚

åœ¨ä½ çš„ **MDX** æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥ç”¨ JSX çš„ä¾‹å­ç¼–å†™é¢å¤–çš„æ–‡æ¡£(æ¯”å¦‚ React ç»„ä»¶ï¼).æ‚¨ä¹Ÿå¯ä»¥åœ¨è¿™é‡ŒæŒ‡å®šé¡µé¢ slug(ä¸€ä¸ª**é¡µé¢åç§°**å’Œ**ç±»åˆ«**)ã€‚æ‚¨çš„é¡µé¢å°†è¢«ç”Ÿæˆä¸º`http://yoursite.com/<category>/<pageName>`ã€‚

ä¸ºäº†æ˜¾ç¤ºç»„ä»¶æ•°æ®ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªç»„ä»¶çš„ MDX æ–‡ä»¶â€”â€”å¹¶ä¸”æ–‡æ¡£å—ä¸­çš„é¡µé¢åå’Œç»„ä»¶åéœ€è¦åŒ¹é…ã€‚

> å¦‚æœä¸æƒ³ç›´æ¥ä» components/JS æ–‡ä»¶åˆ›å»º MDX æ–‡ä»¶å’Œç”Ÿæˆé¡µé¢â€”â€”å‚è§ Github docs éƒ¨åˆ†:â€œä» react-docgen åˆ›å»ºé¡µé¢â€ã€‚æˆ‘é€‰æ‹© MDX çš„é¦–è¦åŸå› æ˜¯ frontmatter çš„çµæ´»æ€§ï¼Œå®ƒå…è®¸ä½ ä¸ºç»„ä»¶åˆ›å»ºä¸åŒçš„â€œéƒ¨åˆ†â€(ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰å…ƒç´  vs æ’ç‰ˆ)ã€‚

```
/**
 * ComponentTitle
**/
class ComponentName extends React.Component {} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

```
---
name: ComponentTitle
menu: CategoryName
--- 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

> ä¸ºä½äº[http://localhost:8000/category name/component name](http://localhost:8000/categoryname/componentname)çš„ç»„ä»¶åˆ›å»ºä¸€ä¸ªé¡µé¢

## [](#how-does-it-work)å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

å¦‚æœä½ ä»æ¥æ²¡æœ‰åä¸‹æ¥çœŸæ­£åˆ›å»ºè¿‡ä¸€ä¸ªâ€œHello World â€, Gatsby å¯èƒ½ä¼šå˜å¾—éå¸¸å¤æ‚ï¼Œè€Œåœ¨åˆ›å»ºåšå®¢æ—¶ï¼Œæƒ…å†µä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚

ä¸‹é¢æ˜¯å®ƒåœ¨é«˜å±‚æ¬¡ä¸Šçš„å·¥ä½œæ–¹å¼:

1.  Gatsby ä»æ‚¨çš„é¡¹ç›®ä¸­æå–æ•°æ®(JS å’Œ MDX æ–‡ä»¶)
2.  æ•°æ®è¢«è½¬æ¢æˆ GraphQL æ•°æ®å±‚
3.  åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒGatsby ä½¿ç”¨ MDX æ–‡ä»¶ä¸ºæ¯ä¸ªç»„ä»¶ç”Ÿæˆé¡µé¢ã€‚è¿™äº›é¡µé¢æ˜¯ React ç»„ä»¶ï¼Œå®ƒä»¬å‘ GraphQL æŸ¥è¯¢æˆ‘ä»¬ç»„ä»¶çš„æ–‡æ¡£+è§£æçš„ MDX

> å¦‚æœä½ ä¸ç†Ÿæ‚‰ç›–èŒ¨æ¯”çš„å·¥ä½œæ–¹å¼ï¼Œ[å»ä»–ä»¬çš„ç½‘ç«™](http://gatsby.org)äº†è§£æ›´å¤šä¿¡æ¯ã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªé™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨ GraphQL ä»åŠ¨æ€æ•°æ®æº(APIã€æœ¬åœ°æ–‡ä»¶ç­‰)ç”Ÿæˆé™æ€é¡µé¢ã€‚

## [](#a-little-slower-please)è¯·æ…¢ä¸€ç‚¹

Gatsby å°†æ•°æ®æ‹‰å…¥ GraphQLï¼Œè½¬æ¢æ•°æ®(æ¯”å¦‚è§£æ Markdown)ï¼Œç„¶ååŸºäº React ç»„ä»¶æ„å»ºé¡µé¢ã€‚

è®©æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹è¿™äº›éƒ¨åˆ†ã€‚

### [](#the-data-part)â™»ï¸æ•°æ®éƒ¨åˆ†

Gatsby ä½¿ç”¨â€œæºâ€æ’ä»¶å°†æ•°æ®èšåˆåˆ° GraphQL ä¸­ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯ç”¨`gatsby-source-filesystem`è®¾ç½®çš„ï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨é¡¹ç›®çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ(æŠ“å–ä»»ä½•æ–‡ä»¶ï¼Œä» TXT åˆ° JS åˆ° MDX)ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰å¯¼å…¥æ–‡ä»¶çš„ GraphQL ç«¯ç‚¹ã€‚æ¯ä¸ªè¢«æŸ¥è¯¢çš„æ–‡ä»¶ï¼Œæˆ– GraphQLâ€œèŠ‚ç‚¹â€ï¼ŒåŒ…å«è‡ªåŠ¨ç”Ÿæˆçš„ ID å’Œä¸€ä¸ªå­—ç¬¦ä¸²åŒ–ç‰ˆæœ¬çš„æ–‡æ¡£ä½“ã€‚

### [](#the-transforming-part)âœ¨æ”¹é€ éƒ¨åˆ†

ç„¶å Gatsby ä½¿ç”¨**â€œtransformerâ€**æ’ä»¶ä¸ºç‰¹å®šæ•°æ®é›†åˆ›å»ºä¸åŒçš„ GraphQL ç«¯ç‚¹ã€‚å¦‚æœæ‚¨åœ¨ GraphQL ä¸­æŸ¥è¯¢â€œsourceâ€æ’ä»¶å¯¼å…¥çš„æ•°æ®ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°å®ƒéå¸¸ç®€å•ã€‚transformer æ’ä»¶å°±æ˜¯è¿™ä¹ˆåšçš„ï¼Œ*å°†æ•°æ®è½¬æ¢æˆå¯ç”¨çš„æ ¼å¼*ã€‚ä¾‹å¦‚ï¼Œ`gatsby-transformer-json`éå†æ¯ä¸ªæ–‡ä»¶ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ JSONï¼Œç„¶åå°†ä¸»ä½“å­—ç¬¦ä¸²è§£æå›ä¸€ä¸ªå¯¹è±¡/æ•°ç»„ã€‚

è¿™ä¸ªæ¨¡æ¿ä½¿ç”¨äº† [@ChristopherBiscardi](https://github.com/ChristopherBiscardi/) çš„ [gatsby-mdx](https://github.com/ChristopherBiscardi/gatsby-mdx/) å’Œç›–èŒ¨æ¯”å›¢é˜Ÿçš„[Gatsby-transformer-react-doc gen](https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-react-docgen) **gatsby-mdx** è§£æä»»ä½• mdx æ–‡ä»¶ï¼Œå¹¶åˆ›å»ºç¼“å­˜çš„ HTML+JS æ–‡ä»¶å¯¼å…¥åˆ°é¡µé¢ä¸­ã€‚**Gatsby-transformer-react-doc gen**ä½¿ç”¨ [react-docgen](https://github.com/reactjs/react-docgen) ï¼Œè¿™æ˜¯ä¸€ä¸ªç”±è„¸ä¹¦å›¢é˜Ÿåˆ›å»ºçš„ CLI å·¥å…·ï¼Œç”¨äºä» React ç»„ä»¶ä¸­æå–æ–‡æ¡£ã€‚å®ƒå¯¹æ‚¨å¯¼å…¥çš„ä»»ä½• JS æ–‡ä»¶è¿è¡Œ CLIï¼Œå¹¶ä¸ºå…¶åˆ›å»º GraphQL ç«¯ç‚¹ã€‚

### [](#the-build-part)âš™ï¸ã€Šè¥é€ é›¶ä»¶ã€‹

å½“ Gatsby è¿è¡Œå®ƒçš„æ„å»ºè¿‡ç¨‹æ—¶ï¼Œå®ƒä»æˆ‘ä»¬åŒ…å«åœ¨`src/pages/`ç›®å½•ä¸­çš„ä»»ä½• JS æ–‡ä»¶åˆ›å»ºé¡µé¢ã€‚

åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå®ƒè¿˜ä¼šæ‰§è¡Œæˆ‘ä»¬æ·»åŠ åˆ°`gatsby-node.js`ä¸­çš„å…¶ä»–æ¨¡å—ã€‚è¿™å…è®¸æˆ‘ä»¬åšä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚å‘ GraphQL ç«¯ç‚¹æ·»åŠ æ–°èŠ‚ç‚¹ï¼Œæˆ–è€…ä» GraphQL æŸ¥è¯¢åˆ›å»ºé¡µé¢ã€‚

å¯¹äºè¿™ä¸ªæ¨¡æ¿ï¼Œæˆ‘åœ¨ GraphQL ä¸­æŸ¥è¯¢æ‰€æœ‰ MDX æ–‡ä»¶ï¼Œå¹¶æ ¹æ®è¿™äº›æ–‡ä»¶åˆ›å»ºé¡µé¢ã€‚é¡µé¢æ˜¯ä»â€œæ¨¡æ¿â€ç”Ÿæˆçš„ï¼Œæ¨¡æ¿æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè¿è¡Œ GraphQL æŸ¥è¯¢çš„ React ç»„ä»¶ã€‚ç”±äº Gatsby æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒä¸ºæ‰€æœ‰è¿™äº›æ“ä½œ(æŸ¥è¯¢ GraphQLã€ä» React ç»„ä»¶åˆ›å»ºé¡µé¢ã€å‘ React ç»„ä»¶ä¼ é€’æ•°æ®ç­‰)æä¾›äº† API/æ–¹æ³•ã€‚

## [](#the-design-process)ğŸ¨è®¾è®¡è¿‡ç¨‹

æˆ‘æƒ³ä¿æŒè®¾è®¡å’Œå®é™…ä»£ç çš„è½»é‡çº§ï¼Œä»¥ä¾¿æ›´å®¹æ˜“é‡æ–°åˆ©ç”¨ã€‚æ–‡æ¡£çš„å¸ƒå±€æ˜¯ 2 åˆ—ï¼Œå¸¦æœ‰ä¸€ä¸ªæ ‡é¢˜ï¼Œç§»åŠ¨è®¾å¤‡ä¸Šçš„ä¾§è¾¹æ åˆ—æ¶ˆå¤±äº†(æ ‡é¢˜ä¸­å‡ºç°äº†ä¸€ä¸ªâ€œåˆ‡æ¢ä¾§è¾¹æ â€æŒ‰é’®)ã€‚æ—¶é«¦çš„åŠ¨ç”»ç§»åŠ¨æŒ‰é’®æ˜¯ç”± [@ ainalem](https://codepen.io/ainalem/) ä» Codepen ä¸­å–å‡ºçš„ã€‚

## [](#what-if-i-dont-like-gatsbyjsreactetc)ä¸å–œæ¬¢ç›–èŒ¨æ¯”/JS/React/ç­‰æ€ä¹ˆåŠï¼Ÿ

å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ä¸åŒçš„è§£å†³æ–¹æ¡ˆï¼Œæœ‰å¤§é‡çš„æ–‡æ¡£å¯ä¾›é€‰æ‹©:

*   [Docz](https://github.com/pedronauck/docz/)
*   [react-styleguidist](https://github.com/styleguidist/react-styleguidist)
*   [Docusaurus](https://docusaurus.io/)
*   [æ­¦æ‰“ã€”t1ã€•](https://vuepress.vuejs.org/)
*   [Gitbook](https://www.gitbook.com/)
*   [docsify](https://github.com/docsifyjs/docsify)

è¿˜æœ‰æ›´å¤šï¼ä¸è¦è§‰å¾—å±€é™äºæŸä¸ªç‰¹å®šçš„å †æ ˆæˆ–è®¾ç½®ã€‚æ‰¾ä¸€ä¸ªå’Œä½ çš„æµç¨‹ä¸€è‡´çš„ã€‚

## [](#document-everything)è®°å½•ä¸€åˆ‡ï¼

æˆ‘å¾ˆæ¬£èµé‚£äº›ä¼Ÿå¤§çš„å·¥å…·ï¼Œå®ƒä»¬è®©ä½ çš„è¾›å‹¤å·¥ä½œè¶…è¶Šäº† *docblocks* å’Œ *proptypes* ï¼Œåªéœ€ç‚¹å‡»ä¸€ä¸‹æŒ‰é’®ï¼Œå°±èƒ½å°†ä½ çš„ä»£ç åº“è½¬å˜æˆä¸€ä¸ªåŠŸèƒ½é½å…¨ã€è®¾è®¡è‰¯å¥½çš„æ–‡æ¡£ç½‘ç«™ã€‚

æˆ‘æ˜¯ä¸ºäº†è®¾è®¡ç³»ç»Ÿè€Œè®¾è®¡çš„ï¼Œä½†æ˜¯å®ƒçœŸçš„å¯ä»¥å’Œä»»ä½•ä½¿ç”¨ React ç»„ä»¶çš„é¡¹ç›®ä¸€èµ·å·¥ä½œğŸ™Œ

æˆ‘ä¸€ç›´åœ¨å¯»æ‰¾å·¥å…·æ¥æé«˜æˆ‘çš„å¼€å‘äººå‘˜å’Œè®¾è®¡äººå‘˜çš„èƒ½åŠ›ï¼Œä»¥æ”¹å–„ä»–ä»¬çš„å·¥ä½œæµç¨‹ã€‚å¦‚æœè¿™å¯¹ä½ çš„æ–‡æ¡£æœ‰å¸®åŠ©ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼Œæˆ–è€…å‘æ¨æ–‡ç»™æˆ‘ğŸ‘

[åœ¨ Github ä¸Šå…‹éš†é¡¹ç›®](https://github.com/whoisryosuke/gatsby-documentation-starter) | [æŸ¥çœ‹æ¼”ç¤ºç«™ç‚¹](https://gatsby-documentation-starter.netlify.com)

Cheers ğŸ»
Ryo

* * *

**å‚è€ƒæ–‡çŒ®:**

*   [ç›–èŒ¨æ¯”-æ–‡æ¡£-é¦–å‘](https://github.com/whoisryosuke/gatsby-documentation-starter)
*   [æ¼”ç¤ºç°åœº](https://gatsby-documentation-starter.netlify.com)
*   [ç›–èŒ¨æ¯”](http://gatsby.org)
*   [ç›–èŒ¨æ¯”-mdx](https://github.com/ChristopherBiscardi/gatsby-mdx/)
*   [ç›–èŒ¨æ¯”-å˜å‹å™¨-ååº”-æ–‡ä»¶ç”Ÿæˆ](https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-react-docgen)
*   [ç›–èŒ¨æ¯”-å˜å½¢é‡‘åˆš-å¤‡æ³¨](https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-remark)
*   [é£æ ¼æŒ‡å—æŒ‡å—](http://bradfrost.github.io/style-guide-guide/)
*   [ç§»åŠ¨æŒ‰é’® CSS](https://codepen.io/ainalem/pen/LJYRxz)*