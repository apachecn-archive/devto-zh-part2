# è¶…è¶Š PEP8 çš„ Python

> åŸæ–‡:[https://dev.to/edelvalle/python-beyond-pep8-16g6](https://dev.to/edelvalle/python-beyond-pep8-16g6)

å¦‚æœä½ å†™ Python ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ [PEP8](https://www.python.org/dev/peps/pep-0008/) å»æŸ¥ä¸€ä¸‹[T3ã€‘ç°åœ¨ T5ã€‘ã€‚](https://www.python.org/dev/peps/pep-0008/)

PEP8 æ˜¯ Python ä»£ç çš„é£æ ¼æŒ‡å—ï¼Œæˆ‘è®¤ä¸ºå®ƒéå¸¸å¥½ï¼Œæˆ‘éå¸¸é¼“åŠ±äººä»¬åœ¨ CI/CD ç³»ç»Ÿä¸­è¿è¡Œæµ‹è¯•ä¹‹å‰ï¼Œé¦–å…ˆä½¿ç”¨ linter + static analyzer ä½œä¸ºå†’çƒŸæµ‹è¯•ï¼Œå¹¶ä¿æŒäº‹æƒ…çš„æ•´æ´(åœ¨å¾®è§‚å±‚é¢ä¸Šï¼Œæˆ‘åœ¨è¿™é‡Œä¸è®¨è®ºæ¶æ„)ã€‚

ä½†æ˜¯è¿™æ¡æŒ‡å¯¼æ–¹é’ˆåœ¨ä¸€äº›åœ°æ–¹ç¼ºä¹ï¼Œå› ä¸ºå®ƒæå€¡çš„é£æ ¼æ˜¯è„†å¼±çš„ï¼Œå¯ä»¥æ”¹è¿›çš„:

# æ˜“ç¢å‹ç—•

è¿™æ˜¯ PEP8 èƒ½æ¥å—çš„é£æ ¼ï¼Œä½†æ˜¯å¾ˆè„†å¼±ã€‚

```
# Aligned with opening delimiter. foo = long_function_name(var_one, var_two,
                         var_three, var_four=4) 
```

æœ‰äº›ä¸œè¥¿å¾ˆå®¹æ˜“ç ´ç¢ï¼Œé€šè¿‡æ”¹å˜`foo`æˆ–`long_function_name`çš„åç§°ï¼Œå¾ˆå®¹æ˜“ç ´åè¿™ä¸ªç¼©è¿›ï¼Œå¹¶ä¸”ç¬¬äºŒè¡Œä¸­çš„å‚æ•°ä¼šç«‹å³é”™ä½ã€‚

```
# Aligned with opening delimiter. foo = refactoring(var_one, var_two,
                         var_three, var_four=4) 
```

æœ‰ä¸€äº›ç¼–è¾‘å™¨ä¼šè‡ªåŠ¨ä¸ºä½ çº æ­£è¿™ä¸ªé”™è¯¯ï¼Œä½†ä¸æ˜¯æ¯ä¸ªäººéƒ½æœ‰ã€‚æœ‰æ—¶æˆ‘ä¹Ÿä¼šå‘ç°åƒè¿™æ ·è¢«æŠ›å¼ƒçš„ä»£ç ï¼Œè¿™äº›ä»£ç æ¥è‡ªä¸å¾—ä¸é€ƒç¦»ç€ç«çš„å¤§æ¥¼æˆ–å…¶ä»–åœ°æ–¹çš„äººã€‚

å½“é•¿æ—¶é—´çš„å‡½æ•°è°ƒç”¨åœ¨ä¸€èµ·çœ‹èµ·æ¥åƒè¿™æ ·æ—¶ï¼Œå°±ä¸å¤ªå¥½äº†

```
# Aligned with opening delimiter. foo = long_function_name(var_one, var_two,
                         var_three, var_four=4)
barf = another_long_function_name(var_one, var_two,
                                  var_three, var_four=4) 
```

å…¶ä¸­å³ä½¿åœ¨è¯­ä¹‰ä¸Šä¸¤è¡Œå¤„äºç›¸åŒçš„çº§åˆ«ï¼Œç©ºæ ¼çš„æ•°é‡ä¹Ÿæ˜¯ä¸è§„åˆ™çš„ã€‚åªæ˜¯è§†è§‰ä¸Šçš„è¯¯å¯¼ã€‚

å¦‚æœæˆ‘ä»¬åªæ˜¯æ¯è¡Œåˆ—å‡ºä¸€ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œå¹¶ä»¥é€—å·ç»“å°¾:

```
# Aligned with opening delimiter. foo = long_function_name(
    var_one, 
    var_two,
    var_three, 
    var_four=4,
) 
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“æ‚¨æ›´æ”¹å‡½æ•°çš„åç§°ã€åˆ é™¤æˆ–æ·»åŠ å‚æ•°æˆ–è€…æ›´æ”¹å‚æ•°çš„åç§°æ—¶ï¼Œç¼©è¿›çš„å…¶ä½™éƒ¨åˆ†ä¸ä¼šæ–­å¼€ã€‚å¦‚æœæ‚¨æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å‚æ•°æˆ–è€…åˆ é™¤äº†ä¸€ä¸ªå‚æ•°ï¼Œä»£ç å®¡æŸ¥çš„å·®å¼‚å°†æ˜¾ç¤ºä¸ºæ¯ä¸ªä¿®æ”¹çš„å‚æ•°çš„å•è¡Œå˜åŒ–:

```
 # Aligned with opening delimiter.
 foo = long_function_name(
     var_one, 
     var_two,
-    var_three, 
     var_four=4,
+    another_var=5,
 ) 
```

å½“ä½ è¿›è¡Œå¹¶æ’æ¯”è¾ƒæ—¶ï¼Œå¾ˆå®¹æ˜“å‘ç°å˜åŒ–ã€‚

# çº¿çš„å»¶ç»­å’Œä¸­æ–­

åœ¨ Python ä¸­ï¼Œå¦‚æœä¸€è¡Œå¤ªé•¿ï¼Œä½ å¯ä»¥ä½¿ç”¨`\`ç»§ç»­ä¸‹ä¸€è¡Œã€‚åœ¨æˆ‘ä¸ªäººçœ‹æ¥ï¼Œè¿™çœ‹èµ·æ¥æœ‰ç‚¹ä¸‘é™‹ï¼Œä½ éœ€è¦æ—¶åˆ»è®°ä½æ‰€æœ‰çš„è¿›å£çªç ´ï¼Œä¾‹å¦‚:

```
from django.db.models.expressions import Case, Exists, Expression, \
    ExpressionList, ExpressionWrapper, F, Func, OuterRef, RowRange, Subquery, \
    Value, ValueRange, When, Window, WindowFrame 
```

å¦‚æœä½ ä¸å¾—ä¸åˆ é™¤æˆ–é‡å‘½åæŸäº›å†…å®¹ï¼Œè¿™äº›è¡Œçš„ç¼©è¿›é•¿åº¦ä¼šçœ‹èµ·æ¥å¾ˆæ»‘ç¨½ï¼Œä½ å¯èƒ½ä¸å¾—ä¸å°†æ•´ä¸ªæ–‡æœ¬æ¢è¡Œå¹¶é‡æ–°æ’åˆ—æ‰€æœ‰çš„åæ–œæ ã€‚

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ‹¬å·ä½œä¸ºåˆ†ç»„æœºåˆ¶ï¼Œå°±åƒåœ¨æ•°å­¦ä¸­ä¸€æ ·:

```
from django.db.models.expressions import (
    Case, Exists, Expression, ExpressionList, ExpressionWrapper, F, Func,
    OuterRef, RowRange, Subquery, Value, ValueRange, When, Window, WindowFrame,
) 
```

æˆ–è€…ä¹Ÿ:

```
from django.db.models.expressions import (
    Case, 
    Exists, 
    Expression, 
    ExpressionList, 
    ExpressionWrapper,  
    F, 
    Func,
    OuterRef, 
    RowRange, 
    Subquery, 
    Value, 
    ValueRange, 
    When, 
    Window, 
    WindowFrame,
) 
```

æˆ‘ä¸å–œæ¬¢æœ€åä¸€ç§ï¼Œå› ä¸ºå®ƒå¤ªé•¿äº†ï¼Œé€šå¸¸å¯¼å…¥ä¸ä¼šç»å¸¸æ”¹å˜ï¼Œä½†æœ€åä¸€ç§é£æ ¼ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ï¼Œå¹¶ä¸”å…·æœ‰æˆ‘ä¸Šé¢å±•ç¤ºçš„ç¤ºä¾‹ 1 çš„æ‰€æœ‰ä¼˜ç‚¹ï¼Œæ˜¯é‡æ„è¯æ˜ã€‚

å½“è°ƒç”¨çš„ä¸œè¥¿å¤ªé•¿æ—¶

```
posts = (
   Posts.objects
   .exclude(author=user)
   .filter(title__startswith='hellow')
   .first()
) 
```

å½“æœ‰ä¸€ä¸ªé•¿`if` :

```
if (not previous_is_grouped
        and not prev.has_two_images
        and nextone
        and not nextone.has_two_images):
    do_evil_stuff() 
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä¸å–œæ¬¢ if çš„ç¬¬ä¸€è¡Œå’Œå…¶ä½™éƒ¨åˆ†ä¹‹é—´çš„ä¸­æ–­ï¼Œä½†è¿™å¾ˆå¥½ã€‚

åŒæ ·åœ¨åšé•¿åˆ—è¡¨ç†è§£çš„æ—¶å€™:

```
double_of_evens = [
    x * 2
    for x in range(100)
    if x % 2 == 0
] 
```

è¿™äº›è¡Œæ˜¯æ˜ å°„ã€è¿­ä»£å’Œè¿‡æ»¤ã€‚

# å…³é—­

ä¸€é—¨è¯­è¨€å’Œæ•´ä¸ªç¤¾åŒºçš„é€šç”¨é£æ ¼æŒ‡å—æ˜¯æƒŠäººçš„ï¼Œæˆ‘å–œæ¬¢å®ƒã€‚ä½†æ˜¯ä¸è¦ç›²ç›®ï¼Œå¦‚æœä½ çœŸçš„è®¤ä¸ºæœ‰ä¸€ä¸ªçœŸæ­£çš„ç†ç”±æŠŠäº‹æƒ…åšå¾—æ›´å¥½ï¼Œé‚£å°±è¿ˆå‡ºè¿™ä¸€æ­¥ã€‚

æƒ³æƒ³é‚£äº›ä¸å¾—ä¸é€ƒç¦»ç€ç«å»ºç­‘çš„åºŸå¼ƒä»£ç ã€‚è‹±é›„è”ç›ŸğŸ˜‚ã€‚