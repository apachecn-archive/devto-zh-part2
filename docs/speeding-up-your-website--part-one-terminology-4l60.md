# 加速你的网站——第一部分:术语

> 原文：<https://dev.to/dotnetcoreblog/speeding-up-your-website--part-one-terminology-4l60>

在我们开始之前，这是来自我个人博客的同一篇文章的编辑版本，在[blog.gaprogman.com](https://blog.gaprogman.com/)

### 首先发布公告

30 毫秒

这就是我的新播客主页的加载时间。比如，从最初的请求到在浏览器中绘制页面。

### 什么是缓存？

对于这个博客，我没有明确的目标读者，所以我将从一些关于什么是缓存的背景信息开始——至少从编程的角度来看。我写了一篇关于过去当你加载一个网页时会发生什么的概述

*在不同的博客上——这里有一个[链接](https://dotnetcore.gaprogman.com/2017/01/05/bundling-in-net-core-mvc-applications-with-webpack/)*

但基本过程是:

1.  你的浏览器计算出托管网站的服务器在哪里——这叫做 DNS 查找
2.  您的浏览器向服务器请求您告诉它加载的网页
3.  服务器用一些 HTML(页面的文本内容和放在哪里的描述)来响应
4.  你的浏览器开始在 HTML 中寻找它需要的其他东西(图片、CSS、JavaScript、视频等等。)向您展示页面
5.  你的浏览器向服务器请求它需要的每一个额外的文件(图片，CSS，JavaScript，视频等等。)
6.  您的浏览器开始下载这些文件(它可以并行执行这些操作，但一次只能下载 5-10 个文件)
7.  在这个过程中，它开始为你绘制网页
8.  当其他每个文件从服务器返回时，它开始将它们添加到页面中

在拨号上网的时代，这个过程曾经非常缓慢。随着宽带的出现，我们突然拥有了十倍的带宽，并发现自己能够更快地下载东西。那时，web 开发人员开始包括更高质量的图像，并开始考虑提供视频服务。首先是 RealVideo、QuickTime、Windows Media Video、DiVX 和 XviD，以及一大堆其他格式；然后是 YouTube。然后出现了广告网络和跟踪脚本。这又让一切慢了下来

*更不用说他们让网站变得愚蠢不安全了*

为了减少你的浏览器下载文件所需的时间，它可以将你访问的每个网站的部分内容临时存储在所谓的缓存中

*这类似于我以前写过的超级获取——这里有一个[链接](https://blog.gaprogman.com/2011/01/fetch-or-why-i-reinstall-my-os-so-often/)*

这意味着当你回到一个网站时，如果没有任何图像发生变化(举例来说)，那么你的浏览器不必重新下载它们。这使得页面加载更快。简而言之，这就是缓存。

### 不同类型的缓存

到目前为止，我已经谈论了“客户端”缓存，之所以这样称呼是因为它发生在客户端

*你的网络浏览器是客户端，而运行网站的机器是服务器*

这很好，但是一旦你清除了浏览器的历史记录，它就会变得毫无用处

很明显，你这么做只是因为你刚刚为某人订购了一份超级秘密的礼物...对吗？

当您这样做时，它会清除浏览器缓存。这意味着，下次你访问你最喜欢的网站时，你的浏览器必须重新下载之前缓存的所有内容。有时这需要发生(例如，当硬盘空间开始不足时)，有时这是有意为之(一旦你关闭私人浏览器窗口，它们就会自动清理)。

##### 服务器端缓存

你最近访问的大多数网站都会为你提供“动态内容”。脸书是这方面的一个典型例子。每次你加载你的订阅源(登录后)，那里的内容都有可能改变。这是因为运行脸书的服务器在把你的提要返回给你之前做了一些工作。也就是说，它查看所有的状态

*状态？*

找出你最感兴趣的朋友。然后，它会将所有数据打包并发送给您。当您请求动态页面时，内容有可能已经改变。这意味着服务器*总是*必须重新创建新内容。*这个*意味着加载页面需要很长时间，因为服务器正在做一些繁重的工作

这花费的时间有时被称为“到达第一个字节的平均时间”,是指服务器向您发送页面信息的第一个字节所花费的时间

当网站包含动态内容时，web 服务器通常会

*但并不总是如此，因为它与许多网站无关*

在服务器端缓存中保留刚刚生成的页面的副本。然后，当同一个用户请求同一个页面时，它将只发回副本，而不必重新创建它。

##### 比喻

想象你在一家书店工作。这家书店有点怪，因为每本书都是打字订的。你可以进去要一本特里·普拉切特的《守夜人》

*我最喜欢的书之一*

他们会帮你打出来装订好。想象一下，如果你在同一天收到了同一本书的 15 份订单。你不想每一页都要打 15 次，所以你用复写纸，在你打字的时候，每一页复印 2 份。这个比喻不太合适，但足以让您明白服务器端缓存的意义

*希望如此*

但是静态内容呢？

##### 静态和动态内容

如果你去“裸域”

哦呃！

对于这个我的登陆页面(即[https://gaprogman.com](https://gaprogman.com/))你会看到一个静态页面。这个页面*永远不会*改变，所以当有人浏览它时，它不是动态创建的。事实上，如果你查看页面的源代码

*去[这里](https://www.lifewire.com/view-web-source-code-4151702)学习如何*

那么您将看到的数据就是它在服务器上的样子。

在服务器上缓存它不会让它加载得更快，因为它永远不会改变——因为它是静态内容。如果内容有可能根据浏览页面的人的不同而改变，那么这就是所谓的动态页面。

例如，每次你登录亚马逊、易贝或网飞，你看到的页面都会为你动态生成。您看到的大部分内容将与其他用户看到的内容相同，但会有一些部分是为您定制的。在该站点能够将 HTML 页面发送回您的浏览器之前，它必须确定通过网络发送哪些内容。这需要时间。

为了减少生成内容所需的时间，网站或网络应用程序可以在将生成的内容发送给你之前存储它。存储版本通常保存在服务器某处的缓存中。如果您在页面加载后立即点击刷新，服务器将简单地从缓存中获取预先生成的页面版本，并通过网络发送。...这是一种非常冗长的说法，说明通过存储生成的内容可以节省服务器的时间。

### 结论

希望你对一些常用的技术有更好的理解，这些技术可以用来提高网站或 web 应用程序的速度。就像网站或 web 应用程序安全一样，知道这些东西的存在是成功的一半。我将写下我是如何使用这些缓存技术让 [dotnetcore.show](https://dotnetcore.show/) 的加载速度快得令人难以置信，非常快。