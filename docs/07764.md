# 印第安纳·琼斯重构

> 原文:[https://dev.to/leftturns/indiana-jones-refactoring-58n3](https://dev.to/leftturns/indiana-jones-refactoring-58n3)

我记得小时候第一次看《夺宝奇兵和末日圣殿》的时候。令人兴奋，冒险，有时又令人恐惧。几年前当我成为一名开发人员时，我也有同样的感觉。在电影中，印第安纳在寻找一个特殊的神器，防止坏人和女孩毁灭世界。他走了很远，用他可靠的牛鞭穿过丛林，保护自己并脱离危险。

作为一名新开发人员，不像印第安纳·琼斯，我并不总是关注奖励。我常常太胆小，不敢根据基本需求重构方法和函数。我认为在我之前从事依赖的开发人员是明智的，为了小利益使用大型库是最好的选择。

我记得当我连接到第三方 API 时，使用他们提供的 Java 库的一个具体项目。我只需要身份验证方法来调用他们的 API。我的代码可以处理 HTTP 调用、错误处理、重试逻辑、分页、节流等等。在我的情况下，他们的 API 认证方法是我的约柜，或神秘的石头，或水晶头骨，为年轻的人群。换句话说，我不需要丛林、寺庙、吉普车、当地人带我去寺庙或其他任何东西。我只需要一个核心部分。然而，我的代码使用了那个核心工件，还采用了寺庙、吉普车、丛林等等。

在一个大胆的日子里，我决定我厌倦了为一个作品维护一个完整的库，并围绕这个依赖进行黑客攻击。我决定拿一把弯刀和牛鞭，深入图书馆的丛林，取出我需要的神器。当我在 IDE 中步入那个断点时，我知道已经没有回头路了。在找到认证类之后，我提取了认证 API 的逻辑。这是一个方法，我复制并粘贴到我的代码中。

我删除了相关的库，并减轻了托管它的服务器的负担。我学会了如何走出自己的舒适区，并获得了信心和力量。我把心脏从图书馆里扯了出来，就像《末日神殿》里的恐怖场景一样。

依赖性也不错。如果你使用一个库作为你工作流程的核心，使用别人维护的安全库是一个节省时间和金钱的好方法。但是如果你只需要库的一个方面，不要害怕钻研他们的代码，看看他们是怎么做的，这样你就可以做得更好。当他们更新他们的 API 时，你必须接受你必须更新它的事实。