# å¦‚ä½•åœ¨ Dart åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ JavaScript åº“

> åŸæ–‡:[https://dev . to/graphic beacon/how-to-use-JavaScript-libraries-in-your-dart-applications-4mc 6](https://dev.to/graphicbeacon/how-to-use-javascript-libraries-in-your-dart-applications--4mc6)

ä½ æœ‰æ²¡æœ‰ç»å†è¿‡å®³æ€•æŠŠä½ æœ€å–œæ¬¢çš„ JS åº“ç•™åœ¨èº«åçš„ææƒ§ï¼Ÿæˆ‘ä»¬å†ä¹Ÿä¸ç”¨æ‹…å¿ƒäº†ï¼Œå› ä¸º Dart å›¢é˜Ÿå·²ç»æä¾›äº†ä¸€ç§æ•´åˆæ‚¨æœ€å–œæ¬¢çš„ JavaScript åº“çš„æ–¹æ³•ï¼

è§£å†³æ–¹æ¡ˆä»¥ [**js**](https://pub.dartlang.org/packages/js) åŒ…çš„å½¢å¼å‡ºç°ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªè°ƒç”¨ JavaScript API æ–¹æ³•çš„ä»£ç†ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢ä¸€äº›ä½¿ç”¨`window`å¯¹è±¡çš„ä¾‹å­ï¼Œä»¥åŠä¸€ä¸ªä½¿ç”¨ jQuery çš„çœŸå®ä¾‹å­ã€‚

è¿™é‡Œæ˜¯åŒ…å«è§£å†³æ–¹æ¡ˆçš„[æºä»£ç ](https://gist.github.com/graphicbeacon/0a23381809fcddaffd553c9ad845b96f)ã€‚

## [](#prerequisite)å…ˆå†³æ¡ä»¶

åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç”¨ [stagehand](https://pub.dartlang.org/packages/stagehand) æ¥æ­å»ºæˆ‘ä»¬çš„ç½‘ç»œé¡¹ç›®:

```
stagehand web-simple 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åœ¨ pubspec.yaml çš„ dependencies ä¸‹æ·»åŠ ä»¥ä¸‹å†…å®¹:

```
dependencies:
  js: ^0.6.0 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶è¿è¡Œ`pub get`ã€‚è¿˜è¦ç¡®ä¿ä½ å·²ç»å®‰è£…äº†**ç½‘ç«™å¼€å‘**(`pub global activate webdev`)

ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½è¿›å…¥ç¤ºä¾‹äº†ï¼

* * *

## [](#example-with-the-raw-window-endraw-object)ä¸`window`å®¾è¯­çš„ä¾‹å­

å®‰è£… **js** åŒ…å…¬å¼€äº†`@JS()`æ³¨é‡Šï¼Œä½œä¸ºè®¿é—®`window`ä¸»æœºå¯¹è±¡ä¸Šçš„ JavaScript APIs çš„ä¸€ç§æ–¹å¼ã€‚

ä¸‹é¢æ˜¯åœ¨`web/main.dart`ä¸­è°ƒç”¨`window.console.log()`çš„ä¸€ä¸ªç‰‡æ®µ:

```
@JS() // Sets the context, which in this case is `window`
library main; // required library declaration called main, or whatever name you wish

import 'package:js/js.dart'; // Pull in our dependency

@JS('console.log') // This marks the annotated function as a call to `console.log`
external void log(dynamic str);

void main() {
  log('Hello world!'); // calling console.log() in JavaScript land
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿è¡Œ`webdev serve`å¹¶è®¿é—® localhost url ä»¥æŸ¥çœ‹è¾“å‡ºã€‚è¦æŸ¥çœ‹æ›´æ–°ï¼Œåªéœ€ä¿å­˜æ–‡ä»¶å¹¶é‡æ–°åŠ è½½é¡µé¢ï¼

å¸¦æ³¨é‡Šçš„æ–‡ä»¶å¿…é¡»ä»¥ä¸€ä¸ªä¹Ÿæœ‰`@JS()`æ³¨é‡Šçš„åº“å£°æ˜å¼€å§‹ï¼Œæˆ‘ä»¬åœ¨ç¬¬ 1â€“2 è¡Œå¯ä»¥çœ‹åˆ°ã€‚å› ä¸ºç¬¬ä¸€ä¸ªæ³¨é‡Šæ²¡æœ‰å‚æ•°ï¼Œæ‰€ä»¥å®ƒè®¾ç½®äº†å…¶ä»–æ³¨é‡Šç›¸å¯¹äº`window`å¯¹è±¡çš„ä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥åˆ°äº†è¿™ä¸€è¡Œ`@JS('console.log')`è¯¦ç»†æè¿°äº†ä»`window`åˆ°å…·æœ‰`log`æ–¹æ³•çš„`console`å±æ€§çš„éå†ã€‚

ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå°†ä¸Šä¸‹æ–‡è®¾ç½®ä¸º`window.console` :
çš„ä¾‹å­

```
@JS('console') // Our `console` namespace
library main;

import 'package:js/js.dart';

@JS('log') // Setting the proxy to the `console.log` method
external void log(dynamic str);

void main() {
  log('Hello worlddd!');
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› ä¸ºæ–‡ä»¶ä»¥åç§°ç©ºé—´`console`å¼€å§‹ï¼Œæ‰€ä»¥`log`æ–¹æ³•çš„ä¸‹ä¸€ä¸ªæ³¨é‡Šæ’é™¤äº†å‰ç¼€`console`ã€‚`log`æ–¹æ³•çš„`external`å…³é”®å­—ç”¨äºåœ¨ Dart ä¹‹å¤–æ ‡è®°è¯¥æ–¹æ³•ï¼Œå¦åˆ™åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ä½“ã€‚æ­¤å¤–ï¼Œå› ä¸ºæˆ‘ä»¬çš„å‡½æ•°ä¸`console`ä¸Šçš„æ–¹æ³•åŒåï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å®Œå…¨åˆ é™¤ä¸Šé¢çš„æ³¨é‡Šã€‚

```
// @JS('log') // remove
external void log(dynamic str); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

***è¯·æ³¨æ„:å¦‚æœæ‚¨åªéœ€è¦è®¿é—®`window`ä¸Šçš„å†…ç½®å±æ€§ï¼Œåˆ™ä¸éœ€è¦è¿™ä¸ªäº’æ“ä½œåŒ…ã€‚ä½¿ç”¨ Dart çš„`dart:html`åº“æ¥åšè¿™ä»¶äº‹ã€‚ä¸Šé¢çš„ä»£ç ç‰‡æ®µåªæ˜¯ä¸ºäº†ä¸¾ä¾‹è¯´æ˜ï¼Œå› æ­¤`js`åŒ…åœ¨ä½¿ç”¨å¤–éƒ¨åº“æ—¶å‘æŒ¥ä½œç”¨ã€‚***

## [](#realworld-example-with-jquery)ç”¨ jQuery çš„çœŸå®ä¾‹å­

ä¸ºäº†ä½¿ç”¨ jQueryï¼Œè®©æˆ‘ä»¬åœ¨è„šæœ¬æ ‡ç­¾è¯·æ±‚`main.dart.js` :
ä¹‹å‰çš„`web/index.html`ä¸­å¯¼å…¥å®ƒ

```
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º`web/jquery.dart`çš„æ–‡ä»¶ï¼ŒåŒ…å«ä¸‹é¢çš„ä»£ç ç‰‡æ®µ:

```
@JS()
library jquery;

import 'package:js/js.dart';

// new jQuery() invokes JavaScript `new jQuery()`
@JS()
class jQuery {
  external factory jQuery(String selector);
  external int get length; // We get this from the jQuery instance
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬é‡æ„`main.dart`æ¥æµ‹è¯•è¿™ä¸ª:

```
import './jquery.dart';

void main() {
  print(jQuery('#output')); // [object Object]
  print(jQuery('#output').length); // 1
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬é€šè¿‡ä½¿ç”¨`css()`å’Œ`animate()`æ–¹æ³•æ¥åšä¸€äº›æ›´æœ‰è¶£çš„äº‹æƒ…:

```
@JS()
class jQuery {
  external factory jQuery(String selector);
  external int get length;
  external jQuery css(Map options);
  external jQuery animate(Map options);
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•å°†è¿”å› jQuery å®ä¾‹ï¼Œå°±åƒåŸºäº JS çš„ API ä¸€æ ·ã€‚

ç°åœ¨è¿™ä¸ä¼šåƒé¢„æœŸçš„é‚£æ ·å·¥ä½œï¼Œå› ä¸º`options`å‚æ•°éœ€è¦ä¸€ä¸ª`Map`ç±»å‹ã€‚æˆ‘ä»¬ä¸èƒ½ä¼ é€’ Dart `Map`å¯¹è±¡ï¼Œå› ä¸ºå®ƒä»¬åœ¨ JavaScript ä¸­æ˜¯â€œä¸é€æ˜â€çš„ã€‚æ¢å¥è¯è¯´ï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªä¸åŒ…å«ä½ æœŸæœ›å®ƒåŒ…å«çš„å†…å®¹çš„å¯¹è±¡ã€‚

ä¸ºäº†è®©å®ƒå·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦ç”¨æˆ‘ä»¬éœ€è¦çš„é”®æ¥å®šä¹‰ä¸€ä¸ªå·¥å‚æ„é€ å‡½æ•°:

```
@JS()
@anonymous // This annotation is needed along with the unnamed factory constructor
class CssOptions {
  external factory CssOptions({ backgroundColor, height, position, width });
  external String get backgroundColor;
  external String get position;
  external num get height;
  external num get width;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶å°†`css()`å¤–éƒ¨æ–¹æ³•å£°æ˜ä¿®æ”¹å¦‚ä¸‹:

```
external jQuery css(CssOptions options); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©æˆ‘ä»¬å¯¹ animate æ–¹æ³•åšåŒæ ·çš„äº‹æƒ…:

```
@JS()
@anonymous
class AnimateOptions {
  external factory AnimateOptions({left, top});
  external dynamic get left;
  external dynamic get top;
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶å°†`animate()`å¤–éƒ¨æ–¹æ³•å£°æ˜ä¿®æ”¹å¦‚ä¸‹:

```
external jQuery animate(AnimateOptions options); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·è°ƒç”¨`web/main.dart`ä¸­çš„æ–¹æ³•:

```
import './jquery.dart';

void main() {
  jQuery('#output')
      .css(CssOptions(
          backgroundColor: 'green',
          height: 100,
          position: 'relative',
          width: 100))
      .animate(AnimateOptions(left: 100, top: 100));
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶æœŸå¾…ä¸‹é¢çš„ç»“æœ:

[![Recording of Dart+jQuery interop example](../Images/2069e1b428acd50a856532954a28674b.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--2SJji_le--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/351by2eur2g4jsmse2d3.gif)

## [](#conclusion)ç»“è®º

çŸ¥é“æ‚¨å¯ä»¥ä½œä¸º Dart å¼€å‘äººå‘˜ä¿æŒç”Ÿäº§åŠ›ï¼ŒåŒæ—¶ä¿æŒå¯¹ JavaScript åº“ç”Ÿæ€ç³»ç»Ÿçš„è®¿é—®ï¼Œäº‹æƒ…ä¼šå˜å¾—æ›´å¥½ï¼Œå› ä¸ºä»»ä½•æ–°å‡ºç°çš„åº“éƒ½åœ¨æ‚¨çš„æŒæ¡ä¹‹ä¸­ã€‚

è¿™ä¸ªè§£å†³æ–¹æ¡ˆé€‚ç”¨äºä»»ä½•åœ¨`window`å¯¹è±¡ä¸‹æœ‰åç§°ç©ºé—´çš„ JavaScript åº“ï¼Œæ¶µç›–äº† *99%çš„æƒ…å†µ*ã€‚

ä¸€å¦‚æ—¢å¾€ï¼Œæˆ‘å¸Œæœ›è¿™æ˜¯æœ‰è§åœ°çš„ï¼Œä½ ä»Šå¤©å­¦åˆ°äº†ä¸€äº›æ–°çš„ä¸œè¥¿ã€‚è¿™é‡Œæ˜¯åŒ…å«å®Œæ•´è§£å†³æ–¹æ¡ˆçš„è¦ç‚¹ã€‚

ä»¥ä¸‹æ˜¯ Vue.js çš„æ‰©å±•ç¤ºä¾‹:

[![graphicbeacon image](../Images/ebd69e31cdafde0c3cc551828feae27a.png)](/graphicbeacon) [## vue . jsâ€“Dart å…¥é—¨(ç¬¬ 1 éƒ¨åˆ†)

### æ°æ¢…å› å¥¥å½­ 11 æœˆ 5 æ—¥ 185 åˆ†é’Ÿé˜…è¯»

#dart #javascript #showdev #vue](/graphicbeacon/vuejsgetting-started-in-dart-part-1-4i3o)

## [](#further-reading)è¿›ä¸€æ­¥é˜…è¯»

1.  [**js åŒ…**ä¸Š Pub](https://pub.dartlang.org/packages/js)
2.  [egghead . io ä¸Šçš„å…è´¹é£é•–æˆªå±](https://egghead.io/instructors/jermaine-oppong)

* * *

## [](#sharing-is-caring)åˆ†äº«æ˜¯å…³çˆ±ğŸ¤—

å¦‚æœä½ å–œæ¬¢è¯»è¿™ç¯‡æ–‡ç« ï¼Œè¯·é€šè¿‡å„ç§ç¤¾äº¤æ¸ é“åˆ†äº«ã€‚æ­¤å¤–ï¼Œæ£€æŸ¥å¹¶ [**è®¢é˜…æˆ‘çš„ YouTube é¢‘é“**](https://youtube.com/c/CreativeBracket) (ä¹Ÿç‚¹å‡»é“ƒé“›å›¾æ ‡)ä¸Šçš„ Dart è§†é¢‘ã€‚

[**è®¢é˜…æˆ‘çš„ç”µå­é‚®ä»¶ç®€è®¯**](http://eepurl.com/gipQBX) ä¸‹è½½æˆ‘çš„å…è´¹ 35 é¡µã€Dart å…¥é—¨ç”µå­ä¹¦ï¼Œå¹¶åœ¨æ–°å†…å®¹å‘å¸ƒæ—¶å¾—åˆ°é€šçŸ¥ã€‚

**å–œæ¬¢ã€åˆ†äº«å’Œ[å…³æ³¨æˆ‘](https://twitter.com/creativ_bracket)T3ã€‘ğŸ˜æœ‰å…³ Dart çš„æ›´å¤šå†…å®¹ã€‚**