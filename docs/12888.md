# 测试逆变-谁理解它，可以提供一个例子？

> 原文:[https://dev.to/scotthannen/test-contravariance-谁了解它并能提供一个例子-20dc](https://dev.to/scotthannen/test-contravariance---who-understands-it-and-can-provide-an-example-20dc)

我处理脆弱的单元测试，每次我更改产品代码时，我都必须修复这些测试。我不只是处理它们，我写它们的速度和写生产代码一样快。

对我来说，这比没有或者不写单元测试要好得多。我仍然得到了许多好处，包括编写单元测试可以指导我编写更干净、更简单的代码。

但是还有一个层次我还没有达到，我想达到。罗伯特·马丁的博客文章 [Test Contra-variance](http://blog.cleancoder.com/uncle-bob/2017/10/03/TestContravariance.html) 提供了一些更好的东西的轮廓，但是我不知道现实是什么样子。

大多数时候，我创建的测试类直接对应于他们测试的类。即使从技术上来说没有任何不同，仅仅因为它打破了习惯，脱离它似乎是第一步。我没有为我的`Foo`写一个`FooTests`类，而是写了一个`FooDoesX`类来测试那个特定的行为。

不过，这只是表面现象。在引擎盖下，它本质上是相同的旧测试类。我可以通过重用一些设置使它变得不那么脆弱，目标是最小化测试中的代码重复，同时仍然确保每个测试的“安排”是明确的，以便清楚它测试的是什么行为。

谁能提供一个测试方差的例子，也许是在公共库中？我并不是在寻找单元测试与集成测试或者测试一个类与测试一个类的合作者之间的一般性讨论，尽管可能有很多重叠。我想看看能不能有人确切地理解鲍勃大叔在说什么，能不能详细说明或者提供一个例子。

谢谢！