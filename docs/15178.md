# JavaScript ä¸­çš„çŸ­è·¯åˆ†é…

> åŸæ–‡:[https://dev . to/flexdinesh/short-circuit-assignment-in-JavaScript-4k 80](https://dev.to/flexdinesh/short-circuit-assignment-in-javascript--4k80)

[![JS short circuit assignment](../Images/064207f86d67a6006b3fc08faef98342.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--_tqdbPet--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://image.ibb.co/c9duVn/short_circuit_alt.jpg)

**tldrï¼›** *å½“æœªæ‰¾åˆ°æœŸæœ›å€¼æ—¶ï¼Œä½¿ç”¨çŸ­è·¯è¯„ä¼°å°†é»˜è®¤å€¼åˆ†é…ç»™å˜é‡ã€‚*

JavaScript å¾ˆç¥å¥‡ã€‚ä½†æ˜¯å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šä¸ºå®Œæˆä¸€ä¸ªç®€å•çš„ä»»åŠ¡è€ŒæŠ“è€³æŒ è…®ï¼Œæ¯”å¦‚ï¼Œ*å½“æ²¡æœ‰æ‰¾åˆ°æœŸæœ›å€¼æ—¶(å¯èƒ½æ˜¯ null/undefined)ï¼Œå°±ç»™å˜é‡èµ‹å€¼ä¸€ä¸ªé»˜è®¤å€¼ã€‚*

å°±æ‹¿è¿™ä¸ªä¾‹å­æ¥è¯´å§ï¼Œ

```
const person = {
    name: 'Jack'
};

const name = person.name;
const greetings = 'Hello' + ', ' + name + '!';
console.log(greetings) // => 'Hello, Jack!' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œå¦‚æœå§“åé”®åœ¨äººå¯¹è±¡ä¸­ä¸å¯ç”¨ï¼Œ

```
const person = {};

const name = person.name; // name is undefined here
const greetings = 'Hello' + ', ' + name + '!';
console.log(greetings) // => 'Hello, undefined!' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¸ªé—®é¢˜åœ¨ JavaScript ä¸–ç•Œéå¸¸æ™®éã€‚æˆ‘ä»¬é€šå¸¸é€šè¿‡æŒ‡å®šé»˜è®¤å€¼æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚

```
// we either use if case
let name = 'Sunshine'; // default value
if (person && person.name) {
    name = person.name;
}

// or we use ternary operator
const name = person && person.name ? person.name : 'Sunshine';

const greetings = 'Hello' + ', ' + name + '!'; // name will never be undefined now
console.log(greetings) // => 'Hello, Jack!' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸Šé¢çš„ä¾‹å­æ˜¯ä¸€ä¸ªç®€å•çš„åœºæ™¯ï¼Œå› ä¸ºæˆ‘ä»¬åªéœ€è¦æ£€æŸ¥ä¸€ä¸ªå˜é‡ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦åŸºäºå¤šä¸ªå˜é‡è¿›è¡Œèµ‹å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ€ç»ˆä¼šå†™å‡ºæ··ä¹±çš„*ä¸æ˜“é˜…è¯»çš„*ä»£ç ã€‚

```
let foo, bar, baz;

// if case mess
let name;
if (foo) name = foo;
else if (bar) name = bar;
else if (baz) name = baz;
else name = 'Sunshine';

// ternary operator nightmare
const name = foo ? foo : (bar ? bar : (baz ? baz : 'Sunshine')); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†å°†ä¸–ç•Œä»æ··ä¹±çš„ä»£ç ä¸­æ‹¯æ•‘å‡ºæ¥ï¼Œ**è¿˜æœ‰ä¸€ä¸ªæ›´å¥½çš„*T2 æŠ€å·§æ¥åˆ†é…é»˜è®¤å€¼ã€‚***

## [](#short-circuit-assignment)çŸ­è·¯èµ‹å€¼âœ¨

è¿™æ˜¯åœ¨ JavaScript ä¸­åˆ†é…é»˜è®¤å€¼çš„ä¸€ç§æ›´çŸ­ã€æ›´ç®€æ´çš„æ–¹å¼ã€‚è¿™åŸºäºé€»è¾‘è¿ç®—ç¬¦çš„çŸ­è·¯è¯„ä¼°ï¼Œå…¶ä¸­ç¬¬**ä¸ª*çœŸå€¼*è¢«è¿”å›**ã€‚

```
const name = person.name || 'Sunshine';

// if you're not sure if person object is defined
const name = (person && person.name) || 'Sunshine';

// can be used with as many variables as needed
let foo, bar, baz;
bar = 'Bar-da-Jack';
// first truthy value will be assigned to name
const name = foo || bar || baz || 'John'; // => name = 'Bar-da-Jack' 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å½“å‘ç°çœŸå€¼æ—¶ï¼Œè¯„ä¼°ç”µè·¯æ–­å¼€ï¼Œå¹¶è¿”å›åˆ°èµ‹å€¼ã€‚

ä»»ä½•ä¸æ˜¯`false`ã€`0`ã€`''`ã€`""`ã€`null`ã€`undefined`å’Œ`NaN`çš„å€¼åœ¨ JavaScript ä¸­éƒ½è¢«è®¤ä¸ºæ˜¯çœŸå€¼ã€‚

**æ³¨æ„:** *è¯·è®°ä½ï¼Œå¦‚æœæ‚¨æœŸæœ›`0`ä½œä¸ºå˜é‡ä¸­çš„ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªæŠ€å·§å¯èƒ½ä¸ä¼šåƒé¢„æœŸçš„é‚£æ ·å·¥ä½œï¼Œå› ä¸º`0`åœ¨ JavaScript ä¸­è¢«è®¤ä¸ºæ˜¯è™šå‡çš„ã€‚*

æ‰€ä»¥ï¼ŒåŒå¿—ä»¬ï¼ŒçŸ­è·¯ï¼ŒæŠŠ JavaScript ä¸–ç•Œä»æ··ä¹±çš„ä»£ç ç»“æ„ä¸­æ‹¯æ•‘å‡ºæ¥ï¼Œä¸€æ¬¡ä¸€è¡Œï¼ğŸ‰