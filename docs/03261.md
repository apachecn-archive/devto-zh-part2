# JavaScript åŸå‹åˆå­¦è€…æŒ‡å—

> åŸæ–‡:[https://dev . to/tylermcginnis/a-åˆå­¦è€…-JavaScript æŒ‡å—-åŸå‹-5kk](https://dev.to/tylermcginnis/a-beginners-guide-to-javascripts-prototype-5kk)

å¦‚æœä¸å¤„ç†å¯¹è±¡ï¼Œä½ å°±æ— æ³•åœ¨ JavaScript ä¸­èµ°å¾—å¾ˆè¿œã€‚å®ƒä»¬å‡ ä¹æ˜¯ JavaScript ç¼–ç¨‹è¯­è¨€å„ä¸ªæ–¹é¢çš„åŸºç¡€ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½ å°†å­¦ä¹ å„ç§å®ä¾‹åŒ–æ–°å¯¹è±¡çš„æ¨¡å¼ï¼Œè¿™æ ·ï¼Œä½ å°†é€æ¸æ·±å…¥ç†è§£ JavaScript çš„åŸå‹ã€‚

***è¿™æ˜¯æˆ‘ä»¬[é«˜çº§ JavaScript](https://tylermcginnis.com/courses/advanced-javascript/) è¯¾ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå°±å»çœ‹çœ‹å§ã€‚***

### [](#video)è§†é¢‘

[https://www.youtube.com/embed/XskMWBXNbp0](https://www.youtube.com/embed/XskMWBXNbp0)

### [](#post)å²—ä½

å¦‚æœä¸å¤„ç†å¯¹è±¡ï¼Œä½ å°±æ— æ³•åœ¨ JavaScript ä¸­èµ°å¾—å¾ˆè¿œã€‚å®ƒä»¬å‡ ä¹æ˜¯ JavaScript ç¼–ç¨‹è¯­è¨€å„ä¸ªæ–¹é¢çš„åŸºç¡€ã€‚äº‹å®ä¸Šï¼Œå­¦ä¹ å¦‚ä½•åˆ›å»ºå¯¹è±¡å¯èƒ½æ˜¯ä½ åˆšå¼€å§‹å­¦ä¹ çš„ç¬¬ä¸€ä»¶äº‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºäº†æœ€æœ‰æ•ˆåœ°å­¦ä¹  JavaScript ä¸­çš„åŸå‹ï¼Œæˆ‘ä»¬å°†å¼•å¯¼æˆ‘ä»¬çš„ inner Jr. developer å›åˆ°åŸºç¡€ã€‚

å¯¹è±¡æ˜¯é”®/å€¼å¯¹ã€‚åˆ›å»ºä¸€ä¸ªå¯¹è±¡æœ€å¸¸è§çš„æ–¹æ³•æ˜¯ç”¨èŠ±æ‹¬å·`{}`ï¼Œä½ å¯ä»¥ç”¨ç‚¹ç¬¦å·ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚

```
let animal = {}
animal.name = 'Leo'
animal.energy = 10

animal.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

animal.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

animal.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç®€å•ã€‚ç°åœ¨ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åˆ›å»ºå¤šä¸ªåŠ¨ç‰©ã€‚å¾ˆè‡ªç„¶ï¼Œä¸‹ä¸€æ­¥æ˜¯å°†é€»è¾‘å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ¨ç‰©æ—¶ï¼Œå°±å¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªæ¨¡å¼ä¸º`Functional Instantiation`,æˆ‘ä»¬ç§°è¿™ä¸ªå‡½æ•°æœ¬èº«ä¸ºâ€œæ„é€ å‡½æ•°â€,å› ä¸ºå®ƒè´Ÿè´£â€œæ„é€ â€ä¸€ä¸ªæ–°å¯¹è±¡ã€‚

#### [](#functional-instantiation)åŠŸèƒ½å®ä¾‹åŒ–

```
function Animal (name, energy) {
  let animal = {}
  animal.name = name
  animal.energy = energy

  animal.eat = function (amount) {
    console.log(`${this.name} is eating.`)
    this.energy += amount
  }

  animal.sleep = function (length) {
    console.log(`${this.name} is sleeping.`)
    this.energy += length
  }

  animal.play = function (length) {
    console.log(`${this.name} is playing.`)
    this.energy -= length
  }

  return animal
}

const leo = Animal('Leo', 7)
const snoop = Animal('Snoop', 10) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`"I thought this was an Advanced JavaScript course...?" - Your brain` **æ­£æ˜¯ã€‚æˆ‘ä»¬ä¼šåˆ°è¾¾é‚£é‡Œçš„ã€‚**

ç°åœ¨ï¼Œæ¯å½“æˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ¨ç‰©(æˆ–è€…æ›´å¹¿ä¹‰åœ°è¯´ï¼Œä¸€ä¸ªæ–°çš„â€œå®ä¾‹â€)ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯è°ƒç”¨æˆ‘ä»¬çš„`Animal`å‡½æ•°ï¼Œå°†åŠ¨ç‰©çš„`name`å’Œ`energy`çº§åˆ«ä¼ é€’ç»™å®ƒã€‚è¿™éå¸¸æœ‰æ•ˆï¼Œè€Œä¸”éå¸¸ç®€å•ã€‚ç„¶è€Œï¼Œæ‚¨èƒ½å‘ç°è¿™ç§æ¨¡å¼çš„å¼±ç‚¹å—ï¼Ÿæœ€å¤§çš„ä¹Ÿæ˜¯æˆ‘ä»¬è¯•å›¾è§£å†³çš„é—®é¢˜ä¸ä¸‰ç§æ–¹æ³•æœ‰å…³- `eat`ã€`sleep`å’Œ`play`ã€‚è¿™äº›æ–¹æ³•ä¸ä»…æ˜¯åŠ¨æ€çš„ï¼Œè€Œä¸”æ˜¯å®Œå…¨é€šç”¨çš„ã€‚è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬æ²¡æœ‰ç†ç”±åƒç°åœ¨ä¸€æ ·ï¼Œæ¯å½“åˆ›é€ ä¸€ç§æ–°åŠ¨ç‰©æ—¶ï¼Œå°±é‡æ–°åˆ›é€ é‚£äº›æ–¹æ³•ã€‚æˆ‘ä»¬åªæ˜¯åœ¨æµªè´¹å†…å­˜ï¼Œè®©æ¯ä¸ªåŠ¨ç‰©å¯¹è±¡æ¯”å®ƒéœ€è¦çš„è¦å¤§ã€‚ä½ èƒ½æƒ³åˆ°è§£å†³åŠæ³•å—ï¼Ÿå¦‚æœæ¯æ¬¡æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ¨ç‰©æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦é‡æ–°åˆ›å»ºè¿™äº›æ–¹æ³•ï¼Œè€Œæ˜¯å°†å®ƒä»¬ç§»åŠ¨åˆ°å®ƒä»¬è‡ªå·±çš„å¯¹è±¡ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®©æ¯ä¸€ä¸ªåŠ¨ç‰©éƒ½å¼•ç”¨é‚£ä¸ªå¯¹è±¡äº†ã€‚æˆ‘ä»¬å¯ä»¥ç§°è¿™ç§æ¨¡å¼ä¸º`Functional Instantiation with Shared Methods`ï¼Œå†—é•¿ä½†æœ‰æè¿°æ€§ğŸ¤·â€â™‚ï¸.

#### [](#functional-instantiation-with-shared-methods)å…·æœ‰å…±äº«æ–¹æ³•çš„åŠŸèƒ½å®ä¾‹åŒ–

```
const animalMethods = {
  eat(amount) {
    console.log(`${this.name} is eating.`)
    this.energy += amount
  },
  sleep(length) {
    console.log(`${this.name} is sleeping.`)
    this.energy += length
  },
  play(length) {
    console.log(`${this.name} is playing.`)
    this.energy -= length
  }
}

function Animal (name, energy) {
  let animal = {}
  animal.name = name
  animal.energy = energy
  animal.eat = animalMethods.eat
  animal.sleep = animalMethods.sleep
  animal.play = animalMethods.play

  return animal
}

const leo = Animal('Leo', 7)
const snoop = Animal('Snoop', 10) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

é€šè¿‡å°†å…±äº«æ–¹æ³•ç§»åŠ¨åˆ°å®ƒä»¬è‡ªå·±çš„å¯¹è±¡ä¸­ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„`Animal`å‡½æ•°ä¸­å¼•ç”¨è¯¥å¯¹è±¡ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»è§£å†³äº†å†…å­˜æµªè´¹å’Œè¿‡å¤§åŠ¨ç‰©å¯¹è±¡çš„é—®é¢˜ã€‚

#### [](#objectcreate)åˆ›å»ºå¯¹è±¡

è®©æˆ‘ä»¬é€šè¿‡ä½¿ç”¨`Object.create`å†æ¬¡æ”¹è¿›æˆ‘ä»¬çš„ä¾‹å­ã€‚ç®€å•åœ°è¯´ï¼Œ **Object.create å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°†åœ¨æŸ¥æ‰¾å¤±è´¥æ—¶å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡**ã€‚æ¢å¥è¯è¯´ï¼ŒObject.create å…è®¸æ‚¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ¯å½“å¯¹è¯¥å¯¹è±¡çš„å±æ€§æŸ¥æ‰¾å¤±è´¥æ—¶ï¼Œå®ƒå¯ä»¥å’¨è¯¢å¦ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥æŸ¥çœ‹è¯¥å¯¹è±¡æ˜¯å¦å…·æœ‰è¯¥å±æ€§ã€‚è¯´äº†å¾ˆå¤šè¯ã€‚è®©æˆ‘ä»¬çœ‹ä¸€äº›ä»£ç ã€‚

```
const parent = {
  name: 'Stacey',
  age: 35,
  heritage: 'Irish'
}

const child = Object.create(parent)
child.name = 'Ryan'
child.age = 7

console.log(child.name) // Ryan
console.log(child.age) // 7
console.log(child.heritage) // Irish 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå› ä¸º`child`æ˜¯ç”¨`Object.create(parent)`åˆ›å»ºçš„ï¼Œæ¯å½“åœ¨`child`ä¸Šæœ‰ä¸€ä¸ªå¤±è´¥çš„å±æ€§æŸ¥æ‰¾æ—¶ï¼ŒJavaScript å°†æŠŠé‚£ä¸ªæŸ¥æ‰¾å§”æ‰˜ç»™`parent`å¯¹è±¡ã€‚è¿™æ„å‘³ç€å³ä½¿`child`æ²¡æœ‰`heritage`å±æ€§ï¼Œä½†`parent`æœ‰ï¼Œå½“ä½ ç™»å½•`child.heritage`æ—¶ï¼Œä½ ä¼šå¾—åˆ°`parent`çš„é—äº§ï¼Œå³`Irish`ã€‚

ç°åœ¨`Object.create`åœ¨æˆ‘ä»¬çš„å·¥å…·åº“ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨å®ƒæ¥ç®€åŒ–æˆ‘ä»¬ä¹‹å‰çš„`Animal`ä»£ç å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Object.create æ¥å§”æ‰˜ç»™`animalMethods`å¯¹è±¡ï¼Œè€Œä¸æ˜¯åƒç°åœ¨è¿™æ ·ä¸€ä¸ªä¸€ä¸ªåœ°ç»™åŠ¨ç‰©æ·»åŠ æ‰€æœ‰çš„å…±äº«æ–¹æ³•ã€‚ä¸ºäº†å¬èµ·æ¥å¾ˆèªæ˜ï¼Œè®©æˆ‘ä»¬ç§°å®ƒä¸º`Functional Instantiation with Shared Methods and Object.create`ğŸ™ƒ

#### [](#functional-instantiation-with-shared-methods-and-objectcreate)å…·æœ‰å…±äº«æ–¹æ³•å’Œ Object.create çš„åŠŸèƒ½å®ä¾‹åŒ–

```
const animalMethods = {
  eat(amount) {
    console.log(`${this.name} is eating.`)
    this.energy += amount
  },
  sleep(length) {
    console.log(`${this.name} is sleeping.`)
    this.energy += length
  },
  play(length) {
    console.log(`${this.name} is playing.`)
    this.energy -= length
  }
}

function Animal (name, energy) {
  let animal = Object.create(animalMethods)
  animal.name = name
  animal.energy = energy

  return animal
}

const leo = Animal('Leo', 7)
const snoop = Animal('Snoop', 10)

leo.eat(10)
snoop.play(5) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ğŸ“ˆæ‰€ä»¥ç°åœ¨å½“æˆ‘ä»¬è°ƒç”¨`leo.eat`æ—¶ï¼ŒJavaScript ä¼šåœ¨`leo`å¯¹è±¡ä¸Šå¯»æ‰¾`eat`æ–¹æ³•ã€‚å› ä¸º Object.createï¼Œè¿™ä¸ªæŸ¥æ‰¾å°†ä¼šå¤±è´¥ï¼Œå®ƒå°†å§”æ‰˜ç»™`animalMethods`å¯¹è±¡ï¼Œåœ¨é‚£é‡Œå®ƒå°†æ‰¾åˆ°`eat`ã€‚

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡é¡ºåˆ©ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åšä¸€äº›æ”¹è¿›ã€‚ä¸ºäº†åœ¨å®ä¾‹é—´å…±äº«æ–¹æ³•ï¼Œä¸å¾—ä¸ç®¡ç†ä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡(`animalMethods`)ä¼¼ä¹æœ‰ç‚¹â€œç¬¨æ‹™â€ã€‚è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªä½ å¸Œæœ›åœ¨è¯­è¨€æœ¬èº«ä¸­å®ç°çš„å¸¸è§ç‰¹æ€§ã€‚äº‹å®è¯æ˜æ˜¯çš„ï¼Œè¿™å°±æ˜¯ä½ åœ¨è¿™é‡Œçš„å…¨éƒ¨åŸå› ã€‚

é‚£ä¹ˆ JavaScript ä¸­çš„`prototype`åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿç®€å•åœ°è¯´ï¼ŒJavaScript ä¸­çš„æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨å¯¹è±¡çš„`prototype`å±æ€§ã€‚è™å¤´è›‡å°¾ï¼Œå¯¹å§ï¼Ÿè‡ªå·±æµ‹è¯•ä¸€ä¸‹å§ã€‚

```
function doThing () {}
console.log(doThing.prototype) // {} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä¸æ˜¯åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡æ¥ç®¡ç†æˆ‘ä»¬çš„æ–¹æ³•(å°±åƒæˆ‘ä»¬å¯¹`animalMethods`æ‰€åšçš„é‚£æ ·)ï¼Œè€Œæ˜¯å°†è¿™äº›æ–¹æ³•æ”¾åœ¨`Animal`å‡½æ•°çš„åŸå‹ä¸Šï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬è¦åšçš„å°±æ˜¯ä¸ç”¨ Object.create æ¥å§”æ‰˜ç»™`animalMethods`ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å§”æ‰˜ç»™`Animal.prototype`ã€‚æˆ‘ä»¬ç§°è¿™ç§æ¨¡å¼ä¸º`Prototypal Instantiation`ã€‚

#### [](#prototypal-instantiation)åŸå‹å®ä¾‹åŒ–

```
function Animal (name, energy) {
  let animal = Object.create(Animal.prototype)
  animal.name = name
  animal.energy = energy

  return animal
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

Animal.prototype.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
}

const leo = Animal('Leo', 7)
const snoop = Animal('Snoop', 10)

leo.eat(10)
snoop.play(5) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ğŸ‘ğŸ‘ğŸ‘å¸Œæœ›ä½ åˆšåˆšç»å†äº†ä¸€ä¸ªé‡å¤§çš„â€œå•Šå“ˆâ€æ—¶åˆ»ã€‚åŒæ ·ï¼Œ`prototype`åªæ˜¯ JavaScript ä¸­æ¯ä¸ªå‡½æ•°éƒ½æœ‰çš„å±æ€§ï¼Œæ­£å¦‚æˆ‘ä»¬ä¸Šé¢çœ‹åˆ°çš„ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨å‡½æ•°çš„æ‰€æœ‰å®ä¾‹ä¸­å…±äº«æ–¹æ³•ã€‚æˆ‘ä»¬æ‰€æœ‰çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ç°åœ¨ä¸ç”¨ä¸ºæ‰€æœ‰çš„æ–¹æ³•ç®¡ç†ä¸€ä¸ªå•ç‹¬çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®åœ¨`Animal`å‡½æ•°æœ¬èº«çš„å¦ä¸€ä¸ªå¯¹è±¡`Animal.prototype`ã€‚

* * *

# [](#lets-go-deeper)å’±ä»¬ã€‚èµ°å§ã€‚æ›´æ·±ã€‚

æ­¤æ—¶æˆ‘ä»¬çŸ¥é“ä¸‰ä»¶äº‹:

1)å¦‚ä½•åˆ›å»ºæ„é€ å‡½æ•°ã€‚
2)å¦‚ä½•ç»™æ„é€ å‡½æ•°çš„åŸå‹æ·»åŠ æ–¹æ³•ã€‚
3)å¦‚ä½•ä½¿ç”¨ Object.create å°†å¤±è´¥çš„æŸ¥æ‰¾å§”æ‰˜ç»™å‡½æ•°çš„åŸå‹ã€‚

è¿™ä¸‰é¡¹ä»»åŠ¡ä¼¼ä¹æ˜¯ä»»ä½•ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€ã€‚JavaScript çœŸçš„é‚£ä¹ˆç³Ÿç³•ï¼Œæ²¡æœ‰æ›´ç®€å•çš„â€œå†…ç½®â€æ–¹æ³•æ¥å®ŒæˆåŒæ ·çš„äº‹æƒ…å—ï¼Ÿä½ å¯èƒ½å·²ç»çŒœåˆ°äº†ï¼Œè¿™æ˜¯é€šè¿‡ä½¿ç”¨å…³é”®å­—`new`å®ç°çš„ã€‚

æˆ‘ä»¬é‡‡å–çš„ç¼“æ…¢è€Œæœ‰æ¡ç†çš„æ–¹æ³•çš„å¥½å¤„åœ¨äºï¼Œæ‚¨ç°åœ¨å°†å¯¹ JavaScript ä¸­çš„å…³é”®å­—`new`åˆ°åº•åœ¨åšä»€ä¹ˆæœ‰ä¸€ä¸ªæ·±åˆ»çš„ç†è§£ã€‚

å›å¤´çœ‹çœ‹æˆ‘ä»¬çš„`Animal`æ„é€ å‡½æ•°ï¼Œä¸¤ä¸ªæœ€é‡è¦çš„éƒ¨åˆ†æ˜¯åˆ›å»ºå¯¹è±¡å’Œè¿”å›å®ƒã€‚å¦‚æœæ²¡æœ‰ç”¨`Object.create`åˆ›å»ºå¯¹è±¡ï¼Œæˆ‘ä»¬å°†æ— æ³•åœ¨æŸ¥æ‰¾å¤±è´¥æ—¶å§”æ‰˜ç»™å‡½æ•°çš„åŸå‹ã€‚å¦‚æœæ²¡æœ‰`return`è¯­å¥ï¼Œæˆ‘ä»¬æ°¸è¿œä¹Ÿä¸ä¼šå¾—åˆ°åˆ›å»ºçš„å¯¹è±¡ã€‚

```
function Animal (name, energy) {
  let animal = Object.create(Animal.prototype)
  animal.name = name
  animal.energy = energy

  return animal
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™é‡Œæœ‰ä¸€ä»¶å…³äº`new`çš„å¾ˆé…·çš„äº‹æƒ…â€”â€”å½“ä½ ä½¿ç”¨`new`å…³é”®å­—è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè¿™ä¸¤è¡Œæ˜¯éšå¼åœ°ä¸ºä½ å®Œæˆçš„(â€œåœ¨å¼•æ“ç›–ä¸‹â€)ï¼Œå¹¶ä¸”è¢«åˆ›å»ºçš„å¯¹è±¡è¢«ç§°ä¸º`this`ã€‚

ä½¿ç”¨æ³¨é‡Šæ¥æ˜¾ç¤ºå¹•åå‘ç”Ÿçš„äº‹æƒ…ï¼Œå¹¶å‡è®¾ç”¨å…³é”®å­—`new`è°ƒç”¨`Animal`æ„é€ å‡½æ•°ï¼Œå®ƒå¯ä»¥é‡å†™ä¸ºè¿™æ ·ã€‚

```
function Animal (name, energy) {
  // const this = Object.create(Animal.prototype)

  this.name = name
  this.energy = energy

  // return this
}

const leo = new Animal('Leo', 7)
const snoop = new Animal('Snoop', 10) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¹¶ä¸”æ²¡æœ‰â€œå¼•æ“ç›–ä¸‹â€çš„æ³¨é‡Š

```
function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

Animal.prototype.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
}

const leo = new Animal('Leo', 7)
const snoop = new Animal('Snoop', 10) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

åŒæ ·ï¼Œè¿™ç§æ–¹æ³•æœ‰æ•ˆå¹¶ä¸”ä¸ºæˆ‘ä»¬åˆ›å»ºäº†`this`å¯¹è±¡çš„åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬ç”¨`new`å…³é”®å­—è°ƒç”¨äº†æ„é€ å‡½æ•°ã€‚å¦‚æœåœ¨è°ƒç”¨å‡½æ•°æ—¶çœç•¥äº†`new`ï¼Œé‚£ä¹ˆè¿™ä¸ª`this`å¯¹è±¡å°±ä¸ä¼šè¢«åˆ›å»ºï¼Œä¹Ÿä¸ä¼šè¢«éšå¼è¿”å›ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­çœ‹åˆ°è¿™ä¸ªé—®é¢˜ã€‚

```
function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

const leo = Animal('Leo', 7)
console.log(leo) // undefined 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ç§æ¨¡å¼çš„åç§°æ˜¯`Pseudoclassical Instantiation`ã€‚

å¦‚æœ JavaScript ä¸æ˜¯ä½ çš„ç¬¬ä¸€ç¼–ç¨‹è¯­è¨€ï¼Œä½ å¯èƒ½ä¼šæœ‰ç‚¹ä¸å®‰ã€‚

> â€œè¿™å®¶ä¼™åˆšåˆšé‡æ–°åˆ›å»ºäº†ä¸€ä¸ªæ›´åƒåœ¾ç‰ˆæœ¬çš„ç±»â€â€”â€”ä½ 

å¯¹äºé‚£äº›ä¸ç†Ÿæ‚‰çš„äººï¼Œç±»å…è®¸ä½ åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„è“å›¾ã€‚ç„¶åï¼Œæ— è®ºä½•æ—¶åˆ›å»ºè¯¥ç±»çš„å®ä¾‹ï¼Œæ‚¨éƒ½ä¼šè·å¾—ä¸€ä¸ªå…·æœ‰è“å›¾ä¸­å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚

å¬èµ·æ¥ç†Ÿæ‚‰å—ï¼Ÿè¿™åŸºæœ¬ä¸Šå°±æ˜¯æˆ‘ä»¬å¯¹ä¸Šé¢çš„`Animal`æ„é€ å‡½æ•°æ‰€åšçš„ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨`class`å…³é”®å­—ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªå¸¸è§„çš„æ—§ JavaScript å‡½æ•°æ¥é‡æ–°åˆ›å»ºç›¸åŒçš„åŠŸèƒ½ã€‚å½“ç„¶ï¼Œè¿™éœ€è¦åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼Œä¹Ÿéœ€è¦äº†è§£ä¸€äº› JavaScriptâ€œå¹•åâ€å‘ç”Ÿçš„äº‹æƒ…ï¼Œä½†æ˜¯ç»“æœæ˜¯ä¸€æ ·çš„ã€‚

å¥½æ¶ˆæ¯æ˜¯ã€‚JavaScript ä¸æ˜¯ä¸€ç§æ­»äº¡çš„è¯­è¨€ã€‚å®ƒè¢« [TC-39 å§”å‘˜ä¼š](https://tylermcginnis.com/videos/ecmascript/)ä¸æ–­æ”¹è¿›å’Œæ·»åŠ ã€‚è¿™æ„å‘³ç€å³ä½¿ JavaScript çš„åˆå§‹ç‰ˆæœ¬ä¸æ”¯æŒç±»ï¼Œä¹Ÿæ²¡æœ‰ç†ç”±ä¸èƒ½å°†å®ƒä»¬æ·»åŠ åˆ°å®˜æ–¹è§„èŒƒä¸­ã€‚äº‹å®ä¸Šï¼ŒTC-39 å§”å‘˜ä¼šæ­£æ˜¯è¿™ä¹ˆåšçš„ã€‚2015 å¹´ï¼ŒEcmaScript(å®˜æ–¹ JavaScript è§„èŒƒ)6 å‘å¸ƒï¼Œæ”¯æŒç±»å’Œ`class`å…³é”®å­—ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸Šé¢çš„`Animal`æ„é€ å‡½æ•°åœ¨æ–°çš„ç±»è¯­æ³•ä¸‹ä¼šæ˜¯ä»€ä¹ˆæ ·å­ã€‚

```
class Animal {
  constructor(name, energy) {
    this.name = name
    this.energy = energy
  }
  eat(amount) {
    console.log(`${this.name} is eating.`)
    this.energy += amount
  }
  sleep(length) {
    console.log(`${this.name} is sleeping.`)
    this.energy += length
  }
  play(length) {
    console.log(`${this.name} is playing.`)
    this.energy -= length
  }
}

const leo = new Animal('Leo', 7)
const snoop = new Animal('Snoop', 10) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¾ˆå¹²å‡€ï¼Œå¯¹å§ï¼Ÿ

é‚£ä¹ˆï¼Œå¦‚æœè¿™æ˜¯åˆ›å»ºç±»çš„æ–°æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦èŠ±è¿™ä¹ˆå¤šæ—¶é—´é‡æ¸©æ—§æ–¹æ³•å‘¢ï¼Ÿå…¶åŸå› æ˜¯å› ä¸ºæ–°çš„æ–¹å¼(å¸¦æœ‰`class`å…³é”®å­—)ä¸»è¦åªæ˜¯ç°æœ‰æ–¹å¼çš„â€œè¯­æ³•ç³–â€,æˆ‘ä»¬ç§°ä¹‹ä¸ºä¼ªç»å…¸æ¨¡å¼ã€‚ä¸ºäº†*å®Œå…¨*ç†è§£ ES6 ç±»çš„ä¾¿åˆ©è¯­æ³•ï¼Œä½ é¦–å…ˆå¿…é¡»ç†è§£ä¼ªç»å…¸æ¨¡å¼ã€‚

* * *

è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»äº† JavaScript åŸå‹çš„åŸºç¡€çŸ¥è¯†ã€‚è¿™ç¯‡æ–‡ç« çš„å…¶ä½™éƒ¨åˆ†å°†è‡´åŠ›äºç†è§£ä¸ä¹‹ç›¸å…³çš„å…¶ä»–â€œå€¼å¾—äº†è§£â€çš„è¯é¢˜ã€‚åœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹å¦‚ä½•åˆ©ç”¨è¿™äº›åŸºç¡€çŸ¥è¯†æ¥ç†è§£ JavaScript ä¸­çš„ç»§æ‰¿æœºåˆ¶ã€‚

* * *

### [](#array-methods)é˜µåˆ—æ–¹æ³•

æˆ‘ä»¬åœ¨ä¸Šé¢æ·±å…¥è®¨è®ºäº†å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªç±»çš„å®ä¾‹é—´å…±äº«æ–¹æ³•ï¼Œä½ åº”è¯¥æŠŠè¿™äº›æ–¹æ³•è´´åœ¨ç±»(æˆ–å‡½æ•°)çš„åŸå‹ä¸Šã€‚å¦‚æœæˆ‘ä»¬çœ‹ä¸€ä¸‹`Array`ç±»ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç›¸åŒçš„æ¨¡å¼ã€‚åœ¨å†å²ä¸Šï¼Œæ‚¨å¯èƒ½å·²ç»åˆ›å»ºäº†è¿™æ ·çš„æ•°ç»„

```
const friends = [] 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

äº‹å®è¯æ˜ï¼Œè¿™åªæ˜¯åˆ›å»ºäº†ä¸€ä¸ª`Array`ç±»çš„`new`å®ä¾‹ã€‚

```
const friendsWithSugar = []

const friendsWithoutSugar = new Array() 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å¯èƒ½ä»æœªæƒ³è¿‡çš„ä¸€ä»¶äº‹æ˜¯ï¼Œä¸€ä¸ªæ•°ç»„çš„æ¯ä¸ªå®ä¾‹æ˜¯å¦‚ä½•æ‹¥æœ‰æ‰€æœ‰å†…ç½®çš„æ–¹æ³•(`splice`ã€`slice`ã€`pop`ç­‰)ï¼Ÿ

æ­£å¦‚ä½ ç°åœ¨æ‰€çŸ¥é“çš„ï¼Œè¿™æ˜¯å› ä¸ºé‚£äº›æ–¹æ³•å­˜åœ¨äº`Array.prototype`ä¸­ï¼Œå½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„`Array`å®ä¾‹æ—¶ï¼Œä½ ä½¿ç”¨äº†`new`å…³é”®å­—ï¼Œè¯¥å…³é”®å­—åœ¨å¤±è´¥çš„æŸ¥æ‰¾ä¸­è®¾ç½®äº†å¯¹`Array.prototype`çš„å§”æ‰˜ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•åœ°è®°å½•`Array.prototype`æ¥æŸ¥çœ‹æ•°ç»„çš„æ‰€æœ‰æ–¹æ³•ã€‚

```
console.log(Array.prototype)

/*
  concat: Æ’n concat()
  constructor: Æ’n Array()
  copyWithin: Æ’n copyWithin()
  entries: Æ’n entries()
  every: Æ’n every()
  fill: Æ’n fill()
  filter: Æ’n filter()
  find: Æ’n find()
  findIndex: Æ’n findIndex()
  forEach: Æ’n forEach()
  includes: Æ’n includes()
  indexOf: Æ’n indexOf()
  join: Æ’n join()
  keys: Æ’n keys()
  lastIndexOf: Æ’n lastIndexOf()
  length: 0n
  map: Æ’n map()
  pop: Æ’n pop()
  push: Æ’n push()
  reduce: Æ’n reduce()
  reduceRight: Æ’n reduceRight()
  reverse: Æ’n reverse()
  shift: Æ’n shift()
  slice: Æ’n slice()
  some: Æ’n some()
  sort: Æ’n sort()
  splice: Æ’n splice()
  toLocaleString: Æ’n toLocaleString()
  toString: Æ’n toString()
  unshift: Æ’n unshift()
  values: Æ’n values()
*/ 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¯¹è±¡ä¹Ÿå­˜åœ¨å®Œå…¨ç›¸åŒçš„é€»è¾‘ã€‚åœ¨æŸ¥æ‰¾å¤±è´¥æ—¶ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½å°†å§”æ‰˜ç»™`Object.prototype`ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ‰€æœ‰å¯¹è±¡éƒ½æœ‰åƒ`toString`å’Œ`hasOwnProperty`è¿™æ ·çš„æ–¹æ³•ã€‚

### [](#static-methods)é™æ€æ–¹æ³•

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºäº†åœ¨ç±»çš„å®ä¾‹ä¹‹é—´å…±äº«æ–¹æ³•çš„åŸå› å’Œæ–¹å¼ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¯¹ç±»å¾ˆé‡è¦çš„æ–¹æ³•ï¼Œä½†ä¸éœ€è¦è·¨å®ä¾‹å…±äº«ï¼Œé‚£ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ç»„`Animal`å®ä¾‹ï¼Œå¹¶ç¡®å®šä¸‹ä¸€ä¸ªéœ€è¦å–‚å“ªä¸€ä¸ªå‘¢ï¼Ÿæˆ‘ä»¬å°±å«å®ƒ`nextToEat`ã€‚

```
function nextToEat (animals) {
  const sortedByLeastEnergy = animals.sort((a,b) => {
    return a.energy - b.energy
  })

  return sortedByLeastEnergy[0].name
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è®©`nextToEat`ç”Ÿæ´»åœ¨`Animal.prototype`ä¸Šæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æƒ³åœ¨æ‰€æœ‰å®ä¾‹ä¹‹é—´å…±äº«å®ƒã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºå®ƒæ›´åƒæ˜¯ä¸€ä¸ªè¾…åŠ©æ–¹æ³•ã€‚é‚£ä¹ˆå¦‚æœ`nextToEat`ä¸åº”è¯¥ä½åœ¨`Animal.prototype`ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥æŠŠå®ƒæ”¾åœ¨å“ªé‡Œå‘¢ï¼Ÿæ˜¾è€Œæ˜“è§çš„ç­”æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†`nextToEat`æ”¾åœ¨ä¸`Animal`ç±»ç›¸åŒçš„èŒƒå›´å†…ï¼Œç„¶ååœ¨éœ€è¦æ—¶åƒå¹³å¸¸ä¸€æ ·å¼•ç”¨å®ƒã€‚

```
class Animal {
  constructor(name, energy) {
    this.name = name
    this.energy = energy
  }
  eat(amount) {
    console.log(`${this.name} is eating.`)
    this.energy += amount
  }
  sleep(length) {
    console.log(`${this.name} is sleeping.`)
    this.energy += length
  }
  play(length) {
    console.log(`${this.name} is playing.`)
    this.energy -= length
  }
}

function nextToEat (animals) {
  const sortedByLeastEnergy = animals.sort((a,b) => {
    return a.energy - b.energy
  })

  return sortedByLeastEnergy[0].name
}

const leo = new Animal('Leo', 7)
const snoop = new Animal('Snoop', 10)

console.log(nextToEat([leo, snoop])) // Leo 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•ã€‚

> æ¯å½“æ‚¨æœ‰ä¸€ä¸ªç‰¹å®šäºç±»æœ¬èº«çš„æ–¹æ³•ï¼Œä½†ä¸éœ€è¦åœ¨è¯¥ç±»çš„å®ä¾‹ä¹‹é—´å…±äº«æ—¶ï¼Œæ‚¨å¯ä»¥å°†å®ƒæ·»åŠ ä¸ºè¯¥ç±»çš„ä¸€ä¸ª`static`å±æ€§ã€‚

```
class Animal {
  constructor(name, energy) {
    this.name = name
    this.energy = energy
  }
  eat(amount) {
    console.log(`${this.name} is eating.`)
    this.energy += amount
  }
  sleep(length) {
    console.log(`${this.name} is sleeping.`)
    this.energy += length
  }
  play(length) {
    console.log(`${this.name} is playing.`)
    this.energy -= length
  }
  static nextToEat(animals) {
    const sortedByLeastEnergy = animals.sort((a,b) => {
      return a.energy - b.energy
    })

    return sortedByLeastEnergy[0].name
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œå› ä¸ºæˆ‘ä»¬æ·»åŠ äº†`nextToEat`ä½œä¸ºç±»çš„`static`å±æ€§ï¼Œå®ƒå­˜åœ¨äº`Animal`ç±»æœ¬èº«(ä¸æ˜¯å®ƒçš„åŸå‹)ä¸Šï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨`Animal.nextToEat`æ¥è®¿é—®ã€‚

```
const leo = new Animal('Leo', 7)
const snoop = new Animal('Snoop', 10)

console.log(Animal.nextToEat([leo, snoop])) // Leo 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å› ä¸ºæˆ‘ä»¬åœ¨è¿™ç¯‡æ–‡ç« ä¸­éµå¾ªäº†ç±»ä¼¼çš„æ¨¡å¼ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ ES5 æ¥å®ŒæˆåŒæ ·çš„äº‹æƒ…ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨`static`å…³é”®å­—å°†æ–¹æ³•ç›´æ¥æ”¾åˆ°ç±»æœ¬èº«ä¸Šã€‚å¯¹äº ES5ï¼ŒåŒæ ·çš„æ¨¡å¼éå¸¸ç®€å•ï¼Œåªéœ€æ‰‹åŠ¨å°†æ–¹æ³•æ·»åŠ åˆ°å‡½æ•°å¯¹è±¡ä¸­ã€‚

```
function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

Animal.prototype.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
}

Animal.nextToEat = function (nextToEat) {
  const sortedByLeastEnergy = animals.sort((a,b) => {
    return a.energy - b.energy
  })

  return sortedByLeastEnergy[0].name
}

const leo = new Animal('Leo', 7)
const snoop = new Animal('Snoop', 10)

console.log(Animal.nextToEat([leo, snoop])) // Leo 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#getting-the-prototype-of-an-object)å¾—åˆ°ä¸€ä¸ªç‰©ä½“çš„åŸå‹

ä¸ç®¡æ‚¨ä½¿ç”¨å“ªç§æ¨¡å¼æ¥åˆ›å»ºå¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨`Object.getPrototypeOf`æ–¹æ³•æ¥è·å¾—è¯¥å¯¹è±¡çš„åŸå‹ã€‚

```
function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

Animal.prototype.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
}

const leo = new Animal('Leo', 7)
const prototype = Object.getPrototypeOf(leo)

console.log(prototype)
// {constructor: Æ’, eat: Æ’, sleep: Æ’, play: Æ’}

prototype === Animal.prototype // true 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä»ä¸Šé¢çš„ä»£ç ä¸­æœ‰ä¸¤ç‚¹å¾ˆé‡è¦ã€‚

é¦–å…ˆï¼Œæ‚¨ä¼šæ³¨æ„åˆ°`proto`æ˜¯ä¸€ä¸ªå…·æœ‰ 4 ç§æ–¹æ³•çš„å¯¹è±¡ï¼Œ`constructor`ã€`eat`ã€`sleep`å’Œ`play`ã€‚æœ‰é“ç†ã€‚æˆ‘ä»¬ä½¿ç”¨`getPrototypeOf`ä¼ å…¥å®ä¾‹ï¼Œ`leo`å–å›å®ä¾‹çš„åŸå‹ï¼Œè¿™æ˜¯æˆ‘ä»¬æ‰€æœ‰æ–¹æ³•çš„æ‰€åœ¨ã€‚è¿™ä¹Ÿå‘Šè¯‰äº†æˆ‘ä»¬å…³äº`prototype`çš„å¦ä¸€ä»¶æˆ‘ä»¬è¿˜æ²¡æœ‰è°ˆåˆ°çš„äº‹æƒ…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ`prototype`å¯¹è±¡å°†æœ‰ä¸€ä¸ª`constructor`å±æ€§ï¼Œè¯¥å±æ€§æŒ‡å‘åˆ›å»ºå®ä¾‹çš„åŸå§‹å‡½æ•°æˆ–ç±»ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œå› ä¸º JavaScript é»˜è®¤åœ¨åŸå‹ä¸Šæ”¾ç½®äº†ä¸€ä¸ª`constructor`å±æ€§ï¼Œæ‰€ä»¥ä»»ä½•å®ä¾‹éƒ½å¯ä»¥é€šè¿‡`instance.constructor`è®¿é—®å®ƒä»¬çš„æ„é€ å‡½æ•°ã€‚

ç¬¬äºŒä¸ªé‡è¦çš„æ”¶è·æ˜¯`Object.getPrototypeOf(leo) === Animal.prototype`ã€‚è¿™ä¹Ÿè¯´å¾—é€šã€‚`Animal`æ„é€ å‡½æ•°æœ‰ä¸€ä¸ªåŸå‹å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ‰€æœ‰å®ä¾‹ä¸­å…±äº«æ–¹æ³•ï¼Œè€Œ`getPrototypeOf`å…è®¸æˆ‘ä»¬çœ‹åˆ°å®ä¾‹æœ¬èº«çš„åŸå‹ã€‚

```
function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

const leo = new Animal('Leo', 7)
console.log(leo.constructor) // Logs the constructor function 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä¸ºäº†ä¸æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„`Object.create`è”ç³»èµ·æ¥ï¼Œè¿™æ ·åšçš„åŸå› æ˜¯å› ä¸º`Animal`çš„ä»»ä½•å®ä¾‹éƒ½å°†åœ¨å¤±è´¥çš„æŸ¥æ‰¾ä¸­å§”æ‰˜ç»™`Animal.prototype`ã€‚å› æ­¤ï¼Œå½“ä½ è¯•å›¾è®¿é—®`leo.constructor`æ—¶ï¼Œ`leo`æ²¡æœ‰`constructor`å±æ€§ï¼Œæ‰€ä»¥å®ƒä¼šå°†æŸ¥è¯¢å§”æ‰˜ç»™ç¡®å®æœ‰`constructor`å±æ€§çš„`Animal.prototype`ã€‚å¦‚æœè¿™ä¸€æ®µæ²¡æœ‰æ„ä¹‰ï¼Œå›å»çœ‹çœ‹ä¸Šé¢çš„`Object.create`ã€‚

> æ‚¨å¯èƒ½å·²ç»è§è¿‡ä½¿ç”¨ __proto__ æ¥è·å–å®ä¾‹çš„åŸå‹ã€‚é‚£æ˜¯è¿‡å»çš„é—è¿¹ã€‚è€Œæ˜¯ä½¿ç”¨**object . getprototypeof(instance)**å°±åƒæˆ‘ä»¬ä¸Šé¢çœ‹åˆ°çš„ã€‚

### [](#determining-if-a-property-lives-on-the-prototype)ç¡®å®šä¸€ä¸ªå±æ€§æ˜¯å¦å­˜åœ¨äºåŸå‹ä¸Š

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦çŸ¥é“ä¸€ä¸ªå±æ€§æ˜¯å­˜åœ¨äºå®ä¾‹æœ¬èº«ä¸Šï¼Œè¿˜æ˜¯å­˜åœ¨äºå¯¹è±¡å§”æ‰˜çš„åŸå‹ä¸Šã€‚é€šè¿‡å¾ªç¯æˆ‘ä»¬å·²ç»åˆ›å»ºçš„`leo`å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚å‡è®¾ç›®æ ‡æ˜¯å¾ªç¯éå†`leo`å¹¶è®°å½•å®ƒçš„æ‰€æœ‰é”®å’Œå€¼ã€‚ä½¿ç”¨ä¸€ä¸ª`for in`å¾ªç¯ï¼Œå¯èƒ½ä¼šåƒè¿™æ ·ã€‚

```
function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

Animal.prototype.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
}

const leo = new Animal('Leo', 7)

for(let key in leo) {
  console.log(`Key: ${key}. Value: ${leo[key]}`)
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ä½ å¸Œæœ›çœ‹åˆ°ä»€ä¹ˆï¼Ÿæœ€æœ‰å¯èƒ½çš„æƒ…å†µæ˜¯è¿™æ ·çš„-

```
Key: name. Value: Leo
Key: energy. Value: 7 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç„¶è€Œï¼Œå¦‚æœä½ è¿è¡Œä»£ç ï¼Œä½ ä¼šçœ‹åˆ°è¿™ä¸ª-

```
Key: name. Value: Leo
Key: energy. Value: 7
Key: eat. Value: function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}
Key: sleep. Value: function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}
Key: play. Value: function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸€ä¸ª`for in`å¾ªç¯å°†éå†å¯¹è±¡æœ¬èº«åŠå…¶å§”æ‰˜çš„åŸå‹ä¸Šçš„æ‰€æœ‰**å¯æšä¸¾å±æ€§**ã€‚å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œæ·»åŠ åˆ°å‡½æ•°åŸå‹çš„ä»»ä½•å±æ€§éƒ½æ˜¯å¯æšä¸¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ä»…å¯ä»¥çœ‹åˆ°`name`å’Œ`energy`ï¼Œè¿˜å¯ä»¥çœ‹åˆ°åŸå‹ä¸Šçš„æ‰€æœ‰æ–¹æ³•â€”â€”`eat`ã€`sleep`å’Œ`play`ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æˆ–è€…éœ€è¦æŒ‡å®šæ‰€æœ‰çš„åŸå‹æ–¹æ³•éƒ½æ˜¯ä¸å¯æšä¸¾çš„**æˆ–è€…**å¦‚æœå±æ€§æ˜¯åœ¨`leo`å¯¹è±¡æœ¬èº«ä¸Šï¼Œè€Œä¸æ˜¯åœ¨å¤±è´¥çš„æŸ¥æ‰¾ä¸­`leo`å§”æ‰˜ç»™çš„åŸå‹ä¸Šï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•åªè®¿é—® console.logã€‚è¿™å°±æ˜¯`hasOwnProperty`å¯ä»¥å¸®åŠ©æˆ‘ä»¬çš„åœ°æ–¹ã€‚

`hasOwnProperty`æ˜¯æ¯ä¸ªå¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨æ˜è¯¥å¯¹è±¡æ˜¯å¦å°†æŒ‡å®šçš„å±æ€§ä½œä¸ºè‡ªå·±çš„å±æ€§ï¼Œè€Œä¸æ˜¯è¯¥å¯¹è±¡å§”æ‰˜ç»™çš„åŸå‹çš„å±æ€§ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ã€‚ç°åœ¨æœ‰äº†è¿™ä¸ªæ–°çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç æ¥åˆ©ç”¨æˆ‘ä»¬çš„`for in`å¾ªç¯ä¸­çš„`hasOwnProperty`ã€‚

```
...

const leo = new Animal('Leo', 7)

for(let key in leo) {
  if (leo.hasOwnProperty(key)) {
    console.log(`Key: ${key}. Value: ${leo[key]}`)
  }
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨æˆ‘ä»¬çœ‹åˆ°çš„åªæ˜¯åœ¨`leo`å¯¹è±¡æœ¬èº«ä¸Šçš„å±æ€§ï¼Œè€Œä¸æ˜¯åŸå‹`leo`å§”æ‰˜ç»™å®ƒçš„å±æ€§ã€‚

```
Key: name. Value: Leo
Key: energy. Value: 7 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœä½ ä»ç„¶å¯¹`hasOwnProperty`æœ‰äº›å›°æƒ‘ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä»£ç å¯ä»¥è®©ä½ æ˜ç™½ã€‚

```
function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

Animal.prototype.eat = function (amount) {
  console.log(`${this.name} is eating.`)
  this.energy += amount
}

Animal.prototype.sleep = function (length) {
  console.log(`${this.name} is sleeping.`)
  this.energy += length
}

Animal.prototype.play = function (length) {
  console.log(`${this.name} is playing.`)
  this.energy -= length
}

const leo = new Animal('Leo', 7)

leo.hasOwnProperty('name') // true
leo.hasOwnProperty('energy') // true
leo.hasOwnProperty('eat') // false
leo.hasOwnProperty('sleep') // false
leo.hasOwnProperty('play') // false 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

### [](#check-if-an-object-is-an-instance-of-a-class)æ£€æŸ¥å¯¹è±¡æ˜¯å¦æ˜¯ç±»çš„å®ä¾‹

æœ‰æ—¶ä½ æƒ³çŸ¥é“ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªç‰¹å®šç±»çš„å®ä¾‹ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`instanceof`æ“ä½œç¬¦ã€‚ç”¨ä¾‹éå¸¸ç®€å•ï¼Œä½†æ˜¯å¦‚æœä½ ä»¥å‰ä»æœªè§è¿‡ï¼Œå®é™…çš„è¯­æ³•ä¼šæœ‰ç‚¹å¥‡æ€ªã€‚å®ƒæ˜¯è¿™æ ·å·¥ä½œçš„

```
object instanceof Class 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¦‚æœ`object`æ˜¯`Class`çš„å®ä¾‹ï¼Œä¸Šé¢çš„è¯­å¥å°†è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚å›åˆ°æˆ‘ä»¬çš„`Animal`ä¾‹å­ï¼Œæˆ‘ä»¬ä¼šæœ‰è¿™æ ·çš„ä¸œè¥¿ã€‚

```
function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

function User () {}

const leo = new Animal('Leo', 7)

leo instanceof Animal // true
leo instanceof User // false 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

`instanceof`çš„å·¥ä½œæ–¹å¼æ˜¯æ£€æŸ¥å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯å¦å­˜åœ¨`constructor.prototype`ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`leo instanceof Animal`æ˜¯`true`ï¼Œå› ä¸º`Object.getPrototypeOf(leo) === Animal.prototype`ã€‚å¦å¤–ï¼Œ`leo instanceof User`æ˜¯`false`å› ä¸º`Object.getPrototypeOf(leo) !== User.prototype`ã€‚

### [](#creating-new-agnostic-constructor-functions)åˆ›å»ºæ–°çš„ä¸å¯çŸ¥æ„é€ å‡½æ•°

ä½ èƒ½æ‰¾å‡ºä¸‹é¢ä»£ç ä¸­çš„é”™è¯¯å—ï¼Ÿ

```
function Animal (name, energy) {
  this.name = name
  this.energy = energy
}

const leo = Animal('Leo', 7) 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å³ä½¿æ˜¯ç»éªŒä¸°å¯Œçš„ JavaScript å¼€å‘äººå‘˜æœ‰æ—¶ä¹Ÿä¼šè¢«ä¸Šé¢çš„ä¾‹å­ç»Šå€’ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†ä¹‹å‰å­¦è¿‡çš„`pseudoclassical pattern`ï¼Œå½“è°ƒç”¨`Animal`æ„é€ å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿ç”¨`new`å…³é”®å­—è°ƒç”¨å®ƒã€‚å¦‚æœæˆ‘ä»¬ä¸è¿™æ ·åšï¼Œé‚£ä¹ˆ`this`å…³é”®å­—å°†ä¸ä¼šè¢«åˆ›å»ºï¼Œä¹Ÿä¸ä¼šè¢«éšå¼è¿”å›ã€‚

æé†’ä¸€ä¸‹ï¼Œæ³¨é‡Šæ‰çš„è¡Œæ˜¯åœ¨å‡½æ•°ä¸Šä½¿ç”¨`new`å…³é”®å­—æ—¶å‘ç”Ÿçš„äº‹æƒ…ã€‚

```
function Animal (name, energy) {
  // const this = Object.create(Animal.prototype)

  this.name = name
  this.energy = energy

  // return this
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªå¤ªé‡è¦çš„ç»†èŠ‚ï¼Œä¸èƒ½ç•™ç»™å…¶ä»–å¼€å‘äººå‘˜å»è®°ä½ã€‚å‡è®¾æˆ‘ä»¬å’Œå…¶ä»–å¼€å‘äººå‘˜åœ¨ä¸€ä¸ªå›¢é˜Ÿä¸­å·¥ä½œï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥ç¡®ä¿æˆ‘ä»¬çš„`Animal`æ„é€ å‡½æ•°æ€»æ˜¯è¢«`new`å…³é”®å­—è°ƒç”¨ï¼Ÿäº‹å®è¯æ˜æ˜¯æœ‰çš„ï¼Œè€Œä¸”æ˜¯é€šè¿‡ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰å­¦è¿‡çš„`instanceof`æ“ä½œç¬¦ã€‚

å¦‚æœæ„é€ å‡½æ•°æ˜¯ç”¨å…³é”®å­—`new`è°ƒç”¨çš„ï¼Œé‚£ä¹ˆæ„é€ å‡½æ•°ä½“å†…éƒ¨çš„`this`å°†æ˜¯æ„é€ å‡½æ•°æœ¬èº«çš„ä¸€ä¸ª`instanceof`ã€‚é‚£æ˜¯è®¸å¤šå¤§è¯ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä»£ç ã€‚

```
function Animal (name, energy) {
  if (this instanceof Animal === false) {
    console.warn('Forgot to call Animal with the new keyword')
  }

  this.name = name
  this.energy = energy
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ï¼Œä¸ä»…ä»…æ˜¯å‘å‡½æ•°çš„æ¶ˆè´¹è€…è®°å½•ä¸€ä¸ªè­¦å‘Šï¼Œå¦‚æœæˆ‘ä»¬é‡æ–°è°ƒç”¨å‡½æ•°ï¼Œä½†æ˜¯è¿™æ¬¡ä½¿ç”¨å…³é”®å­—`new`ä¼šæ€ä¹ˆæ ·ï¼Ÿ

```
function Animal (name, energy) {
  if (this instanceof Animal === false) {
    return new Animal(name, energy)
  }

  this.name = name
  this.energy = energy
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç°åœ¨ä¸ç®¡`Animal`æ˜¯å¦è¢«`new`å…³é”®å­—è°ƒç”¨ï¼Œå®ƒä»ç„¶ä¼šæ­£å¸¸å·¥ä½œã€‚

### [](#recreating-objectcreate)é‡æ–°åˆ›å»ºå¯¹è±¡.åˆ›å»º

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬éå¸¸ä¾èµ–`Object.create`æ¥åˆ›å»ºå§”æ‰˜ç»™æ„é€ å‡½æ•°åŸå‹çš„å¯¹è±¡ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ åº”è¯¥çŸ¥é“å¦‚ä½•åœ¨ä½ çš„ä»£ç ä¸­ä½¿ç”¨`Object.create`ï¼Œä½†æ˜¯æœ‰ä¸€ä»¶äº‹ä½ å¯èƒ½æ²¡æœ‰æƒ³åˆ°ï¼Œé‚£å°±æ˜¯`Object.create`å®é™…ä¸Šæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ä¸ºäº†è®©ä½ **çœŸæ­£**ç†è§£`Object.create`æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬å°†è‡ªå·±é‡æ–°åˆ›å»ºå®ƒã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹`Object.create`çš„è¿ä½œæ–¹å¼äº†è§£å¤šå°‘ï¼Ÿ

1)å®ƒæ¥å—ä¸€ä¸ªä½œä¸ºå¯¹è±¡çš„å‚æ•°ã€‚2)å®ƒåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨æŸ¥æ‰¾å¤±è´¥æ—¶å§”æ‰˜ç»™ argument å¯¹è±¡ã€‚3)å®ƒè¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚

è®©æˆ‘ä»¬ä»ç¬¬ä¸€ç‚¹å¼€å§‹ã€‚

```
Object.create = function (objToDelegateTo) {

} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å¾ˆç®€å•ã€‚

ç°åœ¨#2 -æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå°†åœ¨æŸ¥æ‰¾å¤±è´¥æ—¶å§”æ‰˜ç»™ argument å¯¹è±¡ã€‚è¿™ä¸ªæœ‰ç‚¹å¤æ‚ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨æˆ‘ä»¬å¯¹å…³é”®å­—å’ŒåŸå‹åœ¨ JavaScript ä¸­å¦‚ä½•å·¥ä½œçš„äº†è§£ã€‚é¦–å…ˆï¼Œåœ¨æˆ‘ä»¬çš„`Object.create`å®ç°ä½“ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç©ºå‡½æ•°ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†è¿™ä¸ªç©ºå‡½æ•°çš„åŸå‹è®¾ç½®ä¸ºå‚æ•°å¯¹è±¡ã€‚ç„¶åï¼Œä¸ºäº†åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨`new`å…³é”®å­—è°ƒç”¨æˆ‘ä»¬çš„ç©ºå‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™ä¹Ÿå°†å®Œæˆ#3ã€‚

```
Object.create = function (objToDelegateTo) {
  function Fn(){}
  Fn.prototype = objToDelegateTo
  return new Fn()
} 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

ç‹‚é‡ã€‚è®©æˆ‘ä»¬èµ°ä¸€éã€‚

å½“æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä»£ç ä¸­åˆ›å»ºæ–°å‡½æ•°`Fn`æ—¶ï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ª`prototype`å±æ€§ã€‚å½“æˆ‘ä»¬ç”¨`new`å…³é”®å­—è°ƒç”¨å®ƒæ—¶ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å°†å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå°†åœ¨æŸ¥æ‰¾å¤±è´¥æ—¶å§”æ‰˜ç»™å‡½æ•°çš„åŸå‹ã€‚å¦‚æœæˆ‘ä»¬è¦†ç›–äº†å‡½æ•°çš„åŸå‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å†³å®šåœ¨æŸ¥æ‰¾å¤±è´¥æ—¶å§”æ‰˜ç»™å“ªä¸ªå¯¹è±¡ã€‚æ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç”¨è°ƒç”¨`Object.create`æ—¶ä¼ å…¥çš„å¯¹è±¡è¦†ç›–äº†`Fn`çš„åŸå‹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º`objToDelegateTo`ã€‚

> è¯·æ³¨æ„ï¼Œæˆ‘ä»¬åªæ”¯æŒ Object.create çš„å•ä¸ªå‚æ•°ã€‚å®˜æ–¹å®ç°è¿˜æ”¯æŒç¬¬äºŒä¸ªå¯é€‰å‚æ•°ï¼Œè¯¥å‚æ•°å…è®¸æ‚¨å‘åˆ›å»ºçš„å¯¹è±¡æ·»åŠ æ›´å¤šå±æ€§ã€‚

### [](#arrow-functions)ç®­å¤´åŠŸèƒ½

ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„`this`å…³é”®å­—ã€‚å› æ­¤ï¼Œç®­å¤´å‡½æ•°ä¸èƒ½æ˜¯æ„é€ å‡½æ•°ï¼Œå¦‚æœä½ è¯•å›¾ç”¨å…³é”®å­—`new`è°ƒç”¨ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚

```
const Animal = () => {}

const leo = new Animal() // Error: Animal is not a constructor 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æ­¤å¤–ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä¸Šé¢æ¼”ç¤ºäº†ä¼ªç»å…¸æ¨¡å¼ä¸èƒ½ç”¨äºç®­å¤´å‡½æ•°ï¼Œæ‰€ä»¥ç®­å¤´å‡½æ•°ä¹Ÿæ²¡æœ‰`prototype`å±æ€§ã€‚

```
const Animal = () => {}
console.log(Animal.prototype) // undefined 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

* * *

è¿™æœ€åˆå‘è¡¨åœ¨ TylerMcGinnis.com çš„ T2ï¼Œæ˜¯ä»–ä»¬ T4 é«˜çº§ JavaScript è¯¾ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚