# 为什么你害怕函数式编程

> 原文:[https://dev . to/kspeakman/why-you-beard-of-functional-programming-hh4](https://dev.to/kspeakman/why-you-are-scared-of-functional-programming-hh4)

我记得我曾经听说过所谓的“函数式编程”(我的意思是我以前是不是在做功能失调的编程？*weeeell，**我**大概就是*。我总是带着这种不必要的复杂的感觉离开。一些只有博士生被关在象牙塔里时[才被折磨得明白的事情](https://stackoverflow.com/questions/3870088/a-monad-is-just-a-monoid-in-the-category-of-endofunctors-whats-the-proble%E2%85%BF)。

然而，因为我今天主要做函数式编程，所以我回头看看我可以告诉过去的我什么，让他明白 FP 并不真正令人生畏，甚至不是为那些比我受教育程度高得多的人保留的。并提供了一些实现成功的方法。

### #1 别烦单子教程

...或者其他从范畴理论中摘取的东西。你真的不需要一开始就知道那些东西。有一天，未来的你可能会充满自信，但这种自信随时可能被一个单子的教程摧毁。但是今天，这样的事情是有趣的“优化”,您可以稍后了解。

> 在某些语言中，可能很难避免陷入类型理论——我知道你知道我现在想到的是 Haskell。如果我是过去的我，我会坚持使用对类型要求不高的 ML 系列语言:我想到的例子有 F#、OCaml/Reason、Elm。对于听众中的动态类型程序员来说，这些语言也有很好的类型推断，所以您可以省略大多数类型声明，但仍然可以免费进行类型检查。

### #2 假装你是从程序化编程过来的

在开始 FP 时，一个非常常见的错误是试图用面向对象编程的那副眼镜来看待一切。您可能试图隐藏数据结构或向数据添加方法。嗯，大多数时候并不是这样的。你可以把函数式编程看作更类似于[过程化](https://en.wikipedia.org/wiki/Procedural_programming#Functional_programming)(做得对)而不是面向对象。最大的区别是过程性自始至终执行副作用，而 FP 强调首先做出决定，并在最后将这些决定转化为副作用。

### 不要沉迷于抽象概念

在编程领域的所有范例中，一个普遍的问题是试图将太多的东西硬塞进一个关于一切的抽象理论中。FP 在那里也没什么不同。事实上，你所害怕的所有范畴理论的东西恰恰是这样的，你可以用一个抽象来反对其他非常不同的东西，比如验证结果和文件 IO——这样你就可以在两者上使用相同的函数。这就是为什么我之前说要把所有的类型理论看作是一种“优化”,你可以以后再去担心。

现在，观察一些重复的代码(例如，嗯，有 List.map，Option.map，Result.map...我不太确定，但我认为那里正在发生某种模式...)直到你非常确定它是*完全相同的东西*的复制，而不仅仅是相似的东西。

> 桑迪·梅斯说得好 :
> “复制远比错误的抽象便宜”

### 如果你必须的话，在你的纯饮食上欺骗一下

有时候，想在不使用副作用的情况下编码一个问题真的很难，因为它们在我的思维中根深蒂固。例如，对我来说最难的是生成随机数。我上面提到的语言有一些退路，如果你太沮丧了，需要继续前进，你可以使用副作用。(Elm 本身不允许副作用，但是您仍然可以使用最终的副作用:JavaScript 进行互操作。)

我也允许自己在程序的“边缘”使用副作用。在一个 web API 中，我将 Edge 定义为 1997 年的一部烂片。所以我可能会生成一些随机数，或者获取当前日期/时间，或者从控制器的数据库中读取。但是我基于这些做的任何决定都是纯函数的。然后，做出的决定返回给控制者，控制者可以将它们变成更多的副作用，比如保存到数据库或加载更多的数据以用于另一个纯粹的功能。提醒一下，如果你没有看过我谈到 FP 的所有其他帖子:纯粹的使得决策函数令人尴尬的可测试和可重构。见鬼，我甚至测试了所有可能发生的坏事以及快乐之路。

### #5 使用联合类型

如果你曾经试图用两个互斥的可空属性来写一个类，请举手。例如:某些数据或错误。这正是联合类型允许您以一种不尴尬的方式来表示的。了解它们并在您的数据结构中使用它们。

> 您知道在面向对象语言中，联合类型可以用继承来表示吗？但是在 OO 范式下，对对象进行“实例”检查以获取其实现细节被认为是一种反模式。然而，在 FP 中，检查一个联合类型的所有情况，并对每个情况使用不同的函数是一个很好的实践。因为 FP 强调的是函数和不可变的数据，而不是封装数据和方法的基于对象的抽象。旅途中把它放在你的后口袋里。

*我要让你知道一个秘密。不要让这影响到联合类型的使用，但是范畴理论的东西特别是围绕着它们。现在，过去的我，~~不要嘲讽[欢乐舞会](https://en.wikipedia.org/wiki/Happy_Fun_Ball)~~ 总是用`case` / `match`语句解构联合类型，你将远离所有那些类型理论。当你注意到这一切的相似性时，你可能已经准备好深入研究了。*

在我的 FP 旅程中掉进所有的陷阱后，希望我能给你指出一些。...准确地推测一条更好的道路会是什么样子？呃，准确性可能要求太高了。好吧，我已经尽力了。:)