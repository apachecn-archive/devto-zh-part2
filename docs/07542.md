# 为什么伟大的开发者都爱写测试？

> 原文:[https://dev . to/anabella/why-do-great-developers-love-writing-tests-1o6j](https://dev.to/anabella/why-do-great-developers-love-writing-tests-1o6j)

*本文原载于 [Typeform 的工程博客](https://medium.com/typeforms-engineering-blog/why-do-great-developers-love-writing-tests-2c0ff5cb7ef2)T3*

### [](#part-one-omg-im-totally-buggin)**第一部:** *OMG 我完全被烦死了！*

多年来，我一直听说编写测试的重要性。这不足为奇，因为在那段时间里，我一直在一个开发团队中担任 QA 工程师。我听说过单元测试和集成测试有多重要，TDD 的奇迹，代码覆盖率，等等。

敏捷团队和组织一直在谈论它，很长一段时间我都认为它与我的工作无关。尽管上面有“测试”这个词，但这并不是我参与的那种测试。所以我只是把它记在我的脑海里**“好东西之书”**，并希望有一天我会明白它属于那里的原因。我一无所知。

与此同时，多年前，我一直在学习编码。我想把我的职业转向开发，或者至少是测试自动化。当时像 Codecademy 这样的网站刚刚起步，他们的免费课程让我疯狂。不知何故，它从未引起我的注意，练习如何知道我的代码什么时候是不正确的，为什么他们通常有一个很好的想法，哪一部分是偏离目标的。

之后，我做了一些更激烈的“课堂编码-课程”。在那里，我了解了一点关于单元测试的目的。他们测试代码的每一个功能单元(或单元),以确保它做了所有应该做的事情。现在，在让这个新定义在我脑海里盘桓了几年之后，我意识到了一些新的东西:

> 单元测试不测试面向外部的功能——比如登录表单或端点——它们测试面向内部的功能，确保一段代码可以被其他代码正确使用。

由于我在学习一些新的技巧，我也开始创建小的宠物项目，要么应用我所学的，要么通过构建我想出的有趣的东西来挑战它。这有很多乏味的方面:痴迷于搜索解决方案，不使用 git，弄清楚 CORS 是什么…你知道这是怎么回事。但是我的过程中最糟糕的事情之一(或者说缺乏)是必须测试我所做的每一个改变的每一个使用和边缘情况。

如果你已经读到这里，你可能知道我在说什么。要么你现在正在经历，要么你从你开始开发真实的、可行的东西时就记得它了。每次在逻辑中引入变化时，都不得不手动测试每一个流变量，这种乏味的感觉是无法忘记的。或者，更糟糕的是，在 3 个小时的重构后发现了一个中断的流，并且不知道它何时停止工作。

现在想象这样一种情况，在终端上运行一个命令，看着一片绿色(偶尔是红色)的文本展开，所有这些都被覆盖了。那不是很好吗？它肯定会，但不知何故，它仍然逃脱了我的理解。我的项目不是“真正的应用”，我想，它们不需要测试。

* * *

[!["2001: A Space Odyssey"](../Images/5b31b38f82818686f8aa7b07621a2182.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--rQSFxHto--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/0%2AM9kUUVov8gltivB5)

### [](#part-two-the-end-of-my-boneasaweapon-days)**第二部:** *我以骨为武器的日子结束了*

我已经在打字部工作了大约 6 个月了。我是一个在测试方面非常自给自足的团队的一员，他们不需要我一直戴着 QA 的帽子。我们做了很多 mob 和 pair 编程，我也参与了特性、变化和修复的开发。我从这些经历中学到了很多，但有一件事总是让我感到惊讶:当我们完成一项任务时，我的队友立即想为它编写测试。这感觉就像是一种冲动或无意识的反射，而不是他们记得必须做的事情。不知何故，他们总是让我措手不及。

在那些时刻，我倾向于感到快乐和放松。事实上，我们已经了解了问题，讨论了方法，排除了障碍，最终让事情运转起来。我只想喝杯咖啡休息一下，但他们想做的只是确保所有的事情都有测试。

直到今天，在软件行业工作了近 9 年后，我才明白为什么:

这些人关心代码，而不仅仅是他们自己写的代码。他们关心的是它的可读性和可维护性，它遵循良好的标准，它是高效的，它做了所有它应该做的事情，无论是内在的还是外在的。

但是，他们在现实世界的代码库上工作，这些代码库往往有很多代码，在很多文件中，有很多特性。一天只有 24 小时。他们需要一种可靠而快速的方法来确保他们的改变有效，并且最重要的是，确保其他一切仍然有效。

> 伟大的开发人员喜欢编写测试，因为他们关心代码，并且他们知道(编写良好的)测试是唯一可靠的方式，他们可以更加确信它是可行的。

他们还知道，如果它刚从开发烤箱中拿出来时没有得到测试，它可能永远不会得到测试。这也是为什么像**测试驱动开发** (TDD)这样的东西存在。

当您使用 TDD 方法时，您从为您需要添加或更改的所有内容编写测试开始。是的，我是认真的。在编写实际代码之前，先编写测试。当然，所有的新测试都会失败，但是你可以写代码让它们都通过。你从拥有保险开始，然后建立你需要覆盖的东西。

TDD 还有一个附加值:**聚焦**。只有能让测试变绿的代码才应该被编写。

* * *

[!["Shawshank Redemption"](../Images/e41039d20314d2944015cf130f7b2aa1.png "I hope the tests are as green as they have been in my dreams")T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--FcmSykO0--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://cdn-images-1.medium.com/max/1600/0%2AxSnp8hYWmiSc4ocW)

### [](#epilogue-i-hope-the-tests-are-as-green-as-they-have-been-in-my-dreams)**后记:** *我希望测试像我梦中的一样绿色*

我在这里的最后一点不是吹嘘能与伟大的开发人员并肩工作，而是鼓励你尽早熟悉测试你自己的代码。让它成为你过程中的一件必要的事情。不是因为这是一个行业标准，一个好的实践，或者因为有人说你必须这样做。因为毫无疑问，这将使您作为开发人员的生活更加轻松愉快。

安:请不要像我一样，有些事情太明显了，需要很多年才能想清楚😉