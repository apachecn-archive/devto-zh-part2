# NextJS æç¤º:ç›¸å¯¹ ES6 æ¨¡å—

> åŸæ–‡:[https://dev . to/whoisryosuke/nextjs-tip-relative-es6-modules-5ajf](https://dev.to/whoisryosuke/nextjs-tip-relative-es6-modules-5ajf)

ä½ çš„ç»„ä»¶åœ¨ NextJS é‡Œæ˜¯è¿™æ ·çš„å—ï¼Ÿ

```
import ShopProfile from '../../layouts/ShopProfile/ShopProfile'
import KushyApi from '../../utils/KushyApi'
import Menu from '../../components/Menu/Menu' 
```

Enter fullscreen mode Exit fullscreen mode

è¿™ç§è®¾ç½®å¯¹äºè¾ƒå°çš„é¡¹ç›®æ¥è¯´æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å½“ä½ éœ€è¦åœ¨æ–‡ä»¶å¤¹é—´ç§»åŠ¨ç»„ä»¶æ—¶ï¼Œå¾ˆå®¹æ˜“è¿·å¤±åœ¨ç›¸å¯¹ç›®å½•çš„æµ·æ´‹ä¸­(æ˜¯ä¸¤ç»„è¿˜æ˜¯ä¸‰ç»„`.../`ğŸ¤”).

## æ’ä»¶æ–¹å¼

åä¸º root-import çš„ babel æ’ä»¶å¯ä»¥ä¸ºæˆ‘ä»¬å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”å®ƒéå¸¸å®¹æ˜“è®¾ç½®:

`npm install babel-plugin-root-import --save-dev`

å°†ä¸€ä¸ª`.babelrc`æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®æ ¹:

```
{
    "presets": [
        "next/babel"
    ],
    "plugins": [
        [
            "babel-plugin-root-import"
        ]
    ],
    "env": { // For React Native
        "production": {
            "plugins": [
                "babel-plugin-root-import"
            ]
        }
    }
} 
```

Enter fullscreen mode Exit fullscreen mode

å°±æ˜¯è¿™æ ·ã€‚æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨`~`ç¬¦å·ä½œä¸ºæ ¹è·¯å¾„æ¥åŒ…å«ç»„ä»¶:

```
import ShopProfile from '~/layouts/ShopProfile/ShopProfile'
import KushyApi from '~/utils/KushyApi'
import Menu from '~/components/Menu/Menu' 
```

Enter fullscreen mode Exit fullscreen mode

> å› ä¸º NextJS ä½¿ç”¨å®šåˆ¶çš„ babel è®¾ç½®ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æä¾›è‡ªå·±çš„è®¾ç½®æ—¶ï¼Œå®ƒä¼šè¦†ç›–é»˜è®¤é…ç½®ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¤±å»äº†å„ç§ä¼Ÿå¤§çš„åŠŸèƒ½ï¼Œå¦‚[å¯¹è±¡ä¼ æ’­](https://babeljs.io/docs/en/babel-plugin-transform-object-rest-spread/)ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨é…ç½®çš„å¼€å§‹ä½¿ç”¨ Next çš„å·´åˆ«å¡”é¢„ç½®(`"presets": [ "next/babel" ],`)ï¼Œå¹¶åœ¨ä¸‹é¢æ”¾ä¸‹æˆ‘ä»¬çš„æ’ä»¶ã€‚ç°åœ¨ä½ ä¸åº”è¯¥åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¾—åˆ°ä»»ä½•é”™è¯¯ã€‚

## æ›´å¥½çš„æ–¹æ³•

æˆ‘æŸ¥æ‰¾äº†å¦‚ä½•åœ¨æ€»ä½“ä¸Šåšåˆ°è¿™ä¸€ç‚¹ï¼Œè€Œä¸æ˜¯ä¸“é—¨é’ˆå¯¹ NexJSï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªç½‘ç«™ï¼Œä¸Šé¢æœ‰ä¸€ä¸ªéå¸¸ç®€æ˜çš„æŒ‡å—ã€‚å®ƒæŒ‡å‡ºï¼Œå¯¹äº Webpack 2ï¼Œæ‚¨å°†æŠŠå®ƒæ·»åŠ åˆ°æ‚¨çš„`webpack.config.js` :

```
resolve: {
  modules: [
    path.resolve('./')
  ]
}, 
```

Enter fullscreen mode Exit fullscreen mode

æ‰€ä»¥åœ¨ NextJS ä¸­ï¼Œæˆ‘å°è¯•è¿™æ ·åš:

```
const withLess = require('@zeit/next-less')
const withCSS = require('@zeit/next-css')
const path = require('path')

// To add new modules, nest the function (like a HOC in React)
module.exports = withCSS(withLess({
    webpack(config, options) {
        config.module.rules.push({
            test: /\.(png|jpg|gif|svg|eot|ttf|woff|woff2)$/,
            use: {
                loader: 'url-loader',
                options: {
                    limit: 100000
                }
            }
        })

        // Here is the magic
        // We push our config into the resolve.modules array
        config.resolve.modules.push(path.resolve('./'))

        return config
    }
})) 
```

Enter fullscreen mode Exit fullscreen mode

è¿™å…è®¸ä½ åƒè¿™æ ·ä½¿ç”¨ä½ çš„ç»„ä»¶å’Œæ¨¡å—:

```
import ShopProfile from 'layouts/ShopProfile/ShopProfile'
import KushyApi from 'utils/KushyApi'
import Menu from 'components/Menu/Menu' 
```

Enter fullscreen mode Exit fullscreen mode

æ¯”ä½¿ç”¨`~`ç¬¦å·æ›´ç®€æ´ï¼Œæ¯”å®‰è£…å¦ä¸€ä¸ªä¾èµ–é¡¹æ›´å®¹æ˜“ğŸ‘

å¸Œæœ›æœ‰å¸®åŠ©ğŸ»
è‰¯

* * *

**å‚è€ƒæ–‡çŒ®**:

*   [å·´åˆ«å¡”æ’ä»¶æ ¹å¯¼å…¥](https://github.com/entwicklerstube/babel-plugin-root-import#readme)
*   [ES6 ä½¿ç”¨ Webpack å¯¼å…¥æ²¡æœ‰ç›¸å¯¹è·¯å¾„çš„è¯­å¥](https://moduscreate.com/blog/es6-es2015-import-no-relative-path-webpack/)
*   [NextJS é—®é¢˜-ç»å¯¹ç›¸å…³æ¨¡å—](https://github.com/zeit/next.js/issues/342)
*   [å¦‚ä½•ä½¿ç”¨ã€‚babelrc ç»“åˆ next.config.jsï¼Ÿ](https://github.com/zeit/next.js/issues/4010)