# node.js ä¸­çš„ mysql ç¼–è¾‘å™¨ç¬¬ä¸‰éƒ¨åˆ†

> åŸæ–‡:[https://dev.to/link2twenty/mysql-editor-in-nodejs-ç¬¬ä¸‰éƒ¨-3 è‡ªæ°‘å…š](https://dev.to/link2twenty/mysql-editor-in-nodejs--part-three-3ldp)

# [](#mysql-editor-in-nodejs)MySQL ç¼–è¾‘å™¨ä¸­çš„ NodeJS

æˆ‘é”™è¿‡äº†ä¸€å‘¨ï¼Œå¾ˆæŠ±æ­‰ï¼Œä½†ç°åœ¨æˆ‘å›æ¥äº†ã€‚è¿™æ¬¡æ²¡åšå¤ªå¤šã€‚æˆ‘å·²ç»åšäº†ä¸€ä¸ª JS è·¯ç”±å™¨ï¼Œæˆ–è€…è‡³å°‘æˆ‘è®¤ä¸ºä½ ä¼šè¿™æ ·ç§°å‘¼å®ƒï¼Œæ¥å¤„ç†ä¸åŒçš„â€œçŠ¶æ€â€,æˆ‘ä¹Ÿå·²ç»å¼€å§‹åˆ¶ä½œä¸€ä¸ªçœŸæ­£çš„ç¼–è¾‘å™¨æ¥é€‰æ‹©ä½ çš„æ•°æ®åº“å’Œè¡¨ã€‚

å¦‚æœä½ æƒ³è·Ÿéšæˆ‘çš„æ—…ç¨‹ï¼Œè¿™æ˜¯æˆ‘çš„[å¸–å­ç´¢å¼•](https://dev.to/link2twenty/adventures-of-a-hobbyist--index-4oj7)ã€‚

## ![GitHub logo](../Images/292a238c61c5611a7f4d07a21d9e8e0a.png)[ignis-pwa](https://github.com/ignis-pwa)/[node tree](https://github.com/ignis-pwa/nodetree)

### ä¸€ä¸ªç”¨ NodeJS å†™çš„ MySQL æµè§ˆå™¨

<article class="markdown-body entry-content container-lg" itemprop="text">

# èŠ‚ç‚¹æ ‘

ä¸€ä¸ªç”¨ NodeJS å†™çš„ MySQL æµè§ˆå™¨

åœ¨ [dev.to](https://dev.to/link2twenty/mysql-editor-in-nodejs--part-one-42j0) ä¸Šé˜…è¯»è¯¥é¡¹ç›®

è¯•ç©ä¸€ä¸‹[æ¼”ç¤º](http://nodetree-mysql.herokuapp.com/)å¯†ç æ˜¯`demopassword`

</article>

[View on GitHub](https://github.com/ignis-pwa/nodetree)

## [](#interface-update)ç•Œé¢æ›´æ–°

[![interface](../Images/152d7d4de603a381b2d823123010d211.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--k2X3hztE--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/2fhic31nkdxuhhq228hq.gif)

å¸Œæœ›ä½ èƒ½çœ‹åˆ°ï¼Œæˆ‘å·²ç»æ·»åŠ äº†ä¸€ä¸ªæ–°çš„â€œçŠ¶æ€â€,è¿™å°†å¼•å…¥æ›´å¤šçš„ HTML æ¥è¦†ç›–å·²ç»å­˜åœ¨çš„å†…å®¹ï¼Œä½†æˆ‘å°†åœ¨ç¨åè¿›è¡Œè®¨è®ºã€‚

å³è¾¹çš„ç©ºé—´å°†æœ‰ä¸€ä¸ªç»“æœè¡¨å’ŒæŸ¥è¯¢è¾“å…¥æ¡†ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªé€‰æ‹©èœå•ä»”ç»†çœ‹çœ‹

[![menu](../Images/b5243a4636334803809b3b1ab9beaf3f.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--WaZlW9U9--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/a9y5720fgww1ftbtcoe0.gif)

## [](#js-router)JS è·¯ç”±å™¨

æˆ‘è¿˜æ˜¯ä¸ç¡®å®šè¿™ç®—ä¸ç®—è·¯ç”±å™¨ã€‚å®ƒæœ‰ä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶æ ¹æ®çŠ¶æ€å°†ä¸åŒçš„ HTML æ–‡ä»¶åŠ è½½åˆ°é¡µé¢çš„ä¸»ä½“ä¸­ã€‚

```
class SimpleStateRouter {
    constructor() {
      this.body = document.body;
      this.stateList = ['connection', 'database'];
      this.event = new CustomEvent('state-changed');
      this.req = new XMLHttpRequest();
      this.body.addEventListener('state-changed', res => { this._getFragment() });
      this.req.addEventListener('load', res => { this._setFragment(res) });

      this.body.dataset.state || this.setState('connection');
    }
    //// PRIVATE ////
    /* Private method to get fragment */
    _getFragment() {
      for (let state of this.stateList) this._unloadScript(`/scripts/${state}.js`);
      this.req.open("GET", `/fragment/${this.state}`);
      this.req.send();
    }
    /* Private method to load external JS file */
    _loadScript(url) {
      const head = document.getElementsByTagName('head')[0];
      const script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = url;
      head.appendChild(script);
    }
    /* Private method to remove external JS file */
    _unloadScript(url) {
      for (let tag of document.querySelectorAll(`script`)) tag.getAttribute('src') == url && tag.parentNode.removeChild(tag)
    }
    /* Private method to update the dom */
    _setFragment(res) {
      document.body.innerHTML = res.srcElement.response;
      this._loadScript(`/scripts/${this.state}.js`);
    }
    //// PUBLIC ////
    /* Public setter method to update current state */
    setState(state = "") {
      if (this.state == state || this.stateList.indexOf(state) == -1) return
      this.state = state;
      this.body.dataset.state = this.state;
      this.body.dispatchEvent(this.event);
    }
  } 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

æˆ‘ä¸çŸ¥é“è¿™æ˜¯ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå®ƒä¼¼ä¹è¶³å¤Ÿå¿«äº†ï¼Œæˆ‘ä¸€ç›´åœ¨å…³æ³¨æˆ‘çš„ç¯å¡”å¾—åˆ†ï¼Œä¹Ÿä¸çŸ¥é“è¿™æ˜¯å¦æœ‰ç”¨ï¼Œç›®å‰å®ƒéƒ½æ˜¯ç»¿è‰²çš„ã€‚

[![lighthouse](../Images/6d25ff4704788f7b2d1b062e21e6de90.png)T2ã€‘](https://res.cloudinary.com/practicaldev/image/fetch/s--9cdpCnIa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/tek7pnv7cfio6h47an6b.png)

è¿™ä¸ªçŠ¶æ€è·¯ç”±å™¨èƒŒåçš„æƒ³æ³•æ˜¯æ”¹å˜é¡µé¢è€Œä¸æ›´æ–°å®ƒï¼Œæˆ‘çŸ¥é“è¿™æ„å‘³ç€åé€€æŒ‰é’®ç°åœ¨å·²ç»å¤±æ•ˆï¼Œæ‰€ä»¥æˆ‘å¯èƒ½ä¼šåœ¨ä¸‹å‘¨æŸ¥çœ‹ã€‚

è¯­æ³•éå¸¸ç®€å•ï¼Œæˆ‘åªéœ€è°ƒç”¨`setState`å¹¶å°†å·åä½œä¸ºå‚æ•°ï¼Œå…¶ä½™çš„ç”±ç±»å¤„ç†ã€‚

```
const stateHelper = new SimpleStateRouter();
stateHelper.setState('database'); 
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

## [](#other-little-bits)å…¶ä»–å°æ¯”ç‰¹

æˆ‘è¿˜åšäº†ä¸€äº›å…¶ä»–çš„å°äº‹æƒ…ï¼Œæ¯”å¦‚æ·»åŠ ä¸€ä¸ªæè´¨åå¸ç±»å’Œå®ƒçš„æ ·å¼ã€‚æˆ‘çš„ git åº“ç°åœ¨æ˜¯æœ€æ–°çš„ï¼Œæ‰€ä»¥è¯·éšæ„æŸ¥çœ‹ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥ç•™ä¸‹é—®é¢˜å’Œå»ºè®®ã€‚

## [](#end-of-post)å¸–å­ç»“æŸ

æ„Ÿè°¢é˜…è¯»ï¼Œè¯·ä¸è¦ç¾äºè¯„è®ºï¼Œå³ä½¿åªæ˜¯å‘Šè¯‰æˆ‘æˆ‘åšå¾—éƒ½ä¸å¯¹ğŸ˜…

å†æ¬¡æ„Ÿè°¢ğŸ¦„ğŸ¦„ğŸ¦„