# Swift 4.2 çš„æ–°åŠŸèƒ½-æˆ‘çš„æ€»ç»“

> åŸæ–‡:[https://dev.to/kamwysoc/whats-new-in-swift-42-æˆ‘çš„æ€»ç»“-31e](https://dev.to/kamwysoc/whats-new-in-swift-42---my-summary-31e)

æˆ‘åˆšåˆšçœ‹äº† Swift 2018 å¹´ WWDC ä¼šè®®çš„æ–°å†…å®¹ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åŠ¨åŠ›æ¥å†™ä¸€ç¯‡å…³äºè¿™æ¬¡æ¼”è®²çš„åšæ–‡å¹¶æ€»ç»“æˆ‘æ‰€å­¦åˆ°çš„ä¸œè¥¿ã€‚

è¿™é‡Œæœ‰ä¸€äº›æˆ‘éå¸¸å–œæ¬¢çš„ Swift 4.2 æ–°åŠŸèƒ½ã€‚

å¸Œæœ›ä½ ä¼šå–œæ¬¢ï¼ğŸ¤“

## ğŸ‘‰SE-0194 æšä¸¾æ¡ˆä¾‹çš„æ´¾ç”Ÿé›†åˆ

å¦‚æœæˆ‘ä»¬éœ€è¦æ‰“å°æ‰€æœ‰å¯ç”¨çš„æšä¸¾å€¼ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€äº›åŒ…å«æ‰€æœ‰æšä¸¾æƒ…å†µçš„å¸®åŠ©å˜é‡ã€‚æ¯”å¦‚ä¸€ä¸ªåä¸º`allCases`çš„é™æ€æ•°ç»„ã€‚è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹æ˜¯ï¼Œå½“æˆ‘ä»¬æ¯æ¬¡ä¿®æ”¹ enum ç”¨ä¾‹æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½æ›´æ–°`allCases`æ•°ç»„ã€‚

Swift 4.1 æ–¹æ³•:

```
enum CarType {
    case sedan
    case crossover
    case hothatch
    case muscle
    case miniVan

    static var allCases : = [.sedan, .crossover, .hothatch, .muscle, miniVan]
} 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨ Swift 4.2 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸ºæˆ‘ä»¬å®Œæˆæ‰€æœ‰å·¥ä½œçš„`CaseIterable`åè®®ï¼è¯·çœ‹ä¸‹é¢çš„ä¾‹å­:

```
// CaseIterable protocol gave us a `allCases` variable, which is an array of all cases in the Enum.

enum CarType : CaseIterable {
    case sedan
    case crossover
    case hothatch
    case muscle
    case miniVan

    //there is no need to add `allCases` variable. `CaseIterable` protocol do the job!
} 
```

Enter fullscreen mode Exit fullscreen mode

```
for type in CarType.allCases {
    print(type)
} 
```

Enter fullscreen mode Exit fullscreen mode

## ğŸ‘‰æ¡ä»¶ä¸€è‡´æ€§

```
let arrayOfArrays = [[1,2],[3,4],[5,6]]

arrayOfArrays.contains([1,2]) // return false in Swift 4.1

arrayOfArrays.contains([1,2]) // now it returns True because of fact that the elements in the array conforms to Equatable protocol 
```

Enter fullscreen mode Exit fullscreen mode

å®ƒä¹Ÿé€‚ç”¨äº`Optional`ã€`Dictionary`ç±»å‹ã€‚
æ¡ä»¶ä¸€è‡´æ€§ä¸`Hashable`ã€`Encodable`å’Œ`Decodable`åè®®çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚
ä¸¾ä¸ªä¾‹å­ï¼Œå› ä¸º`Int`æ˜¯`Hashable`ï¼Œè¿™æ„å‘³ç€åœ¨é‚£ç§æƒ…å†µä¸‹`Int?`ä¹Ÿæ˜¯`Hashable`ï¼Œç»“æœ`[Int?]`ä¹Ÿæ˜¯`Hashable`ï¼

```
let s: Set<[Int?]> = [[1, nil, 2], [3, 4], [5, nil, nil]]
s.contains([1,nil,2]) // returns true 
```

Enter fullscreen mode Exit fullscreen mode

## ğŸ‘‰ Bool toggle

```
var isTheWeatherNice : Bool = true
print(isTheWeatherNice) // prints true
//now it's starts raining
isTheWeatherNice.toggle() // it will change the bool value.
print(isTheWeatherNice) // prints false 
```

Enter fullscreen mode Exit fullscreen mode

å°ï¼Œä½†åœ¨æˆ‘çœ‹æ¥-éå¸¸å¥½çš„åŠŸèƒ½ã€‚æˆ‘ç¬¬ä¸€æ¬¡è§åˆ°è¿™ä¸ªæ‰©å±•æ˜¯åœ¨é˜…è¯» objc.io åšå®¢æ–‡ç« çš„æ—¶å€™ã€‚

ç°åœ¨å®ƒå†…ç½®åœ¨ Swift 4.2 ä¸­ã€‚ğŸ‰

## ğŸ‘‰å“ˆå¸Œåè®®

```
protocol Hashable {
    func hash(into hasher: inout Hasher)
} 
```

Enter fullscreen mode Exit fullscreen mode

åœ¨ Swift 4.2 ä¸­ï¼Œæˆ‘ä»¬ä¸å¿…ä¸º`hashValue`æä¾›å®šåˆ¶ç®—æ³•ã€‚ç°åœ¨ï¼Œswift å¤„ç†æ•£åˆ—æ–¹æ³•è´¨é‡å’Œè¿è¡Œæ€§èƒ½ã€‚
é‡è¦çš„æ˜¯`hashValue`ä½¿ç”¨éšæœºçš„æ¯è¿›ç¨‹ç§å­ï¼Œå®ƒæ˜¯åœ¨æ¯ä¸ªåº”ç”¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºçš„ã€‚

```
struct City: Hashable {
    let name : String
    let state : String
    let population : String
}
extension City : Hashable {
    func hash(into hasher: inout Hasher) {
        name.hash(into: &hasher)
        state.hash(into: &hasher)
    }
}
let warsaw = City(name : "Warsaw", state: "Mazowieckie")
print(warsaw.hashValue) // will print hash value, using the Swift algorithms from hash function. 
```

Enter fullscreen mode Exit fullscreen mode

âš ï¸
åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œä½ åº”è¯¥å°†ä¸`hashValue`ç›¸å…³çš„ä»£ç æ”¹ä¸ºå¸¸é‡ã€‚åœ¨æ¯æ¬¡åº”ç”¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå“ˆå¸Œå€¼éƒ½æ˜¯ä¸åŒçš„ã€‚
âš ï¸

## ğŸ‘‰SE-0202 éšæœºç»Ÿä¸€

Swift 4.1 æ–¹æ³•:

```
let randomIntFrom1to10 = 1 + (arc4random() % 10) // return random number is the 1...6 
```

Enter fullscreen mode Exit fullscreen mode

ä½†æ˜¯åœ¨ Swift 4.2 ä¸­å·²ç»ä¸éœ€è¦ä½¿ç”¨`arc4random()`äº†ã€‚ğŸ‰

```
let randomIntFrom0To20 = Int.random(in: 0 ..< 20)
let randomFloat = Float.random(in: 0 ..< 1) 
```

Enter fullscreen mode Exit fullscreen mode

è¶…çº§é…·çš„äº‹æƒ…æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»åƒ`Array`æˆ–`Dictionary`è¿™æ ·çš„é›†åˆç±»å‹ä¸­è·å¾—ä¸€ä¸ªéšæœºå€¼ã€‚

```
let names = ["John", "Paul", "Peter", "Tim"]
names.randomElement()! 

let playerNumberToName : [Int: String] = [9: "Lewandowski", 7: "Ronaldo"]
playerNumberToName.randomElement()! 
```

Enter fullscreen mode Exit fullscreen mode

æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œ`randomElement`å‡½æ•°è¿”å›ä¸€ä¸ªå¯é€‰çš„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ç©ºé›†åˆä¸Šè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚

```
let emptyCollection : [String] = []
emptyCollection.randomElement() // retuns nil 
```

Enter fullscreen mode Exit fullscreen mode

å¦ä¸€ä¸ªæ–°åŠŸèƒ½æ˜¯`shuffle`æˆ–`shuffled`åŠŸèƒ½ã€‚

```
let names = ["John", "Paul", "Peter", "Tim"]
let shuffledNames = names.shuffled() // returns an array of names in shuffled order. 
```

Enter fullscreen mode Exit fullscreen mode

## ğŸ‘‰ç»“è®º

åœ¨ç¨³å®šç‰ˆæœ¬ä¸­ä½¿ç”¨é‚£äº›ç‰¹æ€§ä¼šå¾ˆæ£’ã€‚æˆ‘å¯¹ Xcode 10(beta)å’Œ Swift 4.2 çš„å°è±¡ç›¸å½“æƒŠäººã€‚æˆ‘å¼ºçƒˆæ¨èæ‚¨è§‚çœ‹ 2018 å¹´ WWDC Swift talk çš„æ–°å†…å®¹

ä¸‹é¢ä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ª GitHub gist çš„é“¾æ¥ï¼Œä¸Šé¢æè¿°äº†æ‰€æœ‰çš„ç‰¹æ€§ã€‚

[https://gist . github . com/kamwysoc/e 9322 c 84 FD 4 fa 051 CB 747 EC 08193 dc0d](https://gist.github.com/kamwysoc/e9322c84fd4fa051cb747ec08193dc0d)

#### æ¥æº

*   [https://developer.apple.com/videos/play/wwdc2018/401/](https://developer.apple.com/videos/play/wwdc2018/401/)

*   [https://swift.org/documentation/](https://swift.org/documentation/)