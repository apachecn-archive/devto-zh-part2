# Bootstrap a Reason-React é¡¹ç›®åŒ…

> åŸæ–‡:[https://dev . to/scastiel/bootstrap-a-reason-react-project-with-parcel-13fj](https://dev.to/scastiel/bootstrap-a-reason-react-project-with-parcel--13fj)

ä¸ä¹…å‰ï¼Œæˆ‘ç»å¸¸ä½¿ç”¨ Create-React-App æ¥å¿«é€Ÿå¯åŠ¨æˆ‘çš„ React é¡¹ç›®ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå½“æˆ‘æƒ³ä½¿ç”¨ Reason-React æ—¶ï¼Œæˆ‘å¾ˆè‡ªç„¶åœ°ä½¿ç”¨äº† [Reason è„šæœ¬](https://github.com/reasonml-community/reason-scripts)ã€‚ä½†æ˜¯ï¼Œå³ä½¿æˆ‘ä»ç„¶ç†è§£ CRA å’Œæ¨ç†è„šæœ¬æ–¹æ³•çš„ä¼˜ç‚¹ï¼Œæˆ‘æœ€è¿‘å‘ç°äº†[åŒ…](https://parceljs.org/)ï¼Œä¸€ä¸ªéå¸¸ç®€çº¦çš„ web é¡¹ç›®æ†ç»‘å™¨ã€‚

å·²ç»æœ‰å¾ˆå¤šæ–‡ç« è§£é‡Šäº† Parcel çš„ä¼˜ç‚¹ï¼Œä¾‹å¦‚å¦‚ä½•ä¸ React ä¸€èµ·ä½¿ç”¨ã€‚æˆ‘åœ¨è¿™é‡Œæƒ³åšçš„æ˜¯å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒå¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œé¦–å…ˆä½¿ç”¨[åŸå› ](https://reasonml.github.io/)ï¼Œç„¶åæ·»åŠ [åŸå› -ååº”](https://github.com/reasonml/reason-react)æ¥ç¼–å†™ååº”ç»„ä»¶ã€‚

*TLï¼›DR:æˆ‘åœ¨ GitHub ä¸Šåˆ›å»ºäº†ä¸€ä¸ª[é¡¹ç›®ï¼ŒåŒ…å«äº†è¿™ç¯‡æ–‡ç« çš„æœ€ç»ˆä»£ç ï¼Œå¦‚æœä½ åªæ˜¯æƒ³çœ‹çœ‹æœ€ç»ˆç»“æœçš„è¯ã€‚](https://github.com/scastiel/parcel-reason-react)*

## å¼€å§‹ä¸€ä¸ªåŸºæœ¬çš„å®—åœ°é¡¹ç›®

é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç”¨ Yarn åˆå§‹åŒ–ä¸€ä¸ªæ–°é¡¹ç›®(NPM åº”è¯¥ä¹Ÿå·¥ä½œå¾—å¾ˆå¥½)å¹¶æ·»åŠ åŒ…:

```
$ mkdir reason-parcel && cd reason-parcel
$ yarn init -y
$ yarn add --dev parcel-bundler 
```

Enter fullscreen mode Exit fullscreen mode

è®©æˆ‘ä»¬ç¼–è¾‘ç”Ÿæˆçš„ *package.json* æ¥æ·»åŠ `start`è„šæœ¬:

```
{  "name":  "reason-parcel",  "version":  "1.0.0",  "main":  "index.js",  "license":  "MIT",  "scripts":  {  "start":  "parcel public/index.html"  },  "devDependencies":  {  "parcel-bundler":  "^1.6.2"  }  } 
```

Enter fullscreen mode Exit fullscreen mode

ç„¶åè®©æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬çš„ *public/index.html* æ–‡ä»¶:

```
<html>
<body>
  <script src="../src/index.js"></script>
</body>
</html> 
```

Enter fullscreen mode Exit fullscreen mode

æœ€åï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª`src/index.js`æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æµ‹è¯•æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬:

```
console.log("Hello from JavaScript!"); 
```

Enter fullscreen mode Exit fullscreen mode

è¦å¯åŠ¨é¡¹ç›®ï¼Œè®©æˆ‘ä»¬è¿è¡Œ`yarn start`:

<center>![Hello from JavaScript!](../Images/4cccac12a3702636ff2c305544c5aacc.png)</center>

## æ·»åŠ åŸå› 

å¥½äº†ï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯å¼€å§‹ä¸€ä¸ªåŒ…è£¹é¡¹ç›®çš„æ•™ç¨‹ï¼Œä½†æ˜¯åŸå› åœ¨å“ªé‡Œå‘¢ï¼Ÿè®©æˆ‘ä»¬ä»å‘é¡¹ç›®æ·»åŠ `bs-platform`ä¾èµ–é¡¹å¼€å§‹:

```
$ yarn add bs-platform 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬éœ€è¦ä¸€ä¸ª`bsconfig.json`æ–‡ä»¶æ¥å‘Šè¯‰ BuckleScript è¯¥åšä»€ä¹ˆ:

```
{  "name":  "reason-parcel",  "refmt":  3,  "sources":  "src",  "dependencies":  [],  "package-specs":  {  "module":  "commonjs",  "in-source":  true  },  "suffix":  ".bs.js"  } 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬æ˜¯å‘Šè¯‰ BuckleScript æŠŠ Reason æ–‡ä»¶ç¼–è¯‘æˆ JavaScript æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œç”¨`.bs.js`ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ *src/index.re* ä¼šç¼–è¯‘æˆ *src/index.bs.js* ã€‚è¿™æ ·ï¼Œpackage å°†èƒ½å¤Ÿåœ¨æœ¬åœ°å¤„ç†å®ƒä»¬ã€‚

è®©æˆ‘ä»¬åˆ›å»ºè¿™ä¸ª *src/index.re* æ–‡ä»¶(é€šè¿‡å°† *src/index.js* æ–‡ä»¶é‡å‘½åä¸º *src/index.re* )å¹¶å°†å…¶å†…å®¹è®¾ç½®ä¸º:

```
Js.log("Hello from Reason!"); 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬è¿˜éœ€è¦ç”¨ä¸»æ–‡ä»¶çš„æ–°è·¯å¾„æ›´æ–°æˆ‘ä»¬çš„ *public/index.html* ï¼Œè¿™ä¸ªè·¯å¾„ç°åœ¨å†™æˆäº† Reason:

```
<script src="../src/index.re"></script> 
```

Enter fullscreen mode Exit fullscreen mode

è®©æˆ‘ä»¬ç°åœ¨å¼€å§‹åº”ç”¨ç¨‹åº:

<center>![Hello from Reason!](../Images/fb7ba5f3872a1c28f529e7a0b0b12eed.png)</center>

åœ¨é‚£é‡Œï¼åªæœ‰ä¸€ä¸ªå‘½ä»¤æ¥è¿è¡Œé¡¹ç›®ï¼ŒåŒ…æ‹¬ JavaScript transpilation çš„åŸå› ï¼ğŸ˜

## æ·»åŠ åŸå› -ååº”

ç°åœ¨çš„æœ€åä¸€æ­¥:æ·»åŠ  Reason-React åˆ°é¡¹ç›®ä¸­ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç”¨ Reason ç¼–å†™ä½ çš„ç»„ä»¶äº†ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦æ·»åŠ ä¾èµ–é¡¹:

```
yarn add reason-react 
```

Enter fullscreen mode Exit fullscreen mode

æˆ‘ä»¬è¿˜éœ€è¦æ›´æ–° *bsconfig.json* æ¥å‘Šè¯‰ BuckleScript æˆ‘ä»¬å°†ä½¿ç”¨ Reason-React å’Œ JSX:

```
{  "name":  "reason-parcel",  "refmt":  3,  "sources":  "src",  "bs-dependencies":  ["reason-react"],  "reason":  {  "react-jsx":  2  },  "dependencies":  [],  "package-specs":  {  "module":  "commonjs",  "in-source":  true  },  "suffix":  ".bs.js"  } 
```

Enter fullscreen mode Exit fullscreen mode

ç°åœ¨è®©æˆ‘ä»¬åœ¨ *src/Greeting.re* :
ä¸­åˆ›å»ºä¸€ä¸ªç®€å•çš„ç»„ä»¶

```
let component = ReasonReact.statelessComponent("Greeting");

let make = (~name, _children) => {
  ...component,
  render: (_self) =>
    <div>
      (ReasonReact.stringToElement("Hello "))
      <strong> (ReasonReact.stringToElement(name)) </strong>
      (ReasonReact.stringToElement("!"))
    </div>
}; 
```

Enter fullscreen mode Exit fullscreen mode

è®©æˆ‘ä»¬ç”¨åœ¨ *src/index.re* :

```
ReactDOMRe.renderToElementWithId(<Greeting name="Sebastien" />, "root"); 
```

Enter fullscreen mode Exit fullscreen mode

æœ€åï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª`root` div åˆ°æˆ‘ä»¬çš„ *public/index.html* æ¥å‘ˆç°æˆ‘ä»¬çš„ç»„ä»¶:

```
<html>
<body>
  <div id="root"></div>
  <script src="../src/index.re"></script>
</body>
</html> 
```

Enter fullscreen mode Exit fullscreen mode

å“‡å°±æ˜¯å®ƒï¼ç®€å•å¯¹å—ï¼Ÿä¸‹é¢æ˜¯æ‚¨åº”è¯¥åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°çš„å†…å®¹:

<center>![Hello from Reason!](../Images/732a298e850317071fc2c741d5d2a51d.png)</center>

ç°åœ¨ï¼Œæ‚¨å·²ç»å‡†å¤‡å¥½ä½¿ç”¨ React æ¥æ„å»ºå¼ºå¤§ä¸”å¯ç»´æŠ¤çš„ç»„ä»¶ï¼ŒåŒæ—¶äº«å—ç†æ€§çš„å¯èƒ½æ€§ã€‚å½“ç„¶ï¼Œè¿™ä¸æ˜¯å”¯ä¸€çš„æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘å–œæ¬¢ Parcel çš„ä¼˜é›…ã€‚

æˆ‘å¾ˆæƒ³çŸ¥é“ä½ æ˜¯å¦çœ‹åˆ°äº†è¿™ä¸ªå·¥ä½œæµç¨‹çš„æ”¹è¿›ã€‚ä¹Ÿè®¸ä½¿ç”¨åŒ…è£¹æ‰“åŒ…å™¨æˆ–è€… T2 æ’ä»¶å¯ä»¥è®©å®ƒæ›´å¹²å‡€ï¼ŸğŸ˜‰

ä¸€äº›èµ„æº:

*   [Reason](https://reasonml.github.io) ã€ [Reason-React](https://reasonml.github.io/reason-react/) ã€ [Reason-Scripts](https://github.com/reasonml-community/reason-scripts) ç½‘ç«™å°†å‘ä½ å±•ç¤ºå¦‚ä½•ä»¥â€œå®˜æ–¹â€çš„æ–¹å¼åˆ›å»º Reason-React appã€‚
*   [åŒ…è£¹](https://parceljs.org)çš„ç½‘ç«™æœ‰[ä¸€ä¸ªå±•ç¤ºå¦‚ä½•ç”¨å®ƒ](https://parceljs.org/recipes.html)ååº”çš„é¡µé¢ï¼Œå¹¶æ¨èäº†ä¸€ç¯‡[çš„è¯¦ç»†æ–‡ç« ](http://blog.jakoblind.no/react-parcel/)ã€‚
*   æ‚¨è¿˜å¯ä»¥åœ¨åŒ…è£¹ç½‘ç«™ä¸Šæ‰¾åˆ°[æ–‡æ¡£ï¼Œä»¥ä¾¿ä½¿ç”¨å®ƒ](https://parceljs.org/transforms.html#reasonml/bucklescript)ã€‚

*è¿™ç¯‡æ–‡ç« æœ€åˆå‘è¡¨åœ¨æˆ‘çš„åšå®¢ä¸Šã€‚*