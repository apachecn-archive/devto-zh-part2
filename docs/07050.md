# 关于 Ruby 错误消息的博客帖子，我希望在我开始编程的时候就有

> 原文:[https://dev . to/Jeremy/the-blog-post-about-ruby-error-messages-I-wish-id-had-when-I-started-programming-45ef](https://dev.to/jeremy/the-blog-post-about-ruby-error-messages-i-wish-id-had-when-i-started-programming-45ef)

所以你决定学习如何编码。关于你已经开始走的这条路，你需要知道的第一件事是，编程是很棒的。让我重复一遍，以确保你听到了。编程真的真的很牛逼。你可能已经构建了一个输出“Hello，World！”到你的终端。如果是这样的话，你已经体验过看到自己编写的程序正常工作的喜悦之情。要知道，这种感觉与你从空文件到成品构建第一个复杂的应用程序时的感觉相比是微不足道的。如果你的经历和我一样，那将是你无可救药地爱上代码的那一刻。

但是在我让我的浪漫主义把我带离主题之前，还有一些关于编程的事情你应该知道。很难。让我重复一遍，以确保你听到了。编程真的真的很难。我认为，最困难的事情之一，尤其是对初学者来说，是错误。你看到错误信息的次数会比看到代码实际工作的次数多得多，所以学会阅读和理解它们是你必须发展的一项基本技能。在我编程之旅的最初几个月，我努力理解错误消息。但当有人最终教我如何阅读它们时，它彻底改变了我的世界。调试变得容易多了(也更有趣了)，我开始变得不那么沮丧了。所以我为你写这些，亲爱的代码新手，因为我希望有人在我开始的时候为我写这样的东西。我们将讨论什么是错误，你会遇到的五个最常见的错误，这些错误意味着什么，以及如何解决它们。我不能告诉你如何处理你可能会看到这些错误的每一种情况，但是我会试着给你一个基本的框架。

快速旁白:如果我的例子看起来有点做作，请多包涵。我使用简单的场景来解释错误消息，即使代码可能不切实际。

### 什么是错误？

当你的程序不能正常工作时，Ruby 会抛出一个错误。错误消息是你的解释器告诉你有些东西需要修复。如果你不知道我说的“翻译”是什么意思，现在就不要那么担心了。这超出了这篇文章的范围，但是你要明白这和你的代码如何在你的计算机中被读取和执行有关。(如果你非常想知道更多，谷歌一下，但是先读完这篇文章)。

把这句话写在便利贴上，贴在你的电脑旁边:*错误不是挫折，它们是机会*。当你的程序抛出一个错误，并不意味着你是一个糟糕的程序员。我认为，我们中的许多人在开始阶段认为，如果我们更擅长编程，我们就可以构建一个应用程序，并看到最小的错误。这样想只会导致痛苦，所以你首先需要意识到错误是正常的。你的程序不会以完美的形式和令人惊叹的功能从你的大脑传输到你的文本编辑器。它会开始坏掉，需要你去修理。信不信由你，这就是编程的乐趣所在。这是你解决问题并从中获得满足感的地方。这就是错误存在的原因。错误是你的朋友，不是你的敌人。听他们说。他们想帮助你。沮丧是正常的，但是永远记住遇到错误并不意味着你是一个糟糕的程序员。相反，请继续阅读，并学习如何利用它们。

### 如何阅读错误信息？

错误消息给你三个关键的信息,“在哪里”,“为什么”和“是什么”。

典型的错误消息如下所示:

```
  lib/my_file.rb:32::undefined local variable or method `some_variable' for main:Object (NameError) 

```

`lib/my_file.rb:32`告诉你错误发生在`lib`目录下，在文件`my_file.rb`中，在该文件的`line 32`上。那就是“哪里”。

告诉你哪里出错了。在这种情况下，Ruby 发现了一个它无法识别的局部变量或方法，它需要被定义。这就是“为什么”。

告诉你 Ruby 引发的异常的类型。在这种情况下，一个`NameError`。你猜对了，这就是“什么”。

我能给你的最重要的建议是*总是阅读整个错误*。当你在调试时，你是一个侦探，你需要你能找到的所有线索。首先，找出错误发生的地方，并转到那一行。阅读那一行代码，以及它前后的所有代码行。有没有其他方法调用发生错误的方法？也看看这些。一旦你这样做了，你就可以阅读错误信息的其余部分，并找出错误发生的原因，以及它是什么错误。突然间，你不再盲目地试图调试你的代码，而是有了一些观点。你有信息可以用来找出到底哪里出了问题。

让我们从这个开始，然后谈谈你会遇到的其他一些常见错误。

### NameError

**什么什么？**

通常，当您调用 Ruby 无法识别的变量或方法时，就会出现这个错误。

我如何解决这个问题？

问自己的第一个问题是，你是否定义了有问题的方法或变量？我不知道有多少次我试图调用一个忘记定义的变量。检查你的拼写。有时问题就像你试图调用的变量或方法中的拼写错误一样简单。还是你把东西赋给了一个叫“user_input”的变量，却在你的方法里错把它叫做“input”？你真的构建了你想要调用的方法了吗？如果这些都检查过了，那么你需要考虑范围(如果你不知道我说的范围是什么意思，[点击这里](http://ruby-for-beginners.rubymonstas.org/writing_methods/scopes.html))。你是否在一个方法中分配了一个局部变量，并试图在另一个方法中调用它？

### 语法错误

```
 32: syntax error, unexpected end-of-input, expecting keyword_end 

```

**什么什么？**

到目前为止，我每天遇到的最常见的错误是语法错误。当你的代码结构有问题时，你会看到这个坏男孩弹出来。例如，如果你在某个地方忘记了一个`end`。

我如何解决这个问题？

按照错误提示去做。修复这个问题就像在它需要的地方添加一个`end`一样简单。除非事实并非如此。有时错误信息会说您需要一个结束的`end`，但是您的问题的来源实际上是上面的几行。从代码的顶部开始，一路往下，确保所有的语法都是正确的。你是否迭代了某个东西(`do`)却忘了用`end`关闭它？你所有的`if`、`elsif`和`else`语句都被正确使用了吗？有一件事会给你很大的帮助，那就是在你写代码的时候学会正确缩进。尽可能保持你的代码有条理和干净。这将使你更容易发现语法错误。

### [T1】NoMethodError](#nomethoderror)

**什么什么？**

与 NameError 密切相关的是 NoMethodError。这意味着你试图在一个对象上调用一个方法，而这个对象不知道如何去做你要求它做的事情。例如，如果你试图用一个字符串而不是整数来做数学运算，或者你创建了一个值为零的变量，然后忘记给它赋另一个值。

设想一个场景，您想要操作一系列数字。你不确定如何开始，所以你这样开始:

```
 def split_numbers 
  1..10.split
end 

```

如果您尝试运行此代码来查看它返回的内容，您会看到:

```
 errors.rb:2:in `split_numbers': undefined method `split' for 10:Integer (NoMethodError) 

```

我如何解决这个问题？

四处搜索，确保你为你的对象使用了正确的方法。在上面的示例中，调用。split 不会起作用，因为你不能在一个整数上调用它，即使你处理的是一个整数范围。这是一种对字符串进行操作的方法。仔细看看你的代码。可能不是你用错了方法，而是你用错了方法。

### ArgumentError

**什么什么？**

假设我们有以下方法:

```
 def upcase_this_string(string)
  puts string.upcase
end 

```

如果我们调用`upcase_this_string("I love Ruby")`，它会输出“我爱 RUBY”。但是如果我们调用`upcase_this_string("I love Ruby", "a lot")`，我们会看到这个:

```
 1:in `upcase_this_string': wrong number of arguments (given 2, expected 1) (ArgumentError) 

```

这告诉你的是，你在方法调用中给出了两个参数，但是你的方法被编写成只接受一个参数。

我如何解决这个问题？

有几种情况会导致 Ruby 抛出 ArgumentError，所以要确保参数的数量是正确的，并且要使用的数据类型是有效的。

### 类型错误

**什么什么？**

这个特殊的错误让我困惑了很长时间，我确信我不是一个人，所以让我们深入研究一下。假设你正在做一些超级简单的算术:

```
 def add_one_plus_one
  puts 1+1
end 

```

调用`add_one_plus_one`并运行这个文件会将`2`输出到你的终端。但是如果你出于某种原因写了`puts "one"+1`而不是`puts 1+1`，那会怎么样呢？你会看到:

```
 errors.rb:2:in `+': no implicit conversion of Integer into String (TypeError) 

```

我如何解决这个问题？

基本上，Ruby 在这里告诉你的是，当你试图调用`+1`时，它期望+号后面的值也是一个整数。相反，你试图在一个字符串上调用`+1`。Ruby 遇到了一个不是它预期的对象类型的对象。所以要确保无论你要执行什么操作，你都使用了正确的对象类型。对于这个例子，要么是输出`2`的`1+1`，要么是产生`"oneone"`的`"one"+"one"`。

### 趣味-事实

你可能听说过 Ruby 是一种纯面向对象的语言，Ruby 中的一切都是对象。如果我指出这也适用于你的错误，会不会让你大吃一惊？错误是异常类的对象和实例。如果你还不觉得这很酷，那就等着吧。面向对象太棒了。暂停怀疑，直到你到达那里，你会明白我的意思。

### 资源

关于异常类和 Ruby 错误的更多信息，请参见[Ruby 文档](https://ruby-doc.org/core-2.2.0/Exception.html)

如果我完成了我的工作，错误消息现在看起来更容易理解，不那么吓人，并且您现在已经知道如何解决它们了。如果你觉得这篇文章有帮助，请与任何可能从中受益的人分享。我总是渴望学习和提高，所以我很想听听人们对此的看法。如果你想这么做，请在推特上关注我。我总是喜欢在编程社区认识新的人。

编码快乐！