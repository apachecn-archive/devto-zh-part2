# 我对 React Native 的看法

> 原文:[https://dev.to/preslavrachev/my-thoughts-on-react-native-2996](https://dev.to/preslavrachev/my-thoughts-on-react-native--2996)

*注:这篇文章最初发表在我的[博客](http://www.preslav.me/2018/01/07/my-thoughts-on-react-native/)上。*

**2018 年 2 月 17 日更新:**虽然不是本文的一部分，但值得注意的是，脸书昨天改变了麻省理工学院对 React Native 的许可。这对许多人来说应该是一种解脱，并且肯定会进一步增加图书馆的商业应用:

> ![React profile image](../Images/ca875e811a6b5016b2686ab0e3da57e4.png)React@ React js![twitter logo](../Images/ad0c7b03deabfe1a161345efb2d537eb.png)我们在 MIT 许可下重新许可 React Native(包括 Fresco、Metro、Yoga)来匹配 React。[github.com/facebook/react…](https://t.co/Ypg7ozX958)2018 年 2 月 17 日上午 02:32![Twitter reply action](../Images/269095962147c28351274afdd5486a48.png)[![Twitter retweet action](../Images/771160ecf06ae3d4d7a7815c29c819c2.png)](https://twitter.com/intent/retweet?tweet_id=964689022747475968)1512[![Twitter like action](../Images/c077611ab2a5e0b4cd0c826ee7ae1e48.png)](https://twitter.com/intent/like?tweet_id=964689022747475968)3590

* * *

当我年轻的时候(没钱的时候)，我梦想拥有一把崭新的电吉他。每天，我都在检查它，希望有一天，我能最终买得起它并环游世界，就像我的大多数青少年偶像一样。最终，这一天来了，我兴高采烈地回家，想象着我终于可以在上面演奏无尽的独奏。当时令我惊讶的是，吉他听起来非常糟糕。此外，我越是强迫自己去演奏它，它听起来就越糟糕。沮丧之余，我把它藏在房间的一个黑暗角落里，在那里放了一年多。最终，我拿起了它，从此我们成了最好的朋友，但此时，我意识到吉他只是一个工具。如果你用错了工作，即使是世界上最好的工具也帮不了你。

很像我的电吉他，React Native 是一个设计良好的工具。如果使用得当，它可以很好地为你服务，成为你最好的朋友。另一方面，错误的期望可能会让你沮丧和头疼。我决定分享我从使用 React Native 的短暂经历中学到的东西，并给你我的(有点固执己见的)关于如何利用它的观点。也许，我宁愿从它不是什么开始。

## React Native 不是 Web 技术...

...尽管你想相信它是真的。事实上，React Native 使用 JavaScript 运行时，并遵循 React 和 JS 编程社区的约定。您可以将大多数可用的 JavaScript 库集成为应用程序的一部分，并使用相同的工具进行依赖管理、测试和构建，这是 Web 开发人员可能熟悉的。天哪，即使是样式表也能让你感觉像在家里一样使用它的 CSS 式语法。然而，这几乎是 React Native 与 Web 相似性的终点。

> 事实上，它是 JavaScript，但是没有 DOM

值得注意的是，React Native 不是一个成熟的框架，而是一个由本机移动应用程序使用并包装在其中的库。围绕 RN 有这样一个概念，也许是受其 CLI 工具包易用性的驱动，它可以用于通过点击按钮生成跨平台的应用程序。这是误导。归根结底，React Native 是一个库，可以集成到每个现有的 iOS 或 Android 项目中，并像项目所依赖的任何其他库一样使用。如果我错了，请纠正我，但创建这个库的整个想法是为了在脸书和 Instagram 的 Android 和 iOS 版本之间共享一些样板代码，不是吗？事实上，人们可以创建 React Native 是主角的整个应用程序，这在当时更多的是事后的想法。

这应该证实了一点，使用 React Native 并不意味着您可以完全逃避原生应用程序开发。React Native 的创建是为了增强应用程序开发的当前状态并减少样板文件，但它从未打算取代它。你必须了解你正在构建的移动平台的潜在复杂性。远离基本的待办事项应用程序两步，你最终会读到关于链接 C 库和修复 Gradle bugs 的内容。这一切都很好。因为，这就是移动开发者的谋生之道。你还期待别的吗？很抱歉让您失望了，但这不是 RN 将为您解决的问题。至少，对我来说不是。

这就引出了我的第二点，那就是“一次构建，随处使用”的方法是行不通的。你完全可以在 iOS 和 Android 之间共享 100%的 React 原生代码。然而，你也应该记住这样一个事实，你的应用程序可能最终看起来像一个糟糕的妥协，除非你在本地水平的波兰工作。一些来自网络的开发者无法理解的是，每个移动平台都有其复杂性，在一个平台上工作的，可能在另一个平台上不工作，反之亦然。虽然为一个想法制作原型并迅速将 MVP 带给用户是完全可以的，但是当一个应用项目增长时，它的不同平台版本最终会产生分歧。

## 哪里反应出土著的光芒

在强调了 React Native 不是一个可以让应用从无到有的魔术盒，而是一个助手库之后，让我们看看我们可以用它来做什么。依我看，将 React Native 集成到您的项目中的两个最大卖点是:

*   一个新的应用程序想法的跨平台快速原型(当然，这带来了所有的警告)
*   在不同的移动平台之间共享您的代码库的平衡子集(现在让我们坚持使用 iOS 和 Android)。
*   通过直接从服务器下载共享的 JavaScript 部分，更频繁地更新您的应用程序。

第一点是大多数人第一次听到 React Native 时会感到兴奋。事实上，尽管我已经写了这么多，如果这是你想要的，**是的，RN 可以帮你实现它**。也就是说，假设您可以使用跨所有平台的通用 UI 组件，并且不太关心性能和本机触感。老实说，对于测试快速和肮脏的原型，你为什么要这样做呢？拿一份注册护士初学者工具包，并勾画出你的想法！在这一点上，我不打算深入讨论细节，因为网上有成千上万的资源，说明如何在不到一个小时的时间内制作一个跨平台的应用程序。这一般不是本文的重点。

对于除原型之外的任何东西，应该假设需要主动的本机开发，而 React Native 主要用于帮助减少不同平台之间的样板文件。有两种方法可以将 React Native 集成到本机应用程序外壳中。一个是**自顶向下**，在这里你可以使用 RN 设计整个应用的大致框架和工作流程，但是要连接到为每个平台本地开发的组件。这包括连接 UI(本地视图、资产等)和非 UI 组件(状态管理器、网络处理程序、事件总线、并发管理、持久性等)。对于其中的大部分，该库已经提供了合理的默认桥，对于其余的，在 Js 运行时和本机平台之间创建自定义桥是可行的，尽管代价是一些额外的工作。使用 React Native 作为自上而下的解决方案的好处是整个业务逻辑和应用程序工作流的共享副本，而不会损害本机的外观和感觉。

与自上而下的方法相反，是自下而上的方法。这个更适合已经开发了很长时间并且已经建立了本地代码库的应用程序。想象一下，一家公司愿意在其 Android 和 iOS 应用程序中引入可定制的小工具。一个很好的例子是 CTA-s(号召行动)和其他营销噱头，它们通常需要简单的定制，以便与个人用户相匹配。原生开发和维护这些组件的成本会随着时间的推移而增加，因此使用 React Native 共享它们的代码库并嵌入到原生应用程序中可能会被证明是非常划算的，而不会影响原生外观和性能。这就是 [Instagram 如何使用 React Native](https://engineering.instagram.com/react-native-at-instagram-dd828a9a90c7) 的例子。

也许经常被添加到最后但并非最不重要的部分的一个隐藏的宝贵特性(见，甚至是我做的)，实际上与 React Native 作为一个库没有什么关系，而是与 JavaScript 的解释性质有关。这基本上允许共享代码库的即时更新，跳过苹果/谷歌的应用商店批准和等待时间。当然，提供动态内容并不是什么新鲜事，迄今为止，大多数应用程序都是通过混合几个从服务器拉进实际网页的网络视图来实现的。当然，使用 React Native one 的好处是，呈现的内容将具有原生的外观和感觉，但这不会没有一些挑战。为了解决一些问题，将 JS 包从服务器中分离出来，首先需要实际维护一个服务器，保证低延迟，确保每个新版本都能够真正利用本机 shell 所拥有的东西(版本可能是一个问题)，等等。

所以，就这样了！我相对固执己见，但希望现实的反应原生。我认为这是一个很棒的库，当然是一个开发者应该放在工具包里作为百搭牌的库。每个项目都是不同的，是否使用 React Native 的决定应该在仔细理解项目的需求之后做出。一些项目喜欢采用 RN ob-board。对于其他人，将需要定制。第三，由于特定的平台要求，React Native 可能是不可能的。希望我的帖子有助于解决这个问题。或者，即使它让你更加困惑，它至少打开了一些新的、更具体的问题，这些问题的答案将帮助你做出正确的选择。

一如既往，读者的意见非常重要。不要犹豫给我发送反馈，并询问这些问题。我会在后续的文章中进一步阐明这一点。直到下一个帖子！

> ![Spencer Carli profile image](../Images/349b0742711cc20fd0ac71a96a584aa2.png)斯潘塞卡利@ Spencer _ Carli![twitter logo](../Images/ad0c7b03deabfe1a161345efb2d537eb.png)好玩的事实:官方奥运手机 app 100%采用 React 原生打造！2018 年 2 月 10 日上午 02:12[![Twitter reply action](../Images/269095962147c28351274afdd5486a48.png)](https://twitter.com/intent/tweet?in_reply_to=962147322745491457)[![Twitter retweet action](../Images/771160ecf06ae3d4d7a7815c29c819c2.png)](https://twitter.com/intent/retweet?tweet_id=962147322745491457)285[![Twitter like action](../Images/c077611ab2a5e0b4cd0c826ee7ae1e48.png)](https://twitter.com/intent/like?tweet_id=962147322745491457)953