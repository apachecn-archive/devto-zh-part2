# 我的第一份 PHP 工作笔记

> 原文:[https://dev.to/cess11/notes-on-my-first-php-job-7dl](https://dev.to/cess11/notes-on-my-first-php-job-7dl)

这有点长，有点重复。这就是我们的想法，展示一些糟糕的决策或结构会在哪里反复出现。

## 背景

小时候，我在 Commodore 64 上涉猎过 BASIC 和 Comal80。下一台电脑是一台 23 公斤的 286，它在 DOS 上运行 Win 3.x 并教我批处理脚本，然后是其他电脑，我在高中之前学会了一些 C 语言、HTML 和 Linux。在那里，我学习了一些 Java、C++和更多的 web 开发，包括标准 SQL 和 JavaScript。给人的印象是学校教育糟糕透顶，成年人对计算机一无所知，尤其是因为我的“论文”，一个在高中结束时由一个小型 OpenGL 引擎组成的项目，只根据文档评分，因为老师没有设法得到一个 C++编译器并运行它。

所以我发誓绝不以程序员为生，只把对计算机的兴趣用于邪恶。相反，在接下来的几年里，我以一种灰色的、不太合法的方式，对网络应用程序进行了一些破解和大量恶意输入。

一晃十八年过去了，我已经改变了我的想法。在大学，我学习了一些神学和法律，但从未获得学位，在业余时间，我学习了 Python、Common Lisp、Clojure，然后是更晦涩的后 Lisp 语言 picolisp。这给了我一个无法拒绝的机会，我移民到欧洲南部，在一家成瘾的企业中从事传统 PHP 的现代化工作。

从半强迫行为中获利没有道德问题，我也不会拒绝 Twitter，而且想要这种体验，我欣然接受了这个提议，搬到了别处。当时我还发现，我的祖国对左派人士来说变得古怪而危险，因此离开并在远处观望是很有吸引力的。结果证明这非常有趣，非常可怕，是一次非常宝贵的经历。

## 组织

当我到达时，我发现自己在一个大约 20 名开发人员的小组中，其中包括一个房间里的两位老板，公司其他地方的经理认为参与开发的微观管理是一种美德。结果是一个有趣的、支离破碎的开发过程，规范和 UX 分析似乎是禁忌，或多或少地被类似“移植这个”和“添加这个特性”的模糊指令所取代，以及在问题和建议之后的大量沉默。

在看了几天一个老板与第三方 API 的集成后，我开始接受任务并努力完成它们。几个星期过去了，没有建设性的反馈，结果是代码审查不是常规开发工作的一部分，而且开发人员被明确禁止在同行中审查。

相反，在其中一位老板搬到另一个国家并开始远程工作后，就实施了一种代码审查。然而，这是通过浏览 commit diff 片段和评论字符串连接或推荐糟糕的编码实践来完成的。有时，为了避免摩擦或冲突，实施这些实践来代替当前更合适的解决方案。

由于每个开发人员都是独自一人，老板之间很少联系，所以他们也不得不重复很多次，对不同的人说同样的事情，这在我看来是不方便和浪费的。

缺乏结构化的计划意味着期限不存在，这是一种快速修复驱动开发和增量设计的文化。团队中没有凝聚力与代码输出中很少的凝聚力是平行的，这也是一个有趣的管理原则的选择。

这样做的结果是代码库非常不规则。一个人非常喜欢变量上的疣，其他人都不喜欢。另一个人认为 PHP 缺乏 web 模板，并在 PHP 中发明了一些，可以说 PHP 是世界上最广泛采用的 web 模板语言。一个人在创建 REST API:s 方面已经失败多年，转而采用了 GraphQL，并因此强迫其他人也这样做。对于原始执行，有些人喜欢雄辩，而有些人喜欢传入字符串而不是流畅的 QB，还有一些人在两者的基础上编写了自定义层。

当有辞职和裁员的时候，这是显而易见的，但没有说出来，似乎老板们认为我们其他人没有注意到任何事情。这意味着一些同事的情绪相当怪异，当有人不再在那里工作时，会有很多谣言。也许这就是我的想法，我发现很难说。

过了几个月，我才第一次得到一次关于问题和性能的私人谈话，在谈话中，我提出了关于这个问题和我发现的一些 SQLi:s 的担忧。有人告诉我一些公司政策，我们倾向于在发现漏洞时进行修补。

恐惧、焦虑和疏远导致的领导力可能是有利可图的，但只有在质量不成问题的领域，机器是生产者，人类被用来拉杠杆或类似的东西。这似乎不能很好地转化为编程艺术。

## 经验教训

*   如果你的老板对 LoC 输出或服从比对代码质量和推理能力更感兴趣，开始找另一份工作，因为当这成为一个问题时，你将被解雇而不是升职

*   如果回购中的每个分支都有自己的风格，你会学到很多东西，但也会大大降低 bughunting 的速度，除非是你写的代码

*   如果对你的工作没有建设性的反馈，你将很难做好

*   经理拥有工资单的权力，而你拥有信任的权力，因此，如果你的同事开始比他们的经理更信任你，你就更有可能被解雇

*   不要无偿加班，如果你加班了，一定要告诉你的上司，让他们知道他们欠你的比他们想象的要多

*   当遇到不连贯的代码库时，尽你所能坚持用你自己的风格来写，并努力确保结果是好的，而不是向上级或同事询问

*   仔细倾听你的同事对过去的员工的评价，以及是什么导致他们不再在那里工作，这有助于避免你的工作发生突然变化

## 密码

我所认为的使遗留代码现代化的事情最终被证明是保护和在越来越多的项目中包装它。核心应用程序是一个陈旧的发布平台，多年来在细节方面进行了重写，但从未进行过重构。这个术语碰巧被用作“更改现有代码”的同义词，而不是工作场所中常见的技术含义。起初这非常令人困惑。

这个核心是以过程化的风格编写的，上面有一些 OOP，反复思考了很多年，在文件和函数之间有高度的互连性。由此产生的复杂性在 PHPmetrics 中变成了红色的大圆圈，对任何人来说都是相当具有挑战性的，不管以前的经验如何。被描述为微服务架构的东西是围绕着新的或旧的实例包装庞大的框架。

在开发新软件的某个时候，你需要做出一些战略决策，决定你想为什么样的程序员写代码。如果一家公司中只有一个人欣赏高阶函数，并把奉承作为解决问题的一种方式，那么他应该避免这种做法，而是创建一系列的类和接口。

在这个问题上，我找不到领导，并且在弄清楚这是我的问题时挣扎了很久，我必须尝试并预测谁会在以后阅读我的代码。对这个地方应该成为什么样的软件商店没有一个共同的想法似乎不利于生产力。相反，在这种环境中，i < count(input) i++的老式模式是可行的，即使 foreach 是在 PHP 4 中引入的，并且代码评审注释可能包含关于教育的贬低性注释和关于字符串的 PHP 手册的链接。因为很明显，将未经验证的输入粘贴到数据库查询中的问题在于它是用单引号还是双引号完成的。

虽然缺乏战略讨论和基于同行的代码审查以及快速修复驱动的开发使得初级用户必须快速学习新的工具和代码模式，但从长远来看，这似乎也有一些成本，因为成功的调试变成了无情的人的专利，一个人不能只给任何人分配一张票而不冒他们将花一周时间兜圈子的风险。

我越来越擅长快速判断代码，并发现越来越多的严重问题添加到我的私人 bug 数据库中。出于某种原因，没有一个共同的。这些发现越来越让我担忧，因为我认为将其中一些投入生产太冒险了。然而，当拉响警报时，我遇到了我没有预料到的冷漠，后来我得知，其中一些人已经知道多年，那些一直大惊小怪的人已经被解雇了。

## 经验教训

*   当遇到不连贯的代码时，放松下来，在头脑中一遍又一遍地跟随执行，直到你理解它以及为什么输出是这样

*   用不连贯的代码思考要求很高，永远不要不吃午饭，因为在一天的最后几个小时里你将一事无成

*   如果你的代码没有得到很好的批评，你需要自己发明它

*   代码越差，您的工具就需要越多的功能，并且需要对命令行脚本有一个坚实的理解

*   编码是一门艺术，所以对它麻木不仁的评论肯定会伤害到你，明智地使用它吧，要考虑周全

*   不要放弃 bughunting，除非你已经花了相当多的时间用创造性的方法破解了应用程序

## 结论

我强烈建议任何愿意做 PHP 但缺乏工作经验的人去一个地方工作，这个地方只会雇佣你几行蹩脚的代码和一些与他们所在行业无关的知识。

你会学得很快，学到很多东西，看到一些你永远也不会明白你需要避免的事情，直到你自己犯了同样的错误并且搞砸了。这是非常有价值的，不可能靠你自己学会(可以说你可以在 OSS dev 里学到一些)，并且将伴随你作为程序员的余生。

接下来，我将更加有用，并展示我觉得舒服的工具链。