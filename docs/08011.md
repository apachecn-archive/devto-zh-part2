# apollo server çš„ä¸€äº›æ–‡ä»¶ç»“æž„æœ€ä½³å®žè·µæ˜¯ä»€ä¹ˆï¼Ÿ

> åŽŸæ–‡:[https://dev . to/Keats 55/what-some-file-structure-best-practices-for-Apollo-server-2i i5](https://dev.to/keatz55/what-are-some-file-structure-best-practices-for-apollo-server-2ii5)

äººä»¬è®¤ä¸º apollo æœåŠ¡å™¨ä¸­æ–‡ä»¶å¤¹ç»“æž„çš„æœ€ä½³å®žè·µæ˜¯ä»€ä¹ˆï¼Ÿ

æˆ‘åœ¨æƒ³æŠŠäº‹æƒ…ç»„ç»‡æˆè¿™æ ·æ˜¯å¦æ˜¯ä¸ªå¥½ä¸»æ„

```
src/
    enum/
    input/
    interface/
    mock/
    mutation/
    query/
    resolver/
    scalar/
    subscription/
    type/
    server.ts 
```

Enter fullscreen mode Exit fullscreen mode

ç„¶åŽæˆ‘åœ¨æƒ³ï¼Œæˆ‘å¯ä»¥åƒè¿™æ ·æŠŠæ‰€æœ‰çš„ä¸œè¥¿èžåˆåœ¨ä¸€èµ·:

```
import http from "http";
import express from "express";
import { ApolloServer } from "apollo-server-express";
import { makeExecutableSchema } from "graphql-tools";
import { mergeResolvers, mergeTypes } from "merge-graphql-schemas";
import path from "path";
import glob from "glob";
import fs from "fs";

(async () => {
  //   TypeDefs
  const typeDefs = glob
    .sync(path.join(__dirname, "./**/*.graphql"))
    .map(f => fs.readFileSync(f, { encoding: "utf8" }));

  // Resolvers
  const resolvers = await Promise.all(
    glob
      .sync(path.join(__dirname, "./**/*.resolver.ts"))
      .map(async f => (await import(f)).resolver)
  );

  //   Mocks
  const mocks = await Promise.all(
    glob
      .sync(path.join(__dirname, "./**/*.mock.ts"))
      .map(async f => (await import(f)).mock)
  );

  const schema = makeExecutableSchema({
    resolvers: mergeResolvers(resolvers),
    resolverValidationOptions: {
      requireResolversForResolveType: false
    },
    typeDefs: mergeTypes(typeDefs)
  });

  const PORT = 4000;
  const app = express();
  const server = new ApolloServer({
    mocks: Object.assign({}, ...mocks),
    schema
  });
  server.applyMiddleware({ app });

  const httpServer = http.createServer(app);
  server.installSubscriptionHandlers(httpServer);

  httpServer.listen(PORT, () => {
    console.log(
      `ðŸš€ Server ready at http://localhost:${PORT}${server.graphqlPath}`
    );
    console.log(
      `ðŸš€ Subscriptions ready at ws://localhost:${PORT}${
        server.subscriptionsPath
      }`
    );
  });
})(); 
```

Enter fullscreen mode Exit fullscreen mode

ä½ æ€Žä¹ˆæƒ³å‘¢?