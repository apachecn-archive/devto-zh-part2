# 质量保证对持续交付的影响

> 原文：<https://dev.to/acceldelivery/the-impact-of-qa-on-continuous-delivery-345m>

*这篇文章最初发表在[加速交付](https://accelerate.delivery/qa-impacts-cd/)博客*上

## 工程中的 QA

软件工程团队的目标是最大化投入产品的产出和稳定性。我想研究一下质量保证(QA)在这个目标中的位置。为了校准，维基百科将 QA 描述为:

> 一种监控软件工程过程和方法以确保质量的手段

根据我的经验，一个指定的角色执行 QA，即 QA 工程师。这个人检查开发人员是否编写了他们想要的代码。QA 工程师验证开发人员的努力符合设计和产品管理的期望。下图显示了新功能的简化交付流程，以及 QA 的适用范围:

[![Delivery Lifecycle](../Images/5a11e593de4741f4e7e8403e542520a9.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--N-DqNPyU--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/gnchwak9z5v2n3l2v36w.png)

如上所述，工程的目标是最大化吞吐量和稳定性。我们所说的最大化稳定性是什么意思？我们可以用“稳定”来代替“预期行为”。我们希望最大化我们产品的预期行为。这种预期行为可以涵盖很广的范围。一方面，稳定性是确保运营需求。例如，稳定性意味着您的产品在高流量的情况下可以快速可靠地扩展。另一方面，稳定性是确保 UI 请求。例如，稳定性可能意味着蓝色按钮具有设计意图的颜色和版式。

QA 工程师的领域是稳定性。向您的交付渠道添加 QA 验证步骤会产生影响。这种稳定性的代价是什么？

## 好人

首先，如果 QA 工程师执行他们的工作，他们会提高质量。开发人员会犯错误。让我再写一遍，因为这是事实，没关系。开发人员会犯错误。QA 分配捕捉错误的负担。这个负担已经被编写代码的开发人员、同行评审人员和接受的产品经理分担了。QA 验证是额外的检查。

第二，QA 工程师的视角是一个有益的补充。开发人员希望让代码正常工作。为了做到这一点，他们通常专注于快乐之路。同行评审者不太关注快乐的道路，但通常与开发人员感同身受。QA 工程师试图破解代码。这是他们独特的视角。代码对他们来说是个黑匣子。它不是一个放置良好的设计模式，不是最新的 JavaScript 库，也不是一个聪明的算法。这是他们相互作用的东西。他们希望这种互动在压力下是可预测的。

最后，通过交付管道中的 QA 步骤来提高信任度。我从产品经理那里听到的类比是:

*   你让一个巡警在街上巡逻来防止犯罪
*   你在投手后面放一个阻挡物
*   你有守门员作为最后一道防线
*   你可以以每小时 120 英里的速度行驶，更快地到达你要去的地方，但事故会更严重。

这些类比是糟糕的抽象(如果我们不再需要“巡警”了呢？如果更像是“要求投手投球速度慢于 50 英里每小时”呢？如果机器让我们安全地驾驶 120 英里每小时会怎样？)，但他们的意图很明确。如果我们降低对风险的容忍度，我们就会获得更高程度的信任。如果我们遵守规则，我们可以期待更少的激进分子做出不可信的行为。如果我们在发货前将工作提交给 QA，那么我们已经完成了尽职调查。

## 坏了

让我以警告作为这一部分的开始。我的经验是与外包的 QA 工程师在另一个时区。此外，我正在与一个 web 开发交付管道对话。请注意这些注意事项！在讨论质量保证工程师的角色时，他们会产生巨大的差异。根据自己的情况调整以下几点；可能不同，但有联系。

### 成本

QA 工程师会有财务成本。将这一成本与糟糕的构建投入生产的价格进行比较。对于某些产品来说，劣质产品的价格比其他产品要高。在 web 开发中，回滚一个糟糕的构建是很容易的。然而，即使在 web 开发中，一个糟糕的构建也可能是昂贵的。QA 工程师需要钱。问问自己值不值这个代价。

### 吞吐量

每当您在交付管道中添加一个步骤时，吞吐量都会受到影响。我们的 QA 团队比我们的开发团队领先 7 个小时。这是一个糟糕的分裂。意味着我们完成的任何工作都没有当天验证的希望。以下是当开发人员创建一个需要 QA 验证的拉式请求时，大约增加的周期时间:

*   +1 天:
    *   第 1 天:未发现问题，合并 PR
*   +2 天:
    *   第一天:QA 有问题，我们回答
    *   第二天:QA 批准，合并 PR
*   +X 天:
    *   第一天:QA 发现问题，开发人员更新
    *   第 2 天:QA 审查，发现问题
    *   第 X 天:重复直到 PR 合并

每一个问题至少要等上一天的问答时间，这是很高的代价。

### 稳定

在 PBS，为了 pbs.org 的产品，我们做了一个实验。我们有两个月没有指定的 QA 角色。在此期间，我们交付的 202 个请求中，我们将< 5%标记为质量问题。按照工程师和产品经理的标准，这些质量问题微不足道。我把“琐碎”翻译成容易补救并且不影响任务的意思。几个例子是:

*   在 Firefox 上按空格键不能播放/暂停视频
*   我们在视频子集的末尾显示了“捐赠”屏幕，而不是“相关视频”屏幕
*   旋转式显示意外地恢复到先前的迭代

这些不是系统中断或恢复事件(从 MTTR 的角度来看)。拥有成熟、可靠的自动化测试套件。我们可以在不影响稳定性的情况下增加吞吐量。

## 缓兵之计

如何在增加稳定性的同时降低吞吐量？

### 选择性 QA

我们不需要对每个变更都进行验证。有些情况下 QA 更有价值:

[![QA value scale](../Images/4d525f6608bdbebc7ae68e1e0b939a2e.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--FvsEEbCz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/7bcor2fy4za3ybf6o7v4.png)

此图显示了随着任务重要性和部署复杂性的增加而出现的风险象限。没有 QA 的交付有一个绿色的低风险象限。有黄色警告区域，您应该谨慎使用。最后，红色象限显示了受益于 QA 的高风险、高价值的工作。

### 将 QA 移入同行评审

您可以将同行评审和验证步骤合并为一个步骤。让 QA 工程师验证开发人员对拉取请求的工作**。这仍然会影响周期时间。好处是它允许我们继续基于主干的开发。当我们合并拉取请求时，它就准备好进行部署了。没有必要通过 git 挑选来进行无价值的发布管理。QA 已经验证了工作和主干处于可部署状态。**

### 质量审计员

改变 QA 验证质量的点。QA 工程师监控生产中的产品。他们在交付管道的开始就制造问题。这是流水线中间的一个合同验证步骤。这种方法的好处是 QA 不会影响周期时间。开发人员和 QA 工程师不会陷入在开发中期解决边缘案例的困境。这将在制品保持在最低限度。然而，生产稳定性可能会降低。希望审计人员能够发现问题并长期保持质量。

### 自动化🤖

编写并信任你的测试。软件开发人员开始负责为他们的 QA 伙伴编码。我们会犯错误。目标是永远不要犯两次同样的错误。

## 自我反省

检查你的交付过程可以改进的地方。你有越来越多的积压功能吗？尝试增加您的吞吐量。你有越来越多的 bug 吗？试着增加你的稳定性。另外，审视一下你公司的路线图。你的团队正在完成长期计划吗？在你 2018 年的“大创意”中，有多少实现了？如果计划没有实现，问问自己野心是否值得安全的代价。引用尼可罗·马基亚维利的*王子*:

> 所有的行动过程都是有风险的，所以谨慎不在于避免危险(这是不可能的)，而在于计算风险，果断行动。犯野心的错误，不要犯懒惰的错误。培养做大胆事情的力量，而不是吃苦的力量。