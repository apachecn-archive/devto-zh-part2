# BEM 最佳实践

> 原文:[https://dev.to/3zsforinsomnia/bem-best-practices-4j5c](https://dev.to/3zsforinsomnia/bem-best-practices-4j5c)

在几个项目和团队结构的过程中，我尝试了几种不同的 CSS 命名和组织方案，但最终我还是解决了(到目前为止！)[论 BEM](http://getbem.com/naming/) 。虽然有许多很棒的文章解释了 BEM 的基本原则以及它们为什么有用，但我觉得它们没有花足够的时间来讨论开发人员可以与 BEM 一起使用来帮助它真正发光的一些实践。在这篇文章中，我将介绍 BEM，但将很多介绍留给 BEM 网站本身。从那里开始，我将经历一套我和我目前的工作团队已经爱上的最正式的实践。

## BEM 的好处

首先，BEM 有一个很棒的网站向人们介绍 CSS 类命名的 BEM 方法，我强烈推荐它。

BEM 是一种命名 CSS 类的方法，我发现它提供了奇妙的语义和上下文，给出了可能会出现在普通且缺乏语义的 HTML 中的类名。当坚持(尽可能)使用 CSS 类而不是其他选择器时，它通过隐含地鼓励 HTML 元素和 CSS 类之间的一对一关系，为您的 CSS 提供了一种强大的组织方法。

## 什么是 BEM

它通过实施基于块、元素和修饰符的命名方案来实现上述功能(因此称为 BEM)。今后，在边界元法的上下文中，任何时候使用这些词中的任何一个，都将被大写(例如，用“block”代替“Block”)。

“块”应该代表 HTML 中可以独立存在的实体。这样的一个例子是包含子元素的特定 HTML 元素，或者更明确地说是组件的根 HTML 元素。块元素的类就是你给块起的名字。

“元素”是块的子元素，在包含它们的块之外没有实际意义。元素的 CSS 类以下面的格式命名:`Block__Element`(注意双下划线)。换句话说，在一个名为“header”的块和一个名为“title”的元素中，我们将以`header__title`结束。

这就是边界元法的核心！下面是一个小代码示例。

```
<div class=”header”>
  <span class=”header__title”>My Title</span>
</div> 
```

从类名可以看出，div 是块，span 是元素。虽然双下划线对某些人来说很难看，但它们的使用提供了与 span 相关的块的即时识别。虽然 [HTML5 为**提供了一些**语义元素](https://www.w3schools.com/html/html5_semantic_elements.asp)和组件，它们显然有自己的名称作为具有语义的标识符，这增加了更丰富的名称选择，因为它们允许开发人员基于他们正在创建的内容的上下文来创建具有语义的名称。这并不是说你可以只使用 BEM 而避免使用 [HTML5 的语义标签](https://www.w3schools.com/html/html5_semantic_elements.asp_)——我强烈建议将它们与 BEM 一起使用以获得更大的上下文(和更好的可访问性)。

在继续之前，让我们讨论一下修饰语。修饰符是一个类，当你需要覆盖或者，得到这个，*修改*普通的块或者元素的 CSS 样式。它们在它们覆盖的类和修饰符名称之间用双破折号表示。几个例子是

1.  `user--current-user`更改用户卡的外观，例如当引用的用户是当前用户时

2.  或者，`navbar__navbar-item--current-route`在导航栏项目列表(如导航链接)中突出显示用户的当前路线。

注意`navbar-item`中使用的单破折号。没有理由不能在 BEM 类名的每个部分使用单个破折号。双破折号和下划线特别允许普通的 CSS 类名，例如每个定义的块、元素或修饰符的`navbar-item`。

## 一些基本的最佳实践

有一些不同的 BEM 方法，但是有一些实践在我所见过的所有实践中是一致的，如下所示。请注意，它们并不是特定于 BEM 的，而是与 BEM 结合在一起提供了一种更加无缝和对开发人员友好的体验。

首先，总是尝试使用*类*而不是其他选择器。第二，每个 HTML 元素总是保持一个 BEM 命名的类。这条规则的一个例外是在应用修饰符时，因为它们通常与未修改的类一起应用，所以修饰符只需要覆盖或添加 CSS 规则，而不需要更多。

这些指导方针确保，或者至少鼓励，一个命名方案(即使在 BEM 之外)由于 CSS 类的一致性和低特异性分数而易于修改，并且提供一个影响 HTML 元素的类。对于好奇的人来说，这里有两篇关于 CSS 特异性的伟大文章:来自[的 MDN 文档](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity)和来自《粉碎》杂志的[。](https://www.smashingmagazine.com/2007/07/css-specificity-things-you-should-know/)

关于保持低特异性分数的第一点意味着覆盖一个类就像添加一个覆盖类一样简单。如果不是这种低特异性的情况，你将不得不克服这样一个事实:虽然 CSS 类只增加了一个低分，但是分数是*相加的*。当使用嵌套 CSS 等方法时，这就变得很重要，因为这意味着类在编译时是组合在一起的(也就是说。x >。y 变成. x.y 作为单个选择器)。由于特异性分数是相加的，这意味着您现在不需要比一个 CSS 类更具体，而是需要比您正在重写的嵌套类的深度更具体。这种情况很快变得不可持续，并且难以克服。

关于 HTML 元素到 CSS 类的一对一映射的后一点是，它会在 devtools 显示中产生一个更简单、更整洁的样式部分，并且在开发过程中只需一个标识符就可以搜索代码库。此外，它们使得识别未使用的 CSS 类变得更加容易，因为 HTML 中没有引用的类显然没有被使用。

## 我发现了更多有用的 BEM 实践

除此之外，我还收集了一些实践，并在各种项目中使用，使这种方法变得更好。

修饰符只嵌套*和*。CSS 类嵌套是一种避免重写 CSS 的好方法，虽然不要求修饰符像预期的那样工作，但它有助于更好地阅读。这也是有意义的，因为修饰符本质上覆盖了现有的 CSS，这就是嵌套时更具体的嵌套类所发生的情况。嵌套修饰符也意味着它们自动产生正确的 CSS，接受修改后的类设置，只覆盖必要的值。使用这种模式时，您可以只应用修饰符类，而不是同时应用它和被重写的类。

然而，正如“only”所建议的，我强烈建议不要将`Block__Element`类嵌套在它们各自的 Block 类下面。虽然这看起来不错，但这意味着每个元素类都将覆盖 Block 类的 CSS。这意味着元素类不关心的任何 CSS 规则都必须*和*被覆盖。这需要开发人员编写额外的(读作:excess) CSS 来覆盖应用程序或用户代理默认的块设置的不同值。根据我的经验，这通常会给重构或特性更改带来困难，因为 Element 类没有预期的或全局设置的默认值。这往往会导致类变得不必要的臃肿，并在重构时阻止类的简单复制粘贴，因为这些多余的 CSS 规则在许多情况下是不需要的。

另一件事，我不相信我看到任何文章提到的是，你的块可以“范围”！换句话说，你可以在你的组件的根 HTML 元素中有一个块，并为 HTML 元素的某个子组“声明”一个新的 BEM 块。我发现这大大增加了我的 BEM 类的语义价值。这里的基本原则是块类在当前的 BEM 上下文中声明一个新的作用域，就像 Javascript 中的作用域一样。

我个人通过从我当前工作的“BEM scope ”()中提取元素名称，并使用该名称(或具有类似含义的名称)作为新的 BEM 块作用域的名称来进行这种作用域划分。根据上下文的不同，我将使用父作用域的元素，并在上下文中添加一些语义上的变化。我这样做的一个方法是通过把块和元素连起来创建新的块。一个例子是`header`和`header__article`成为新的区块`header-article`。当创建一个新的、独立的组件不值得或没有意义时，这很好。

这里是 Codepen.io 上的一个例子，有一个“标题”和一些文章，展示了 BEM 作用域的工作。快速注意，在大多数情况下,“文章”显然是它们自己的组成部分。我在这里这样做只是为了提出这个想法。

最后，我通过使用“扩展”来处理通常一起使用的 CSS 规则，这是大多数 CSS 预处理程序和后处理程序都提供的功能。我使用它是因为它允许简单地导入一个包含共享类的文件(用简单的、非 BEM 命名的样式命名),并在需要这些值的 BEM 命名的类中从该文件扩展相关的类。

这使得遵守前面提到的准则变得容易，比如每个 HTML 元素一个类，除了修饰符。这同时也允许一个简单的、可组合的常用实用程序类集合。这对于保持事物的视觉一致性特别有效，比如在不同的组件中使用不同的输入标签。

希望这是有帮助的，并且总是，关于替代或更好的方法和实践的建议被感激！