# 用户漫游配置文件 ClickOnce 应用程序还原

> 原文：<https://dev.to/chriscooper01/user-roaming-profile-clickonce-application-restore-2io1>

我知道官方 Click Once 不支持用户漫游配置文件，但不支持并不意味着你可以创建一个工作环境，这是我的工作环境。我的解决方案是一个位于 Click once 应用程序之外的安全可修改区域的应用程序。我用的是 C:\ProgramData 文件夹。然后，Click once 应用程序调用该应用程序，对其二进制文件和用户注册数据中的链接注册元素进行备份。完成后，它会复制原始快捷方式，并将其自己的快捷方式添加到用户桌面。现在，用户将使用这个应用程序来调用最初的 Click Once 应用程序。

当该解决方案被调用时，它会检查是否需要恢复，然后调用原来的 Click Once 应用程序。

完整示例在我的 GitHub repo 上的示例应用。使用它，改进它或者只是把它作为一个起点

应用程序

这个应用程序分为两个主要元素；备份和恢复。你的初始点击一旦应用程序将初始化所需的数据，然后调用备份模式的应用程序。

在备份模式内被分割成两个元素；二进制文件和注册数据。当它备份二进制文件时，它会在桌面上为用户找到原始的快捷链接，并将其替换为指向自身的链接。

用户将使用新的链接来打开原来的 click once 应用程序，但是由于该链接已被更改为调用 recovery 应用程序。恢复应用程序将检查 AppData 和注册数据是否已经存在，如果不存在，它将恢复这些数据，然后调用原始应用程序作为 click once 应用程序。

*我的 [GitHub repo](%E2%80%9D) 上的示例应用中的完整示例。使用它，改进它或只是把它作为一个起点*

应用程序数据

首先，您需要从原始的 click once 应用程序中初始化恢复应用程序。下面是一个示例代码，显示了需要什么。