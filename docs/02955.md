# ä½¿ç”¨ React ä¸Šä¸‹æ–‡ API -å…¥é—¨

> åŸæ–‡:[https://dev.to/spences10/using-the-react-context-api-getting started-nje](https://dev.to/spences10/using-the-react-context-api---gettingstarted-nje)

###### çº¦ç¿°Â·è¿ˆå…‹å°”Â·æ±¤å§†æ£®åœ¨ Unsplash ä¸Šæ‹æ‘„çš„å°é¢ç…§ç‰‡

è®©æˆ‘ä»¬ä½¿ç”¨ React ä¸Šä¸‹æ–‡ API æ¥æ›´æ”¹åº”ç”¨ç¨‹åºä¸­çš„ä¸»é¢˜ï¼

[https://player.vimeo.com/video/295024503](https://player.vimeo.com/video/295024503)

## [](#but-first-some-context)ä¸è¿‡å…ˆæ¥ç‚¹**çš„è„‰ç»œ**ï¼ğŸ¤£

å¥½äº†ï¼ŒæŠŠç³Ÿç³•çš„åŒå…³è¯­æ”¾åœ¨ä¸€è¾¹ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ React Context API æ˜¯ä»€ä¹ˆï¼Œå®ƒåšä»€ä¹ˆã€‚ä»[ååº”æ–‡ä»¶](https://reactjs.org/docs/context.html)ä¸­æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­...

> ä¸Šä¸‹æ–‡æä¾›äº†ä¸€ç§é€šè¿‡ç»„ä»¶æ ‘ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Œè€Œä¸å¿…åœ¨æ¯ä¸€å±‚æ‰‹åŠ¨å‘ä¸‹ä¼ é€’å±æ€§ã€‚

æˆ–è€…æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥ä½¿ç”¨ React Context API æ¥é¿å… [prop drilling](https://blog.kentcdodds.com/prop-drilling-bb62e02cb691) å¦‚æœä½ éœ€è¦è¿™ä¸ªæ¦‚å¿µçš„æ›´å¤šç»†èŠ‚ï¼Œé‚£ä¹ˆè¯·æŸ¥çœ‹æä¾›çš„é“¾æ¥ã€‚

æˆ‘ä¹‹å‰åœ¨æˆ‘çš„ Gatsby åšå®¢ä¸­å›é¡¾äº† React Context API çš„å®ç°ï¼Œæˆ‘åœ¨å®ç°çš„æ—¶å€™è®°å½•äº†å®ƒï¼›ä½ å¯ä»¥çœ‹åˆ°[æ˜¯å¦‚ä½•åˆ°è¾¾è¿™é‡Œçš„](https://blog.scottspence.me/react-context-api-with-gatsby)ã€‚

> ### [](#explain-the-context-api-to-me)ç»™æˆ‘è§£é‡Šä¸€ä¸‹ä¸Šä¸‹æ–‡ APIã€‚
> 
> ä» [@leighchalliday](https://twitter.com/leighchalliday) ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªè§£é‡Š API çš„å¾ˆå¥½çš„èµ„æºï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå…³äºè¿™ä¸ªä¸»é¢˜çš„[çš„å¾ˆå¥½çš„ç”¨ä¾‹](https://www.youtube.com/watch?v=yzQ_XulhQFw)ã€‚

## [](#what-were-doing)æˆ‘ä»¬åœ¨åšä»€ä¹ˆ...

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ‰©å±•æˆ‘ä»¬ä¸º[styled-components getting started](https://medium.com/styled-components/styled-components-getting-started-c9818acbcbbd)åˆ›å»ºçš„ç¤ºä¾‹ï¼Œå› ä¸ºå®ƒåŒ…å«äº†æˆ‘ä»¬å¼€å§‹ä½¿ç”¨ React Context API æ‰€éœ€çš„å¤§éƒ¨åˆ†ä»£ç ã€‚

æˆ‘ä»¬å°†æ‰©å±•è¯¥ç¤ºä¾‹æ¥ç®¡ç†ç¤ºä¾‹åº”ç”¨ç¨‹åºçš„ä¸»é¢˜çŠ¶æ€ã€‚

æ‰€ä»¥æ€»è€Œè¨€ä¹‹:

*   æ­å»ºåŸºæœ¬çš„ CreateReact åº”ç”¨ç¨‹åº
*   ä½¿ç”¨æ ·å¼ç»„ä»¶ğŸ’…ç”¨äºé€ å‹
*   ä½¿ç”¨ React ä¸Šä¸‹æ–‡ API æ·»åŠ ä¸»é¢˜è¿›è¡Œåˆ‡æ¢
*   ä½¿ç”¨ React ä¸Šä¸‹æ–‡ APIï¼

## [](#what-well-need)æˆ‘ä»¬éœ€è¦ä»€ä¹ˆ...

æˆ‘ä»¬éœ€è¦çš„åªæ˜¯ä¸€ä¸ªäº’è”ç½‘è¿æ¥å’Œä¸€ä¸ªç°ä»£åŒ–çš„ç½‘ç»œæµè§ˆå™¨ï¼å› ä¸ºæˆ‘ä»¬å°†åœ¨æ£’æäº†çš„[ä»£ç æ²™ç®±](https://codesandbox.io)ä¸­åœ¨çº¿å®Œæˆæ‰€æœ‰è¿™äº›ï¼

ä¸ç®¡ä½ æœ‰æ²¡æœ‰ GitHub è´¦å·ï¼ŒCodeSandbox éƒ½ä¼šè®©ä½ ç›´æ¥å¼€å§‹[ç¼–ç ](https://codesandbox.io/s/new)ï¼

### [](#versions)ç‰ˆæœ¬:

æœ¬æŒ‡å—æ­£ä¸ä»¥ä¸‹ä¾èµ–ç‰ˆæœ¬ä¸€èµ·ä½¿ç”¨ã€‚

*   ååº”:16.4.2
*   ååº”èŒƒå›´:16.4.2
*   ååº”è„šæœ¬:1.1.4
*   æ ·å¼ç»„ä»¶:3.4.5

* * *

## [](#lets-start)æˆ‘ä»¬å¼€å§‹å§

å› æ­¤ï¼Œè®©æˆ‘ä»¬å†æ¬¡æ£€æŸ¥åŸºæœ¬ create react åº”ç”¨ç¨‹åºçš„ä¸»é¢˜ï¼Œè¿™ä¸€æ¬¡æˆ‘ä»¬å°†ä½¿ç”¨ react ä¸Šä¸‹æ–‡ API æ¥ç®¡ç†çŠ¶æ€ï¼Œè€Œä¸æ˜¯å‘ç»„ä»¶æ·»åŠ çŠ¶æ€ã€‚æœ‰äº›äººä¼šè®¤ä¸ºè¿™å¯¹äºä¸»é¢˜åˆ‡æ¢æ¥è¯´æœ‰ç‚¹è¿‡äº†ï¼Œä½†æ˜¯åœ¨ React æ–‡æ¡£ä¸­å®ƒæ˜¯ä½œä¸ºä½•æ—¶ä½¿ç”¨ä¸Šä¸‹æ–‡ API çš„ä¾‹å­ç»™å‡ºçš„ï¼Œæ‰€ä»¥æˆ‘ä¼šè®©ä½ å†³å®šè¿™ä¸€ç‚¹çš„æœ‰æ•ˆæ€§ã€‚
å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘å¸Œæœ›å®ƒèƒ½è®©ä½ æ›´æ¸…æ¥šåœ°äº†è§£å¦‚ä½•åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ä¸Šä¸‹æ–‡ APIã€‚

### [](#dependencies)ä¾èµ–å…³ç³»

[æ‰“å¼€ä¸€ä¸ª React CodeSandbox](https://codesandbox.io/s/new) ï¼Œæ·»åŠ `styled-components`ä½œä¸ºä¾èµ–é¡¹:

[https://player.vimeo.com/video/295024531](https://player.vimeo.com/video/295024531)

### [](#file-structure)æ–‡ä»¶ç»“æ„

[bikeshedding](https://en.wiktionary.org/wiki/bikeshedding) çš„å¦ä¸€ä¸ªé¢†åŸŸæ˜¯æ–‡ä»¶ç»“æ„ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¸º`components`ã€`contexts`å’Œ`theme`æ·»åŠ æ–‡ä»¶å¤¹ï¼Œè¯·éšæ„ä»¥æ‚¨è®¤ä¸ºåˆé€‚çš„æ–¹å¼ç»„ç»‡æ‚¨çš„æ–‡ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åœ¨â¤ï¸è¿™ä¸ªä¾‹å­ä¸­è¦åšçš„

å°†ç›®å½•æ·»åŠ åˆ°`src`æ–‡ä»¶å¤¹ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€äº›ç»„ä»¶ï¼Œæ–‡ä»¶ç»“æ„åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

```
context-demo/
â”œâ”€ public/
â”œâ”€ src/
â”‚  â””â”€ components/
â”‚  â””â”€ contexts/
â”‚  â””â”€ theme/
â””â”€ package.json 
```

## [](#scaffold-out-a-basic-create-react-app)æ”¯æ¶å‡ºä¸€ä¸ªåŸºæœ¬çš„ Create React App

å¥½çš„ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯åœ¨`components`æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ª`App.js`ç»„ä»¶ï¼Œç„¶ååœ¨`src/index.js`æ–‡ä»¶ä¸­ä½¿ç”¨å®ƒã€‚

å¯¹äºè¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œ`App.js`ç»„ä»¶å¯ä»¥æ˜¯ä¸€ä¸ª[æ— çŠ¶æ€åŠŸèƒ½ç»„ä»¶](https://reactjs.org/docs/state-and-lifecycle.html#the-data-flows-down),å› ä¸ºæˆ‘ä»¬å°†ä½¿ç”¨ä¸Šä¸‹æ–‡ API å¤„ç†çŠ¶æ€ã€‚

åœ¨è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°æˆ‘åˆ›å»ºç›®å½•å¹¶æ·»åŠ `App.js`ç»„ä»¶æ—¶çš„ç²—ç•¥è¾“å…¥:

[https://player.vimeo.com/video/295024556](https://player.vimeo.com/video/295024556)

ç„¶åæˆ‘ä»¬å¯ä»¥åˆ é™¤`src/index.js`ä¸­çš„`style.css`æ–‡ä»¶å’Œå¼•ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å°†ä½¿ç”¨æ ·å¼åŒ–ç»„ä»¶è¿›è¡Œæ ·å¼åŒ–ğŸ’…ç„¶åä½¿ç”¨æˆ‘ä»¬çš„`App.js`ç»„ä»¶:

[https://player.vimeo.com/video/295024576](https://player.vimeo.com/video/295024576)

å¥½çš„ï¼Œæ‰€ä»¥æˆ‘æŠŠ`App.js`ç»„ä»¶ä»`src/index.js`æ–‡ä»¶ä¸­æŠ½è±¡å‡ºæ¥çš„åŸå› æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸Šä¸‹æ–‡ API æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ·»åŠ åˆ°åº”ç”¨ç¨‹åºçš„æœ€é«˜çº§åˆ«ï¼Œä¹Ÿå°±æ˜¯`src/index.js`ã€‚

### [](#what-about-the-rest)å‰©ä¸‹çš„å‘¢ï¼Ÿ

å› æ­¤ï¼Œè¿™ä¸æ˜¯çœŸæ­£çš„ Create React åº”ç”¨ç¨‹åºï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨ CodeSandbox ä»£æ›¿ï¼Œæˆ‘å·²ç»è¿‡äº†åœ¨[styled-components getting started](https://medium.com/styled-components/styled-components-getting-started-c9818acbcbbd)å¸–å­ä¸­ä½¿ç”¨çš„åŸºæœ¬æ ·å¼ï¼Œæ‰€ä»¥æ˜¯æ—¶å€™å‚è€ƒå®ƒæ¥æ¨¡ä»¿æˆ‘ä»¬éœ€è¦çš„æ ·å¼äº†ã€‚

è¿™æ„å‘³ç€æˆ‘ä»¬è¦åšçš„ï¼Œä¸æ˜¯æ·±å…¥ç ”ç©¶æ„æˆåŸºæœ¬ Create React åº”ç”¨ç¨‹åºå¤–è§‚çš„æ¯ä¸ªç»„ä»¶çš„æ ·å¼ï¼Œè€Œæ˜¯é‡ç”¨ç»„ä»¶ï¼Œå› æ­¤ç°åœ¨ä¼šæ¶‰åŠä¸€äº›å¤åˆ¶ç²˜è´´ã€‚

Create React App æ ·æ¿ä»£ç æœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨[æ ·å¼-ç»„ä»¶å…¥é—¨](https://medium.com/styled-components/styled-components-getting-started-c9818acbcbbd)å¸–å­ä¸­å¯¹å…¶è¿›è¡Œäº†æ ·å¼åŒ–å¤„ç†ï¼Œè¿™æ˜¯ä¸€ä¸ª`App.js`æ–‡ä»¶ï¼Œå…¶ä»–çš„è¢«ä¿ç•™æˆ–åˆ é™¤ï¼Œ`App.js`çš„åŸºæœ¬æ ·å¼æ˜¯:

**`App.css`**T3ã€‘

```
.App {
  text-align: center;
}

.App-logo {
  animation: App-logo-spin infinite 20s linear;
  height: 80px;
}

.App-header {
  background-color: #222;
  height: 150px;
  padding: 20px;
  color: white;
}

.App-title {
  font-size: 1.5em;
}

.App-intro {
  font-size: large;
}

@keyframes App-logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
} 
```

## [](#use-styled-components-for-styling)ä½¿ç”¨æ ·å¼åŒ–ç»„ä»¶è¿›è¡Œæ ·å¼åŒ–

ç°åœ¨æˆ‘ä»¬è¦ç”¨æ ·å¼åŒ–ç»„ä»¶ä»`App.css`æ–‡ä»¶ä¸­é‡æ–°åˆ›å»ºæ ·å¼ï¼Œè®©æˆ‘ä»¬åœ¨è¿™é‡Œåˆ—å‡ºå®ƒä»¬å¹¶æµè§ˆå®ƒä»¬:

```
AppWrapper
AppHeader
AppTitle
rotate360
AppLogo
# We're adding our own styles for
AppIntro
Underline
StyledHyperLink
Button 
```

`AppWrapper`æ˜¯é¡¶å±‚åŒ…è£…å™¨ï¼Œå®ƒåœ¨ä¸€ä¸ªæ›´å¤§çš„ç»„ä»¶ä¸­å¯ç”¨äº CSS Grid æˆ– Flexbox çš„å¸ƒå±€ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æ–‡æœ¬å±…ä¸­å¯¹é½ã€‚

[https://player.vimeo.com/video/295024592](https://player.vimeo.com/video/295024592)

å¤Ÿç›´æ¥äº†å§ã€‚ç°åœ¨å‰©ä¸‹çš„å¤§éƒ¨åˆ†ç»„ä»¶å°†ä½¿ç”¨æ ·å¼åŒ–çš„ç»„ä»¶ [`ThemeProvider`](https://www.styled-components.com/docs/advanced#theming) ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦ä»ä¸Šä¸‹æ–‡ API ä¼ é€’ä¸»é¢˜çš„å†…å®¹ã€‚

## [](#add-themes-to-switch-between-with-the-react-context-api)ç”¨ React ä¸Šä¸‹æ–‡ API æ·»åŠ ä¸»é¢˜è¿›è¡Œåˆ‡æ¢

å¥½çš„ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€äº›ä¸»é¢˜æ¥ä¼ é€’ç»™`ThemeProvider`ï¼Œæˆ‘ä»¬å°†å®šä¹‰å‡ ä¸ªæˆ‘ä»¬æƒ³è¦æ”¹å˜çš„ä¸»é¢˜æ–¹é¢ï¼Œå®ƒä»¬å°†æ˜¯:

```
primary // colour
secondary // colour
danger // colour
fontHeader // font
fontBody // font 
```

åœ¨`theme`ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸»é¢˜å¯¹è±¡çš„æ–‡ä»¶ï¼Œå‘½åä¸º`globalStyle.js`ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹å†…å®¹:

```
import { injectGlobal } from 'styled-components'

export const themes = {
  theme1: {
    primary: '#ff0198',
    secondary: '#01c1d6',
    danger: '#e50000',
    fontHeader: 'Old Standard TT, sans, sans-serif',
    fontBody: 'Nunito, sans-serif'
  },

  theme2: {
    primary: '#6e27c5',
    secondary: '#ffb617',
    danger: '#ff1919',
    fontHeader: 'Enriqueta, sans-serif',
    fontBody: 'Exo 2, sans, sans-serif'
  },

  theme3: {
    primary: '#f16623',
    secondary: '#2e2e86',
    danger: '#cc0000',
    fontHeader: 'Kaushan Script, sans, sans-serif',
    fontBody: 'Headland One, sans-serif'
  }
}

injectGlobal`
  @import url('https://fonts.googleapis.com/css?family=Old+Standard+TT:400,700|Nunito:400,700'|Enriqueta:400,700|Exo+2:400,700|Kaushan+Script:400,700|Headland+One:400,700|');

  body {
    padding: 0;
    margin: 0;
  }
` 
```

[https://player.vimeo.com/video/295024607](https://player.vimeo.com/video/295024607)

å¥½äº†ï¼Œé™¤äº†è®¾ç½®ä¾›ä»¥åä½¿ç”¨çš„æ ·å¼ä¹‹å¤–ï¼Œè¿™é‡Œä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿã€‚

ä½ ä¼šæ³¨æ„åˆ°è¿™é‡Œä½¿ç”¨äº†`injectGlobal`ï¼Œè¿™æ˜¯æˆ‘ä»¬è®¾ç½®æ•´ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨çš„å­—ä½“çš„åœ°æ–¹ï¼Œ`injectGlobal` [åº”è¯¥åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ä¸€æ¬¡](https://stackoverflow.com/a/42899789/1138354)æ¥è®¾ç½®è¿™æ ·çš„å…¨å±€æ ·å¼ã€‚

å‘å‰ï¼ç°åœ¨è®©æˆ‘ä»¬æŠŠé‡ç‚¹æ”¾åœ¨å°†åŸºæœ¬çš„åº”ç”¨ç¨‹åºé£æ ¼æ”¾å…¥`App.js`ç»„ä»¶ä¸­ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥å¼€å§‹ä½¿ç”¨`App.js`ä¸­çš„`ThemeProvider`ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œç°åœ¨ï¼Œä¸ºäº†è·å¾—ä¸€äº›è§†è§‰åé¦ˆï¼Œæˆ‘ä»¬å°†åº”ç”¨æ¥è‡ª`globalStyle.js`ä¸­`themes`å¯¹è±¡çš„ä¸€ä¸ªä¸»é¢˜ã€‚

æˆ‘ä»¬ç°åœ¨å¯ä»¥ç”¨`AppHeader`åšè¿™ä»¶äº‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ ·å¼åŒ–çš„ div:

```
const AppHeader = styled.div`
  height: 12rem;
  padding: 1rem;
  color: ${({ theme }) => theme.dark};
  background-color: ${({ theme }) => theme.primary};
` 
```

ä½ ä¼šæ³¨æ„åˆ°æˆ‘ä»¬å¼€å§‹ä½¿ç”¨æ ·å¼åŒ–çš„ç»„ä»¶ï¼Œ`theme`é“å…·ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨ç²˜è´´è¿™æ®µä»£ç ï¼Œåœ¨`ThemeProvider`è¢«ä¼ é€’ç»™`theme`å¯¹è±¡ä¹‹å‰ä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨`ThemeProvider`ç»„ä»¶åŒ…è£…`App.js`ï¼Œè¿™æ ·ç”±`ThemeProvider`å°è£…çš„ä»»ä½•ç»„ä»¶éƒ½èƒ½å¤Ÿæ¥æ”¶`theme`é“å…·ã€‚

[https://player.vimeo.com/video/295024623](https://player.vimeo.com/video/295024623)

`AppTitle`å°†ä¼šæ˜¯ h1 æ‰€ä»¥:

```
const AppTitle = styled.h1`
  font-family: ${({ theme }) => theme.fontHeader};
` 
```

å¯¹äºæ—‹è½¬çš„ React å¾½æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰åœ¨[æ ·å¼åŒ–ç»„ä»¶å…¥é—¨ç¤ºä¾‹](https://codesandbox.io/s/x26q7l9vyq)ä¸­ä½¿ç”¨çš„èµ„æº

æˆ‘ä»¬å¯ä»¥å°†å®ƒæ·»åŠ åˆ°`App.js`ç»„ä»¶é¡¶éƒ¨çš„å¯¼å…¥ä¸­ï¼Œå¹¶å°†å…¶ä½œä¸º`img`æ ‡ç­¾æ·»åŠ åˆ°`AppLogo`æ ·å¼çš„ç»„ä»¶ä¸­:

```
const logo =
  'https://user-images.githubusercontent.com/234708/37256552-32635a02-2554-11e8-8fe3-8ab5bd969d8e.png' 
```

ä¸ºäº† react å¾½æ ‡ä¸Šçš„åŠ¨ç”»ï¼Œéœ€è¦å°†`keyframes`è¾…åŠ©å¯¹è±¡ä¸`ThemeProvider`ä¸€èµ·å¯¼å…¥ã€‚

```
const rotate360 = keyframes`
  from { 
    transform: rotate(0deg); 
  }
  to { 
    transform: rotate(360deg); 
  }
`

const AppLogo = styled.img`
  animation: ${rotate360} infinite 5s linear;
  height: 80px;
  &:hover {
    animation: ${rotate360} infinite 1s linear;
  }
` 
```

[https://player.vimeo.com/video/295024643](https://player.vimeo.com/video/295024643)

### [](#shared-components)å…±äº«ç»„ä»¶

å…±äº«ç»„ä»¶åŒ…å«åœ¨[é£æ ¼-ç»„ä»¶å…¥é—¨](https://medium.com/styled-components/styled-components-getting-started-c9818acbcbbd)æŒ‡å—ä¸­ã€‚å¦‚æœæ‚¨éœ€è¦æ›´å¤šä¿¡æ¯ï¼Œå¯¹äºæœ¬ä¾‹ï¼Œæˆ‘ä»¬å°†å¼•å…¥æœ€åå‡ ä¸ªç»„ä»¶ä½œä¸º`StyledHyperLink`å’Œ`Button`åœ¨`src/Shared.js`ä¸­çš„å…±äº«ç»„ä»¶ã€‚æ·»åŠ ä»¥ä¸‹å†…å®¹:

**`src/Shared.js`**T3ã€‘

```
import styled, { css } from 'styled-components'

export const Button = styled.button`
  padding: 0.5rem 1rem;
  margin: 0.5rem 1rem;
  color: ${({ theme }) => theme.primary};
  font-size: 1rem;
  box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  border: 2px solid ${props => props.border};
  background-color: Transparent;
  text-transform: uppercase;
  border-radius: 4px;
  transition: all 0.1s;
  &:hover {
    transform: translateY(1px);
    box-shadow: 0 2px 3px rgba(0, 0, 0, 0.15);
  } ${props =>
    props.primary &&
    css`
      background: ${({ theme }) => theme.primary};
      border: 2px solid ${({ theme }) => theme.primary};
      color: white;
    `}; ${props =>
    props.danger &&
    css`
      background: ${({ theme }) => theme.danger};
      border: 2px solid ${({ theme }) => theme.danger};
      color: white;
    `};
  &:hover {
    transform: translateY(2px);
    box-shadow: 0 2px 3px rgba(0, 0, 0, 0.15);
  }
`

export const StyledHyperLink = styled.a`
  cursor: pointer;
  &:visited,
  &:active {
    color: ${({ theme }) => theme.primary};
  }
  &:hover {
    color: ${({ theme }) => theme.secondary};
  }
  color: ${({ theme }) => theme.primary};
` 
```

ç„¶ååƒå¯¼å…¥å…¶ä»–ç»„ä»¶ä¸€æ ·å¯¼å…¥ç»„ä»¶:

[https://player.vimeo.com/video/295024669](https://player.vimeo.com/video/295024669)

ç°åœ¨æœ€åä¸‰ä¸ªç»„ä»¶ï¼Œ`AppIntro`ã€`Underline`å’Œ`StyledHyperLink` :

```
const AppIntro = styled.p`
  color: ${({ theme }) => theme.dark};
  font-size: large;
  code {
    font-size: 1.3rem;
  }
  font-family: ${({ theme }) => theme.fontBody};
`

const Underline = styled.span`
  border-bottom: 4px solid ${({ theme }) => theme.secondary};
`

const StyledHyperLink = SHL.extend`
  text-decoration: none;
  font-family: ${({ theme }) => theme.fontBody};
  color: ${({ theme }) => theme.fontDark};
` 
```

[https://player.vimeo.com/video/295024697](https://player.vimeo.com/video/295024697)

å°†å®ƒä»¬æ·»åŠ åˆ°`AppLogo`æ ·å¼çš„ç»„ä»¶ä¸‹ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å°†å…¶ä½™çš„ç»„ä»¶æ·»åŠ åˆ°`App`å‡½æ•°`return`ä¸­ï¼Œé‚£ä¹ˆï¼Œå‡†å¤‡å¥½å¦ä¸€ä¸ª[å¤åˆ¶æ„å¤§åˆ©é¢](#)äº†å—ï¼Ÿè¿™é‡Œ:

```
<AppIntro>
  Bootstrapped with{'  '}
  <Underline>
    <code>
      <StyledHyperLink
        href={`https://github.com/facebook/create-react-app`}
        target="_blank"
        rel="noopener"
      >
        create-react-app
      </StyledHyperLink>
    </code>
  </Underline>. </AppIntro> <AppIntro>
  Components styled with{'  '}
  <Underline>
    <code>
      <StyledHyperLink
        href={`https://www.styled-components.com`}
        target="_blank"
        rel="noopener"
      >
        styled-components
      </StyledHyperLink>
    </code>
  </Underline>{' '}
  <span role="img" aria-label="nail polish">
    ğŸ’…
  </span> </AppIntro> <AppIntro>
  Fonts picked with{'  '}
  <Underline>
    <code>
      <StyledHyperLink
        href={`https://fontjoy.com/`}
        target="_blank"
        rel="noopener"
      >
        fontjoy.com
      </StyledHyperLink>
    </code>
  </Underline> </AppIntro> <Button>Normal Button</Button> <Button primary>Primary Button</Button> <Button danger>Danger Button</Button> 
```

æŠ±æ­‰ä»£ç å¢™ï¼å°†å®ƒç²˜è´´åˆ°ç»“æŸæ ‡ç­¾ä¸‹ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸»é¢˜çš„åŸºç¡€äº†ï¼

[https://player.vimeo.com/video/295024721](https://player.vimeo.com/video/295024721)

å¥½å—ï¼Ÿçœ‹èµ·æ¥æ€ä¹ˆæ ·ï¼Ÿ

ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªä½¿ç”¨æ ·å¼åŒ–ç»„ä»¶çš„åŸºæœ¬ React åº”ç”¨ç¨‹åºï¼

## [](#use-the-react-context-api)ä½¿ç”¨ React ä¸Šä¸‹æ–‡ API

ç°åœ¨æ˜¯é‡å¤´æˆï¼åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†è®¨è®º:

*   åˆ¶ä½œä¸»é¢˜èƒŒæ™¯ã€‚

*   å¯¹ç»„ä»¶ä½¿ç”¨ä¸Šä¸‹æ–‡ APIã€‚

*   åœ¨å¤šä¸ªç»„ä»¶ä¸­ä½¿ç”¨ä¸Šä¸‹æ–‡ APIã€‚

å› æ­¤ï¼Œé€šè¿‡ç»„ä»¶ä¼ é€’ä¸å¿…è¦çš„çŠ¶æ€æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šä¸‹æ–‡ API æ¥é¿å…çš„ã€‚å¦‚æœæˆ‘ä»¬çœ‹ä¸€ä¸‹[æ ·å¼ç»„ä»¶å…¥é—¨ç¤ºä¾‹](https://codesandbox.io/s/x26q7l9vyq)ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°çŠ¶æ€åœ¨`App.js`ç»„ä»¶ä¸­è¢«ç®¡ç†ï¼Œè€Œ`handleThemeChange`å‡½æ•°å¿…é¡»è¢«ä¼ é€’ç»™`ThemeSelect`ç»„ä»¶ï¼Œå°±åƒä»»ä½•é“å…·éƒ½éœ€è¦è¢«ä¼ é€’ä¸€æ ·ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½†æ˜¯å¾ˆå®¹æ˜“æƒ³è±¡ï¼Œå¦‚æœè¿™ä¸ªç»„ä»¶å­˜åœ¨äºä¸€ä¸ªé¡µè„šç»„ä»¶æˆ–ä¸€ä¸ªèœå•é¡¹ä¸Šï¼Œå°†ä¼šæœ‰å‡ ä¸ªå…¶ä»–ç»„ä»¶éœ€è¦é€šè¿‡å®ƒä»¬ä¼ é€’çŠ¶æ€ï¼Œè€Œå®é™…ä¸Šå¹¶ä¸éœ€è¦é‚£ä¸ªçŠ¶æ€æˆ–å±æ€§ã€‚æœ‰é“ç†å—ï¼Ÿ

**ä¾‹é¢˜**

```
<App>               {/* state begins here */}
  <Header>          {/* through here */}
    <Navigation>    {/* and here */}
      <ThemeSelect> {/* to be used here */}
    </Navigation>
  </Header>
  <Footer/>
</App> 
```

### [](#add-the-site-theme-context)æ·»åŠ ç«™ç‚¹ä¸»é¢˜ä¸Šä¸‹æ–‡

åœ¨æˆ‘ä»¬çš„`src/contexts/`ç›®å½•ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºæˆ‘ä»¬çš„`SiteThemeContext.js`ï¼Œå¯¼å…¥ååº”å¹¶å®šä¹‰å’Œå¯¼å‡ºæˆ‘ä»¬çš„ä¸Šä¸‹æ–‡:

```
import React from 'react'

export const SiteThemeContext = React.createContext() 
```

### [](#so-what-is-a-context)é‚£ä¹ˆä»€ä¹ˆæ˜¯è¯­å¢ƒå‘¢ï¼Ÿ

ä¸€ä¸ªä¸Šä¸‹æ–‡ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªæä¾›è€…å’Œä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä½ æœ‰ä¸€ä¸ªæä¾›è€…ï¼Œå®ƒå°†å°½å¯èƒ½åœ°ä½äºç»„ä»¶æ ‘çš„é«˜å¤„ï¼Œè¿™æ ·å¤šä¸ªæ¶ˆè´¹è€…å¯ä»¥ä»æä¾›è€…é‚£é‡Œè·å¾—çŠ¶æ€å’Œå±æ€§ã€‚

å¸Œæœ›ä½ è¿˜è®°å¾—æˆ‘ä»¬ä»`src/index.js`æ–‡ä»¶ä¸­æŠ½è±¡å‡º`function App`ç»„ä»¶çš„åœ°æ–¹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨`src/index.js`æ–‡ä»¶ä¸­æ·»åŠ åº”ç”¨ç¨‹åºæœ€é«˜çº§åˆ«çš„ä¸Šä¸‹æ–‡æä¾›è€…ã€‚è¿™æ„å‘³ç€åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•æ¶ˆè´¹è€…ï¼Œæ— è®ºç»„ä»¶æ ‘æœ‰å¤šæ·±ï¼Œéƒ½å¯ä»¥ä»é¡¶å±‚è·å¾—çŠ¶æ€å’Œé“å…·ã€‚

ç°åœ¨åˆ›å»ºä¸€ä¸ªæä¾›è€…ï¼Œè¿™ä¸ªæä¾›è€…æ˜¯ä¸€ä¸ªå¸¸è§„çš„ React ç»„ä»¶ï¼Œ
æ‰€ä»¥:

```
import React from 'react'

export const SiteThemeContext = React.createContext()

export class SiteThemeProvider extends React.Component {
  render() {
    return (
      <SiteThemeContext.Provider value={}>
        {this.props.children}
      </SiteThemeContext.Provider>
    )
  }
} 
```

ç”±`<SiteThemeProvider>`è¿”å›çš„æ˜¯`<SiteThemeContext.Provider>`å’Œè¯¥ç»„ä»¶çš„å­ç»„ä»¶ï¼Œä½ å¿…é¡»æä¾›ç»™æä¾›è€…çš„ä¸€ä¸ªé“å…·æ˜¯`value`é“å…·ã€‚è¿™æ˜¯æ¶ˆè´¹è€…å¯ä»¥è®¿é—®çš„å˜é‡ã€‚æ¶ˆè´¹è€…æ˜¯`<SiteThemeContext.Consumer>`(ç¨åå°†è¯¦ç»†ä»‹ç»)ã€‚

æ‰€ä»¥æˆ‘ä»¬ç°åœ¨èƒ½åšçš„æ˜¯è®©ä¼ å…¥`value`çš„ä¸œè¥¿æˆä¸ºä¸€ä¸ªå¯¹è±¡`value={{}}`ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥å­˜å‚¨åœ¨`SiteThemeContext`ä¸­å®šä¹‰çš„çŠ¶æ€å’Œå‡½æ•°çš„å¤šä¸ªå±æ€§ã€‚

ä¸Šä¸‹æ–‡çš„çŠ¶æ€éœ€è¦æ˜¯`theme`ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä»`src/theme/globalStyle`å¯¼å…¥ä¸»é¢˜ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°çŠ¶æ€ï¼Œæˆ‘ä»¬å°†é»˜è®¤ä¸»é¢˜(å’ŒçŠ¶æ€)ä¸º`theme1`ï¼Œå¹¶é€šè¿‡æ‰©å±•åˆ°çŠ¶æ€`...â¤ï¸`å°†è¯¥ä¸»é¢˜çš„å‰¯æœ¬æ·»åŠ åˆ°`value`å±æ€§ä¸­ï¼Œå®ƒçœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„:

```
import React from 'react'
import PropTypes from 'prop-types'

import { themes } from '../theme/globalStyle'

export const SiteThemeContext = React.createContext()

export class SiteThemeProvider extends React.Component {
  state = {
    theme: themes['theme1']
  }

  render() {
    return (
      <SiteThemeContext.Provider
        value={{
          ...this.state
        }}>
        {this.props.children}
      </SiteThemeContext.Provider>
    )
  }
} 
```

å¥½äº†ï¼Œå·²ç»æœ‰ä¸€æ®µæ—¶é—´æ²¡æœ‰åŠ  gif äº†ï¼Œæ˜¯æ—¶å€™å†åŠ ä¸€å¼ äº†ï¼

[https://player.vimeo.com/video/295024744](https://player.vimeo.com/video/295024744)

å¹¶å¼•å…¥`themes`å¹¶æ·»åŠ çŠ¶æ€:

[https://player.vimeo.com/video/295024763](https://player.vimeo.com/video/295024763)

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å‘æä¾›è€…æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®é€šè¿‡`handleThemeChange`äº‹ä»¶å€¼:
é€‰æ‹©çš„å†…å®¹æ¥æ›´æ”¹ä¸»é¢˜çŠ¶æ€

```
handleThemeChange = e => {
  const key = e.target.value
  const theme = themes[key]
  this.setState({ theme })
} 
```

ä»»ä½•æƒ³è¦ä½¿ç”¨å®ƒçš„æä¾›å•†éƒ½å¯ä»¥ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒæ·»åŠ åˆ°`value` prop ä¸­ï¼Œå°±åƒè¿™æ ·:

```
import React from 'react'
import PropTypes from 'prop-types'

import { themes } from '../theme/globalStyle'

export const SiteThemeContext = React.createContext()

export class SiteThemeProvider extends React.Component {
  state = {
    theme: themes['theme1']
  }

  handleThemeChange = e => {
    const key = e.target.value
    const theme = themes[key]
    this.setState({ theme })
  }

  render() {
    return (
      <SiteThemeContext.Provider
        value={{
          ...this.state,
          handleThemeChange: this.handleThemeChange
        }}>
        {this.props.children}
      </SiteThemeContext.Provider>
    )
  }
} 
```

å¥½äº†ï¼Œè¿™å°±æ˜¯ç«™ç‚¹ä¸»é¢˜ä¸Šä¸‹æ–‡ç»„ä»¶ï¼Œéå¸¸ç®€å•ï¼Œå¯¹å—ï¼Ÿ

æˆ‘åº”è¯¥æåˆ°çš„æ˜¯ï¼Œ`handleThemeChange`å‡½æ•°ä¸­çš„`e`å°†æ˜¯æˆ‘ä»¬å°†è¦åˆ¶ä½œçš„ä¸»é¢˜é€‰æ‹©æ¡†ä¸­çš„äº‹ä»¶ã€‚

è®©æˆ‘ä»¬å®Œæˆæ·»åŠ å‡½æ•°å¹¶å°†å…¶æ·»åŠ åˆ°çŠ¶æ€ä¸­:

[https://player.vimeo.com/video/295024781](https://player.vimeo.com/video/295024781)

ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†ä¸»é¢˜æä¾›è€…æ·»åŠ åˆ°`src/index.js`ä¸­ï¼Œè¿™æ ·ä¾èµ–å…³ç³»æ ‘ä¸­æ›´ä½çš„ä»»ä½•ä¸œè¥¿éƒ½å¯ä»¥é€šè¿‡æ¶ˆè´¹è€…è®¿é—®å®ƒã€‚

[https://player.vimeo.com/video/295024798](https://player.vimeo.com/video/295024798)

### [](#add-the-theme-select)æ·»åŠ ä¸»é¢˜é€‰æ‹©

ç°åœ¨æˆ‘ä»¬æƒ³è¦é€šè¿‡`SiteThemeContext`è°ƒç”¨`SiteThemeProvider`çš„ä¸€éƒ¨åˆ†`handleThemeChange`å‡½æ•°ï¼æˆ‘ç›¸ä¿¡ç°åœ¨è¿™ä¸€åˆ‡éƒ½å¾ˆæœ‰æ„ä¹‰(ğŸ¤£)æ‰€ä»¥è®©æˆ‘ä»¬ç›´æ¥è¿›å…¥è¿™é‡Œï¼Œå®šä¹‰æˆ‘ä»¬å°†ç”¨æ¥ä½¿ç”¨`ThemeSelect`ç»„ä»¶æ¶ˆè´¹`SiteThemeContext.Provider`çš„ç»„ä»¶ï¼

åœ¨`src/components`ç›®å½•ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„`ThemeSelect.js`ç»„ä»¶ï¼Œè¿™æ˜¯æˆ‘ä»¬å°†ä½¿ç”¨æ¶ˆè´¹è€…æ¥æ¶ˆè´¹ç«™ç‚¹ä¸»é¢˜ä¸Šä¸‹æ–‡çš„åœ°æ–¹

æ¶ˆè´¹è€…çš„å­©å­ä¸æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åšçš„æ˜¯åœ¨å‡½æ•°çš„è¿”å›ä¸­é€‰æ‹©ä¸»é¢˜ã€‚

è®©æˆ‘ä»¬é¦–å…ˆè®¾ç½®ç»„æˆé€‰æ‹©çš„æ ·å¼åŒ–ç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªé€‰æ‹©æ¡†ã€ä¸€äº›é€‰é¡¹å’Œä¸€ä¸ªåŒ…è£…å™¨ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨æ²¡æœ‰æ¶ˆè´¹è€…çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œç„¶åæˆ‘ä»¬å°†æ·»åŠ æ¶ˆè´¹è€…ã€‚

**`ThemeSelect.js`**T3ã€‘

```
import React from 'react'
import styled from 'styled-components'

import { themes } from '../theme/globalStyle'

const SelectWrapper = styled.div`
  margin: 0rem 0.5rem 0rem 0.25rem;
  padding: 0rem 0.5rem 0rem 0.25rem;
`

const Select = styled.select`
  margin: 1.5rem 0.5rem;
  padding: 0.25rem 0.5rem;
  font-family: ${({ theme }) => theme.fontBody};
  border: 2px solid ${({ theme }) => theme.secondary};
  box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.1);
  background: ${({ theme }) => theme.foreground};
  border-radius: 4px;
`

export const SelectOpt = styled.option`
  font-family: ${({ theme }) => theme.fontBody};
`

const ThemeSelect = props => {
  return (
    <SelectWrapper>
      <Select>
        {Object.keys(themes).map((theme, index) => {
          return (
            <SelectOpt key={index} value={theme}>
              Theme {index + 1}
            </SelectOpt>
          )
        })}
      </Select>
    </SelectWrapper>
  )
}

export default ThemeSelect 
```

[https://player.vimeo.com/video/295024813](https://player.vimeo.com/video/295024813)

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨`themes`å¯¹è±¡ä¸­åˆ—å‡ºå¯ç”¨çš„ä¸»é¢˜ã€‚ä½†ä»…æ­¤è€Œå·²ï¼Œå¤„ç†ä¸»é¢˜å˜åŒ–çš„åŠŸèƒ½å­˜åœ¨äº`SiteThemeProvider`ä¸Š

å›åˆ°å‰é¢æˆ‘æåˆ°çš„`SiteThemeContext.Consumer`æ¶ˆè´¹è€…çš„å­©å­æ˜¯ä¸€ä¸ªå‡½æ•°`() => ()`ç¬¬ä¸€éƒ¨åˆ†æ˜¯æ¥è‡ªæä¾›è€…çš„`value`(`<SiteThemeContext.Provider>`)æ‰€ä»¥è®©æˆ‘ä»¬å¿«é€Ÿçœ‹ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰åœ¨æä¾›è€…ä¸­å®šä¹‰çš„:

```
value={{
  ...this.state,
  handleThemeChange: this.handleThemeChange
}} 
```

ä»`SiteThemeContext.Provider`è·å¾—çš„æ˜¯çŠ¶æ€å’Œå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æå–å…¶ä¸­çš„ä»»ä½•ä¸€é¡¹å¹¶å°†å…¶ä¼ é€’ç»™æä¾›è€…ï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œæ¶ˆè´¹è€…å¯ä»¥è®¿é—®è¿™äº›å€¼ã€‚

è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ææ„æ¥æ‹‰æˆ‘ä»¬éœ€è¦æ”¹å˜ä¸»é¢˜çš„`handleThemeChange`å‡½æ•°ã€‚

```
import React from 'react'

import { SiteThemeContext } from '../contexts/SiteThemeContext'

const ThemeSelect = props => {
  return (
    <SiteThemeContext.Consumer>
      {({ handleThemeChange }) => ()}
    </SiteThemeContext.Consumer>
  )
}

export default ThemeSelect 
```

[https://player.vimeo.com/video/295024838](https://player.vimeo.com/video/295024838)

ç›®å‰è¿™ä¸ä¼šæ”¹å˜ä¸»é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»å°†å®ƒç¡¬ç¼–ç åˆ°æ ·å¼ç»„ä»¶`ThemeProvider`ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦åšçš„æ˜¯åœ¨`SiteThemeContext`ä¸­ä¸ºå½“å‰é€‰æ‹©çš„ä¸»é¢˜ä½¿ç”¨ä¸€ä¸ªæ¶ˆè´¹è€…ã€‚

åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ æˆ‘ä»¬æƒ³è¦ç”¨æ¥å°†äº‹ä»¶(`e`)ä¼ é€’ç»™`SiteThemeContext`ä¸Šçš„`handleThemeChange`å‡½æ•°çš„`onChange`äº‹ä»¶ã€‚

ç„¶ååœ¨`App`ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¯¼å…¥æˆ‘ä»¬çš„`<SiteThemeContext.Consumer>`æ¥æ¶ˆè´¹`SiteThemeContext`çŠ¶æ€ä¸‹çš„`theme`ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™æ ·å¼åŒ–ç»„ä»¶`ThemeProvider`ã€‚

[https://player.vimeo.com/video/295024865](https://player.vimeo.com/video/295024865)

### [](#want-to-know-more)æƒ³äº†è§£æ›´å¤šï¼Ÿ

æ­£å¦‚æœ¬æ–‡å¼€å¤´æåˆ°çš„ï¼Œä¸€ä¸ªå¾ˆå¥½çš„èµ„æºæ˜¯ [@leighchalliday](https://twitter.com/leighchalliday) å’Œ[ä»–çš„ YouTube é¢‘é“](https://www.youtube.com/channel/UCWPY8W-FAZ2HdDiJp2RC_sQ)ï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥æ‰¾åˆ°ä»–çš„[React Context API çš„ä¼Ÿå¤§ç”¨ä¾‹](https://www.youtube.com/watch?v=yzQ_XulhQFw)ã€‚

è¿˜æœ‰ spectrum ä¸Šçš„ [React ç¤¾åŒº](https://spectrum.chat/react)å’Œ spectrum ä¸Šçš„[é£æ ¼ç»„ä»¶](https://spectrum.chat/styled-components)ã€‚

[æ¼”ç»ƒçš„ç¤ºä¾‹ä»£ç ](https://codesandbox.io/s/5vl16n5oxp)å¯åœ¨ [CodeSandbox](https://codesandbox.io) ä¸Šè·å¾—ã€‚

### [](#thanks-for-reading)æ„Ÿè°¢é˜…è¯»ğŸ™

å¦‚æœæˆ‘é”™è¿‡äº†ä»€ä¹ˆï¼Œæˆ–è€…å¦‚æœæœ‰æ›´å¥½çš„æ–¹æ³•åšæŸäº‹ï¼Œè¯·è®©æˆ‘çŸ¥é“ã€‚

è¿™ç¯‡æ–‡ç« æœ€åˆå‘å¸ƒåœ¨[æˆ‘çš„ç›–èŒ¨æ¯”åšå®¢](https://blog.scottspence.me)ä¸Šï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œ[æŸ¥çœ‹å®ƒ](https://blog.scottspence.me/react-context-api-getting-started)å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·çœ‹çœ‹æˆ‘çš„å…¶ä»–å†…å®¹ã€‚

åœ¨ Twitter ä¸Šå…³æ³¨æˆ‘ï¼Œæˆ–è€…åœ¨ GitHub ä¸Šå…³æ³¨ T2 é—®æˆ‘ä»»ä½•é—®é¢˜ã€‚