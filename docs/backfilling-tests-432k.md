# 回填测试

> 原文：<https://dev.to/pbeekums/backfilling-tests-432k>

自动化测试是一件美妙的事情。想想吧。为什么要花几个小时，甚至几分钟，去做一件用计算机不到一秒钟就能完成的事情。我从来没有后悔过写测试，尤其是在看到调试和修复子系统中的错误的时间从几个小时变成了几分钟之后。当自动化测试出现时，错误报告->调查->代码修复->测试->发布都可以在 15 分钟内完成。

[![](img/b6a23ccd352784dc5d8609df34ea15bc.png)T2】](https://res.cloudinary.com/practicaldev/image/fetch/s--d8Y_sow---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://blog.professorbeekums.com/img/2018/automation.jpeg)

自动化测试的问题是将最初的努力投入到编写测试中。我从未后悔事后写测试，但我也说服自己不要提前写，因为我完全知道它们有多有用。我和许多像我一样的开发者这样做有各种各样的原因。不管这些原因是什么，伤害已经造成了。一个软件系统缺乏测试。可以做些什么来解决这个问题？我们如何开始测试一个几乎没有测试的系统？

要记住的重要一点是，自动化测试不是一件非此即彼的事情。你不需要停止所有的工作，除了写 6 个月的测试什么也不做。不仅很难证明长时间不构建特性是合理的，而且会变得很乏味。测试很棒，但是写起来往往很单调。也没有构建一个新功能的成就感大。

成就感是第一件需要解决的事情。开发人员需要感觉到他们编写的代码很重要。要有用，要用。这可以通过首先解决最耗时的手工测试来实现。有没有一个特性没有人想开发，因为每次有人接触它，他们都要花几天时间测试这个特性？花些时间写自动化测试吧。这里的高投资回报很容易证明花费时间来构建测试是合理的。不必再次运行那些手动测试用例的解脱提供了成就感。

我很确定我不是唯一一个在过去开始编写脚本来帮助耗时的手工测试的人。如果您有一个帮助手动测试的脚本，那么您就有一个帮助建立测试用例的脚本。只要再向前迈一步，就能完全自动化。

另一个伟大的策略是开始为任何新的 bug 修复编写测试。开始为现有系统编写自动化测试的一个问题是试图找出从哪里开始。一些测试用例可能会导致错误，而一些不会。一只真正的虫子回答了这个问题。如果一个 bug 存在，那么很明显这个 bug 有 100%的可能已经发生了！围绕该错误的自动化测试的价值是显而易见的。

一些开发人员可能认为，如果他们修复了一个 bug，它不太可能再次发生，所以也许我们不应该为它编写测试。我的反驳是每个开发者都有这样的反应:

**“唉！又是那个虫子？我以为我们上个月就修好了。”**

这是一种一点一滴地回填自动化测试的方法。这很方便，因为你可以以一种轻松的速度来编写你的测试，它使你更容易开始，而不会看起来让人不知所措。不幸的是，这种方法的一个大问题是，在测试覆盖率低的情况下，仅仅因为测试通过了，就对代码更改的工作缺乏信心。更重要的是，少量的测试不太可能在发布之前发现错误。这降低了那些测试的感知价值，并可能导致回到从不编写任何测试的状态。

不过，缓解这个问题是可能的。对于一个大型软件系统，将测试重点放在某些子系统或功能上。不要为 5 个特性各写一个测试，而是为一个特性写十几个测试。这样，您至少可以确信，您的测试将捕捉到围绕该单一特性的代码更改的任何问题。这也是在其他特性中构建更多测试的基础。

回填测试看起来绝对是势不可挡的，但这只是在你说服自己必须一次为所有事情编写测试的情况下。当你把任务分成更容易管理的小块，然后把它们分散开来，事情会变得容易得多。这仍然是很多工作，但是你永远不会后悔做它。